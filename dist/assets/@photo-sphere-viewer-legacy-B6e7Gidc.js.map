{"version":3,"file":"@photo-sphere-viewer-legacy-B6e7Gidc.js","sources":["../../node_modules/@photo-sphere-viewer/core/index.module.js","../../node_modules/@photo-sphere-viewer/markers-plugin/index.module.js","../../node_modules/@photo-sphere-viewer/map-plugin/index.module.js","../../node_modules/@photo-sphere-viewer/autorotate-plugin/index.module.js"],"sourcesContent":["/*!\n * Photo Sphere Viewer 5.13.2\n * @copyright 2014-2015 Jérémy Heleine\n * @copyright 2015-2025 Damien \"Mistic\" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\nvar __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// src/data/constants.ts\nvar constants_exports = {};\n__export(constants_exports, {\n  ACTIONS: () => ACTIONS,\n  ANIMATION_MIN_DURATION: () => ANIMATION_MIN_DURATION,\n  CAPTURE_EVENTS_CLASS: () => CAPTURE_EVENTS_CLASS,\n  CTRLZOOM_TIMEOUT: () => CTRLZOOM_TIMEOUT,\n  DBLCLICK_DELAY: () => DBLCLICK_DELAY,\n  EASINGS: () => EASINGS,\n  ICONS: () => ICONS,\n  IDS: () => IDS,\n  KEY_CODES: () => KEY_CODES,\n  LONGTOUCH_DELAY: () => LONGTOUCH_DELAY,\n  MOVE_THRESHOLD: () => MOVE_THRESHOLD,\n  SPHERE_RADIUS: () => SPHERE_RADIUS,\n  TWOFINGERSOVERLAY_DELAY: () => TWOFINGERSOVERLAY_DELAY,\n  VIEWER_DATA: () => VIEWER_DATA\n});\n\n// src/icons/arrow.svg\nvar arrow_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"40 40 432 432\"><g transform=\"rotate(0, 256, 256)\"><path fill=\"currentColor\" d=\"M425.23 210.55H227.39a5 5 0 01-3.53-8.53l56.56-56.57a45.5 45.5 0 000-64.28 45.15 45.15 0 00-32.13-13.3 45.15 45.15 0 00-32.14 13.3L41.32 256l174.83 174.83a45.15 45.15 0 0032.14 13.3 45.15 45.15 0 0032.13-13.3 45.5 45.5 0 000-64.28l-56.57-56.57a5 5 0 013.54-8.53h197.84c25.06 0 45.45-20.39 45.45-45.45s-20.4-45.45-45.45-45.45z\"/></g><!-- Created by Flatart from the Noun Project --></svg>\\n';\n\n// src/icons/close.svg\nvar close_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><g fill=\"currentColor\" transform=\" translate(50, 50) rotate(45)\"><rect x=\"-5\" y=\"-65\" width=\"10\" height=\"130\"/><rect x=\"-65\" y=\"-5\" width=\"130\" height=\"10\"/></g></svg>';\n\n// src/icons/download.svg\nvar download_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path fill=\"currentColor\" d=\"M83.3 35.6h-17V3H32.2v32.6H16.6l33.6 32.7 33-32.7z\"/><path fill=\"currentColor\" d=\"M83.3 64.2v16.3H16.6V64.2H-.1v32.6H100V64.2H83.3z\"/><!--Created by Michael Zenaty from the Noun Project--></svg>\\n';\n\n// src/icons/fullscreen-in.svg\nvar fullscreen_in_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path fill=\"currentColor\" d=\"M100 40H87.1V18.8h-21V6H100zM100 93.2H66V80.3h21.1v-21H100zM34 93.2H0v-34h12.9v21.1h21zM12.9 40H0V6h34v12.9H12.8z\"/><!--Created by Garrett Knoll from the Noun Project--></svg>\\n';\n\n// src/icons/fullscreen-out.svg\nvar fullscreen_out_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path fill=\"currentColor\" d=\"M66 7h13v21h21v13H66zM66 60.3h34v12.9H79v21H66zM0 60.3h34v34H21V73.1H0zM21 7h13v34H0V28h21z\"/><!--Created by Garrett Knoll from the Noun Project--></svg>\\n';\n\n// src/icons/info.svg\nvar info_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><path fill=\"currentColor\" d=\"M28.3 26.1c-1 2.6-1.9 4.8-2.6 7-2.5 7.4-5 14.7-7.2 22-1.3 4.4.5 7.2 4.3 7.8 1.3.2 2.8.2 4.2-.1 8.2-2 11.9-8.6 15.7-15.2l-2.2 2a18.8 18.8 0 0 1-7.4 5.2 2 2 0 0 1-1.6-.2c-.2-.1 0-1 0-1.4l.8-1.8L41.9 28c.5-1.4.9-3 .7-4.4-.2-2.6-3-4.4-6.3-4.4-8.8.2-15 4.5-19.5 11.8-.2.3-.2.6-.3 1.3 3.7-2.8 6.8-6.1 11.8-6.2z\"/><circle fill=\"currentColor\" cx=\"39.3\" cy=\"9.2\" r=\"8.2\"/><!--Created by Arafat Uddin from the Noun Project--></svg>\\n';\n\n// src/icons/menu.svg\nvar menu_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"10 10 80 80\"><g fill=\"currentColor\"><circle r=\"10\" cx=\"20\" cy=\"20\"/><circle r=\"10\" cx=\"50\" cy=\"20\"/><circle r=\"10\" cx=\"80\" cy=\"20\"/><circle r=\"10\" cx=\"20\" cy=\"50\"/><circle r=\"10\" cx=\"50\" cy=\"50\"/><circle r=\"10\" cx=\"80\" cy=\"50\"/><circle r=\"10\" cx=\"20\" cy=\"80\"/><circle r=\"10\" cx=\"50\" cy=\"80\"/><circle r=\"10\" cx=\"80\" cy=\"80\"/></g><!-- Created by Richard Kun\\xE1k from the Noun Project--></svg>\\n';\n\n// src/icons/zoom-in.svg\nvar zoom_in_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path fill=\"currentColor\" d=\"M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z\"/><path fill=\"currentColor\" d=\"M8.728 4.009H6.744v2.737H4.006V8.73h2.738v2.736h1.984V8.73h2.737V6.746H8.728z\"/><!--Created by Ryan Canning from the Noun Project--></svg>\\n';\n\n// src/icons/zoom-out.svg\nvar zoom_out_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path fill=\"currentColor\" d=\"M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z\"/><path fill=\"currentColor\" d=\"M4.006 6.746h7.459V8.73H4.006z\"/><!--Created by Ryan Canning from the Noun Project--></svg>\\n';\n\n// src/data/constants.ts\nvar ANIMATION_MIN_DURATION = 500;\nvar MOVE_THRESHOLD = 4;\nvar DBLCLICK_DELAY = 300;\nvar LONGTOUCH_DELAY = 500;\nvar TWOFINGERSOVERLAY_DELAY = 100;\nvar CTRLZOOM_TIMEOUT = 2e3;\nvar SPHERE_RADIUS = 10;\nvar VIEWER_DATA = \"photoSphereViewer\";\nvar CAPTURE_EVENTS_CLASS = \"psv--capture-event\";\nvar ACTIONS = /* @__PURE__ */ ((ACTIONS2) => {\n  ACTIONS2[\"ROTATE_UP\"] = \"ROTATE_UP\";\n  ACTIONS2[\"ROTATE_DOWN\"] = \"ROTATE_DOWN\";\n  ACTIONS2[\"ROTATE_RIGHT\"] = \"ROTATE_RIGHT\";\n  ACTIONS2[\"ROTATE_LEFT\"] = \"ROTATE_LEFT\";\n  ACTIONS2[\"ZOOM_IN\"] = \"ZOOM_IN\";\n  ACTIONS2[\"ZOOM_OUT\"] = \"ZOOM_OUT\";\n  return ACTIONS2;\n})(ACTIONS || {});\nvar IDS = {\n  MENU: \"menu\",\n  TWO_FINGERS: \"twoFingers\",\n  CTRL_ZOOM: \"ctrlZoom\",\n  ERROR: \"error\",\n  DESCRIPTION: \"description\"\n};\nvar KEY_CODES = {\n  Enter: \"Enter\",\n  Control: \"Control\",\n  Escape: \"Escape\",\n  Space: \" \",\n  PageUp: \"PageUp\",\n  PageDown: \"PageDown\",\n  ArrowLeft: \"ArrowLeft\",\n  ArrowUp: \"ArrowUp\",\n  ArrowRight: \"ArrowRight\",\n  ArrowDown: \"ArrowDown\",\n  Delete: \"Delete\",\n  Plus: \"+\",\n  Minus: \"-\"\n};\nvar ICONS = {\n  arrow: arrow_default,\n  close: close_default,\n  download: download_default,\n  fullscreenIn: fullscreen_in_default,\n  fullscreenOut: fullscreen_out_default,\n  info: info_default,\n  menu: menu_default,\n  zoomIn: zoom_in_default,\n  zoomOut: zoom_out_default\n};\nvar EASINGS = {\n  linear: (t) => t,\n  inQuad: (t) => t * t,\n  outQuad: (t) => t * (2 - t),\n  inOutQuad: (t) => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\n  inCubic: (t) => t * t * t,\n  outCubic: (t) => --t * t * t + 1,\n  inOutCubic: (t) => t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n  inQuart: (t) => t * t * t * t,\n  outQuart: (t) => 1 - --t * t * t * t,\n  inOutQuart: (t) => t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t,\n  inQuint: (t) => t * t * t * t * t,\n  outQuint: (t) => 1 + --t * t * t * t * t,\n  inOutQuint: (t) => t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t,\n  inSine: (t) => 1 - Math.cos(t * (Math.PI / 2)),\n  outSine: (t) => Math.sin(t * (Math.PI / 2)),\n  inOutSine: (t) => 0.5 - 0.5 * Math.cos(Math.PI * t),\n  inExpo: (t) => Math.pow(2, 10 * (t - 1)),\n  outExpo: (t) => 1 - Math.pow(2, -10 * t),\n  inOutExpo: (t) => (t = t * 2 - 1) < 0 ? 0.5 * Math.pow(2, 10 * t) : 1 - 0.5 * Math.pow(2, -10 * t),\n  inCirc: (t) => 1 - Math.sqrt(1 - t * t),\n  outCirc: (t) => Math.sqrt(1 - (t - 1) * (t - 1)),\n  inOutCirc: (t) => (t *= 2) < 1 ? 0.5 - 0.5 * Math.sqrt(1 - t * t) : 0.5 + 0.5 * Math.sqrt(1 - (t -= 2) * t)\n};\n\n// src/utils/index.ts\nvar utils_exports = {};\n__export(utils_exports, {\n  Animation: () => Animation,\n  Dynamic: () => Dynamic,\n  MultiDynamic: () => MultiDynamic,\n  PressHandler: () => PressHandler,\n  Slider: () => Slider,\n  SliderDirection: () => SliderDirection,\n  addClasses: () => addClasses,\n  angle: () => angle,\n  applyEulerInverse: () => applyEulerInverse,\n  checkClosedShadowDom: () => checkClosedShadowDom,\n  checkStylesheet: () => checkStylesheet,\n  checkVersion: () => checkVersion,\n  cleanCssPosition: () => cleanCssPosition,\n  clone: () => clone,\n  createTexture: () => createTexture,\n  cssPositionIsOrdered: () => cssPositionIsOrdered,\n  dasherize: () => dasherize,\n  deepEqual: () => deepEqual,\n  deepmerge: () => deepmerge,\n  distance: () => distance,\n  exitFullscreen: () => exitFullscreen,\n  firstNonNull: () => firstNonNull,\n  getAbortError: () => getAbortError,\n  getAngle: () => getAngle,\n  getClosest: () => getClosest,\n  getConfigParser: () => getConfigParser,\n  getElement: () => getElement,\n  getEventTarget: () => getEventTarget,\n  getMatchingTarget: () => getMatchingTarget,\n  getPosition: () => getPosition,\n  getShortestArc: () => getShortestArc,\n  getStyleProperty: () => getStyleProperty,\n  getTouchData: () => getTouchData,\n  getXMPValue: () => getXMPValue,\n  greatArcDistance: () => greatArcDistance,\n  hasParent: () => hasParent,\n  invertResolvableBoolean: () => invertResolvableBoolean,\n  isAbortError: () => isAbortError,\n  isEmpty: () => isEmpty,\n  isExtendedPosition: () => isExtendedPosition,\n  isFullscreenEnabled: () => isFullscreenEnabled,\n  isNil: () => isNil,\n  isPlainObject: () => isPlainObject,\n  logWarn: () => logWarn,\n  mergePanoData: () => mergePanoData,\n  parseAngle: () => parseAngle,\n  parsePoint: () => parsePoint,\n  parseSpeed: () => parseSpeed,\n  removeClasses: () => removeClasses,\n  requestFullscreen: () => requestFullscreen,\n  resolveBoolean: () => resolveBoolean,\n  speedToDuration: () => speedToDuration,\n  sum: () => sum,\n  throttle: () => throttle,\n  toggleClass: () => toggleClass,\n  wrap: () => wrap\n});\n\n// src/utils/math.ts\nfunction wrap(value, max) {\n  let result = value % max;\n  if (result < 0) {\n    result += max;\n  }\n  return result;\n}\nfunction sum(array) {\n  return array.reduce((a, b) => a + b, 0);\n}\nfunction distance(p1, p2) {\n  return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n}\nfunction angle(p1, p2) {\n  return Math.atan2(p2.y - p1.y, p2.x - p1.x);\n}\nfunction getShortestArc(from, to) {\n  const candidates = [\n    0,\n    // direct\n    Math.PI * 2,\n    // clock-wise cross zero\n    -Math.PI * 2\n    // counter-clock-wise cross zero\n  ];\n  return candidates.reduce((value, candidate) => {\n    const newCandidate = to - from + candidate;\n    return Math.abs(newCandidate) < Math.abs(value) ? newCandidate : value;\n  }, Infinity);\n}\nfunction getAngle(position1, position2) {\n  return Math.acos(\n    Math.cos(position1.pitch) * Math.cos(position2.pitch) * Math.cos(position1.yaw - position2.yaw) + Math.sin(position1.pitch) * Math.sin(position2.pitch)\n  );\n}\nfunction greatArcDistance([yaw1, pitch1], [yaw2, pitch2]) {\n  if (yaw1 - yaw2 > Math.PI) {\n    yaw1 -= 2 * Math.PI;\n  } else if (yaw1 - yaw2 < -Math.PI) {\n    yaw1 += 2 * Math.PI;\n  }\n  const x = (yaw2 - yaw1) * Math.cos((pitch1 + pitch2) / 2);\n  const y = pitch2 - pitch1;\n  return Math.sqrt(x * x + y * y);\n}\n\n// src/utils/browser.ts\nfunction getElement(selector) {\n  if (typeof selector === \"string\") {\n    return selector.match(/^[a-z]/i) ? document.getElementById(selector) : document.querySelector(selector);\n  } else {\n    return selector;\n  }\n}\nfunction toggleClass(element, className, active) {\n  if (active === void 0) {\n    element.classList.toggle(className);\n  } else if (active) {\n    element.classList.add(className);\n  } else if (!active) {\n    element.classList.remove(className);\n  }\n}\nfunction addClasses(element, className) {\n  element.classList.add(...className.split(\" \").filter((c) => !!c));\n}\nfunction removeClasses(element, className) {\n  element.classList.remove(...className.split(\" \").filter((c) => !!c));\n}\nfunction hasParent(el, parent) {\n  let test = el;\n  do {\n    if (test === parent) {\n      return true;\n    }\n    test = test.parentElement;\n  } while (test);\n  return false;\n}\nfunction getClosest(el, selector) {\n  if (!el?.matches) {\n    return null;\n  }\n  let test = el;\n  do {\n    if (test.matches(selector)) {\n      return test;\n    }\n    test = test.parentElement;\n  } while (test);\n  return null;\n}\nfunction getEventTarget(e) {\n  return e?.composedPath()[0] || null;\n}\nfunction getMatchingTarget(e, selector) {\n  if (!e) {\n    return null;\n  }\n  return e.composedPath().find((el) => {\n    if (!(el instanceof HTMLElement) && !(el instanceof SVGElement)) {\n      return false;\n    }\n    return el.matches(selector);\n  });\n}\nfunction getPosition(el) {\n  let x = 0;\n  let y = 0;\n  let test = el;\n  while (test) {\n    x += test.offsetLeft - test.scrollLeft + test.clientLeft;\n    y += test.offsetTop - test.scrollTop + test.clientTop;\n    test = test.offsetParent;\n  }\n  x -= window.scrollX;\n  y -= window.scrollY;\n  return { x, y };\n}\nfunction getStyleProperty(elt, varname) {\n  return window.getComputedStyle(elt).getPropertyValue(varname);\n}\nfunction getTouchData(e) {\n  if (e.touches.length < 2) {\n    return null;\n  }\n  const p1 = { x: e.touches[0].clientX, y: e.touches[0].clientY };\n  const p2 = { x: e.touches[1].clientX, y: e.touches[1].clientY };\n  return {\n    distance: distance(p1, p2),\n    angle: angle(p1, p2),\n    center: { x: (p1.x + p2.x) / 2, y: (p1.y + p2.y) / 2 }\n  };\n}\nvar fullscreenElement;\nfunction isFullscreenEnabled(elt, isIphone = false) {\n  if (isIphone) {\n    return elt === fullscreenElement;\n  } else {\n    return document.fullscreenElement === elt;\n  }\n}\nfunction requestFullscreen(elt, isIphone = false) {\n  if (isIphone) {\n    fullscreenElement = elt;\n    elt.classList.add(\"psv-fullscreen-emulation\");\n    document.dispatchEvent(new Event(\"fullscreenchange\"));\n  } else {\n    elt.requestFullscreen();\n  }\n}\nfunction exitFullscreen(isIphone = false) {\n  if (isIphone) {\n    fullscreenElement.classList.remove(\"psv-fullscreen-emulation\");\n    fullscreenElement = null;\n    document.dispatchEvent(new Event(\"fullscreenchange\"));\n  } else {\n    document.exitFullscreen();\n  }\n}\n\n// src/utils/misc.ts\nfunction dasherize(str) {\n  return str.replace(/[A-Z](?:(?=[^A-Z])|[A-Z]*(?=[A-Z][^A-Z]|$))/g, (s, i) => {\n    return (i > 0 ? \"-\" : \"\") + s.toLowerCase();\n  });\n}\nfunction throttle(callback, wait) {\n  let paused = false;\n  return function(...args) {\n    if (!paused) {\n      paused = true;\n      setTimeout(() => {\n        callback.apply(this, args);\n        paused = false;\n      }, wait);\n    }\n  };\n}\nfunction isPlainObject(value) {\n  if (typeof value !== \"object\" || value === null || Object.prototype.toString.call(value) !== \"[object Object]\") {\n    return false;\n  }\n  if (Object.getPrototypeOf(value) === null) {\n    return true;\n  }\n  let proto = value;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Object.getPrototypeOf(value) === proto;\n}\nfunction deepmerge(target, src) {\n  const first = src;\n  return function merge(target2, src2) {\n    if (Array.isArray(src2)) {\n      if (!target2 || !Array.isArray(target2)) {\n        target2 = [];\n      } else {\n        target2.length = 0;\n      }\n      src2.forEach((e, i) => {\n        target2[i] = merge(null, e);\n      });\n    } else if (typeof src2 === \"object\") {\n      if (!target2 || Array.isArray(target2)) {\n        target2 = {};\n      }\n      Object.keys(src2).forEach((key) => {\n        if (key === \"__proto__\") {\n          return;\n        }\n        if (typeof src2[key] !== \"object\" || !src2[key] || !isPlainObject(src2[key])) {\n          target2[key] = src2[key];\n        } else if (src2[key] !== first) {\n          if (!target2[key]) {\n            target2[key] = merge(null, src2[key]);\n          } else {\n            merge(target2[key], src2[key]);\n          }\n        }\n      });\n    } else {\n      target2 = src2;\n    }\n    return target2;\n  }(target, src);\n}\nfunction clone(src) {\n  return deepmerge(null, src);\n}\nfunction isEmpty(obj) {\n  return !obj || Object.keys(obj).length === 0 && obj.constructor === Object;\n}\nfunction isNil(val) {\n  return val === null || val === void 0;\n}\nfunction firstNonNull(...values) {\n  for (const val of values) {\n    if (!isNil(val)) {\n      return val;\n    }\n  }\n  return null;\n}\nfunction deepEqual(obj1, obj2) {\n  if (obj1 === obj2) {\n    return true;\n  } else if (isObject(obj1) && isObject(obj2)) {\n    if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n      return false;\n    }\n    for (const prop of Object.keys(obj1)) {\n      if (!deepEqual(obj1[prop], obj2[prop])) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isObject(obj) {\n  return typeof obj === \"object\" && obj !== null;\n}\n\n// src/utils/psv.ts\nimport { LinearFilter, LinearMipmapLinearFilter, MathUtils, Quaternion, Texture } from \"three\";\n\n// src/PSVError.ts\nvar PSVError = class _PSVError extends Error {\n  constructor(message, reason) {\n    super(reason && reason instanceof Error ? `${message}: ${reason.message}` : message);\n    this.name = \"PSVError\";\n    Error.captureStackTrace?.(this, _PSVError);\n  }\n};\n\n// src/utils/psv.ts\nfunction resolveBoolean(value, cb) {\n  if (isPlainObject(value)) {\n    cb(value.initial, true);\n    value.promise.then((res) => cb(res, false));\n  } else {\n    cb(value, true);\n  }\n}\nfunction invertResolvableBoolean(value) {\n  return {\n    initial: !value.initial,\n    promise: value.promise.then((res) => !res)\n  };\n}\nfunction getAbortError() {\n  const error = new Error(\"Loading was aborted.\");\n  error.name = \"AbortError\";\n  return error;\n}\nfunction isAbortError(err) {\n  return err?.name === \"AbortError\";\n}\nfunction logWarn(message) {\n  console.warn(`PhotoSphereViewer: ${message}`);\n}\nfunction isExtendedPosition(object) {\n  if (!object || Array.isArray(object)) {\n    return false;\n  }\n  return [\n    [\"textureX\", \"textureY\"],\n    [\"yaw\", \"pitch\"]\n  ].some(([key1, key2]) => {\n    return object[key1] !== void 0 && object[key2] !== void 0;\n  });\n}\nfunction getXMPValue(data, attr, intVal = true) {\n  let result = data.match(\"<GPano:\" + attr + \">(.*)</GPano:\" + attr + \">\");\n  if (result !== null) {\n    const val = intVal ? parseInt(result[1], 10) : parseFloat(result[1]);\n    return isNaN(val) ? null : val;\n  }\n  result = data.match(\"GPano:\" + attr + '=\"(.*?)\"');\n  if (result !== null) {\n    const val = intVal ? parseInt(result[1], 10) : parseFloat(result[1]);\n    return isNaN(val) ? null : val;\n  }\n  return null;\n}\nvar CSS_POSITIONS = {\n  top: \"0%\",\n  bottom: \"100%\",\n  left: \"0%\",\n  right: \"100%\",\n  center: \"50%\"\n};\nvar X_VALUES = [\"left\", \"center\", \"right\"];\nvar Y_VALUES = [\"top\", \"center\", \"bottom\"];\nvar POS_VALUES = [...X_VALUES, ...Y_VALUES];\nvar CENTER = \"center\";\nfunction parsePoint(value) {\n  if (!value) {\n    return { x: 0.5, y: 0.5 };\n  }\n  if (typeof value === \"object\") {\n    return value;\n  }\n  let tokens = value.toLocaleLowerCase().split(\" \").slice(0, 2);\n  if (tokens.length === 1) {\n    if (CSS_POSITIONS[tokens[0]]) {\n      tokens = [tokens[0], CENTER];\n    } else {\n      tokens = [tokens[0], tokens[0]];\n    }\n  }\n  const xFirst = tokens[1] !== \"left\" && tokens[1] !== \"right\" && tokens[0] !== \"top\" && tokens[0] !== \"bottom\";\n  tokens = tokens.map((token) => CSS_POSITIONS[token] || token);\n  if (!xFirst) {\n    tokens.reverse();\n  }\n  const parsed = tokens.join(\" \").match(/^([0-9.]+)% ([0-9.]+)%$/);\n  if (parsed) {\n    return {\n      x: parseFloat(parsed[1]) / 100,\n      y: parseFloat(parsed[2]) / 100\n    };\n  } else {\n    return { x: 0.5, y: 0.5 };\n  }\n}\nfunction cleanCssPosition(value, { allowCenter, cssOrder } = {\n  allowCenter: true,\n  cssOrder: true\n}) {\n  if (!value) {\n    return null;\n  }\n  if (typeof value === \"string\") {\n    value = value.split(\" \");\n  }\n  if (value.length === 1) {\n    if (value[0] === CENTER) {\n      value = [CENTER, CENTER];\n    } else if (X_VALUES.indexOf(value[0]) !== -1) {\n      value = [CENTER, value[0]];\n    } else if (Y_VALUES.indexOf(value[0]) !== -1) {\n      value = [value[0], CENTER];\n    }\n  }\n  if (value.length !== 2 || POS_VALUES.indexOf(value[0]) === -1 || POS_VALUES.indexOf(value[1]) === -1) {\n    logWarn(`Unparsable position ${value}`);\n    return null;\n  }\n  if (!allowCenter && value[0] === CENTER && value[1] === CENTER) {\n    logWarn(`Invalid position center center`);\n    return null;\n  }\n  if (cssOrder && !cssPositionIsOrdered(value)) {\n    value = [value[1], value[0]];\n  }\n  if (value[1] === CENTER && X_VALUES.indexOf(value[0]) !== -1) {\n    value = [CENTER, value[0]];\n  }\n  if (value[0] === CENTER && Y_VALUES.indexOf(value[1]) !== -1) {\n    value = [value[1], CENTER];\n  }\n  return value;\n}\nfunction cssPositionIsOrdered(value) {\n  return Y_VALUES.indexOf(value[0]) !== -1 && X_VALUES.indexOf(value[1]) !== -1;\n}\nfunction parseSpeed(speed) {\n  let parsed;\n  if (typeof speed === \"string\") {\n    const speedStr = speed.toString().trim();\n    let speedValue = parseFloat(speedStr.replace(/^(-?[0-9]+(?:\\.[0-9]*)?).*$/, \"$1\"));\n    const speedUnit = speedStr.replace(/^-?[0-9]+(?:\\.[0-9]*)?(.*)$/, \"$1\").trim();\n    if (speedUnit.match(/(pm|per minute)$/)) {\n      speedValue /= 60;\n    }\n    switch (speedUnit) {\n      // Degrees per minute / second\n      case \"dpm\":\n      case \"degrees per minute\":\n      case \"dps\":\n      case \"degrees per second\":\n        parsed = MathUtils.degToRad(speedValue);\n        break;\n      // Radians per minute / second\n      case \"rdpm\":\n      case \"radians per minute\":\n      case \"rdps\":\n      case \"radians per second\":\n        parsed = speedValue;\n        break;\n      // Revolutions per minute / second\n      case \"rpm\":\n      case \"revolutions per minute\":\n      case \"rps\":\n      case \"revolutions per second\":\n        parsed = speedValue * Math.PI * 2;\n        break;\n      // Unknown unit\n      default:\n        throw new PSVError(`Unknown speed unit \"${speedUnit}\"`);\n    }\n  } else {\n    parsed = speed;\n  }\n  return parsed;\n}\nfunction speedToDuration(value, angle2) {\n  if (typeof value !== \"number\") {\n    const speed = parseSpeed(value);\n    return angle2 / Math.abs(speed) * 1e3;\n  } else {\n    return Math.abs(value);\n  }\n}\nfunction parseAngle(angle2, zeroCenter = false, halfCircle = zeroCenter) {\n  let parsed;\n  if (typeof angle2 === \"string\") {\n    const match = angle2.toLowerCase().trim().match(/^(-?[0-9]+(?:\\.[0-9]*)?)(.*)$/);\n    if (!match) {\n      throw new PSVError(`Unknown angle \"${angle2}\"`);\n    }\n    const value = parseFloat(match[1]);\n    const unit = match[2];\n    if (unit) {\n      switch (unit) {\n        case \"deg\":\n        case \"degs\":\n          parsed = MathUtils.degToRad(value);\n          break;\n        case \"rad\":\n        case \"rads\":\n          parsed = value;\n          break;\n        default:\n          throw new PSVError(`Unknown angle unit \"${unit}\"`);\n      }\n    } else {\n      parsed = value;\n    }\n  } else if (typeof angle2 === \"number\" && !isNaN(angle2)) {\n    parsed = angle2;\n  } else {\n    throw new PSVError(`Unknown angle \"${angle2}\"`);\n  }\n  parsed = wrap(zeroCenter ? parsed + Math.PI : parsed, Math.PI * 2);\n  return zeroCenter ? MathUtils.clamp(parsed - Math.PI, -Math.PI / (halfCircle ? 2 : 1), Math.PI / (halfCircle ? 2 : 1)) : parsed;\n}\nfunction createTexture(img, mimaps = false) {\n  const texture = new Texture(img);\n  texture.needsUpdate = true;\n  texture.minFilter = mimaps ? LinearMipmapLinearFilter : LinearFilter;\n  texture.generateMipmaps = mimaps;\n  texture.anisotropy = mimaps ? 2 : 1;\n  return texture;\n}\nvar quaternion = new Quaternion();\nfunction applyEulerInverse(vector, euler) {\n  quaternion.setFromEuler(euler).invert();\n  vector.applyQuaternion(quaternion);\n}\nfunction getConfigParser(defaults, parsers) {\n  const parser = function(userConfig) {\n    const rawConfig = clone({\n      ...defaults,\n      ...userConfig\n    });\n    const config = {};\n    for (let [key, value] of Object.entries(rawConfig)) {\n      if (parsers && key in parsers) {\n        value = parsers[key](value, {\n          rawConfig,\n          defValue: defaults[key]\n        });\n      } else if (!(key in defaults)) {\n        logWarn(`Unknown option ${key}`);\n        continue;\n      }\n      config[key] = value;\n    }\n    return config;\n  };\n  parser.defaults = defaults;\n  parser.parsers = parsers || {};\n  return parser;\n}\nfunction checkStylesheet(element, name) {\n  if (getStyleProperty(element, `--psv-${name}-loaded`) !== \"true\") {\n    console.error(`PhotoSphereViewer: stylesheet \"@photo-sphere-viewer/${name}/index.css\" is not loaded`);\n  }\n}\nfunction checkVersion(name, version, coreVersion) {\n  if (version && version !== coreVersion) {\n    console.error(`PhotoSphereViewer: @photo-sphere-viewer/${name} is in version ${version} but @photo-sphere-viewer/core is in version ${coreVersion}`);\n  }\n}\nfunction checkClosedShadowDom(el) {\n  do {\n    if (el instanceof ShadowRoot && el.mode === \"closed\") {\n      console.error(`PhotoSphereViewer: closed shadow DOM detected, the viewer might not work as expected`);\n      return;\n    }\n    el = el.parentNode;\n  } while (el);\n}\nfunction mergePanoData(width, height, newPanoData, xmpPanoData) {\n  const panoData = {\n    isEquirectangular: true,\n    fullWidth: firstNonNull(newPanoData?.fullWidth, xmpPanoData?.fullWidth),\n    fullHeight: firstNonNull(newPanoData?.fullHeight, xmpPanoData?.fullHeight),\n    croppedWidth: width,\n    croppedHeight: height,\n    croppedX: firstNonNull(newPanoData?.croppedX, xmpPanoData?.croppedX),\n    croppedY: firstNonNull(newPanoData?.croppedY, xmpPanoData?.croppedY),\n    poseHeading: firstNonNull(newPanoData?.poseHeading, xmpPanoData?.poseHeading, 0),\n    posePitch: firstNonNull(newPanoData?.posePitch, xmpPanoData?.posePitch, 0),\n    poseRoll: firstNonNull(newPanoData?.poseRoll, xmpPanoData?.poseRoll, 0),\n    initialHeading: xmpPanoData?.initialHeading,\n    initialPitch: xmpPanoData?.initialPitch,\n    initialFov: xmpPanoData?.initialFov\n  };\n  if (!panoData.fullWidth && !panoData.fullHeight) {\n    panoData.fullWidth = Math.max(width, height * 2);\n    panoData.fullHeight = Math.round(panoData.fullWidth / 2);\n  }\n  if (!panoData.fullWidth) {\n    panoData.fullWidth = panoData.fullHeight * 2;\n  }\n  if (!panoData.fullHeight) {\n    panoData.fullHeight = Math.round(panoData.fullWidth / 2);\n  }\n  if (panoData.croppedX === null) {\n    panoData.croppedX = Math.round((panoData.fullWidth - width) / 2);\n  }\n  if (panoData.croppedY === null) {\n    panoData.croppedY = Math.round((panoData.fullHeight - height) / 2);\n  }\n  if (Math.abs(panoData.fullWidth - panoData.fullHeight * 2) > 1) {\n    logWarn(\"Invalid panoData, fullWidth should be twice fullHeight\");\n    panoData.fullHeight = Math.round(panoData.fullWidth / 2);\n  }\n  if (panoData.croppedX + panoData.croppedWidth > panoData.fullWidth) {\n    logWarn(\"Invalid panoData, croppedX + croppedWidth > fullWidth\");\n    panoData.croppedX = panoData.fullWidth - panoData.croppedWidth;\n  }\n  if (panoData.croppedY + panoData.croppedHeight > panoData.fullHeight) {\n    logWarn(\"Invalid panoData, croppedY + croppedHeight > fullHeight\");\n    panoData.croppedY = panoData.fullHeight - panoData.croppedHeight;\n  }\n  if (panoData.croppedX < 0) {\n    logWarn(\"Invalid panoData, croppedX < 0\");\n    panoData.croppedX = 0;\n  }\n  if (panoData.croppedY < 0) {\n    logWarn(\"Invalid panoData, croppedY < 0\");\n    panoData.croppedY = 0;\n  }\n  return panoData;\n}\n\n// src/utils/Animation.ts\nvar Animation = class {\n  constructor(options) {\n    this.easing = EASINGS[\"linear\"];\n    this.callbacks = [];\n    this.resolved = false;\n    this.cancelled = false;\n    this.options = options;\n    if (options) {\n      if (options.easing) {\n        this.easing = typeof options.easing === \"function\" ? options.easing : EASINGS[options.easing] || EASINGS[\"linear\"];\n      }\n      this.delayTimeout = setTimeout(() => {\n        this.delayTimeout = void 0;\n        this.animationFrame = window.requestAnimationFrame((t) => this.__run(t));\n      }, options.delay || 0);\n    } else {\n      this.resolved = true;\n    }\n  }\n  __run(timestamp) {\n    if (this.cancelled) {\n      return;\n    }\n    if (!this.start) {\n      this.start = timestamp;\n    }\n    const progress = (timestamp - this.start) / this.options.duration;\n    const current = {};\n    if (progress < 1) {\n      for (const [name, prop] of Object.entries(this.options.properties)) {\n        if (prop) {\n          const value = prop.start + (prop.end - prop.start) * this.easing(progress);\n          current[name] = value;\n        }\n      }\n      this.options.onTick(current, progress);\n      this.animationFrame = window.requestAnimationFrame((t) => this.__run(t));\n    } else {\n      for (const [name, prop] of Object.entries(this.options.properties)) {\n        if (prop) {\n          current[name] = prop.end;\n        }\n      }\n      this.options.onTick(current, 1);\n      this.__resolve(true);\n      this.animationFrame = void 0;\n    }\n  }\n  __resolve(value) {\n    if (value) {\n      this.resolved = true;\n    } else {\n      this.cancelled = true;\n    }\n    this.callbacks.forEach((cb) => cb(value));\n    this.callbacks.length = 0;\n  }\n  /**\n   * Promise chaining\n   * @param [onFulfilled] - Called when the animation is complete (true) or cancelled (false)\n   */\n  then(onFulfilled) {\n    if (this.resolved || this.cancelled) {\n      return Promise.resolve(this.resolved).then(onFulfilled);\n    }\n    return new Promise((resolve) => {\n      this.callbacks.push(resolve);\n    }).then(onFulfilled);\n  }\n  /**\n   * Cancels the animation\n   */\n  cancel() {\n    if (!this.cancelled && !this.resolved) {\n      this.__resolve(false);\n      if (this.delayTimeout) {\n        window.clearTimeout(this.delayTimeout);\n        this.delayTimeout = void 0;\n      }\n      if (this.animationFrame) {\n        window.cancelAnimationFrame(this.animationFrame);\n        this.animationFrame = void 0;\n      }\n    }\n  }\n};\n\n// src/utils/Dynamic.ts\nimport { MathUtils as MathUtils2 } from \"three\";\nvar Dynamic = class {\n  constructor(fn, config) {\n    this.fn = fn;\n    this.mode = 0 /* STOP */;\n    this.speed = 0;\n    this.speedMult = 0;\n    this.currentSpeed = 0;\n    this.target = 0;\n    this.__current = 0;\n    this.min = config.min;\n    this.max = config.max;\n    this.wrap = config.wrap;\n    this.current = config.defaultValue;\n    if (this.wrap && this.min !== 0) {\n      throw new PSVError(\"invalid config\");\n    }\n    if (this.fn) {\n      this.fn(this.current);\n    }\n  }\n  get current() {\n    return this.__current;\n  }\n  set current(current) {\n    this.__current = current;\n  }\n  /**\n   * Changes base speed\n   */\n  setSpeed(speed) {\n    this.speed = speed;\n  }\n  /**\n   * Defines the target position\n   */\n  goto(position, speedMult = 1) {\n    this.mode = 2 /* POSITION */;\n    this.target = this.wrap ? wrap(position, this.max) : MathUtils2.clamp(position, this.min, this.max);\n    this.speedMult = speedMult;\n  }\n  /**\n   * Increases/decreases the target position\n   */\n  step(step, speedMult = 1) {\n    if (speedMult === 0) {\n      this.setValue(this.current + step);\n    } else {\n      if (this.mode !== 2 /* POSITION */) {\n        this.target = this.current;\n      }\n      this.goto(this.target + step, speedMult);\n    }\n  }\n  /**\n   * Starts infinite movement\n   */\n  roll(invert = false, speedMult = 1) {\n    this.mode = 1 /* INFINITE */;\n    this.target = invert ? -Infinity : Infinity;\n    this.speedMult = speedMult;\n  }\n  /**\n   * Stops movement\n   */\n  stop() {\n    this.mode = 0 /* STOP */;\n  }\n  /**\n   * Defines the current position and immediately stops movement\n   * @param {number} value\n   */\n  setValue(value) {\n    this.target = this.wrap ? wrap(value, this.max) : MathUtils2.clamp(value, this.min, this.max);\n    this.mode = 0 /* STOP */;\n    this.currentSpeed = 0;\n    if (this.target !== this.current) {\n      this.current = this.target;\n      if (this.fn) {\n        this.fn(this.current);\n      }\n      return true;\n    }\n    return false;\n  }\n  /**\n   * @internal\n   */\n  update(elapsed) {\n    if (this.mode === 2 /* POSITION */) {\n      if (this.wrap && Math.abs(this.target - this.current) > this.max / 2) {\n        this.current = this.current < this.target ? this.current + this.max : this.current - this.max;\n      }\n      const dstStop = this.currentSpeed * this.currentSpeed / (this.speed * this.speedMult * 4);\n      if (Math.abs(this.target - this.current) <= dstStop) {\n        this.mode = 0 /* STOP */;\n      }\n    }\n    let targetSpeed = this.mode === 0 /* STOP */ ? 0 : this.speed * this.speedMult;\n    if (this.target < this.current) {\n      targetSpeed = -targetSpeed;\n    }\n    if (this.currentSpeed < targetSpeed) {\n      this.currentSpeed = Math.min(\n        targetSpeed,\n        this.currentSpeed + elapsed / 1e3 * this.speed * this.speedMult * 2\n      );\n    } else if (this.currentSpeed > targetSpeed) {\n      this.currentSpeed = Math.max(\n        targetSpeed,\n        this.currentSpeed - elapsed / 1e3 * this.speed * this.speedMult * 2\n      );\n    }\n    let next = null;\n    if (this.current > this.target && this.currentSpeed) {\n      next = Math.max(this.target, this.current + this.currentSpeed * elapsed / 1e3);\n    } else if (this.current < this.target && this.currentSpeed) {\n      next = Math.min(this.target, this.current + this.currentSpeed * elapsed / 1e3);\n    }\n    if (next !== null) {\n      next = this.wrap ? wrap(next, this.max) : MathUtils2.clamp(next, this.min, this.max);\n      if (next !== this.current) {\n        this.current = next;\n        if (this.fn) {\n          this.fn(this.current);\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n};\n\n// src/utils/MultiDynamic.ts\nvar MultiDynamic = class {\n  constructor(fn, dynamics) {\n    this.fn = fn;\n    this.dynamics = dynamics;\n    if (this.fn) {\n      this.fn(this.current);\n    }\n  }\n  get current() {\n    return Object.entries(this.dynamics).reduce(\n      (values, [name, dynamic]) => {\n        values[name] = dynamic.current;\n        return values;\n      },\n      {}\n    );\n  }\n  /**\n   * Changes base speed\n   */\n  setSpeed(speed) {\n    for (const d of Object.values(this.dynamics)) {\n      d.setSpeed(speed);\n    }\n  }\n  /**\n   * Defines the target positions\n   */\n  goto(positions, speedMult = 1) {\n    for (const [name, position] of Object.entries(positions)) {\n      this.dynamics[name].goto(position, speedMult);\n    }\n  }\n  /**\n   * Increase/decrease the target positions\n   */\n  step(steps, speedMult = 1) {\n    if (speedMult === 0) {\n      this.setValue(\n        Object.keys(steps).reduce(\n          (values, name) => {\n            values[name] = steps[name] + this.dynamics[name].current;\n            return values;\n          },\n          {}\n        )\n      );\n    } else {\n      for (const [name, step] of Object.entries(steps)) {\n        this.dynamics[name].step(step, speedMult);\n      }\n    }\n  }\n  /**\n   * Starts infinite movements\n   */\n  roll(rolls, speedMult = 1) {\n    for (const [name, roll] of Object.entries(rolls)) {\n      this.dynamics[name].roll(roll, speedMult);\n    }\n  }\n  /**\n   * Stops movements\n   */\n  stop() {\n    for (const d of Object.values(this.dynamics)) {\n      d.stop();\n    }\n  }\n  /**\n   * Defines the current positions and immediately stops movements\n   */\n  setValue(values) {\n    let hasUpdates = false;\n    for (const [name, value] of Object.entries(values)) {\n      hasUpdates = this.dynamics[name].setValue(value) || hasUpdates;\n    }\n    if (hasUpdates && this.fn) {\n      this.fn(this.current);\n    }\n    return hasUpdates;\n  }\n  /**\n   * @internal\n   */\n  update(elapsed) {\n    let hasUpdates = false;\n    for (const d of Object.values(this.dynamics)) {\n      hasUpdates = d.update(elapsed) || hasUpdates;\n    }\n    if (hasUpdates && this.fn) {\n      this.fn(this.current);\n    }\n    return hasUpdates;\n  }\n};\n\n// src/utils/PressHandler.ts\nvar PressHandler = class {\n  constructor(delay = 200) {\n    this.delay = delay;\n    this.time = 0;\n    this.delay = delay;\n  }\n  get pending() {\n    return this.time !== 0;\n  }\n  down(data) {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = void 0;\n    }\n    this.time = (/* @__PURE__ */ new Date()).getTime();\n    this.data = data;\n  }\n  up(cb) {\n    if (!this.time) {\n      return;\n    }\n    const elapsed = Date.now() - this.time;\n    if (elapsed < this.delay) {\n      this.timeout = setTimeout(() => {\n        cb(this.data);\n        this.timeout = void 0;\n        this.time = 0;\n        this.data = void 0;\n      }, this.delay);\n    } else {\n      cb(this.data);\n      this.time = 0;\n      this.data = void 0;\n    }\n  }\n};\n\n// src/utils/Slider.ts\nimport { MathUtils as MathUtils3 } from \"three\";\nvar SliderDirection = /* @__PURE__ */ ((SliderDirection2) => {\n  SliderDirection2[\"VERTICAL\"] = \"VERTICAL\";\n  SliderDirection2[\"HORIZONTAL\"] = \"HORIZONTAL\";\n  return SliderDirection2;\n})(SliderDirection || {});\nvar Slider = class {\n  constructor(container, direction, listener) {\n    this.container = container;\n    this.direction = direction;\n    this.listener = listener;\n    this.mousedown = false;\n    this.mouseover = false;\n    this.container.addEventListener(\"click\", this);\n    this.container.addEventListener(\"mousedown\", this);\n    this.container.addEventListener(\"mouseenter\", this);\n    this.container.addEventListener(\"mouseleave\", this);\n    this.container.addEventListener(\"touchstart\", this);\n    this.container.addEventListener(\"mousemove\", this, true);\n    this.container.addEventListener(\"touchmove\", this, true);\n    window.addEventListener(\"mouseup\", this);\n    window.addEventListener(\"touchend\", this);\n  }\n  get isVertical() {\n    return this.direction === \"VERTICAL\" /* VERTICAL */;\n  }\n  get isHorizontal() {\n    return this.direction === \"HORIZONTAL\" /* HORIZONTAL */;\n  }\n  destroy() {\n    window.removeEventListener(\"mouseup\", this);\n    window.removeEventListener(\"touchend\", this);\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case \"click\":\n        e.stopPropagation();\n        break;\n      case \"mousedown\":\n        this.__onMouseDown(e);\n        break;\n      case \"mouseenter\":\n        this.__onMouseEnter(e);\n        break;\n      case \"mouseleave\":\n        this.__onMouseLeave(e);\n        break;\n      case \"touchstart\":\n        this.__onTouchStart(e);\n        break;\n      case \"mousemove\":\n        this.__onMouseMove(e);\n        break;\n      case \"touchmove\":\n        this.__onTouchMove(e);\n        break;\n      case \"mouseup\":\n        this.__onMouseUp(e);\n        break;\n      case \"touchend\":\n        this.__onTouchEnd(e);\n        break;\n    }\n  }\n  __onMouseDown(evt) {\n    this.mousedown = true;\n    this.__update(evt.clientX, evt.clientY, true);\n  }\n  __onMouseEnter(evt) {\n    this.mouseover = true;\n    this.__update(evt.clientX, evt.clientY, true);\n  }\n  __onTouchStart(evt) {\n    this.mouseover = true;\n    this.mousedown = true;\n    const touch = evt.changedTouches[0];\n    this.__update(touch.clientX, touch.clientY, true);\n  }\n  __onMouseMove(evt) {\n    if (this.mousedown || this.mouseover) {\n      evt.stopPropagation();\n      this.__update(evt.clientX, evt.clientY, true);\n    }\n  }\n  __onTouchMove(evt) {\n    if (this.mousedown || this.mouseover) {\n      evt.stopPropagation();\n      const touch = evt.changedTouches[0];\n      this.__update(touch.clientX, touch.clientY, true);\n    }\n  }\n  __onMouseUp(evt) {\n    if (this.mousedown) {\n      this.mousedown = false;\n      this.__update(evt.clientX, evt.clientY, false);\n    }\n  }\n  __onMouseLeave(evt) {\n    if (this.mouseover) {\n      this.mouseover = false;\n      this.__update(evt.clientX, evt.clientY, true);\n    }\n  }\n  __onTouchEnd(evt) {\n    if (this.mousedown) {\n      this.mouseover = false;\n      this.mousedown = false;\n      const touch = evt.changedTouches[0];\n      this.__update(touch.clientX, touch.clientY, false);\n    }\n  }\n  __update(clientX, clientY, moving) {\n    const boundingClientRect = this.container.getBoundingClientRect();\n    let val;\n    if (this.isVertical) {\n      val = MathUtils3.clamp((boundingClientRect.bottom - clientY) / boundingClientRect.height, 0, 1);\n    } else {\n      val = MathUtils3.clamp((clientX - boundingClientRect.left) / boundingClientRect.width, 0, 1);\n    }\n    this.listener({\n      value: val,\n      click: !moving,\n      mousedown: this.mousedown,\n      mouseover: this.mouseover,\n      cursor: { clientX, clientY }\n    });\n  }\n};\n\n// src/events.ts\nvar events_exports = {};\n__export(events_exports, {\n  BeforeAnimateEvent: () => BeforeAnimateEvent,\n  BeforeRenderEvent: () => BeforeRenderEvent,\n  BeforeRotateEvent: () => BeforeRotateEvent,\n  ClickEvent: () => ClickEvent,\n  ConfigChangedEvent: () => ConfigChangedEvent,\n  DoubleClickEvent: () => DoubleClickEvent,\n  FullscreenEvent: () => FullscreenEvent,\n  HideNotificationEvent: () => HideNotificationEvent,\n  HideOverlayEvent: () => HideOverlayEvent,\n  HidePanelEvent: () => HidePanelEvent,\n  HideTooltipEvent: () => HideTooltipEvent,\n  KeypressEvent: () => KeypressEvent,\n  LoadProgressEvent: () => LoadProgressEvent,\n  ObjectEnterEvent: () => ObjectEnterEvent,\n  ObjectEvent: () => ObjectEvent,\n  ObjectHoverEvent: () => ObjectHoverEvent,\n  ObjectLeaveEvent: () => ObjectLeaveEvent,\n  PanoramaErrorEvent: () => PanoramaErrorEvent,\n  PanoramaLoadEvent: () => PanoramaLoadEvent,\n  PanoramaLoadedEvent: () => PanoramaLoadedEvent,\n  PositionUpdatedEvent: () => PositionUpdatedEvent,\n  ReadyEvent: () => ReadyEvent,\n  RenderEvent: () => RenderEvent,\n  RollUpdatedEvent: () => RollUpdatedEvent,\n  ShowNotificationEvent: () => ShowNotificationEvent,\n  ShowOverlayEvent: () => ShowOverlayEvent,\n  ShowPanelEvent: () => ShowPanelEvent,\n  ShowTooltipEvent: () => ShowTooltipEvent,\n  SizeUpdatedEvent: () => SizeUpdatedEvent,\n  StopAllEvent: () => StopAllEvent,\n  TransitionDoneEvent: () => TransitionDoneEvent,\n  ViewerEvent: () => ViewerEvent,\n  ZoomUpdatedEvent: () => ZoomUpdatedEvent\n});\n\n// src/lib/TypedEventTarget.ts\nvar TypedEvent = class extends Event {\n  constructor(type, cancelable = false) {\n    super(type, { cancelable });\n  }\n};\nvar TypedEventTarget = class extends EventTarget {\n  dispatchEvent(e) {\n    return super.dispatchEvent(e);\n  }\n  /**\n   * @template T the name of event\n   * @template E the class of the event\n   */\n  addEventListener(type, callback, options) {\n    super.addEventListener(type, callback, options);\n  }\n  /**\n   * @template T the name of event\n   * @template E the class of the event\n   */\n  removeEventListener(type, callback, options) {\n    super.removeEventListener(type, callback, options);\n  }\n};\n\n// src/events.ts\nvar ViewerEvent = class extends TypedEvent {\n};\nvar _BeforeAnimateEvent = class _BeforeAnimateEvent extends ViewerEvent {\n  /** @internal */\n  constructor(position, zoomLevel) {\n    super(_BeforeAnimateEvent.type, true);\n    this.position = position;\n    this.zoomLevel = zoomLevel;\n  }\n};\n_BeforeAnimateEvent.type = \"before-animate\";\nvar BeforeAnimateEvent = _BeforeAnimateEvent;\nvar _BeforeRenderEvent = class _BeforeRenderEvent extends ViewerEvent {\n  /** @internal */\n  constructor(timestamp, elapsed) {\n    super(_BeforeRenderEvent.type);\n    this.timestamp = timestamp;\n    this.elapsed = elapsed;\n  }\n};\n_BeforeRenderEvent.type = \"before-render\";\nvar BeforeRenderEvent = _BeforeRenderEvent;\nvar _BeforeRotateEvent = class _BeforeRotateEvent extends ViewerEvent {\n  /** @internal */\n  constructor(position) {\n    super(_BeforeRotateEvent.type, true);\n    this.position = position;\n  }\n};\n_BeforeRotateEvent.type = \"before-rotate\";\nvar BeforeRotateEvent = _BeforeRotateEvent;\nvar _ClickEvent = class _ClickEvent extends ViewerEvent {\n  /** @internal */\n  constructor(data) {\n    super(_ClickEvent.type);\n    this.data = data;\n  }\n};\n_ClickEvent.type = \"click\";\nvar ClickEvent = _ClickEvent;\nvar _ConfigChangedEvent = class _ConfigChangedEvent extends ViewerEvent {\n  /** @internal */\n  constructor(options) {\n    super(_ConfigChangedEvent.type);\n    this.options = options;\n  }\n  /**\n   * Checks if at least one of the `options` has been modified\n   */\n  containsOptions(...options) {\n    return options.some((option) => this.options.includes(option));\n  }\n};\n_ConfigChangedEvent.type = \"config-changed\";\nvar ConfigChangedEvent = _ConfigChangedEvent;\nvar _DoubleClickEvent = class _DoubleClickEvent extends ViewerEvent {\n  /** @internal */\n  constructor(data) {\n    super(_DoubleClickEvent.type);\n    this.data = data;\n  }\n};\n_DoubleClickEvent.type = \"dblclick\";\nvar DoubleClickEvent = _DoubleClickEvent;\nvar _FullscreenEvent = class _FullscreenEvent extends ViewerEvent {\n  /** @internal */\n  constructor(fullscreenEnabled) {\n    super(_FullscreenEvent.type);\n    this.fullscreenEnabled = fullscreenEnabled;\n  }\n};\n_FullscreenEvent.type = \"fullscreen\";\nvar FullscreenEvent = _FullscreenEvent;\nvar _HideNotificationEvent = class _HideNotificationEvent extends ViewerEvent {\n  /** @internal */\n  constructor(notificationId) {\n    super(_HideNotificationEvent.type);\n    this.notificationId = notificationId;\n  }\n};\n_HideNotificationEvent.type = \"hide-notification\";\nvar HideNotificationEvent = _HideNotificationEvent;\nvar _HideOverlayEvent = class _HideOverlayEvent extends ViewerEvent {\n  /** @internal */\n  constructor(overlayId) {\n    super(_HideOverlayEvent.type);\n    this.overlayId = overlayId;\n  }\n};\n_HideOverlayEvent.type = \"hide-overlay\";\nvar HideOverlayEvent = _HideOverlayEvent;\nvar _HidePanelEvent = class _HidePanelEvent extends ViewerEvent {\n  /** @internal */\n  constructor(panelId) {\n    super(_HidePanelEvent.type);\n    this.panelId = panelId;\n  }\n};\n_HidePanelEvent.type = \"hide-panel\";\nvar HidePanelEvent = _HidePanelEvent;\nvar _HideTooltipEvent = class _HideTooltipEvent extends ViewerEvent {\n  /** @internal */\n  constructor(tooltipData) {\n    super(_HideTooltipEvent.type);\n    this.tooltipData = tooltipData;\n  }\n};\n_HideTooltipEvent.type = \"hide-tooltip\";\nvar HideTooltipEvent = _HideTooltipEvent;\nvar _KeypressEvent = class _KeypressEvent extends ViewerEvent {\n  /** @internal */\n  constructor(key, originalEvent) {\n    super(_KeypressEvent.type, true);\n    this.key = key;\n    this.originalEvent = originalEvent;\n  }\n};\n_KeypressEvent.type = \"key-press\";\nvar KeypressEvent = _KeypressEvent;\nvar _LoadProgressEvent = class _LoadProgressEvent extends ViewerEvent {\n  /** @internal */\n  constructor(progress) {\n    super(_LoadProgressEvent.type);\n    this.progress = progress;\n  }\n};\n_LoadProgressEvent.type = \"load-progress\";\nvar LoadProgressEvent = _LoadProgressEvent;\nvar _PanoramaLoadEvent = class _PanoramaLoadEvent extends ViewerEvent {\n  /** @internal */\n  constructor(panorama) {\n    super(_PanoramaLoadEvent.type);\n    this.panorama = panorama;\n  }\n};\n_PanoramaLoadEvent.type = \"panorama-load\";\nvar PanoramaLoadEvent = _PanoramaLoadEvent;\nvar _PanoramaLoadedEvent = class _PanoramaLoadedEvent extends ViewerEvent {\n  /** @internal */\n  constructor(data) {\n    super(_PanoramaLoadedEvent.type);\n    this.data = data;\n  }\n};\n_PanoramaLoadedEvent.type = \"panorama-loaded\";\nvar PanoramaLoadedEvent = _PanoramaLoadedEvent;\nvar _PanoramaErrorEvent = class _PanoramaErrorEvent extends ViewerEvent {\n  /** @internal */\n  constructor(panorama, error) {\n    super(_PanoramaErrorEvent.type);\n    this.panorama = panorama;\n    this.error = error;\n  }\n};\n_PanoramaErrorEvent.type = \"panorama-error\";\nvar PanoramaErrorEvent = _PanoramaErrorEvent;\nvar _TransitionDoneEvent = class _TransitionDoneEvent extends ViewerEvent {\n  /** @internal */\n  constructor(completed) {\n    super(_TransitionDoneEvent.type);\n    this.completed = completed;\n  }\n};\n_TransitionDoneEvent.type = \"transition-done\";\nvar TransitionDoneEvent = _TransitionDoneEvent;\nvar _PositionUpdatedEvent = class _PositionUpdatedEvent extends ViewerEvent {\n  /** @internal */\n  constructor(position) {\n    super(_PositionUpdatedEvent.type);\n    this.position = position;\n  }\n};\n_PositionUpdatedEvent.type = \"position-updated\";\nvar PositionUpdatedEvent = _PositionUpdatedEvent;\nvar _RollUpdatedEvent = class _RollUpdatedEvent extends ViewerEvent {\n  /** @internal */\n  constructor(roll) {\n    super(_RollUpdatedEvent.type);\n    this.roll = roll;\n  }\n};\n_RollUpdatedEvent.type = \"roll-updated\";\nvar RollUpdatedEvent = _RollUpdatedEvent;\nvar _ReadyEvent = class _ReadyEvent extends ViewerEvent {\n  /** @internal */\n  constructor() {\n    super(_ReadyEvent.type);\n  }\n};\n_ReadyEvent.type = \"ready\";\nvar ReadyEvent = _ReadyEvent;\nvar _RenderEvent = class _RenderEvent extends ViewerEvent {\n  /** @internal */\n  constructor() {\n    super(_RenderEvent.type);\n  }\n};\n_RenderEvent.type = \"render\";\nvar RenderEvent = _RenderEvent;\nvar _ShowNotificationEvent = class _ShowNotificationEvent extends ViewerEvent {\n  /** @internal */\n  constructor(notificationId) {\n    super(_ShowNotificationEvent.type);\n    this.notificationId = notificationId;\n  }\n};\n_ShowNotificationEvent.type = \"show-notification\";\nvar ShowNotificationEvent = _ShowNotificationEvent;\nvar _ShowOverlayEvent = class _ShowOverlayEvent extends ViewerEvent {\n  /** @internal */\n  constructor(overlayId) {\n    super(_ShowOverlayEvent.type);\n    this.overlayId = overlayId;\n  }\n};\n_ShowOverlayEvent.type = \"show-overlay\";\nvar ShowOverlayEvent = _ShowOverlayEvent;\nvar _ShowPanelEvent = class _ShowPanelEvent extends ViewerEvent {\n  /** @internal */\n  constructor(panelId) {\n    super(_ShowPanelEvent.type);\n    this.panelId = panelId;\n  }\n};\n_ShowPanelEvent.type = \"show-panel\";\nvar ShowPanelEvent = _ShowPanelEvent;\nvar _ShowTooltipEvent = class _ShowTooltipEvent extends ViewerEvent {\n  /** @internal */\n  constructor(tooltip, tooltipData) {\n    super(_ShowTooltipEvent.type);\n    this.tooltip = tooltip;\n    this.tooltipData = tooltipData;\n  }\n};\n_ShowTooltipEvent.type = \"show-tooltip\";\nvar ShowTooltipEvent = _ShowTooltipEvent;\nvar _SizeUpdatedEvent = class _SizeUpdatedEvent extends ViewerEvent {\n  /** @internal */\n  constructor(size) {\n    super(_SizeUpdatedEvent.type);\n    this.size = size;\n  }\n};\n_SizeUpdatedEvent.type = \"size-updated\";\nvar SizeUpdatedEvent = _SizeUpdatedEvent;\nvar _StopAllEvent = class _StopAllEvent extends ViewerEvent {\n  /** @internal */\n  constructor() {\n    super(_StopAllEvent.type);\n  }\n};\n_StopAllEvent.type = \"stop-all\";\nvar StopAllEvent = _StopAllEvent;\nvar _ZoomUpdatedEvent = class _ZoomUpdatedEvent extends ViewerEvent {\n  /** @internal */\n  constructor(zoomLevel) {\n    super(_ZoomUpdatedEvent.type);\n    this.zoomLevel = zoomLevel;\n  }\n};\n_ZoomUpdatedEvent.type = \"zoom-updated\";\nvar ZoomUpdatedEvent = _ZoomUpdatedEvent;\nvar ObjectEvent = class extends ViewerEvent {\n  /** @internal */\n  constructor(type, originalEvent, object, viewerPoint, userDataKey) {\n    super(type);\n    this.originalEvent = originalEvent;\n    this.object = object;\n    this.viewerPoint = viewerPoint;\n    this.userDataKey = userDataKey;\n  }\n};\nvar _ObjectEnterEvent = class _ObjectEnterEvent extends ObjectEvent {\n  /** @internal */\n  constructor(originalEvent, object, viewerPoint, userDataKey) {\n    super(_ObjectEnterEvent.type, originalEvent, object, viewerPoint, userDataKey);\n  }\n};\n_ObjectEnterEvent.type = \"enter-object\";\nvar ObjectEnterEvent = _ObjectEnterEvent;\nvar _ObjectLeaveEvent = class _ObjectLeaveEvent extends ObjectEvent {\n  /** @internal */\n  constructor(originalEvent, object, viewerPoint, userDataKey) {\n    super(_ObjectLeaveEvent.type, originalEvent, object, viewerPoint, userDataKey);\n  }\n};\n_ObjectLeaveEvent.type = \"leave-object\";\nvar ObjectLeaveEvent = _ObjectLeaveEvent;\nvar _ObjectHoverEvent = class _ObjectHoverEvent extends ObjectEvent {\n  /** @internal */\n  constructor(originalEvent, object, viewerPoint, userDataKey) {\n    super(_ObjectHoverEvent.type, originalEvent, object, viewerPoint, userDataKey);\n  }\n};\n_ObjectHoverEvent.type = \"hover-object\";\nvar ObjectHoverEvent = _ObjectHoverEvent;\n\n// src/adapters/AbstractAdapter.ts\nvar AbstractAdapter = class {\n  constructor(viewer) {\n    this.viewer = viewer;\n  }\n  /**\n   * Initializes the adapter\n   */\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  init() {\n  }\n  /**\n   * Destroys the adapter\n   */\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  destroy() {\n  }\n  /**\n   * Indicates if the adapter supports transitions between panoramas\n   */\n  // @ts-ignore unused parameter\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  supportsTransition(panorama) {\n    return false;\n  }\n  /**\n   * Indicates if the adapter supports preload of a panorama\n   */\n  // @ts-ignore unused parameter\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  supportsPreload(panorama) {\n    return false;\n  }\n  /**\n   * Converts pixel texture coordinates to spherical radians coordinates\n   * @throws {@link PSVError} when the current adapter does not support texture coordinates\n   */\n  // @ts-ignore unused parameter\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  textureCoordsToSphericalCoords(point, data) {\n    throw new PSVError(\"Current adapter does not support texture coordinates.\");\n  }\n  /**\n   * Converts spherical radians coordinates to pixel texture coordinates\n   * @throws {@link PSVError} when the current adapter does not support texture coordinates\n   */\n  // @ts-ignore unused parameter\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  sphericalCoordsToTextureCoords(position, data) {\n    throw new PSVError(\"Current adapter does not support texture coordinates.\");\n  }\n};\n/**\n * Indicates if the adapter supports panorama download natively\n */\nAbstractAdapter.supportsDownload = false;\nfunction adapterInterop(adapter) {\n  if (adapter) {\n    for (const [, p] of [[\"_\", adapter], ...Object.entries(adapter)]) {\n      if (p.prototype instanceof AbstractAdapter) {\n        checkVersion(p.id, p.VERSION, \"5.13.2\");\n        return p;\n      }\n    }\n  }\n  return null;\n}\n\n// src/adapters/DualFisheyeAdapter.ts\nimport { Mesh as Mesh2, MeshBasicMaterial as MeshBasicMaterial2, SphereGeometry as SphereGeometry2 } from \"three\";\n\n// src/adapters/EquirectangularAdapter.ts\nimport { MathUtils as MathUtils4, Mesh, MeshBasicMaterial, SphereGeometry } from \"three\";\n\n// src/data/system.ts\nvar LOCALSTORAGE_TOUCH_SUPPORT = `${VIEWER_DATA}_touchSupport`;\nvar SYSTEM = {\n  /**\n   * Indicates if the system data has been loaded\n   */\n  loaded: false,\n  /**\n   * Device screen pixel ratio\n   */\n  pixelRatio: 1,\n  /**\n   * Device supports WebGL\n   */\n  isWebGLSupported: false,\n  /**\n   * Maximum WebGL texture width\n   */\n  maxTextureWidth: 0,\n  /**\n   * Device supports touch events\n   */\n  isTouchEnabled: null,\n  /**\n   * @internal\n   */\n  __maxCanvasWidth: null,\n  /**\n   * If the current device is an iPhone\n   */\n  isIphone: false,\n  /**\n   * Maximum canvas width\n   */\n  get maxCanvasWidth() {\n    if (this.__maxCanvasWidth === null) {\n      this.__maxCanvasWidth = getMaxCanvasWidth(this.maxTextureWidth);\n    }\n    return this.__maxCanvasWidth;\n  },\n  /**\n   * Loads the system if not already loaded\n   * @internal\n   */\n  load() {\n    if (!this.loaded) {\n      const ctx = getWebGLCtx();\n      this.pixelRatio = window.devicePixelRatio || 1;\n      this.isWebGLSupported = !!ctx;\n      this.maxTextureWidth = ctx ? ctx.getParameter(ctx.MAX_TEXTURE_SIZE) : 0;\n      this.isTouchEnabled = isTouchEnabled();\n      this.isIphone = /iPhone/i.test(navigator.userAgent);\n      this.loaded = true;\n    }\n    if (!SYSTEM.isWebGLSupported) {\n      throw new PSVError(\"WebGL 2 is not supported.\");\n    }\n    if (SYSTEM.maxTextureWidth === 0) {\n      throw new PSVError(\"Unable to detect system capabilities\");\n    }\n  }\n};\nfunction getWebGLCtx() {\n  try {\n    const canvas = document.createElement(\"canvas\");\n    return canvas.getContext(\"webgl2\");\n  } catch {\n    return null;\n  }\n}\nfunction isTouchEnabled() {\n  let initial = \"ontouchstart\" in window || navigator.maxTouchPoints > 0;\n  if (LOCALSTORAGE_TOUCH_SUPPORT in localStorage) {\n    initial = localStorage[LOCALSTORAGE_TOUCH_SUPPORT] === \"true\";\n  }\n  const promise = new Promise((resolve) => {\n    const clear = () => {\n      window.removeEventListener(\"mousedown\", listenerMouse);\n      window.removeEventListener(\"touchstart\", listenerTouch);\n      clearTimeout(listenerTimeoutId);\n    };\n    const listenerMouse = () => {\n      clear();\n      localStorage[LOCALSTORAGE_TOUCH_SUPPORT] = false;\n      resolve(false);\n    };\n    const listenerTouch = () => {\n      clear();\n      localStorage[LOCALSTORAGE_TOUCH_SUPPORT] = true;\n      resolve(true);\n    };\n    const listenerTimeout = () => {\n      clear();\n      localStorage[LOCALSTORAGE_TOUCH_SUPPORT] = initial;\n      resolve(initial);\n    };\n    window.addEventListener(\"mousedown\", listenerMouse, false);\n    window.addEventListener(\"touchstart\", listenerTouch, false);\n    const listenerTimeoutId = setTimeout(listenerTimeout, 1e4);\n  });\n  return { initial, promise };\n}\nfunction getMaxCanvasWidth(maxWidth) {\n  let width = maxWidth;\n  let pass = false;\n  const cropCanvas = document.createElement(\"canvas\");\n  const cropCtx = cropCanvas.getContext(\"2d\");\n  cropCanvas.width = 1;\n  cropCanvas.height = 1;\n  while (width > 1024 && !pass) {\n    const testCanvas = document.createElement(\"canvas\");\n    const testCtx = testCanvas.getContext(\"2d\");\n    testCanvas.width = width;\n    testCanvas.height = width / 2;\n    try {\n      testCtx.fillStyle = \"white\";\n      testCtx.fillRect(width - 1, width / 2 - 1, 1, 1);\n      cropCtx.drawImage(testCanvas, width - 1, width / 2 - 1, 1, 1, 0, 0, 1, 1);\n      if (cropCtx.getImageData(0, 0, 1, 1).data[0] > 0) {\n        pass = true;\n      }\n    } catch {\n    }\n    testCanvas.width = 0;\n    testCanvas.height = 0;\n    if (!pass) {\n      width /= 2;\n    }\n  }\n  if (pass) {\n    return width;\n  } else {\n    throw new PSVError(\"Unable to detect system capabilities\");\n  }\n}\n\n// src/adapters/EquirectangularAdapter.ts\nvar getConfig = getConfigParser(\n  {\n    resolution: 64,\n    useXmpData: true,\n    blur: false\n  },\n  {\n    resolution: (resolution) => {\n      if (!resolution || !MathUtils4.isPowerOfTwo(resolution)) {\n        throw new PSVError(\"EquirectangularAdapter resolution must be power of two.\");\n      }\n      return resolution;\n    }\n  }\n);\nvar EquirectangularAdapter = class extends AbstractAdapter {\n  constructor(viewer, config) {\n    super(viewer);\n    this.config = getConfig(config);\n    this.SPHERE_SEGMENTS = this.config.resolution;\n    this.SPHERE_HORIZONTAL_SEGMENTS = this.SPHERE_SEGMENTS / 2;\n  }\n  supportsTransition() {\n    return true;\n  }\n  supportsPreload() {\n    return true;\n  }\n  textureCoordsToSphericalCoords(point, data) {\n    if (isNil(point.textureX) || isNil(point.textureY)) {\n      throw new PSVError(`Texture position is missing 'textureX' or 'textureY'`);\n    }\n    const relativeX = (point.textureX + data.croppedX) / data.fullWidth * Math.PI * 2;\n    const relativeY = (point.textureY + data.croppedY) / data.fullHeight * Math.PI;\n    return {\n      yaw: relativeX >= Math.PI ? relativeX - Math.PI : relativeX + Math.PI,\n      pitch: Math.PI / 2 - relativeY\n    };\n  }\n  sphericalCoordsToTextureCoords(position, data) {\n    const relativeLong = position.yaw / Math.PI / 2 * data.fullWidth;\n    const relativeLat = position.pitch / Math.PI * data.fullHeight;\n    let textureX = Math.round(position.yaw < Math.PI ? relativeLong + data.fullWidth / 2 : relativeLong - data.fullWidth / 2) - data.croppedX;\n    let textureY = Math.round(data.fullHeight / 2 - relativeLat) - data.croppedY;\n    if (textureX < 0 || textureX > data.croppedWidth || textureY < 0 || textureY > data.croppedHeight) {\n      textureX = textureY = void 0;\n    }\n    return { textureX, textureY };\n  }\n  async loadTexture(panorama, loader = true, newPanoData, useXmpPanoData = this.config.useXmpData) {\n    if (typeof panorama !== \"string\" && (typeof panorama !== \"object\" || !panorama.path)) {\n      return Promise.reject(new PSVError(\"Invalid panorama url, are you using the right adapter?\"));\n    }\n    let cleanPanorama;\n    if (typeof panorama === \"string\") {\n      cleanPanorama = {\n        path: panorama,\n        data: newPanoData\n      };\n    } else {\n      cleanPanorama = {\n        data: newPanoData,\n        ...panorama\n      };\n    }\n    const blob = await this.viewer.textureLoader.loadFile(\n      cleanPanorama.path,\n      loader ? (p) => this.viewer.textureLoader.dispatchProgress(p) : null,\n      cleanPanorama.path\n    );\n    const xmpPanoData = useXmpPanoData ? await this.loadXMP(blob) : null;\n    const img = await this.viewer.textureLoader.blobToImage(blob);\n    if (typeof cleanPanorama.data === \"function\") {\n      cleanPanorama.data = cleanPanorama.data(img, xmpPanoData);\n    }\n    const panoData = mergePanoData(img.width, img.height, cleanPanorama.data, xmpPanoData);\n    const texture = this.createEquirectangularTexture(img);\n    return {\n      panorama,\n      texture,\n      panoData,\n      cacheKey: cleanPanorama.path\n    };\n  }\n  /**\n   * Loads the XMP data of an image\n   */\n  async loadXMP(blob) {\n    const binary = await this.loadBlobAsString(blob);\n    const a = binary.indexOf(\"<x:xmpmeta\");\n    if (a === -1) {\n      return null;\n    }\n    const b = binary.indexOf(\"</x:xmpmeta>\", a);\n    if (b === -1) {\n      return null;\n    }\n    const data = binary.substring(a, b);\n    if (!data.includes(\"GPano:\")) {\n      return null;\n    }\n    return {\n      fullWidth: getXMPValue(data, \"FullPanoWidthPixels\"),\n      fullHeight: getXMPValue(data, \"FullPanoHeightPixels\"),\n      croppedWidth: getXMPValue(data, \"CroppedAreaImageWidthPixels\"),\n      croppedHeight: getXMPValue(data, \"CroppedAreaImageHeightPixels\"),\n      croppedX: getXMPValue(data, \"CroppedAreaLeftPixels\"),\n      croppedY: getXMPValue(data, \"CroppedAreaTopPixels\"),\n      poseHeading: getXMPValue(data, \"PoseHeadingDegrees\", false),\n      posePitch: getXMPValue(data, \"PosePitchDegrees\", false),\n      poseRoll: getXMPValue(data, \"PoseRollDegrees\", false),\n      initialHeading: getXMPValue(data, \"InitialViewHeadingDegrees\", false),\n      initialPitch: getXMPValue(data, \"InitialViewPitchDegrees\", false),\n      initialFov: getXMPValue(data, \"InitialHorizontalFOVDegrees\", false)\n    };\n  }\n  /**\n   * Reads a Blob as a string\n   */\n  loadBlobAsString(blob) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = reject;\n      reader.readAsText(blob);\n    });\n  }\n  /**\n   * Creates the final texture from image and panorama data\n   */\n  createEquirectangularTexture(img) {\n    if (this.config.blur || img.width > SYSTEM.maxTextureWidth) {\n      const ratio = Math.min(1, SYSTEM.maxCanvasWidth / img.width);\n      const buffer = new OffscreenCanvas(Math.floor(img.width * ratio), Math.floor(img.height * ratio));\n      const ctx = buffer.getContext(\"2d\");\n      if (this.config.blur) {\n        ctx.filter = `blur(${buffer.width / 2048}px)`;\n      }\n      ctx.drawImage(img, 0, 0, buffer.width, buffer.height);\n      return createTexture(buffer);\n    }\n    return createTexture(img);\n  }\n  createMesh(panoData) {\n    const hStart = panoData.croppedX / panoData.fullWidth * 2 * Math.PI;\n    const hLength = panoData.croppedWidth / panoData.fullWidth * 2 * Math.PI;\n    const vStart = panoData.croppedY / panoData.fullHeight * Math.PI;\n    const vLength = panoData.croppedHeight / panoData.fullHeight * Math.PI;\n    const geometry = new SphereGeometry(\n      SPHERE_RADIUS,\n      Math.round(this.SPHERE_SEGMENTS / (2 * Math.PI) * hLength),\n      Math.round(this.SPHERE_HORIZONTAL_SEGMENTS / Math.PI * vLength),\n      -Math.PI / 2 + hStart,\n      hLength,\n      vStart,\n      vLength\n    ).scale(-1, 1, 1);\n    const material = new MeshBasicMaterial({ depthTest: false, depthWrite: false });\n    return new Mesh(geometry, material);\n  }\n  setTexture(mesh, textureData) {\n    mesh.material.map = textureData.texture;\n  }\n  setTextureOpacity(mesh, opacity) {\n    mesh.material.opacity = opacity;\n    mesh.material.transparent = opacity < 1;\n  }\n  disposeTexture({ texture }) {\n    texture.dispose();\n  }\n  disposeMesh(mesh) {\n    mesh.geometry.dispose();\n    mesh.material.dispose();\n  }\n};\nEquirectangularAdapter.id = \"equirectangular\";\nEquirectangularAdapter.VERSION = \"5.13.2\";\nEquirectangularAdapter.supportsDownload = true;\n\n// src/adapters/DualFisheyeAdapter.ts\nvar DualFisheyeAdapter = class extends EquirectangularAdapter {\n  constructor(viewer, config) {\n    super(viewer, {\n      resolution: config?.resolution ?? 64,\n      useXmpData: false\n    });\n  }\n  async loadTexture(panorama, loader) {\n    const result = await super.loadTexture(panorama, loader, null, false);\n    result.panoData = null;\n    return result;\n  }\n  createMesh() {\n    const geometry = new SphereGeometry2(\n      SPHERE_RADIUS,\n      this.SPHERE_SEGMENTS,\n      this.SPHERE_HORIZONTAL_SEGMENTS\n    ).scale(-1, 1, 1).toNonIndexed();\n    const uvs = geometry.getAttribute(\"uv\");\n    const normals = geometry.getAttribute(\"normal\");\n    for (let i = 0; i < uvs.count; i++) {\n      for (let j = 0; j < 3; j++) {\n        const index = i * 3 + j;\n        const x = normals.getX(index);\n        const y = normals.getY(index);\n        const z = normals.getZ(index);\n        const c = 0.947;\n        if (i < uvs.count / 6) {\n          const correction = x === 0 && z === 0 ? 1 : Math.acos(y) / Math.sqrt(x * x + z * z) * (2 / Math.PI);\n          uvs.setXY(\n            index,\n            x * (c / 4) * correction + 1 / 4,\n            z * (c / 2) * correction + 1 / 2\n          );\n        } else {\n          const correction = x === 0 && z === 0 ? 1 : Math.acos(-y) / Math.sqrt(x * x + z * z) * (2 / Math.PI);\n          uvs.setXY(\n            index,\n            -x * (c / 4) * correction + 3 / 4,\n            z * (c / 2) * correction + 1 / 2\n          );\n        }\n      }\n    }\n    geometry.rotateX(-Math.PI / 2);\n    geometry.rotateY(Math.PI);\n    const material = new MeshBasicMaterial2({ depthTest: false, depthWrite: false });\n    return new Mesh2(geometry, material);\n  }\n};\nDualFisheyeAdapter.id = \"dual-fisheye\";\nDualFisheyeAdapter.VERSION = \"5.13.2\";\n\n// src/components/AbstractComponent.ts\nvar AbstractComponent = class _AbstractComponent {\n  constructor(parent, config) {\n    this.parent = parent;\n    /**\n     * All child components\n     * @internal\n     */\n    this.children = [];\n    /**\n     * Internal properties\n     * @internal\n     */\n    this.state = {\n      visible: true\n    };\n    this.viewer = parent instanceof _AbstractComponent ? parent.viewer : parent;\n    this.container = document.createElement(config.tagName ?? \"div\");\n    this.container.className = config.className || \"\";\n    this.parent.children.push(this);\n    this.parent.container.appendChild(this.container);\n  }\n  /**\n   * Destroys the component\n   */\n  destroy() {\n    this.parent.container.removeChild(this.container);\n    const childIdx = this.parent.children.indexOf(this);\n    if (childIdx !== -1) {\n      this.parent.children.splice(childIdx, 1);\n    }\n    this.children.slice().forEach((child) => child.destroy());\n    this.children.length = 0;\n  }\n  /**\n   * Displays or hides the component\n   */\n  toggle(visible = !this.isVisible()) {\n    if (!visible) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n  /**\n   * Hides the component\n   */\n  // @ts-ignore unused parameter\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  hide(options) {\n    this.container.style.display = \"none\";\n    this.state.visible = false;\n  }\n  /**\n   * Displays the component\n   */\n  // @ts-ignore unused parameter\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  show(options) {\n    this.container.style.display = \"\";\n    this.state.visible = true;\n  }\n  /**\n   * Checks if the component is visible\n   */\n  isVisible() {\n    return this.state.visible;\n  }\n};\n\n// src/buttons/AbstractButton.ts\nvar getConfig2 = getConfigParser({\n  id: null,\n  tagName: null,\n  className: null,\n  title: null,\n  hoverScale: false,\n  collapsable: false,\n  tabbable: true,\n  icon: null,\n  iconActive: null\n});\nvar AbstractButton = class extends AbstractComponent {\n  constructor(navbar, config) {\n    super(navbar, {\n      tagName: config.tagName,\n      className: `psv-button ${config.hoverScale ? \"psv-button--hover-scale\" : \"\"} ${config.className || \"\"}`\n    });\n    /**\n     * Internal properties\n     */\n    this.state = {\n      visible: true,\n      enabled: true,\n      supported: true,\n      collapsed: false,\n      active: false,\n      width: 0\n    };\n    this.config = getConfig2(config);\n    if (!config.id) {\n      this.config.id = this.constructor.id;\n    }\n    if (config.icon) {\n      this.__setIcon(config.icon);\n    }\n    this.state.width = this.container.offsetWidth;\n    if (this.config.title) {\n      this.container.title = this.viewer.config.lang[this.config.title] ?? this.config.title;\n    } else if (this.id && this.id in this.viewer.config.lang) {\n      this.container.title = this.viewer.config.lang[this.id];\n    }\n    if (config.tabbable) {\n      this.container.tabIndex = 0;\n    }\n    this.container.addEventListener(\"click\", (e) => {\n      if (this.state.enabled) {\n        this.onClick();\n      }\n      e.stopPropagation();\n    });\n    this.container.addEventListener(\"keydown\", (e) => {\n      if (e.key === KEY_CODES.Enter && this.state.enabled) {\n        this.onClick();\n        e.stopPropagation();\n      }\n    });\n  }\n  get id() {\n    return this.config.id;\n  }\n  get title() {\n    return this.container.title;\n  }\n  get content() {\n    return this.container.innerHTML;\n  }\n  get width() {\n    return this.state.width;\n  }\n  get collapsable() {\n    return this.config.collapsable;\n  }\n  show(refresh = true) {\n    if (!this.isVisible()) {\n      this.state.visible = true;\n      if (!this.state.collapsed) {\n        this.container.style.display = \"\";\n      }\n      if (refresh) {\n        this.viewer.navbar.autoSize();\n      }\n    }\n  }\n  hide(refresh = true) {\n    if (this.isVisible()) {\n      this.state.visible = false;\n      this.container.style.display = \"none\";\n      if (refresh) {\n        this.viewer.navbar.autoSize();\n      }\n    }\n  }\n  /**\n   * Hides/shows the button depending of the result of {@link isSupported}\n   * @internal\n   */\n  checkSupported() {\n    resolveBoolean(this.isSupported(), (supported, init) => {\n      if (!this.state) {\n        return;\n      }\n      this.state.supported = supported;\n      if (!init) {\n        this.toggle(supported);\n      } else if (!supported) {\n        this.hide();\n      }\n    });\n  }\n  /**\n   * Perform action when the navbar size/content changes\n   * @internal\n   */\n  autoSize() {\n  }\n  /**\n   * Checks if the button can be displayed\n   */\n  isSupported() {\n    return true;\n  }\n  /**\n   * Changes the active state of the button\n   */\n  toggleActive(active = !this.state.active) {\n    if (active !== this.state.active) {\n      this.state.active = active;\n      toggleClass(this.container, \"psv-button--active\", this.state.active);\n      if (this.config.iconActive) {\n        this.__setIcon(this.state.active ? this.config.iconActive : this.config.icon);\n      }\n    }\n  }\n  /**\n   * Disables the button\n   */\n  disable() {\n    this.container.classList.add(\"psv-button--disabled\");\n    this.state.enabled = false;\n  }\n  /**\n   * Enables the button\n   */\n  enable() {\n    this.container.classList.remove(\"psv-button--disabled\");\n    this.state.enabled = true;\n  }\n  /**\n   * Collapses the button in the navbar menu\n   */\n  collapse() {\n    this.state.collapsed = true;\n    this.container.style.display = \"none\";\n  }\n  /**\n   * Uncollapses the button from the navbar menu\n   */\n  uncollapse() {\n    this.state.collapsed = false;\n    if (this.state.visible) {\n      this.container.style.display = \"\";\n    }\n  }\n  __setIcon(icon) {\n    this.container.innerHTML = icon;\n    addClasses(this.container.querySelector(\"svg\"), \"psv-button-svg\");\n  }\n};\n\n// src/buttons/CustomButton.ts\nvar CustomButton = class extends AbstractButton {\n  constructor(navbar, config) {\n    super(navbar, {\n      id: config.id ?? `psvButton-${Math.random().toString(36).substring(2)}`,\n      className: `psv-custom-button ${config.className || \"\"}`,\n      hoverScale: false,\n      collapsable: config.collapsable !== false,\n      tabbable: config.tabbable !== false,\n      title: config.title\n    });\n    this.customOnClick = config.onClick;\n    if (config.content) {\n      if (typeof config.content === \"string\") {\n        this.container.innerHTML = config.content;\n      } else {\n        this.container.classList.add(\"psv-custom-button--no-padding\");\n        config.content.style.height = \"100%\";\n        config.content.attachViewer?.(this.viewer);\n        this.container.appendChild(config.content);\n      }\n    }\n    this.state.width = this.container.offsetWidth;\n    if (config.disabled) {\n      this.disable();\n    }\n    if (config.visible === false) {\n      this.hide();\n    }\n  }\n  onClick() {\n    this.customOnClick?.(this.viewer);\n  }\n};\n\n// src/buttons/DescriptionButton.ts\nvar DescriptionButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-description-button\",\n      hoverScale: true,\n      collapsable: false,\n      tabbable: true,\n      icon: ICONS.info\n    });\n    this.mode = 0 /* NONE */;\n    this.viewer.addEventListener(HideNotificationEvent.type, this);\n    this.viewer.addEventListener(ShowNotificationEvent.type, this);\n    this.viewer.addEventListener(HidePanelEvent.type, this);\n    this.viewer.addEventListener(ShowPanelEvent.type, this);\n    this.viewer.addEventListener(ConfigChangedEvent.type, this);\n  }\n  destroy() {\n    this.viewer.removeEventListener(HideNotificationEvent.type, this);\n    this.viewer.removeEventListener(ShowNotificationEvent.type, this);\n    this.viewer.removeEventListener(HidePanelEvent.type, this);\n    this.viewer.removeEventListener(ShowPanelEvent.type, this);\n    this.viewer.removeEventListener(ConfigChangedEvent.type, this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    if (e instanceof ConfigChangedEvent) {\n      e.containsOptions(\"description\") && this.autoSize(true);\n      return;\n    }\n    if (!this.mode) {\n      return;\n    }\n    let closed = false;\n    if (e instanceof HideNotificationEvent) {\n      closed = this.mode === 1 /* NOTIF */;\n    } else if (e instanceof ShowNotificationEvent) {\n      closed = this.mode === 1 /* NOTIF */ && e.notificationId !== IDS.DESCRIPTION;\n    } else if (e instanceof HidePanelEvent) {\n      closed = this.mode === 2 /* PANEL */;\n    } else if (e instanceof ShowPanelEvent) {\n      closed = this.mode === 2 /* PANEL */ && e.panelId !== IDS.DESCRIPTION;\n    }\n    if (closed) {\n      this.toggleActive(false);\n      this.mode = 0 /* NONE */;\n    }\n  }\n  onClick() {\n    if (this.mode) {\n      this.__close();\n    } else {\n      this.__open();\n    }\n  }\n  hide(refresh) {\n    super.hide(refresh);\n    if (this.mode) {\n      this.__close();\n    }\n  }\n  /**\n   * This button can only be refreshed from NavbarCaption\n   * @internal\n   */\n  autoSize(refresh = false) {\n    if (refresh) {\n      const caption = this.viewer.navbar.getButton(\"caption\", false);\n      const captionHidden = caption && !caption.isVisible();\n      const hasDescription = !!this.viewer.config.description;\n      if (captionHidden || hasDescription) {\n        this.show(false);\n      } else {\n        this.hide(false);\n      }\n    }\n  }\n  __close() {\n    switch (this.mode) {\n      case 1 /* NOTIF */:\n        this.viewer.notification.hide(IDS.DESCRIPTION);\n        break;\n      case 2 /* PANEL */:\n        this.viewer.panel.hide(IDS.DESCRIPTION);\n        break;\n      default:\n    }\n  }\n  __open() {\n    this.toggleActive(true);\n    if (this.viewer.config.description) {\n      this.mode = 2 /* PANEL */;\n      this.viewer.panel.show({\n        id: IDS.DESCRIPTION,\n        content: `${this.viewer.config.caption ? `<p>${this.viewer.config.caption}</p>` : \"\"}${this.viewer.config.description}`\n      });\n    } else {\n      this.mode = 1 /* NOTIF */;\n      this.viewer.notification.show({\n        id: IDS.DESCRIPTION,\n        content: this.viewer.config.caption\n      });\n    }\n  }\n};\nDescriptionButton.id = \"description\";\n\n// src/buttons/DownloadButton.ts\nvar DownloadButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      tagName: \"a\",\n      className: \"psv-download-button\",\n      hoverScale: true,\n      collapsable: true,\n      tabbable: true,\n      icon: ICONS.download\n    });\n    this.viewer.addEventListener(ConfigChangedEvent.type, this);\n    this.viewer.addEventListener(PanoramaLoadedEvent.type, this);\n  }\n  destroy() {\n    this.viewer.removeEventListener(ConfigChangedEvent.type, this);\n    this.viewer.removeEventListener(PanoramaLoadedEvent.type, this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    if (e instanceof ConfigChangedEvent) {\n      e.containsOptions(\"downloadUrl\") && this.checkSupported();\n      e.containsOptions(\"downloadUrl\", \"downloadName\") && this.__update();\n    } else if (e instanceof PanoramaLoadedEvent) {\n      this.__update();\n    }\n  }\n  onClick() {\n  }\n  checkSupported() {\n    const adapter = this.viewer.adapter.constructor;\n    const supported = adapter.supportsDownload || this.viewer.config.downloadUrl;\n    if (supported) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n  __update() {\n    const link = this.container;\n    link.href = this.viewer.config.downloadUrl || this.viewer.config.panorama;\n    link.target = \"_blank\";\n    if (link.href.startsWith(\"data:\") && !this.viewer.config.downloadName) {\n      link.download = \"panorama.\" + link.href.substring(0, link.href.indexOf(\";\")).split(\"/\").pop();\n    } else {\n      link.download = this.viewer.config.downloadName || link.href.split(\"/\").pop();\n    }\n  }\n};\nDownloadButton.id = \"download\";\n\n// src/buttons/FullscreenButton.ts\nvar FullscreenButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-fullscreen-button\",\n      hoverScale: true,\n      collapsable: false,\n      tabbable: true,\n      icon: ICONS.fullscreenIn,\n      iconActive: ICONS.fullscreenOut\n    });\n    this.viewer.addEventListener(FullscreenEvent.type, this);\n  }\n  destroy() {\n    this.viewer.removeEventListener(FullscreenEvent.type, this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    if (e instanceof FullscreenEvent) {\n      this.toggleActive(e.fullscreenEnabled);\n    }\n  }\n  onClick() {\n    this.viewer.toggleFullscreen();\n  }\n};\nFullscreenButton.id = \"fullscreen\";\n\n// src/buttons/MenuButton.ts\nvar BUTTON_DATA = \"psvButton\";\nvar MENU_TEMPLATE = (buttons, title) => `\n<div class=\"psv-panel-menu psv-panel-menu--stripped\">\n  <h1 class=\"psv-panel-menu-title\">${ICONS.menu} ${title}</h1>\n  <ul class=\"psv-panel-menu-list\">\n    ${buttons.map(\n  (button) => `\n    <li data-psv-button=\"${button.id}\" class=\"psv-panel-menu-item\" tabindex=\"0\">\n      <span class=\"psv-panel-menu-item-icon\">${button.content}</span>\n      <span class=\"psv-panel-menu-item-label\">${button.title}</span>\n    </li>\n    `\n).join(\"\")}\n  </ul>\n</div>\n`;\nvar MenuButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-menu-button\",\n      hoverScale: true,\n      collapsable: false,\n      tabbable: true,\n      icon: ICONS.menu\n    });\n    this.viewer.addEventListener(ShowPanelEvent.type, this);\n    this.viewer.addEventListener(HidePanelEvent.type, this);\n    super.hide();\n  }\n  destroy() {\n    this.viewer.removeEventListener(ShowPanelEvent.type, this);\n    this.viewer.removeEventListener(HidePanelEvent.type, this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    if (e instanceof ShowPanelEvent) {\n      this.toggleActive(e.panelId === IDS.MENU);\n    } else if (e instanceof HidePanelEvent) {\n      this.toggleActive(false);\n    }\n  }\n  onClick() {\n    if (this.state.active) {\n      this.__hideMenu();\n    } else {\n      this.__showMenu();\n    }\n  }\n  hide(refresh) {\n    super.hide(refresh);\n    this.__hideMenu();\n  }\n  show(refresh) {\n    super.show(refresh);\n    if (this.state.active) {\n      this.__showMenu();\n    }\n  }\n  __showMenu() {\n    this.viewer.panel.show({\n      id: IDS.MENU,\n      content: MENU_TEMPLATE(this.viewer.navbar.collapsed, this.viewer.config.lang.menu),\n      noMargin: true,\n      clickHandler: (target) => {\n        const li = target ? getClosest(target, \".psv-panel-menu-item\") : void 0;\n        const buttonId = li ? li.dataset[BUTTON_DATA] : void 0;\n        if (buttonId) {\n          this.viewer.navbar.getButton(buttonId).onClick();\n          this.__hideMenu();\n        }\n      }\n    });\n  }\n  __hideMenu() {\n    this.viewer.panel.hide(IDS.MENU);\n  }\n};\nMenuButton.id = \"menu\";\n\n// src/buttons/AbstractMoveButton.ts\nfunction getIcon(value) {\n  let angle2 = 0;\n  switch (value) {\n    case 0 /* UP */:\n      angle2 = 90;\n      break;\n    case 1 /* DOWN */:\n      angle2 = -90;\n      break;\n    case 3 /* RIGHT */:\n      angle2 = 180;\n      break;\n    default:\n      angle2 = 0;\n      break;\n  }\n  return ICONS.arrow.replace(\"rotate(0\", `rotate(${angle2}`);\n}\nvar AbstractMoveButton = class extends AbstractButton {\n  constructor(navbar, direction) {\n    super(navbar, {\n      className: \"psv-move-button\",\n      hoverScale: true,\n      collapsable: false,\n      tabbable: true,\n      icon: getIcon(direction)\n    });\n    this.direction = direction;\n    this.handler = new PressHandler();\n    this.container.addEventListener(\"mousedown\", this);\n    this.container.addEventListener(\"keydown\", this);\n    this.container.addEventListener(\"keyup\", this);\n    this.viewer.container.addEventListener(\"mouseup\", this);\n    this.viewer.container.addEventListener(\"touchend\", this);\n  }\n  destroy() {\n    this.__onMouseUp();\n    this.viewer.container.removeEventListener(\"mouseup\", this);\n    this.viewer.container.removeEventListener(\"touchend\", this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    switch (e.type) {\n      case \"mousedown\":\n        this.__onMouseDown();\n        break;\n      case \"mouseup\":\n        this.__onMouseUp();\n        break;\n      case \"touchend\":\n        this.__onMouseUp();\n        break;\n      case \"keydown\":\n        e.key === KEY_CODES.Enter && this.__onMouseDown();\n        break;\n      case \"keyup\":\n        e.key === KEY_CODES.Enter && this.__onMouseUp();\n        break;\n    }\n  }\n  onClick() {\n  }\n  isSupported() {\n    return invertResolvableBoolean(SYSTEM.isTouchEnabled);\n  }\n  __onMouseDown() {\n    if (!this.state.enabled) {\n      return;\n    }\n    const dynamicRoll = {};\n    switch (this.direction) {\n      case 0 /* UP */:\n        dynamicRoll.pitch = false;\n        break;\n      case 1 /* DOWN */:\n        dynamicRoll.pitch = true;\n        break;\n      case 3 /* RIGHT */:\n        dynamicRoll.yaw = false;\n        break;\n      default:\n        dynamicRoll.yaw = true;\n        break;\n    }\n    this.viewer.stopAll();\n    this.viewer.dynamics.position.roll(dynamicRoll);\n    this.handler.down();\n  }\n  __onMouseUp() {\n    if (!this.state.enabled) {\n      return;\n    }\n    this.handler.up(() => {\n      this.viewer.dynamics.position.stop();\n      this.viewer.resetIdleTimer();\n    });\n  }\n};\nAbstractMoveButton.groupId = \"move\";\n\n// src/buttons/MoveDownButton.ts\nvar MoveDownButton = class extends AbstractMoveButton {\n  constructor(navbar) {\n    super(navbar, 1 /* DOWN */);\n  }\n};\nMoveDownButton.id = \"moveDown\";\n\n// src/buttons/MoveLeftButton.ts\nvar MoveLeftButton = class extends AbstractMoveButton {\n  constructor(navbar) {\n    super(navbar, 2 /* LEFT */);\n  }\n};\nMoveLeftButton.id = \"moveLeft\";\n\n// src/buttons/MoveRightButton.ts\nvar MoveRightButton = class extends AbstractMoveButton {\n  constructor(navbar) {\n    super(navbar, 3 /* RIGHT */);\n  }\n};\nMoveRightButton.id = \"moveRight\";\n\n// src/buttons/MoveUpButton.ts\nvar MoveUpButton = class extends AbstractMoveButton {\n  constructor(navbar) {\n    super(navbar, 0 /* UP */);\n  }\n};\nMoveUpButton.id = \"moveUp\";\n\n// src/buttons/AbstractZoomButton.ts\nvar AbstractZoomButton = class extends AbstractButton {\n  constructor(navbar, icon, direction) {\n    super(navbar, {\n      className: \"psv-zoom-button\",\n      hoverScale: true,\n      collapsable: false,\n      tabbable: true,\n      icon\n    });\n    this.direction = direction;\n    this.handler = new PressHandler();\n    this.container.addEventListener(\"mousedown\", this);\n    this.container.addEventListener(\"keydown\", this);\n    this.container.addEventListener(\"keyup\", this);\n    this.viewer.container.addEventListener(\"mouseup\", this);\n    this.viewer.container.addEventListener(\"touchend\", this);\n  }\n  destroy() {\n    this.__onMouseUp();\n    this.viewer.container.removeEventListener(\"mouseup\", this);\n    this.viewer.container.removeEventListener(\"touchend\", this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    switch (e.type) {\n      case \"mousedown\":\n        this.__onMouseDown();\n        break;\n      case \"mouseup\":\n        this.__onMouseUp();\n        break;\n      case \"touchend\":\n        this.__onMouseUp();\n        break;\n      case \"keydown\":\n        e.key === KEY_CODES.Enter && this.__onMouseDown();\n        break;\n      case \"keyup\":\n        e.key === KEY_CODES.Enter && this.__onMouseUp();\n        break;\n    }\n  }\n  onClick() {\n  }\n  isSupported() {\n    return invertResolvableBoolean(SYSTEM.isTouchEnabled);\n  }\n  __onMouseDown() {\n    if (!this.state.enabled) {\n      return;\n    }\n    this.viewer.dynamics.zoom.roll(this.direction === 1 /* OUT */);\n    this.handler.down();\n  }\n  __onMouseUp() {\n    if (!this.state.enabled) {\n      return;\n    }\n    this.handler.up(() => this.viewer.dynamics.zoom.stop());\n  }\n};\nAbstractZoomButton.groupId = \"zoom\";\n\n// src/buttons/ZoomInButton.ts\nvar ZoomInButton = class extends AbstractZoomButton {\n  constructor(navbar) {\n    super(navbar, ICONS.zoomIn, 0 /* IN */);\n  }\n};\nZoomInButton.id = \"zoomIn\";\n\n// src/buttons/ZoomOutButton.ts\nvar ZoomOutButton = class extends AbstractZoomButton {\n  constructor(navbar) {\n    super(navbar, ICONS.zoomOut, 1 /* OUT */);\n  }\n};\nZoomOutButton.id = \"zoomOut\";\n\n// src/buttons/ZoomRangeButton.ts\nvar ZoomRangeButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-zoom-range\",\n      hoverScale: false,\n      collapsable: false,\n      tabbable: false\n    });\n    this.zoomRange = document.createElement(\"div\");\n    this.zoomRange.className = \"psv-zoom-range-line\";\n    this.container.appendChild(this.zoomRange);\n    this.zoomValue = document.createElement(\"div\");\n    this.zoomValue.className = \"psv-zoom-range-handle\";\n    this.zoomRange.appendChild(this.zoomValue);\n    this.slider = new Slider(this.container, \"HORIZONTAL\" /* HORIZONTAL */, (data) => this.__onSliderUpdate(data));\n    this.mediaMinWidth = parseInt(getStyleProperty(this.container, \"max-width\"), 10);\n    this.viewer.addEventListener(ZoomUpdatedEvent.type, this);\n    if (this.viewer.state.ready) {\n      this.__moveZoomValue(this.viewer.getZoomLevel());\n    } else {\n      this.viewer.addEventListener(ReadyEvent.type, this);\n    }\n  }\n  destroy() {\n    this.slider.destroy();\n    this.viewer.removeEventListener(ZoomUpdatedEvent.type, this);\n    this.viewer.removeEventListener(ReadyEvent.type, this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    if (e instanceof ZoomUpdatedEvent) {\n      this.__moveZoomValue(e.zoomLevel);\n    } else if (e instanceof ReadyEvent) {\n      this.__moveZoomValue(this.viewer.getZoomLevel());\n    }\n  }\n  onClick() {\n  }\n  isSupported() {\n    return invertResolvableBoolean(SYSTEM.isTouchEnabled);\n  }\n  autoSize() {\n    if (this.state.supported) {\n      if (this.viewer.state.size.width <= this.mediaMinWidth && this.state.visible) {\n        this.hide(false);\n      } else if (this.viewer.state.size.width > this.mediaMinWidth && !this.state.visible) {\n        this.show(false);\n      }\n    }\n  }\n  __moveZoomValue(level) {\n    this.zoomValue.style.left = level / 100 * this.zoomRange.offsetWidth - this.zoomValue.offsetWidth / 2 + \"px\";\n  }\n  __onSliderUpdate(data) {\n    if (data.mousedown) {\n      this.viewer.zoom(data.value * 100);\n    }\n  }\n};\nZoomRangeButton.id = \"zoomRange\";\nZoomRangeButton.groupId = \"zoom\";\n\n// src/data/config.ts\nimport { MathUtils as MathUtils5 } from \"three\";\n\n// src/plugins/AbstractPlugin.ts\nvar AbstractPlugin = class extends TypedEventTarget {\n  constructor(viewer) {\n    super();\n    this.viewer = viewer;\n  }\n  /**\n   * Initializes the plugin\n   */\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  init() {\n  }\n  /**\n   * Destroys the plugin\n   */\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  destroy() {\n  }\n};\nvar AbstractConfigurablePlugin = class extends AbstractPlugin {\n  constructor(viewer, config) {\n    super(viewer);\n    this.config = this.constructor.configParser(config);\n  }\n  /**\n   * Update options\n   */\n  setOption(option, value) {\n    this.setOptions({ [option]: value });\n  }\n  /**\n   * Update options\n   */\n  setOptions(options) {\n    const rawConfig = {\n      ...this.config,\n      ...options\n    };\n    const ctor = this.constructor;\n    const parser = ctor.configParser;\n    const readonly = ctor.readonlyOptions;\n    const id = ctor.id;\n    for (let [key, value] of Object.entries(options)) {\n      if (!(key in parser.defaults)) {\n        logWarn(`${id}: Unknown option \"${key}\"`);\n        continue;\n      }\n      if (readonly.includes(key)) {\n        logWarn(`${id}: Option \"${key}\" cannot be updated`);\n        continue;\n      }\n      if (key in parser.parsers) {\n        value = parser.parsers[key](value, {\n          rawConfig,\n          defValue: parser.defaults[key]\n        });\n      }\n      this.config[key] = value;\n    }\n  }\n};\nAbstractConfigurablePlugin.readonlyOptions = [];\nfunction pluginInterop(plugin) {\n  if (plugin) {\n    for (const [, p] of [[\"_\", plugin], ...Object.entries(plugin)]) {\n      if (p.prototype instanceof AbstractPlugin) {\n        checkVersion(p.id, p.VERSION, \"5.13.2\");\n        return p;\n      }\n    }\n  }\n  return null;\n}\n\n// src/data/config.ts\nvar DEFAULTS = {\n  panorama: null,\n  container: null,\n  adapter: [EquirectangularAdapter, null],\n  plugins: [],\n  caption: null,\n  description: null,\n  downloadUrl: null,\n  downloadName: null,\n  loadingImg: null,\n  loadingTxt: \"\",\n  // empty string => `lang.loading`\n  size: null,\n  fisheye: 0,\n  minFov: 30,\n  maxFov: 90,\n  defaultZoomLvl: 50,\n  defaultYaw: 0,\n  defaultPitch: 0,\n  sphereCorrection: null,\n  moveSpeed: 1,\n  zoomSpeed: 1,\n  moveInertia: 0.8,\n  mousewheel: true,\n  mousemove: true,\n  mousewheelCtrlKey: false,\n  touchmoveTwoFingers: false,\n  panoData: null,\n  requestHeaders: null,\n  canvasBackground: \"#000\",\n  defaultTransition: {\n    speed: 1500,\n    rotation: true,\n    effect: \"fade\"\n  },\n  rendererParameters: { alpha: true, antialias: true },\n  withCredentials: false,\n  navbar: [\n    \"zoom\",\n    \"move\",\n    \"download\",\n    \"description\",\n    \"caption\",\n    \"fullscreen\"\n  ],\n  lang: {\n    zoom: \"Zoom\",\n    zoomOut: \"Zoom out\",\n    zoomIn: \"Zoom in\",\n    moveUp: \"Move up\",\n    moveDown: \"Move down\",\n    moveLeft: \"Move left\",\n    moveRight: \"Move right\",\n    description: \"Description\",\n    download: \"Download\",\n    fullscreen: \"Fullscreen\",\n    loading: \"Loading...\",\n    menu: \"Menu\",\n    close: \"Close\",\n    twoFingers: \"Use two fingers to navigate\",\n    ctrlZoom: \"Use ctrl + scroll to zoom the image\",\n    loadError: \"The panorama cannot be loaded\",\n    webglError: \"Your browser does not seem to support WebGL\"\n  },\n  keyboard: \"fullscreen\",\n  keyboardActions: {\n    [KEY_CODES.ArrowUp]: \"ROTATE_UP\" /* ROTATE_UP */,\n    [KEY_CODES.ArrowDown]: \"ROTATE_DOWN\" /* ROTATE_DOWN */,\n    [KEY_CODES.ArrowRight]: \"ROTATE_RIGHT\" /* ROTATE_RIGHT */,\n    [KEY_CODES.ArrowLeft]: \"ROTATE_LEFT\" /* ROTATE_LEFT */,\n    [KEY_CODES.PageUp]: \"ZOOM_IN\" /* ZOOM_IN */,\n    [KEY_CODES.PageDown]: \"ZOOM_OUT\" /* ZOOM_OUT */,\n    [KEY_CODES.Plus]: \"ZOOM_IN\" /* ZOOM_IN */,\n    [KEY_CODES.Minus]: \"ZOOM_OUT\" /* ZOOM_OUT */\n  }\n};\nvar READONLY_OPTIONS = {\n  panorama: \"Use setPanorama method to change the panorama\",\n  panoData: \"Use setPanorama method to change the panorama\",\n  container: \"Cannot change viewer container\",\n  adapter: \"Cannot change adapter\",\n  plugins: \"Cannot change plugins\"\n};\nvar CONFIG_PARSERS = {\n  container: (container) => {\n    if (!container) {\n      throw new PSVError(\"No value given for container.\");\n    }\n    return container;\n  },\n  adapter: (adapter, { defValue }) => {\n    if (!adapter) {\n      adapter = defValue;\n    } else if (Array.isArray(adapter)) {\n      adapter = [adapterInterop(adapter[0]), adapter[1]];\n    } else {\n      adapter = [adapterInterop(adapter), null];\n    }\n    if (!adapter[0]) {\n      throw new PSVError(\"An undefined value was given for adapter.\");\n    }\n    if (!adapter[0].id) {\n      throw new PSVError(`Adapter has no id.`);\n    }\n    return adapter;\n  },\n  defaultYaw: (defaultYaw) => {\n    return parseAngle(defaultYaw);\n  },\n  defaultPitch: (defaultPitch) => {\n    return parseAngle(defaultPitch, true);\n  },\n  defaultZoomLvl: (defaultZoomLvl) => {\n    return MathUtils5.clamp(defaultZoomLvl, 0, 100);\n  },\n  minFov: (minFov, { rawConfig }) => {\n    if (rawConfig.maxFov < minFov) {\n      logWarn(\"maxFov cannot be lower than minFov\");\n      minFov = rawConfig.maxFov;\n    }\n    return MathUtils5.clamp(minFov, 1, 179);\n  },\n  maxFov: (maxFov, { rawConfig }) => {\n    if (maxFov < rawConfig.minFov) {\n      maxFov = rawConfig.minFov;\n    }\n    return MathUtils5.clamp(maxFov, 1, 179);\n  },\n  moveInertia: (moveInertia, { defValue }) => {\n    if (moveInertia === true) {\n      return defValue;\n    }\n    if (moveInertia === false) {\n      return 0;\n    }\n    return moveInertia;\n  },\n  lang: (lang) => {\n    return {\n      ...DEFAULTS.lang,\n      ...lang\n    };\n  },\n  keyboardActions: (keyboardActions, { rawConfig }) => {\n    if (rawConfig.keyboard && typeof rawConfig.keyboard === \"object\") {\n      return rawConfig.keyboard;\n    }\n    return keyboardActions;\n  },\n  fisheye: (fisheye) => {\n    if (fisheye === true) {\n      return 1;\n    } else if (fisheye === false) {\n      return 0;\n    }\n    return fisheye;\n  },\n  requestHeaders: (requestHeaders) => {\n    if (requestHeaders && typeof requestHeaders === \"object\") {\n      return () => requestHeaders;\n    }\n    if (typeof requestHeaders === \"function\") {\n      return requestHeaders;\n    }\n    return null;\n  },\n  defaultTransition: (defaultTransition, { defValue }) => {\n    if (defaultTransition === null || defaultTransition.speed === 0) {\n      return null;\n    } else {\n      return { ...defValue, ...defaultTransition };\n    }\n  },\n  rendererParameters: (rendererParameters, { defValue }) => ({\n    ...rendererParameters,\n    ...defValue\n  }),\n  plugins: (plugins) => {\n    return plugins.map((plugin, i) => {\n      if (Array.isArray(plugin)) {\n        plugin = [pluginInterop(plugin[0]), plugin[1]];\n      } else {\n        plugin = [pluginInterop(plugin), null];\n      }\n      if (!plugin[0]) {\n        throw new PSVError(`An undefined value was given for plugin ${i}.`);\n      }\n      if (!plugin[0].id) {\n        throw new PSVError(`Plugin ${i} has no id.`);\n      }\n      return plugin;\n    });\n  },\n  navbar: (navbar) => {\n    if (navbar === false) {\n      return null;\n    }\n    if (navbar === true) {\n      return clone(DEFAULTS.navbar);\n    }\n    if (typeof navbar === \"string\") {\n      return navbar.split(/[ ,]/);\n    }\n    return navbar;\n  }\n};\nvar getViewerConfig = getConfigParser(DEFAULTS, CONFIG_PARSERS);\n\n// src/components/NavbarCaption.ts\nvar NavbarCaption = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-caption\",\n      hoverScale: false,\n      collapsable: false,\n      tabbable: true\n    });\n    this.contentWidth = 0;\n    this.state.width = 0;\n    this.contentElt = document.createElement(\"div\");\n    this.contentElt.className = \"psv-caption-content\";\n    this.container.appendChild(this.contentElt);\n    this.setCaption(this.viewer.config.caption);\n  }\n  hide() {\n    this.contentElt.style.display = \"none\";\n    this.state.visible = false;\n  }\n  show() {\n    this.contentElt.style.display = \"\";\n    this.state.visible = true;\n  }\n  onClick() {\n  }\n  /**\n   * Changes the caption\n   */\n  setCaption(html) {\n    this.show();\n    this.contentElt.innerHTML = html ?? \"\";\n    if (this.contentElt.innerHTML) {\n      this.contentWidth = this.contentElt.offsetWidth;\n    } else {\n      this.contentWidth = 0;\n    }\n    this.autoSize();\n  }\n  /**\n   * Toggles content and icon depending on available space\n   */\n  autoSize() {\n    this.toggle(this.container.offsetWidth >= this.contentWidth);\n    this.__refreshButton();\n  }\n  __refreshButton() {\n    this.viewer.navbar.getButton(DescriptionButton.id, false)?.autoSize(true);\n  }\n};\nNavbarCaption.id = \"caption\";\n\n// src/components/Navbar.ts\nvar AVAILABLE_BUTTONS = {};\nvar AVAILABLE_GROUPS = {};\nfunction registerButton(button, defaultPosition) {\n  if (!button.id) {\n    throw new PSVError(\"Button id is required\");\n  }\n  AVAILABLE_BUTTONS[button.id] = button;\n  if (button.groupId) {\n    (AVAILABLE_GROUPS[button.groupId] = AVAILABLE_GROUPS[button.groupId] || []).push(button);\n  }\n  if (defaultPosition) {\n    const navbar = DEFAULTS.navbar;\n    switch (defaultPosition) {\n      case \"start\":\n        navbar.unshift(button.id);\n        break;\n      case \"end\":\n        navbar.push(button.id);\n        break;\n      default: {\n        const [id, pos] = defaultPosition.split(\":\");\n        const idx = navbar.indexOf(id);\n        if (!id || !pos || idx === -1) {\n          throw new PSVError(`Invalid defaultPosition ${defaultPosition}`);\n        }\n        navbar.splice(idx + (pos === \"right\" ? 1 : 0), 0, button.id);\n      }\n    }\n  }\n}\n[\n  ZoomOutButton,\n  ZoomRangeButton,\n  ZoomInButton,\n  DescriptionButton,\n  NavbarCaption,\n  DownloadButton,\n  FullscreenButton,\n  MoveLeftButton,\n  MoveRightButton,\n  MoveUpButton,\n  MoveDownButton\n].forEach((btn) => registerButton(btn));\nvar Navbar = class extends AbstractComponent {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer, {\n      className: `psv-navbar ${CAPTURE_EVENTS_CLASS}`\n    });\n    /**\n     * @internal\n     */\n    this.collapsed = [];\n    this.state.visible = false;\n  }\n  /**\n   * Shows the navbar\n   */\n  show() {\n    this.viewer.container.classList.add(\"psv--has-navbar\");\n    this.container.classList.add(\"psv-navbar--open\");\n    this.state.visible = true;\n  }\n  /**\n   * Hides the navbar\n   */\n  hide() {\n    this.viewer.container.classList.remove(\"psv--has-navbar\");\n    this.container.classList.remove(\"psv-navbar--open\");\n    this.state.visible = false;\n  }\n  /**\n   * Change the buttons visible on the navbar\n   */\n  setButtons(buttons) {\n    this.children.slice().forEach((item) => item.destroy());\n    this.children.length = 0;\n    if (buttons.indexOf(NavbarCaption.id) !== -1 && buttons.indexOf(DescriptionButton.id) === -1) {\n      buttons.splice(buttons.indexOf(NavbarCaption.id), 0, DescriptionButton.id);\n    }\n    buttons.forEach((button) => {\n      if (typeof button === \"object\") {\n        new CustomButton(this, button);\n      } else if (AVAILABLE_BUTTONS[button]) {\n        new AVAILABLE_BUTTONS[button](this);\n      } else if (AVAILABLE_GROUPS[button]) {\n        AVAILABLE_GROUPS[button].forEach((buttonCtor) => {\n          new buttonCtor(this);\n        });\n      } else {\n        logWarn(`Unknown button ${button}`);\n      }\n    });\n    new MenuButton(this);\n    this.children.forEach((item) => {\n      if (item instanceof AbstractButton) {\n        item.checkSupported();\n      }\n    });\n    this.autoSize();\n  }\n  /**\n   * Changes the navbar caption\n   */\n  setCaption(html) {\n    this.children.some((item) => {\n      if (item instanceof NavbarCaption) {\n        item.setCaption(html);\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n  /**\n   * Returns a button by its identifier\n   */\n  getButton(id, warnNotFound = true) {\n    const button = this.children.find((item) => {\n      return item instanceof AbstractButton && item.id === id;\n    });\n    if (!button && warnNotFound) {\n      logWarn(`button \"${id}\" not found in the navbar`);\n    }\n    return button;\n  }\n  /**\n   * Try to focus a button, will focus the first button if the requested button does not exist.\n   */\n  focusButton(id) {\n    if (this.isVisible()) {\n      (this.getButton(id, false)?.container || this.container.firstElementChild)?.focus();\n    }\n  }\n  /**\n   * Automatically collapses buttons\n   * @internal\n   */\n  autoSize() {\n    this.children.forEach((child) => {\n      if (child instanceof AbstractButton) {\n        child.autoSize();\n      }\n    });\n    const availableWidth = this.container.offsetWidth;\n    let totalWidth = 0;\n    const collapsableButtons = [];\n    this.children.forEach((item) => {\n      if (item.isVisible() && item instanceof AbstractButton) {\n        totalWidth += item.width;\n        if (item.collapsable) {\n          collapsableButtons.push(item);\n        }\n      }\n    });\n    if (totalWidth === 0) {\n      return;\n    }\n    if (availableWidth < totalWidth && collapsableButtons.length > 0) {\n      collapsableButtons.forEach((item) => item.collapse());\n      this.collapsed = collapsableButtons;\n      this.getButton(MenuButton.id).show(false);\n    } else if (availableWidth >= totalWidth && this.collapsed.length > 0) {\n      this.collapsed.forEach((item) => item.uncollapse());\n      this.collapsed = [];\n      this.getButton(MenuButton.id).hide(false);\n    }\n    this.getButton(NavbarCaption.id, false)?.autoSize();\n  }\n};\n\n// src/data/cache.ts\nimport { Cache as ThreeCache } from \"three\";\nThreeCache.enabled = false;\nvar Cache = {\n  enabled: true,\n  maxItems: 10,\n  ttl: 10 * 60,\n  items: {},\n  purgeInterval: null,\n  init() {\n    if (ThreeCache.enabled) {\n      logWarn(\"ThreeJS cache should be disabled\");\n      ThreeCache.enabled = false;\n    }\n    if (!this.purgeInterval && this.enabled) {\n      this.purgeInterval = setInterval(() => this.purge(), 60 * 1e3);\n    }\n  },\n  add(url, key, data) {\n    if (this.enabled && key) {\n      this.items[key] = this.items[key] ?? { files: {}, lastAccess: null };\n      this.items[key].files[url] = data;\n      this.items[key].lastAccess = Date.now();\n    }\n  },\n  get(url, key) {\n    if (this.enabled && key && this.items[key]) {\n      this.items[key].lastAccess = Date.now();\n      return this.items[key].files[url];\n    }\n  },\n  remove(url, key) {\n    if (this.enabled && key && this.items[key]) {\n      delete this.items[key].files[url];\n      if (Object.keys(this.items[key].files).length === 0) {\n        delete this.items[key];\n      }\n    }\n  },\n  purge() {\n    Object.entries(this.items).sort(([, a], [, b]) => {\n      return b.lastAccess - a.lastAccess;\n    }).forEach(([key, { lastAccess }], index) => {\n      if (index > 0 && (Date.now() - lastAccess >= this.ttl * 1e3 || index >= this.maxItems)) {\n        delete this.items[key];\n      }\n    });\n  }\n};\n\n// src/components/Loader.ts\nimport { MathUtils as MathUtils6 } from \"three\";\nvar Loader = class extends AbstractComponent {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer, { className: \"psv-loader-container\" });\n    this.loader = document.createElement(\"div\");\n    this.loader.className = \"psv-loader\";\n    this.container.appendChild(this.loader);\n    this.size = this.loader.offsetWidth;\n    this.canvas = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    this.canvas.setAttribute(\"class\", \"psv-loader-canvas\");\n    this.canvas.setAttribute(\"viewBox\", `0 0 ${this.size} ${this.size}`);\n    this.loader.appendChild(this.canvas);\n    this.textColor = getStyleProperty(this.loader, \"color\");\n    this.color = getStyleProperty(this.canvas, \"color\");\n    this.border = parseInt(getStyleProperty(this.loader, \"--psv-loader-border\"), 10);\n    this.thickness = parseInt(getStyleProperty(this.loader, \"--psv-loader-tickness\"), 10);\n    const halfSize = this.size / 2;\n    this.canvas.innerHTML = `\n            <circle cx=\"${halfSize}\" cy=\"${halfSize}\" r=\"${halfSize}\" fill=\"${this.color}\"/>\n            <path d=\"\" fill=\"none\" stroke=\"${this.textColor}\" stroke-width=\"${this.thickness}\" stroke-linecap=\"round\"/>\n        `;\n    this.viewer.addEventListener(ConfigChangedEvent.type, this);\n    this.__updateContent();\n    this.hide();\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.viewer.removeEventListener(ConfigChangedEvent.type, this);\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    if (e instanceof ConfigChangedEvent) {\n      e.containsOptions(\"loadingImg\", \"loadingTxt\", \"lang\") && this.__updateContent();\n    }\n  }\n  /**\n   * Sets the loader progression\n   */\n  setProgress(value) {\n    this.container.classList.remove(\"psv-loader--undefined\");\n    const angle2 = MathUtils6.clamp(value, 0, 99.999) / 100 * Math.PI * 2;\n    const halfSize = this.size / 2;\n    const startX = halfSize;\n    const startY = this.thickness / 2 + this.border;\n    const radius = (this.size - this.thickness) / 2 - this.border;\n    const endX = Math.sin(angle2) * radius + halfSize;\n    const endY = -Math.cos(angle2) * radius + halfSize;\n    const largeArc = value > 50 ? \"1\" : \"0\";\n    this.canvas.querySelector(\"path\").setAttributeNS(\n      null,\n      \"d\",\n      `M ${startX} ${startY} A ${radius} ${radius} 0 ${largeArc} 1 ${endX} ${endY}`\n    );\n  }\n  /**\n   * Animates the loader with an unknown state\n   */\n  showUndefined() {\n    this.show();\n    this.setProgress(25);\n    this.container.classList.add(\"psv-loader--undefined\");\n  }\n  __updateContent() {\n    const current = this.loader.querySelector(\".psv-loader-image, .psv-loader-text\");\n    if (current) {\n      this.loader.removeChild(current);\n    }\n    let inner;\n    if (this.viewer.config.loadingImg) {\n      inner = document.createElement(\"img\");\n      inner.className = \"psv-loader-image\";\n      inner.src = this.viewer.config.loadingImg;\n    } else if (this.viewer.config.loadingTxt !== null) {\n      inner = document.createElement(\"div\");\n      inner.className = \"psv-loader-text\";\n      inner.innerHTML = this.viewer.config.loadingTxt || this.viewer.config.lang.loading;\n    }\n    if (inner) {\n      const size = Math.round(Math.sqrt(2 * Math.pow(this.size / 2 - this.thickness / 2 - this.border, 2)));\n      inner.style.maxWidth = size + \"px\";\n      inner.style.maxHeight = size + \"px\";\n      this.loader.appendChild(inner);\n    }\n  }\n};\n\n// src/components/Notification.ts\nvar Notification = class extends AbstractComponent {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer, {\n      className: \"psv-notification\"\n    });\n    /**\n     * @internal\n     */\n    this.state = {\n      visible: false,\n      contentId: null,\n      timeout: null\n    };\n    this.content = document.createElement(\"div\");\n    this.content.className = \"psv-notification-content\";\n    this.container.appendChild(this.content);\n    this.content.addEventListener(\"click\", () => this.hide());\n  }\n  /**\n   * Checks if the notification is visible\n   */\n  isVisible(id) {\n    return this.state.visible && (!id || !this.state.contentId || this.state.contentId === id);\n  }\n  /**\n   * @throws {@link PSVError} always\n   * @internal\n   */\n  toggle() {\n    throw new PSVError(\"Notification cannot be toggled\");\n  }\n  /**\n   * Displays a notification on the viewer\n   *\n   * @example\n   * viewer.showNotification({ content: 'Hello world', timeout: 5000 })\n   * @example\n   * viewer.showNotification('Hello world')\n   */\n  show(config) {\n    if (this.state.timeout) {\n      clearTimeout(this.state.timeout);\n      this.state.timeout = null;\n    }\n    if (typeof config === \"string\") {\n      config = { content: config };\n    }\n    this.state.contentId = config.id || null;\n    this.content.innerHTML = config.content;\n    this.container.classList.add(\"psv-notification--visible\");\n    this.state.visible = true;\n    this.viewer.dispatchEvent(new ShowNotificationEvent(this.state.contentId));\n    if (config.timeout) {\n      this.state.timeout = setTimeout(() => this.hide(this.state.contentId), config.timeout);\n    }\n  }\n  /**\n   * Hides the notification\n   */\n  hide(id) {\n    if (this.isVisible(id)) {\n      const contentId = this.state.contentId;\n      this.container.classList.remove(\"psv-notification--visible\");\n      this.state.visible = false;\n      this.state.contentId = null;\n      this.viewer.dispatchEvent(new HideNotificationEvent(contentId));\n    }\n  }\n};\n\n// src/components/Overlay.ts\nvar Overlay = class extends AbstractComponent {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer, {\n      className: `psv-overlay ${CAPTURE_EVENTS_CLASS}`\n    });\n    /**\n     * @internal\n     */\n    this.state = {\n      visible: false,\n      contentId: null,\n      dismissible: true\n    };\n    this.image = document.createElement(\"div\");\n    this.image.className = \"psv-overlay-image\";\n    this.container.appendChild(this.image);\n    this.title = document.createElement(\"div\");\n    this.title.className = \"psv-overlay-title\";\n    this.container.appendChild(this.title);\n    this.text = document.createElement(\"div\");\n    this.text.className = \"psv-overlay-text\";\n    this.container.appendChild(this.text);\n    this.container.addEventListener(\"click\", this);\n    this.viewer.addEventListener(KeypressEvent.type, this);\n    super.hide();\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.viewer.removeEventListener(KeypressEvent.type, this);\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    if (e.type === \"click\") {\n      if (this.isVisible() && this.state.dismissible) {\n        this.hide();\n        e.stopPropagation();\n      }\n    } else if (e instanceof KeypressEvent) {\n      if (this.isVisible() && this.state.dismissible && e.key === KEY_CODES.Escape) {\n        this.hide();\n        e.preventDefault();\n      }\n    }\n  }\n  /**\n   * Checks if the overlay is visible\n   */\n  isVisible(id) {\n    return this.state.visible && (!id || !this.state.contentId || this.state.contentId === id);\n  }\n  /**\n   * @throws {@link PSVError} always\n   * @internal\n   */\n  toggle() {\n    throw new PSVError(\"Overlay cannot be toggled\");\n  }\n  /**\n   * Displays an overlay on the viewer\n   */\n  show(config) {\n    if (typeof config === \"string\") {\n      config = { title: config };\n    }\n    this.state.contentId = config.id || null;\n    this.state.dismissible = config.dismissible !== false;\n    this.image.innerHTML = config.image || \"\";\n    this.title.innerHTML = config.title || \"\";\n    this.text.innerHTML = config.text || \"\";\n    super.show();\n    this.viewer.dispatchEvent(new ShowOverlayEvent(this.state.contentId));\n  }\n  /**\n   * Hides the overlay\n   */\n  hide(id) {\n    if (this.isVisible(id)) {\n      const contentId = this.state.contentId;\n      super.hide();\n      this.state.contentId = null;\n      this.viewer.dispatchEvent(new HideOverlayEvent(contentId));\n    }\n  }\n};\n\n// src/components/Panel.ts\nvar PANEL_MIN_WIDTH = 200;\nvar PANEL_CLASS_NO_INTERACTION = \"psv-panel-content--no-interaction\";\nvar Panel = class extends AbstractComponent {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer, {\n      className: `psv-panel ${CAPTURE_EVENTS_CLASS}`\n    });\n    /**\n     * @internal\n     */\n    this.state = {\n      visible: false,\n      contentId: null,\n      mouseX: 0,\n      mouseY: 0,\n      mousedown: false,\n      clickHandler: null,\n      keyHandler: null,\n      width: {}\n    };\n    const resizer = document.createElement(\"div\");\n    resizer.className = \"psv-panel-resizer\";\n    this.container.appendChild(resizer);\n    const closeBtn = document.createElement(\"div\");\n    closeBtn.className = \"psv-panel-close-button\";\n    closeBtn.innerHTML = ICONS.close;\n    closeBtn.title = viewer.config.lang.close;\n    this.container.appendChild(closeBtn);\n    this.content = document.createElement(\"div\");\n    this.content.className = \"psv-panel-content\";\n    this.container.appendChild(this.content);\n    closeBtn.addEventListener(\"click\", () => this.hide());\n    resizer.addEventListener(\"mousedown\", this);\n    resizer.addEventListener(\"touchstart\", this);\n    this.viewer.container.addEventListener(\"mouseup\", this);\n    this.viewer.container.addEventListener(\"touchend\", this);\n    this.viewer.container.addEventListener(\"mousemove\", this);\n    this.viewer.container.addEventListener(\"touchmove\", this);\n    this.viewer.addEventListener(KeypressEvent.type, this);\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.viewer.removeEventListener(KeypressEvent.type, this);\n    this.viewer.container.removeEventListener(\"mousemove\", this);\n    this.viewer.container.removeEventListener(\"touchmove\", this);\n    this.viewer.container.removeEventListener(\"mouseup\", this);\n    this.viewer.container.removeEventListener(\"touchend\", this);\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case \"mousedown\":\n        this.__onMouseDown(e);\n        break;\n      case \"touchstart\":\n        this.__onTouchStart(e);\n        break;\n      case \"mousemove\":\n        this.__onMouseMove(e);\n        break;\n      case \"touchmove\":\n        this.__onTouchMove(e);\n        break;\n      case \"mouseup\":\n        this.__onMouseUp(e);\n        break;\n      case \"touchend\":\n        this.__onTouchEnd(e);\n        break;\n      case KeypressEvent.type:\n        this.__onKeyPress(e);\n        break;\n    }\n  }\n  /**\n   * Checks if the panel is visible\n   */\n  isVisible(id) {\n    return this.state.visible && (!id || !this.state.contentId || this.state.contentId === id);\n  }\n  /**\n   * @throws {@link PSVError} always\n   * @internal\n   */\n  toggle() {\n    throw new PSVError(\"Panel cannot be toggled\");\n  }\n  /**\n   * Shows the panel\n   */\n  show(config) {\n    if (typeof config === \"string\") {\n      config = { content: config };\n    }\n    const wasVisible = this.isVisible(config.id);\n    this.state.contentId = config.id || null;\n    this.state.visible = true;\n    if (this.state.clickHandler) {\n      this.content.removeEventListener(\"click\", this.state.clickHandler);\n      this.content.removeEventListener(\"keydown\", this.state.keyHandler);\n      this.state.clickHandler = null;\n      this.state.keyHandler = null;\n    }\n    if (config.id && this.state.width[config.id]) {\n      this.container.style.width = this.state.width[config.id];\n    } else if (config.width) {\n      this.container.style.width = config.width;\n    } else {\n      this.container.style.width = null;\n    }\n    this.content.innerHTML = config.content;\n    this.content.scrollTop = 0;\n    this.container.classList.add(\"psv-panel--open\");\n    toggleClass(this.content, \"psv-panel-content--no-margin\", config.noMargin === true);\n    if (config.clickHandler) {\n      this.state.clickHandler = (e) => {\n        config.clickHandler(getEventTarget(e));\n      };\n      this.state.keyHandler = (e) => {\n        if (e.key === KEY_CODES.Enter) {\n          config.clickHandler(getEventTarget(e));\n        }\n      };\n      this.content.addEventListener(\"click\", this.state.clickHandler);\n      this.content.addEventListener(\"keydown\", this.state.keyHandler);\n      if (!wasVisible) {\n        setTimeout(() => {\n          this.content.querySelector(\"a,button,[tabindex]\")?.focus();\n        }, 300);\n      }\n    }\n    this.viewer.dispatchEvent(new ShowPanelEvent(this.state.contentId));\n  }\n  /**\n   * Hides the panel\n   */\n  hide(id) {\n    if (this.isVisible(id)) {\n      const contentId = this.state.contentId;\n      this.state.visible = false;\n      this.state.contentId = null;\n      this.content.innerHTML = null;\n      this.container.classList.remove(\"psv-panel--open\");\n      if (this.state.clickHandler) {\n        this.content.removeEventListener(\"click\", this.state.clickHandler);\n        this.content.removeEventListener(\"keydown\", this.state.keyHandler);\n        this.state.clickHandler = null;\n        this.state.keyHandler = null;\n      }\n      this.viewer.dispatchEvent(new HidePanelEvent(contentId));\n    }\n  }\n  __onMouseDown(evt) {\n    evt.stopPropagation();\n    this.__startResize(evt.clientX, evt.clientY);\n  }\n  __onTouchStart(evt) {\n    evt.stopPropagation();\n    if (evt.touches.length === 1) {\n      const touch = evt.touches[0];\n      this.__startResize(touch.clientX, touch.clientY);\n    }\n  }\n  __onMouseUp(evt) {\n    if (this.state.mousedown) {\n      evt.stopPropagation();\n      this.state.mousedown = false;\n      this.content.classList.remove(PANEL_CLASS_NO_INTERACTION);\n    }\n  }\n  __onTouchEnd(evt) {\n    if (this.state.mousedown) {\n      evt.stopPropagation();\n      if (evt.touches.length === 0) {\n        this.state.mousedown = false;\n        this.content.classList.remove(PANEL_CLASS_NO_INTERACTION);\n      }\n    }\n  }\n  __onMouseMove(evt) {\n    if (this.state.mousedown) {\n      evt.stopPropagation();\n      this.__resize(evt.clientX, evt.clientY);\n    }\n  }\n  __onTouchMove(evt) {\n    if (this.state.mousedown) {\n      const touch = evt.touches[0];\n      this.__resize(touch.clientX, touch.clientY);\n    }\n  }\n  __onKeyPress(evt) {\n    if (this.isVisible() && evt.key === KEY_CODES.Escape) {\n      this.hide();\n      evt.preventDefault();\n    }\n  }\n  __startResize(clientX, clientY) {\n    this.state.mouseX = clientX;\n    this.state.mouseY = clientY;\n    this.state.mousedown = true;\n    this.content.classList.add(PANEL_CLASS_NO_INTERACTION);\n  }\n  __resize(clientX, clientY) {\n    const x = clientX;\n    const y = clientY;\n    const width = Math.max(PANEL_MIN_WIDTH, this.container.offsetWidth - (x - this.state.mouseX)) + \"px\";\n    if (this.state.contentId) {\n      this.state.width[this.state.contentId] = width;\n    }\n    this.container.style.width = width;\n    this.state.mouseX = x;\n    this.state.mouseY = y;\n  }\n};\n\n// src/components/Tooltip.ts\nvar Tooltip = class extends AbstractComponent {\n  /**\n   * @internal\n   */\n  constructor(viewer, config) {\n    super(viewer, {\n      className: \"psv-tooltip\"\n    });\n    /**\n     * @internal\n     */\n    this.state = {\n      visible: true,\n      arrow: 0,\n      border: 0,\n      state: 0 /* NONE */,\n      width: 0,\n      height: 0,\n      pos: \"\",\n      config: null,\n      data: null,\n      hideTimeout: null\n    };\n    this.content = document.createElement(\"div\");\n    this.content.className = \"psv-tooltip-content\";\n    this.container.appendChild(this.content);\n    this.arrow = document.createElement(\"div\");\n    this.arrow.className = \"psv-tooltip-arrow\";\n    this.container.appendChild(this.arrow);\n    this.container.addEventListener(\"transitionend\", this);\n    this.container.addEventListener(\"touchdown\", (e) => e.stopPropagation());\n    this.container.addEventListener(\"mousedown\", (e) => e.stopPropagation());\n    this.container.style.top = \"-1000px\";\n    this.container.style.left = \"-1000px\";\n    this.show(config);\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    if (e.type === \"transitionend\") {\n      this.__onTransitionEnd(e);\n    }\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    clearTimeout(this.state.hideTimeout);\n    delete this.state.data;\n    super.destroy();\n  }\n  /**\n   * @throws {@link PSVError} always\n   * @internal\n   */\n  toggle() {\n    throw new PSVError(\"Tooltip cannot be toggled\");\n  }\n  /**\n   * Displays the tooltip on the viewer\n   * @internal\n   */\n  show(config) {\n    if (this.state.state !== 0 /* NONE */) {\n      throw new PSVError(\"Initialized tooltip cannot be re-initialized\");\n    }\n    if (config.className) {\n      addClasses(this.container, config.className);\n    }\n    if (config.style) {\n      Object.assign(this.container.style, config.style);\n    }\n    this.state.state = 3 /* READY */;\n    this.update(config.content, config);\n    this.state.data = config.data;\n    this.state.state = 1 /* SHOWING */;\n    this.viewer.dispatchEvent(new ShowTooltipEvent(this, this.state.data));\n    this.__waitImages();\n  }\n  /**\n   * Updates the content of the tooltip, optionally with a new position\n   * @throws {@link PSVError} if the configuration is invalid\n   */\n  update(content, config) {\n    this.content.innerHTML = content;\n    const rect = this.container.getBoundingClientRect();\n    this.state.width = rect.right - rect.left;\n    this.state.height = rect.bottom - rect.top;\n    this.state.arrow = parseInt(getStyleProperty(this.arrow, \"border-top-width\"), 10);\n    this.state.border = parseInt(getStyleProperty(this.container, \"border-top-left-radius\"), 10);\n    this.move(config ?? this.state.config);\n    this.__waitImages();\n  }\n  /**\n   * Moves the tooltip to a new position\n   * @throws {@link PSVError} if the configuration is invalid\n   */\n  move(config) {\n    if (this.state.state !== 1 /* SHOWING */ && this.state.state !== 3 /* READY */) {\n      throw new PSVError(\"Uninitialized tooltip cannot be moved\");\n    }\n    config.box = config.box ?? this.state.config?.box ?? { width: 0, height: 0 };\n    this.state.config = config;\n    const t = this.container;\n    const a = this.arrow;\n    const style = {\n      posClass: cleanCssPosition(config.position, { allowCenter: false, cssOrder: false }) || [\"top\", \"center\"],\n      width: this.state.width,\n      height: this.state.height,\n      top: 0,\n      left: 0,\n      arrowTop: 0,\n      arrowLeft: 0\n    };\n    this.__computeTooltipPosition(style, config);\n    let swapY = null;\n    let swapX = null;\n    if (style.top < 0) {\n      swapY = \"bottom\";\n    } else if (style.top + style.height > this.viewer.state.size.height) {\n      swapY = \"top\";\n    }\n    if (style.left < 0) {\n      swapX = \"right\";\n    } else if (style.left + style.width > this.viewer.state.size.width) {\n      swapX = \"left\";\n    }\n    if (swapX || swapY) {\n      const ordered = cssPositionIsOrdered(style.posClass);\n      if (swapY) {\n        style.posClass[ordered ? 0 : 1] = swapY;\n      }\n      if (swapX) {\n        style.posClass[ordered ? 1 : 0] = swapX;\n      }\n      this.__computeTooltipPosition(style, config);\n    }\n    t.style.top = style.top + \"px\";\n    t.style.left = style.left + \"px\";\n    a.style.top = style.arrowTop + \"px\";\n    a.style.left = style.arrowLeft + \"px\";\n    const newPos = style.posClass.join(\"-\");\n    if (newPos !== this.state.pos) {\n      t.classList.remove(`psv-tooltip--${this.state.pos}`);\n      this.state.pos = newPos;\n      t.classList.add(`psv-tooltip--${this.state.pos}`);\n    }\n  }\n  /**\n   * Hides the tooltip\n   */\n  hide() {\n    this.container.classList.remove(\"psv-tooltip--visible\");\n    this.state.state = 2 /* HIDING */;\n    this.viewer.dispatchEvent(new HideTooltipEvent(this.state.data));\n    const duration = parseFloat(getStyleProperty(this.container, \"transition-duration\"));\n    this.state.hideTimeout = setTimeout(() => {\n      this.destroy();\n    }, duration * 2);\n  }\n  /**\n   * Finalize transition\n   */\n  __onTransitionEnd(e) {\n    if (e.propertyName === \"transform\") {\n      switch (this.state.state) {\n        case 1 /* SHOWING */:\n          this.container.classList.add(\"psv-tooltip--visible\");\n          this.state.state = 3 /* READY */;\n          break;\n        case 2 /* HIDING */:\n          this.state.state = 0 /* NONE */;\n          this.destroy();\n          break;\n        default:\n      }\n    }\n  }\n  /**\n   * Computes the position of the tooltip and its arrow\n   */\n  __computeTooltipPosition(style, config) {\n    const arrow = this.state.arrow;\n    const top = config.top;\n    const height = style.height;\n    const left = config.left;\n    const width = style.width;\n    const offsetSide = arrow + this.state.border;\n    const offsetX = config.box.width / 2 + arrow * 2;\n    const offsetY = config.box.height / 2 + arrow * 2;\n    switch (style.posClass.join(\"-\")) {\n      case \"top-left\":\n        style.top = top - offsetY - height;\n        style.left = left + offsetSide - width;\n        style.arrowTop = height;\n        style.arrowLeft = width - offsetSide - arrow;\n        break;\n      case \"top-center\":\n        style.top = top - offsetY - height;\n        style.left = left - width / 2;\n        style.arrowTop = height;\n        style.arrowLeft = width / 2 - arrow;\n        break;\n      case \"top-right\":\n        style.top = top - offsetY - height;\n        style.left = left - offsetSide;\n        style.arrowTop = height;\n        style.arrowLeft = arrow;\n        break;\n      case \"bottom-left\":\n        style.top = top + offsetY;\n        style.left = left + offsetSide - width;\n        style.arrowTop = -arrow * 2;\n        style.arrowLeft = width - offsetSide - arrow;\n        break;\n      case \"bottom-center\":\n        style.top = top + offsetY;\n        style.left = left - width / 2;\n        style.arrowTop = -arrow * 2;\n        style.arrowLeft = width / 2 - arrow;\n        break;\n      case \"bottom-right\":\n        style.top = top + offsetY;\n        style.left = left - offsetSide;\n        style.arrowTop = -arrow * 2;\n        style.arrowLeft = arrow;\n        break;\n      case \"left-top\":\n        style.top = top + offsetSide - height;\n        style.left = left - offsetX - width;\n        style.arrowTop = height - offsetSide - arrow;\n        style.arrowLeft = width;\n        break;\n      case \"center-left\":\n        style.top = top - height / 2;\n        style.left = left - offsetX - width;\n        style.arrowTop = height / 2 - arrow;\n        style.arrowLeft = width;\n        break;\n      case \"left-bottom\":\n        style.top = top - offsetSide;\n        style.left = left - offsetX - width;\n        style.arrowTop = arrow;\n        style.arrowLeft = width;\n        break;\n      case \"right-top\":\n        style.top = top + offsetSide - height;\n        style.left = left + offsetX;\n        style.arrowTop = height - offsetSide - arrow;\n        style.arrowLeft = -arrow * 2;\n        break;\n      case \"center-right\":\n        style.top = top - height / 2;\n        style.left = left + offsetX;\n        style.arrowTop = height / 2 - arrow;\n        style.arrowLeft = -arrow * 2;\n        break;\n      case \"right-bottom\":\n        style.top = top - offsetSide;\n        style.left = left + offsetX;\n        style.arrowTop = arrow;\n        style.arrowLeft = -arrow * 2;\n        break;\n    }\n  }\n  /**\n   * If the tooltip contains images, recompute its size once they are loaded\n   */\n  __waitImages() {\n    const images = this.content.querySelectorAll(\"img\");\n    if (images.length > 0) {\n      const promises = [];\n      images.forEach((image) => {\n        if (!image.complete) {\n          promises.push(\n            new Promise((resolve) => {\n              image.onload = resolve;\n              image.onerror = resolve;\n            })\n          );\n        }\n      });\n      if (promises.length) {\n        Promise.all(promises).then(() => {\n          if (this.state.state === 1 /* SHOWING */ || this.state.state === 3 /* READY */) {\n            const rect = this.container.getBoundingClientRect();\n            this.state.width = rect.right - rect.left;\n            this.state.height = rect.bottom - rect.top;\n            this.move(this.state.config);\n          }\n        });\n      }\n    }\n  }\n};\n\n// src/icons/error.svg\nvar error_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"15 15 70 70\"><path fill=\"currentColor\" d=\"M50,16.2c-18.6,0-33.8,15.1-33.8,33.8S31.4,83.7,50,83.7S83.8,68.6,83.8,50S68.6,16.2,50,16.2z M50,80.2c-16.7,0-30.2-13.6-30.2-30.2S33.3,19.7,50,19.7S80.3,33.3,80.3,50S66.7,80.2,50,80.2z\"/><rect fill=\"currentColor\" x=\"48\" y=\"31.7\" width=\"4\" height=\"28\"/><rect fill=\"currentColor\" x=\"48\" y=\"63.2\" width=\"4\" height=\"5\"/><!--Created by Shastry from the Noun Project--></svg>\\n';\n\n// src/services/DataHelper.ts\nimport { Euler as Euler2, MathUtils as MathUtils7, Vector3 as Vector32 } from \"three\";\n\n// src/services/AbstractService.ts\nvar AbstractService = class {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    this.viewer = viewer;\n    this.config = viewer.config;\n    this.state = viewer.state;\n  }\n  /**\n   * Destroys the service\n   * @internal\n   */\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  destroy() {\n  }\n};\n\n// src/services/DataHelper.ts\nvar vector3 = new Vector32();\nvar EULER_ZERO = new Euler2(0, 0, 0, \"ZXY\");\nvar DataHelper = class extends AbstractService {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer);\n  }\n  /**\n   * Converts vertical FOV to zoom level\n   */\n  fovToZoomLevel(fov) {\n    const temp = Math.round((fov - this.config.minFov) / (this.config.maxFov - this.config.minFov) * 100);\n    return MathUtils7.clamp(temp - 2 * (temp - 50), 0, 100);\n  }\n  /**\n   * Converts zoom level to vertical FOV\n   */\n  zoomLevelToFov(level) {\n    return this.config.maxFov + level / 100 * (this.config.minFov - this.config.maxFov);\n  }\n  /**\n   * Converts vertical FOV to horizontal FOV\n   */\n  vFovToHFov(vFov) {\n    return MathUtils7.radToDeg(2 * Math.atan(Math.tan(MathUtils7.degToRad(vFov) / 2) * this.state.aspect));\n  }\n  /**\n   * Converts horizontal FOV to vertical FOV\n   */\n  hFovToVFov(hFov) {\n    return MathUtils7.radToDeg(2 * Math.atan(Math.tan(MathUtils7.degToRad(hFov) / 2) / this.state.aspect));\n  }\n  /**\n   * @internal\n   */\n  getAnimationProperties(speed, targetPosition, targetZoom) {\n    const positionProvided = !isNil(targetPosition);\n    const zoomProvided = !isNil(targetZoom);\n    const properties = {};\n    let duration = null;\n    if (positionProvided) {\n      const currentPosition = this.viewer.getPosition();\n      const dYaw = getShortestArc(currentPosition.yaw, targetPosition.yaw);\n      properties.yaw = { start: currentPosition.yaw, end: currentPosition.yaw + dYaw };\n      properties.pitch = { start: currentPosition.pitch, end: targetPosition.pitch };\n      duration = speedToDuration(speed, getAngle(currentPosition, targetPosition));\n    }\n    if (zoomProvided) {\n      const currentZoom = this.viewer.getZoomLevel();\n      const dZoom = Math.abs(targetZoom - currentZoom);\n      properties.zoom = { start: currentZoom, end: targetZoom };\n      if (duration === null) {\n        duration = speedToDuration(speed, Math.PI / 4 * dZoom / 100);\n      }\n    }\n    if (duration === null) {\n      if (typeof speed === \"number\") {\n        duration = speed;\n      } else {\n        duration = ANIMATION_MIN_DURATION;\n      }\n    } else {\n      duration = Math.max(ANIMATION_MIN_DURATION, duration);\n    }\n    return { duration, properties };\n  }\n  /**\n   * @internal\n   */\n  getTransitionOptions(options) {\n    let transition;\n    const defaultTransition = this.config.defaultTransition ?? DEFAULTS.defaultTransition;\n    if (options.transition === false || options.transition === null) {\n      transition = null;\n    } else if (options.transition === true) {\n      transition = {\n        ...defaultTransition\n      };\n    } else if (typeof options.transition === \"object\") {\n      transition = {\n        ...defaultTransition,\n        ...options.transition\n      };\n    } else {\n      transition = this.config.defaultTransition;\n    }\n    return transition;\n  }\n  /**\n   * Converts pixel texture coordinates to spherical radians coordinates\n   * @throws {@link PSVError} when the current adapter does not support texture coordinates\n   */\n  textureCoordsToSphericalCoords(point) {\n    if (!this.state.textureData?.panoData) {\n      throw new PSVError(\"Current adapter does not support texture coordinates or no texture has been loaded\");\n    }\n    const result = this.viewer.adapter.textureCoordsToSphericalCoords(point, this.state.textureData.panoData);\n    if (!EULER_ZERO.equals(this.viewer.renderer.panoramaPose) || !EULER_ZERO.equals(this.viewer.renderer.sphereCorrection)) {\n      this.sphericalCoordsToVector3(result, vector3);\n      vector3.applyEuler(this.viewer.renderer.panoramaPose);\n      vector3.applyEuler(this.viewer.renderer.sphereCorrection);\n      return this.vector3ToSphericalCoords(vector3);\n    } else {\n      return result;\n    }\n  }\n  /**\n   * Converts spherical radians coordinates to pixel texture coordinates\n   * @throws {@link PSVError} when the current adapter does not support texture coordinates\n   */\n  sphericalCoordsToTextureCoords(position) {\n    if (!this.state.textureData?.panoData) {\n      throw new PSVError(\"Current adapter does not support texture coordinates or no texture has been loaded\");\n    }\n    if (!EULER_ZERO.equals(this.viewer.renderer.panoramaPose) || !EULER_ZERO.equals(this.viewer.renderer.sphereCorrection)) {\n      this.sphericalCoordsToVector3(position, vector3);\n      applyEulerInverse(vector3, this.viewer.renderer.sphereCorrection);\n      applyEulerInverse(vector3, this.viewer.renderer.panoramaPose);\n      position = this.vector3ToSphericalCoords(vector3);\n    }\n    return this.viewer.adapter.sphericalCoordsToTextureCoords(position, this.state.textureData.panoData);\n  }\n  /**\n   * Converts spherical radians coordinates to a Vector3\n   */\n  sphericalCoordsToVector3(position, vector, distance2 = SPHERE_RADIUS) {\n    if (!vector) {\n      vector = new Vector32();\n    }\n    vector.x = distance2 * -Math.cos(position.pitch) * Math.sin(position.yaw);\n    vector.y = distance2 * Math.sin(position.pitch);\n    vector.z = distance2 * Math.cos(position.pitch) * Math.cos(position.yaw);\n    return vector;\n  }\n  /**\n   * Converts a Vector3 to spherical radians coordinates\n   */\n  vector3ToSphericalCoords(vector) {\n    const phi = Math.acos(vector.y / Math.sqrt(vector.x * vector.x + vector.y * vector.y + vector.z * vector.z));\n    const theta = Math.atan2(vector.x, vector.z);\n    return {\n      yaw: theta < 0 ? -theta : Math.PI * 2 - theta,\n      pitch: Math.PI / 2 - phi\n    };\n  }\n  /**\n   * Converts position on the viewer to a THREE.Vector3\n   */\n  viewerCoordsToVector3(viewerPoint) {\n    const sphereIntersect = this.viewer.renderer.getIntersections(viewerPoint).filter((i) => i.object.userData[VIEWER_DATA]);\n    if (sphereIntersect.length) {\n      return sphereIntersect[0].point;\n    } else {\n      return null;\n    }\n  }\n  /**\n   * Converts position on the viewer to spherical radians coordinates\n   */\n  viewerCoordsToSphericalCoords(viewerPoint) {\n    const vector = this.viewerCoordsToVector3(viewerPoint);\n    return vector ? this.vector3ToSphericalCoords(vector) : null;\n  }\n  /**\n   * Converts a Vector3 to position on the viewer\n   */\n  vector3ToViewerCoords(vector) {\n    const vectorClone = vector.clone();\n    vectorClone.project(this.viewer.renderer.camera);\n    return {\n      x: Math.round((vectorClone.x + 1) / 2 * this.state.size.width),\n      y: Math.round((1 - vectorClone.y) / 2 * this.state.size.height)\n    };\n  }\n  /**\n   * Converts spherical radians coordinates to position on the viewer\n   */\n  sphericalCoordsToViewerCoords(position) {\n    this.sphericalCoordsToVector3(position, vector3);\n    return this.vector3ToViewerCoords(vector3);\n  }\n  /**\n   * @internal\n   */\n  isPointVisible(point) {\n    let vector;\n    let viewerPoint;\n    if (point instanceof Vector32) {\n      vector = point;\n      viewerPoint = this.vector3ToViewerCoords(point);\n    } else if (isExtendedPosition(point)) {\n      vector = this.sphericalCoordsToVector3(point, vector3);\n      viewerPoint = this.vector3ToViewerCoords(vector);\n    } else {\n      return false;\n    }\n    return vector.dot(this.viewer.state.direction) > 0 && viewerPoint.x >= 0 && viewerPoint.x <= this.viewer.state.size.width && viewerPoint.y >= 0 && viewerPoint.y <= this.viewer.state.size.height;\n  }\n  /**\n   * Converts pixel position to angles if present and ensure boundaries\n   */\n  cleanPosition(position) {\n    if (\"yaw\" in position || \"pitch\" in position) {\n      if (!(\"yaw\" in position) || !(\"pitch\" in position)) {\n        throw new PSVError(`Position is missing 'yaw' or 'pitch'`);\n      }\n      return {\n        yaw: parseAngle(position.yaw),\n        pitch: parseAngle(position.pitch, true)\n      };\n    } else {\n      return this.textureCoordsToSphericalCoords(position);\n    }\n  }\n  /**\n   * Ensure a SphereCorrection object is valid\n   */\n  cleanSphereCorrection(sphereCorrection) {\n    return {\n      pan: parseAngle(sphereCorrection?.pan || 0),\n      tilt: parseAngle(sphereCorrection?.tilt || 0, true),\n      roll: parseAngle(sphereCorrection?.roll || 0, true, false)\n    };\n  }\n  /**\n   * Parse the pose angles of the pano data\n   */\n  cleanPanoramaPose(panoData) {\n    return {\n      pan: MathUtils7.degToRad(panoData?.poseHeading || 0),\n      tilt: MathUtils7.degToRad(panoData?.posePitch || 0),\n      roll: MathUtils7.degToRad(panoData?.poseRoll || 0)\n    };\n  }\n  /**\n   * Update the panorama options if the panorama files contains \"InitialView\" metadata\n   */\n  cleanPanoramaOptions(options, panoData) {\n    if (!panoData?.isEquirectangular) {\n      return options;\n    }\n    if (isNil(options.zoom) && !isNil(panoData.initialFov)) {\n      options = {\n        ...options,\n        zoom: this.fovToZoomLevel(this.hFovToVFov(panoData.initialFov))\n      };\n    }\n    if (isNil(options.position) && !isNil(panoData.initialHeading) && !isNil(panoData.initialPitch)) {\n      options = {\n        ...options,\n        position: {\n          yaw: parseAngle(panoData.initialHeading),\n          pitch: parseAngle(panoData.initialPitch, true)\n        }\n      };\n    }\n    return options;\n  }\n};\n\n// src/services/EventsHandler.ts\nimport { MathUtils as MathUtils8 } from \"three\";\n\n// src/icons/gesture.svg\nvar gesture_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path fill=\"currentColor\" d=\"M33.38 33.2a1.96 1.96 0 0 0 1.5-3.23 10.61 10.61 0 0 1 7.18-17.51c.7-.06 1.31-.49 1.61-1.12a13.02 13.02 0 0 1 11.74-7.43c7.14 0 12.96 5.8 12.96 12.9 0 3.07-1.1 6.05-3.1 8.38-.7.82-.61 2.05.21 2.76.83.7 2.07.6 2.78-.22a16.77 16.77 0 0 0 4.04-10.91C72.3 7.54 64.72 0 55.4 0a16.98 16.98 0 0 0-14.79 8.7 14.6 14.6 0 0 0-12.23 14.36c0 3.46 1.25 6.82 3.5 9.45.4.45.94.69 1.5.69m45.74 43.55a22.13 22.13 0 0 1-5.23 12.4c-4 4.55-9.53 6.86-16.42 6.86-12.6 0-20.1-10.8-20.17-10.91a1.82 1.82 0 0 0-.08-.1c-5.3-6.83-14.55-23.82-17.27-28.87-.05-.1 0-.21.02-.23a6.3 6.3 0 0 1 8.24 1.85l9.38 12.59a1.97 1.97 0 0 0 3.54-1.17V25.34a4 4 0 0 1 1.19-2.87 3.32 3.32 0 0 1 2.4-.95c1.88.05 3.4 1.82 3.4 3.94v24.32a1.96 1.96 0 0 0 3.93 0v-33.1a3.5 3.5 0 0 1 7 0v35.39a1.96 1.96 0 0 0 3.93 0v-.44c.05-2.05 1.6-3.7 3.49-3.7 1.93 0 3.5 1.7 3.5 3.82v5.63c0 .24.04.48.13.71l.1.26a1.97 1.97 0 0 0 3.76-.37c.33-1.78 1.77-3.07 3.43-3.07 1.9 0 3.45 1.67 3.5 3.74l-1.77 18.1zM77.39 51c-1.25 0-2.45.32-3.5.9v-.15c0-4.27-3.33-7.74-7.42-7.74-1.26 0-2.45.33-3.5.9V16.69a7.42 7.42 0 0 0-14.85 0v1.86a7 7 0 0 0-3.28-.94 7.21 7.21 0 0 0-5.26 2.07 7.92 7.92 0 0 0-2.38 5.67v37.9l-5.83-7.82a10.2 10.2 0 0 0-13.35-2.92 4.1 4.1 0 0 0-1.53 5.48C20 64.52 28.74 80.45 34.07 87.34c.72 1.04 9.02 12.59 23.4 12.59 7.96 0 14.66-2.84 19.38-8.2a26.06 26.06 0 0 0 6.18-14.6l1.78-18.2v-.2c0-4.26-3.32-7.73-7.42-7.73z\"/><!--Created by AomAm from the Noun Project--></svg>\\n';\n\n// src/icons/mousewheel.svg\nvar mousewheel_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"10 17 79 79\"><path fill=\"currentColor\" d=\"M38.1 29.27c-.24 0-.44.2-.44.45v10.7a.45.45 0 00.9 0v-10.7c0-.25-.2-.45-.45-.45zm10.2 26.66a11.54 11.54 0 01-8.48-6.14.45.45 0 10-.8.41 12.45 12.45 0 009.22 6.62.45.45 0 00.07-.9zm24.55-13.08a23.04 23.04 0 00-22.56-23v7.07l-.01.05a2.83 2.83 0 012.39 2.78v14.03l.09-.02h8.84v-9.22a.45.45 0 11.9 0v9.22h10.35v-.9zm0 27.33V44.66H62.5c-.02 2.01-.52 4-1.47 5.76a.45.45 0 01-.61.18.45.45 0 01-.19-.61 11.54 11.54 0 001.36-5.33h-8.83l-.1-.01a2.83 2.83 0 01-2.83 2.84h-.04-.04a2.83 2.83 0 01-2.83-2.83v-14.9a2.82 2.82 0 012.47-2.8v-7.11a23.04 23.04 0 00-22.57 23v.91h14.72V29.88a8.2 8.2 0 015.02-7.57c.22-.1.5.01.59.24.1.23-.01.5-.24.6a7.3 7.3 0 00-4.47 6.73v13.88h3.9a.45.45 0 110 .9h-3.9v.15a7.32 7.32 0 0011.23 6.17.45.45 0 01.49.76 8.22 8.22 0 01-12.62-6.93v-.15H26.82v25.52a23.04 23.04 0 0023.01 23.01 23.04 23.04 0 0023.02-23.01zm1.8-27.33v27.33A24.85 24.85 0 0149.84 95a24.85 24.85 0 01-24.82-24.82V42.85a24.85 24.85 0 0124.82-24.82 24.85 24.85 0 0124.83 24.82zM57.98 29.88v9.36a.45.45 0 11-.9 0v-9.36a7.28 7.28 0 00-3.4-6.17.45.45 0 01.49-.76 8.18 8.18 0 013.8 6.93z\"/><!-- Created by Icon Island from the Noun Project --></svg>\\n';\n\n// src/services/EventsHandler.ts\nvar _Step = class _Step {\n  constructor() {\n    this.$ = _Step.IDLE;\n  }\n  is(...steps) {\n    return steps.some((step) => this.$ & step);\n  }\n  set(step) {\n    this.$ = step;\n  }\n  add(step) {\n    this.$ |= step;\n  }\n  remove(step) {\n    this.$ &= ~step;\n  }\n};\n_Step.IDLE = 0;\n_Step.CLICK = 1;\n_Step.MOVING = 2;\nvar Step = _Step;\nvar EventsHandler = class extends AbstractService {\n  constructor(viewer) {\n    super(viewer);\n    this.data = {\n      /** start x position of the click/touch */\n      startMouseX: 0,\n      /** start y position of the click/touch */\n      startMouseY: 0,\n      /** current x position of the cursor */\n      mouseX: 0,\n      /** current y position of the cursor */\n      mouseY: 0,\n      /** current distance between fingers */\n      pinchDist: 0,\n      /** accumulator for smooth movement */\n      moveDelta: { yaw: 0, pitch: 0, zoom: 0 },\n      accumulatorFactor: 0,\n      /** when the Ctrl key is pressed */\n      ctrlKeyDown: false,\n      /** temporary storage of click data between two clicks */\n      dblclickData: null,\n      dblclickTimeout: null,\n      longtouchTimeout: null,\n      twofingersTimeout: null,\n      ctrlZoomTimeout: null\n    };\n    this.step = new Step();\n    this.keyHandler = new PressHandler();\n    this.resizeObserver = new ResizeObserver(throttle(() => this.viewer.autoSize(), 50));\n    this.moveThreshold = MOVE_THRESHOLD * SYSTEM.pixelRatio;\n  }\n  /**\n   * @internal\n   */\n  init() {\n    window.addEventListener(\"keydown\", this, { passive: false });\n    window.addEventListener(\"keyup\", this);\n    this.viewer.container.addEventListener(\"mousedown\", this);\n    window.addEventListener(\"mousemove\", this, { passive: false });\n    window.addEventListener(\"mouseup\", this);\n    this.viewer.container.addEventListener(\"touchstart\", this, { passive: false });\n    window.addEventListener(\"touchmove\", this, { passive: false });\n    window.addEventListener(\"touchend\", this, { passive: false });\n    this.viewer.container.addEventListener(\"wheel\", this, { passive: false });\n    document.addEventListener(\"fullscreenchange\", this);\n    this.resizeObserver.observe(this.viewer.container);\n    this.viewer.addEventListener(BeforeRenderEvent.type, this);\n    this.viewer.addEventListener(StopAllEvent.type, this);\n  }\n  destroy() {\n    window.removeEventListener(\"keydown\", this);\n    window.removeEventListener(\"keyup\", this);\n    this.viewer.container.removeEventListener(\"mousedown\", this);\n    window.removeEventListener(\"mousemove\", this);\n    window.removeEventListener(\"mouseup\", this);\n    this.viewer.container.removeEventListener(\"touchstart\", this);\n    window.removeEventListener(\"touchmove\", this);\n    window.removeEventListener(\"touchend\", this);\n    this.viewer.container.removeEventListener(\"wheel\", this);\n    document.removeEventListener(\"fullscreenchange\", this);\n    this.resizeObserver.disconnect();\n    this.viewer.removeEventListener(BeforeRenderEvent.type, this);\n    this.viewer.removeEventListener(StopAllEvent.type, this);\n    clearTimeout(this.data.dblclickTimeout);\n    clearTimeout(this.data.longtouchTimeout);\n    clearTimeout(this.data.twofingersTimeout);\n    clearTimeout(this.data.ctrlZoomTimeout);\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(evt) {\n    switch (evt.type) {\n      case \"keydown\":\n        this.__onKeyDown(evt);\n        break;\n      case \"keyup\":\n        this.__onKeyUp();\n        break;\n      case \"mousemove\":\n        this.__onMouseMove(evt);\n        break;\n      case \"mouseup\":\n        this.__onMouseUp(evt);\n        break;\n      case \"touchmove\":\n        this.__onTouchMove(evt);\n        break;\n      case \"touchend\":\n        this.__onTouchEnd(evt);\n        break;\n      case \"fullscreenchange\":\n        this.__onFullscreenChange();\n        break;\n      case BeforeRenderEvent.type:\n        this.__applyMoveDelta();\n        break;\n      case StopAllEvent.type:\n        this.__clearMoveDelta();\n        break;\n    }\n    if (!getMatchingTarget(evt, \".\" + CAPTURE_EVENTS_CLASS)) {\n      switch (evt.type) {\n        case \"mousedown\":\n          this.__onMouseDown(evt);\n          break;\n        case \"touchstart\":\n          this.__onTouchStart(evt);\n          break;\n        case \"wheel\":\n          this.__onMouseWheel(evt);\n          break;\n      }\n    }\n  }\n  /**\n   * Handles keyboard events\n   */\n  __onKeyDown(e) {\n    if (this.config.mousewheelCtrlKey) {\n      this.data.ctrlKeyDown = e.key === KEY_CODES.Control;\n      if (this.data.ctrlKeyDown) {\n        clearTimeout(this.data.ctrlZoomTimeout);\n        this.viewer.overlay.hide(IDS.CTRL_ZOOM);\n      }\n    }\n    if (!this.viewer.dispatchEvent(new KeypressEvent(e.key, e))) {\n      return;\n    }\n    if (!this.state.keyboardEnabled) {\n      return;\n    }\n    const action = this.config.keyboardActions?.[e.key];\n    if (typeof action === \"function\") {\n      action(this.viewer, e);\n      e.preventDefault();\n      return;\n    }\n    if (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey) {\n      return;\n    }\n    if (action && !this.keyHandler.pending) {\n      if (action !== \"ZOOM_IN\" /* ZOOM_IN */ && action !== \"ZOOM_OUT\" /* ZOOM_OUT */) {\n        this.viewer.stopAll();\n      }\n      switch (action) {\n        case \"ROTATE_UP\" /* ROTATE_UP */:\n          this.viewer.dynamics.position.roll({ pitch: false });\n          break;\n        case \"ROTATE_DOWN\" /* ROTATE_DOWN */:\n          this.viewer.dynamics.position.roll({ pitch: true });\n          break;\n        case \"ROTATE_RIGHT\" /* ROTATE_RIGHT */:\n          this.viewer.dynamics.position.roll({ yaw: false });\n          break;\n        case \"ROTATE_LEFT\" /* ROTATE_LEFT */:\n          this.viewer.dynamics.position.roll({ yaw: true });\n          break;\n        case \"ZOOM_IN\" /* ZOOM_IN */:\n          this.viewer.dynamics.zoom.roll(false);\n          break;\n        case \"ZOOM_OUT\" /* ZOOM_OUT */:\n          this.viewer.dynamics.zoom.roll(true);\n          break;\n      }\n      this.keyHandler.down(action);\n      e.preventDefault();\n    }\n  }\n  /**\n   * Handles keyboard events\n   */\n  __onKeyUp() {\n    this.data.ctrlKeyDown = false;\n    if (!this.state.keyboardEnabled) {\n      return;\n    }\n    this.keyHandler.up((action) => {\n      if (action === \"ZOOM_IN\" /* ZOOM_IN */ || action === \"ZOOM_OUT\" /* ZOOM_OUT */) {\n        this.viewer.dynamics.zoom.stop();\n      } else {\n        this.viewer.dynamics.position.stop();\n        this.viewer.resetIdleTimer();\n      }\n    });\n  }\n  /**\n   * Handles mouse down events\n   */\n  __onMouseDown(evt) {\n    this.step.add(Step.CLICK);\n    this.data.startMouseX = evt.clientX;\n    this.data.startMouseY = evt.clientY;\n  }\n  /**\n   *Handles mouse up events\n   */\n  __onMouseUp(evt) {\n    if (this.step.is(Step.CLICK, Step.MOVING)) {\n      this.__stopMove(evt.clientX, evt.clientY, evt, evt.button === 2);\n    }\n  }\n  /**\n   * Handles mouse move events\n   */\n  __onMouseMove(evt) {\n    if (this.config.mousemove && this.step.is(Step.CLICK, Step.MOVING)) {\n      evt.preventDefault();\n      this.__doMove(evt.clientX, evt.clientY);\n    }\n    this.__handleObjectsEvents(evt);\n  }\n  /**\n   * Handles touch events\n   */\n  __onTouchStart(evt) {\n    if (evt.touches.length === 1) {\n      this.step.add(Step.CLICK);\n      this.data.startMouseX = evt.touches[0].clientX;\n      this.data.startMouseY = evt.touches[0].clientY;\n      if (!this.data.longtouchTimeout) {\n        this.data.longtouchTimeout = setTimeout(() => {\n          const touch = evt.touches[0];\n          this.__stopMove(touch.clientX, touch.clientY, evt, true);\n          this.data.longtouchTimeout = null;\n        }, LONGTOUCH_DELAY);\n      }\n    } else if (evt.touches.length === 2) {\n      this.step.set(Step.IDLE);\n      this.__cancelLongTouch();\n      if (this.config.mousemove) {\n        this.__cancelTwoFingersOverlay();\n        this.__startMoveZoom(evt);\n        evt.preventDefault();\n      }\n    }\n  }\n  /**\n   * Handles touch events\n   */\n  __onTouchEnd(evt) {\n    this.__cancelLongTouch();\n    if (this.step.is(Step.CLICK, Step.MOVING)) {\n      evt.preventDefault();\n      this.__cancelTwoFingersOverlay();\n      if (evt.touches.length === 1) {\n        this.__stopMove(this.data.mouseX, this.data.mouseY);\n      } else if (evt.touches.length === 0) {\n        const touch = evt.changedTouches[0];\n        this.__stopMove(touch.clientX, touch.clientY, evt);\n      }\n    }\n  }\n  /**\n   * Handles touch move events\n   */\n  __onTouchMove(evt) {\n    this.__cancelLongTouch();\n    if (!this.config.mousemove) {\n      return;\n    }\n    if (evt.touches.length === 1) {\n      if (this.config.touchmoveTwoFingers) {\n        if (this.step.is(Step.CLICK) && !this.data.twofingersTimeout) {\n          this.data.twofingersTimeout = setTimeout(() => {\n            this.viewer.overlay.show({\n              id: IDS.TWO_FINGERS,\n              image: gesture_default,\n              title: this.config.lang.twoFingers\n            });\n          }, TWOFINGERSOVERLAY_DELAY);\n        }\n      } else if (this.step.is(Step.CLICK, Step.MOVING)) {\n        evt.preventDefault();\n        const touch = evt.touches[0];\n        this.__doMove(touch.clientX, touch.clientY);\n      }\n    } else {\n      this.__doMoveZoom(evt);\n      this.__cancelTwoFingersOverlay();\n    }\n  }\n  /**\n   * Cancel the long touch timer if any\n   */\n  __cancelLongTouch() {\n    if (this.data.longtouchTimeout) {\n      clearTimeout(this.data.longtouchTimeout);\n      this.data.longtouchTimeout = null;\n    }\n  }\n  /**\n   * Cancel the two fingers overlay timer if any\n   */\n  __cancelTwoFingersOverlay() {\n    if (this.config.touchmoveTwoFingers) {\n      if (this.data.twofingersTimeout) {\n        clearTimeout(this.data.twofingersTimeout);\n        this.data.twofingersTimeout = null;\n      }\n      this.viewer.overlay.hide(IDS.TWO_FINGERS);\n    }\n  }\n  /**\n   * Handles mouse wheel events\n   */\n  __onMouseWheel(evt) {\n    if (!this.config.mousewheel || !evt.deltaY) {\n      return;\n    }\n    if (this.config.mousewheelCtrlKey && !this.data.ctrlKeyDown) {\n      this.viewer.overlay.show({\n        id: IDS.CTRL_ZOOM,\n        image: mousewheel_default,\n        title: this.config.lang.ctrlZoom\n      });\n      clearTimeout(this.data.ctrlZoomTimeout);\n      this.data.ctrlZoomTimeout = setTimeout(() => this.viewer.overlay.hide(IDS.CTRL_ZOOM), CTRLZOOM_TIMEOUT);\n      return;\n    }\n    evt.preventDefault();\n    evt.stopPropagation();\n    const delta = evt.deltaY / Math.abs(evt.deltaY) * 5 * this.config.zoomSpeed;\n    if (delta !== 0) {\n      this.viewer.dynamics.zoom.step(-delta, 5);\n    }\n  }\n  /**\n   * Handles fullscreen events\n   */\n  __onFullscreenChange() {\n    const fullscreen = this.viewer.isFullscreenEnabled();\n    if (this.config.keyboard === \"fullscreen\") {\n      if (fullscreen) {\n        this.viewer.startKeyboardControl();\n      } else {\n        this.viewer.stopKeyboardControl();\n      }\n    }\n    this.viewer.dispatchEvent(new FullscreenEvent(fullscreen));\n  }\n  /**\n   * Resets all state variables\n   */\n  __resetMove() {\n    this.step.set(Step.IDLE);\n    this.data.mouseX = 0;\n    this.data.mouseY = 0;\n    this.data.startMouseX = 0;\n    this.data.startMouseY = 0;\n  }\n  /**\n   * Initializes the combines move and zoom\n   */\n  __startMoveZoom(evt) {\n    this.viewer.stopAll();\n    this.__resetMove();\n    const touchData = getTouchData(evt);\n    this.step.set(Step.MOVING);\n    this.data.accumulatorFactor = this.config.moveInertia;\n    ({\n      distance: this.data.pinchDist,\n      center: { x: this.data.mouseX, y: this.data.mouseY }\n    } = touchData);\n  }\n  /**\n   * Stops the movement\n   * @description If the move threshold was not reached a click event is triggered\n   */\n  __stopMove(clientX, clientY, event, rightclick = false) {\n    if (this.step.is(Step.CLICK) && !this.__moveThresholdReached(clientX, clientY)) {\n      this.__doClick(clientX, clientY, event, rightclick);\n    }\n    if (this.config.moveInertia) {\n      this.data.accumulatorFactor = Math.pow(this.config.moveInertia, 0.5);\n    }\n    this.__resetMove();\n    this.viewer.resetIdleTimer();\n  }\n  /**\n   * Triggers an event with all coordinates when a simple click is performed\n   */\n  __doClick(clientX, clientY, event, rightclick = false) {\n    const boundingRect = this.viewer.container.getBoundingClientRect();\n    const viewerX = clientX - boundingRect.left;\n    const viewerY = clientY - boundingRect.top;\n    const intersections = this.viewer.renderer.getIntersections({ x: viewerX, y: viewerY });\n    const sphereIntersection = intersections.find((i) => i.object.userData[VIEWER_DATA]);\n    if (sphereIntersection) {\n      const sphericalCoords = this.viewer.dataHelper.vector3ToSphericalCoords(sphereIntersection.point);\n      const data = {\n        rightclick,\n        originalEvent: event,\n        target: getEventTarget(event),\n        clientX,\n        clientY,\n        viewerX,\n        viewerY,\n        yaw: sphericalCoords.yaw,\n        pitch: sphericalCoords.pitch,\n        objects: intersections.map((i) => i.object).filter((o) => !o.userData[VIEWER_DATA])\n      };\n      try {\n        const textureCoords = this.viewer.dataHelper.sphericalCoordsToTextureCoords(data);\n        Object.assign(data, textureCoords);\n      } catch {\n      }\n      if (!this.data.dblclickTimeout) {\n        this.viewer.dispatchEvent(new ClickEvent(data));\n        this.data.dblclickData = clone(data);\n        this.data.dblclickTimeout = setTimeout(() => {\n          this.data.dblclickTimeout = null;\n          this.data.dblclickData = null;\n        }, DBLCLICK_DELAY);\n      } else {\n        if (Math.abs(this.data.dblclickData.clientX - data.clientX) < this.moveThreshold && Math.abs(this.data.dblclickData.clientY - data.clientY) < this.moveThreshold) {\n          this.viewer.dispatchEvent(new DoubleClickEvent(this.data.dblclickData));\n        }\n        clearTimeout(this.data.dblclickTimeout);\n        this.data.dblclickTimeout = null;\n        this.data.dblclickData = null;\n      }\n    }\n  }\n  /**\n   * Trigger events for observed THREE objects\n   */\n  __handleObjectsEvents(evt) {\n    if (!isEmpty(this.state.objectsObservers) && evt.composedPath().includes(this.viewer.container)) {\n      const viewerPos = getPosition(this.viewer.container);\n      const viewerPoint = {\n        x: evt.clientX - viewerPos.x,\n        y: evt.clientY - viewerPos.y\n      };\n      const intersections = this.viewer.renderer.getIntersections(viewerPoint);\n      const emit = (object, key, evtCtor) => {\n        this.viewer.dispatchEvent(new evtCtor(evt, object, viewerPoint, key));\n      };\n      for (const [key, object] of Object.entries(this.state.objectsObservers)) {\n        const intersection = intersections.find((i) => i.object.userData[key]);\n        if (intersection) {\n          if (object && intersection.object !== object) {\n            emit(object, key, ObjectLeaveEvent);\n            this.state.objectsObservers[key] = null;\n          }\n          if (!object) {\n            this.state.objectsObservers[key] = intersection.object;\n            emit(intersection.object, key, ObjectEnterEvent);\n          } else {\n            emit(intersection.object, key, ObjectHoverEvent);\n          }\n        } else if (object) {\n          emit(object, key, ObjectLeaveEvent);\n          this.state.objectsObservers[key] = null;\n        }\n      }\n    }\n  }\n  /**\n   * Starts moving when crossing moveThreshold and performs movement\n   */\n  __doMove(clientX, clientY) {\n    if (this.step.is(Step.CLICK) && this.__moveThresholdReached(clientX, clientY)) {\n      this.viewer.stopAll();\n      this.__resetMove();\n      this.step.set(Step.MOVING);\n      this.data.mouseX = clientX;\n      this.data.mouseY = clientY;\n      this.data.accumulatorFactor = this.config.moveInertia;\n    } else if (this.step.is(Step.MOVING)) {\n      const x = (clientX - this.data.mouseX) * Math.cos(this.state.roll) - (clientY - this.data.mouseY) * Math.sin(this.state.roll);\n      const y = (clientY - this.data.mouseY) * Math.cos(this.state.roll) + (clientX - this.data.mouseX) * Math.sin(this.state.roll);\n      const rotation = {\n        yaw: this.config.moveSpeed * (x / this.state.size.width) * MathUtils8.degToRad(this.state.hFov),\n        pitch: this.config.moveSpeed * (y / this.state.size.height) * MathUtils8.degToRad(this.state.vFov)\n      };\n      this.data.moveDelta.yaw += rotation.yaw;\n      this.data.moveDelta.pitch += rotation.pitch;\n      this.data.mouseX = clientX;\n      this.data.mouseY = clientY;\n    }\n  }\n  /**\n   * Checks if the cursor was move beyond the move threshold\n   */\n  __moveThresholdReached(clientX, clientY) {\n    return Math.abs(clientX - this.data.startMouseX) >= this.moveThreshold || Math.abs(clientY - this.data.startMouseY) >= this.moveThreshold;\n  }\n  /**\n   * Perfoms combined move and zoom\n   */\n  __doMoveZoom(evt) {\n    if (this.step.is(Step.MOVING)) {\n      evt.preventDefault();\n      const touchData = getTouchData(evt);\n      this.__doMove(touchData.center.x, touchData.center.y);\n      this.data.moveDelta.zoom += this.config.zoomSpeed * ((touchData.distance - this.data.pinchDist) / SYSTEM.pixelRatio);\n      this.data.pinchDist = touchData.distance;\n    }\n  }\n  __applyMoveDelta() {\n    const EPS = 1e-3;\n    if (Math.abs(this.data.moveDelta.yaw) > 0 || Math.abs(this.data.moveDelta.pitch) > 0) {\n      const currentPosition = this.viewer.getPosition();\n      this.viewer.rotate({\n        yaw: currentPosition.yaw - this.data.moveDelta.yaw * (1 - this.config.moveInertia),\n        pitch: currentPosition.pitch + this.data.moveDelta.pitch * (1 - this.config.moveInertia)\n      });\n      this.data.moveDelta.yaw *= this.data.accumulatorFactor;\n      this.data.moveDelta.pitch *= this.data.accumulatorFactor;\n      if (Math.abs(this.data.moveDelta.yaw) <= EPS) {\n        this.data.moveDelta.yaw = 0;\n      }\n      if (Math.abs(this.data.moveDelta.pitch) <= EPS) {\n        this.data.moveDelta.pitch = 0;\n      }\n    }\n    if (Math.abs(this.data.moveDelta.zoom) > 0) {\n      const currentZoom = this.viewer.getZoomLevel();\n      this.viewer.zoom(currentZoom + this.data.moveDelta.zoom * (1 - this.config.moveInertia));\n      this.data.moveDelta.zoom *= this.config.moveInertia;\n      if (Math.abs(this.data.moveDelta.zoom) <= EPS) {\n        this.data.moveDelta.zoom = 0;\n      }\n    }\n  }\n  __clearMoveDelta() {\n    this.data.moveDelta.yaw = 0;\n    this.data.moveDelta.pitch = 0;\n    this.data.moveDelta.zoom = 0;\n  }\n};\n\n// src/services/Renderer.ts\nimport {\n  Box3,\n  ColorManagement,\n  Frustum,\n  Group,\n  LinearSRGBColorSpace,\n  LinearToneMapping,\n  MathUtils as MathUtils9,\n  Matrix4,\n  Mesh as Mesh4,\n  MeshBasicMaterial as MeshBasicMaterial3,\n  PerspectiveCamera,\n  Raycaster,\n  Scene,\n  SphereGeometry as SphereGeometry3,\n  Vector2,\n  Vector3 as Vector33,\n  WebGLRenderTarget,\n  WebGLRenderer\n} from \"three\";\nColorManagement.enabled = false;\nvar vector2 = new Vector2();\nvar matrix4 = new Matrix4();\nvar box3 = new Box3();\nvar Renderer = class extends AbstractService {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer);\n    this.frustumNeedsUpdate = true;\n    this.renderer = new WebGLRenderer(this.config.rendererParameters);\n    this.renderer.setPixelRatio(SYSTEM.pixelRatio);\n    this.renderer.outputColorSpace = LinearSRGBColorSpace;\n    this.renderer.toneMapping = LinearToneMapping;\n    this.renderer.domElement.className = \"psv-canvas\";\n    this.renderer.domElement.style.background = this.config.canvasBackground;\n    this.scene = new Scene();\n    this.camera = new PerspectiveCamera(50, 16 / 9, 0.1, 2 * SPHERE_RADIUS);\n    this.camera.matrixAutoUpdate = false;\n    const raycasterMesh = new Mesh4(\n      new SphereGeometry3(SPHERE_RADIUS).scale(-1, 1, 1),\n      new MeshBasicMaterial3({ opacity: 0, transparent: true, depthTest: false, depthWrite: false })\n    );\n    raycasterMesh.userData = { [VIEWER_DATA]: true };\n    this.scene.add(raycasterMesh);\n    this.raycaster = new Raycaster();\n    this.frustum = new Frustum();\n    this.container = document.createElement(\"div\");\n    this.container.className = \"psv-canvas-container\";\n    this.container.appendChild(this.renderer.domElement);\n    this.viewer.container.appendChild(this.container);\n    this.container.addEventListener(\"contextmenu\", (e) => e.preventDefault());\n    this.viewer.addEventListener(SizeUpdatedEvent.type, this);\n    this.viewer.addEventListener(ZoomUpdatedEvent.type, this);\n    this.viewer.addEventListener(PositionUpdatedEvent.type, this);\n    this.viewer.addEventListener(RollUpdatedEvent.type, this);\n    this.viewer.addEventListener(ConfigChangedEvent.type, this);\n    this.hide();\n  }\n  get panoramaPose() {\n    return this.mesh.rotation;\n  }\n  get sphereCorrection() {\n    return this.meshContainer.rotation;\n  }\n  /**\n   * @internal\n   */\n  init() {\n    this.show();\n    this.renderer.setAnimationLoop((t) => this.__renderLoop(t));\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.renderer.setAnimationLoop(null);\n    this.cleanScene(this.scene);\n    this.renderer.dispose();\n    this.viewer.container.removeChild(this.container);\n    this.viewer.removeEventListener(SizeUpdatedEvent.type, this);\n    this.viewer.removeEventListener(ZoomUpdatedEvent.type, this);\n    this.viewer.removeEventListener(PositionUpdatedEvent.type, this);\n    this.viewer.removeEventListener(RollUpdatedEvent.type, this);\n    this.viewer.removeEventListener(ConfigChangedEvent.type, this);\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case SizeUpdatedEvent.type:\n        this.__onSizeUpdated();\n        break;\n      case ZoomUpdatedEvent.type:\n        this.__onZoomUpdated();\n        break;\n      case PositionUpdatedEvent.type:\n        this.__onPositionUpdated();\n        break;\n      case RollUpdatedEvent.type:\n        this.__onPositionUpdated();\n        break;\n      case ConfigChangedEvent.type:\n        if (e.containsOptions(\"fisheye\")) {\n          this.__onPositionUpdated();\n        }\n        if (e.containsOptions(\"canvasBackground\")) {\n          this.renderer.domElement.style.background = this.config.canvasBackground;\n        }\n        break;\n    }\n  }\n  /**\n   * Hides the viewer\n   */\n  hide() {\n    this.container.style.opacity = \"0\";\n  }\n  /**\n   * Shows the viewer\n   */\n  show() {\n    this.container.style.opacity = \"1\";\n  }\n  /**\n   * Resets or replaces the THREE renderer by a custom one\n   */\n  setCustomRenderer(factory) {\n    if (factory) {\n      this.customRenderer = factory(this.renderer);\n    } else {\n      this.customRenderer = null;\n    }\n    this.viewer.needsUpdate();\n  }\n  /**\n   * Updates the size of the renderer and the aspect of the camera\n   */\n  __onSizeUpdated() {\n    this.renderer.setSize(this.state.size.width, this.state.size.height);\n    this.camera.aspect = this.state.aspect;\n    this.camera.updateProjectionMatrix();\n    this.viewer.needsUpdate();\n    this.frustumNeedsUpdate = true;\n  }\n  /**\n   * Updates the fov of the camera\n   */\n  __onZoomUpdated() {\n    this.camera.fov = this.state.vFov;\n    this.camera.updateProjectionMatrix();\n    this.viewer.needsUpdate();\n    this.frustumNeedsUpdate = true;\n  }\n  /**\n   * Updates the position of the camera\n   */\n  __onPositionUpdated() {\n    this.camera.position.set(0, 0, 0);\n    this.camera.lookAt(this.state.direction);\n    if (this.config.fisheye) {\n      this.camera.position.copy(this.state.direction).multiplyScalar(this.config.fisheye / 2).negate();\n    }\n    this.camera.rotateZ(-this.state.roll);\n    this.camera.updateMatrix();\n    this.camera.updateMatrixWorld();\n    this.viewer.needsUpdate();\n    this.frustumNeedsUpdate = true;\n  }\n  /**\n   * Main event loop, performs a render if `state.needsUpdate` is true\n   */\n  __renderLoop(timestamp) {\n    const elapsed = !this.timestamp ? 0 : timestamp - this.timestamp;\n    this.timestamp = timestamp;\n    this.viewer.dispatchEvent(new BeforeRenderEvent(timestamp, elapsed));\n    this.viewer.dynamics.update(elapsed);\n    if (this.state.needsUpdate || this.state.continuousUpdateCount > 0) {\n      this.state.needsUpdate = false;\n      (this.customRenderer || this.renderer).render(this.scene, this.camera);\n      this.viewer.dispatchEvent(new RenderEvent());\n    }\n  }\n  /**\n   * Applies the texture to the scene, creates the scene if needed\n   * @internal\n   */\n  setTexture(textureData) {\n    if (!this.meshContainer) {\n      this.meshContainer = new Group();\n      this.scene.add(this.meshContainer);\n    }\n    if (this.state.textureData) {\n      this.viewer.adapter.disposeTexture(this.state.textureData);\n    }\n    if (this.mesh) {\n      this.meshContainer.remove(this.mesh);\n      this.viewer.adapter.disposeMesh(this.mesh);\n    }\n    this.mesh = this.viewer.adapter.createMesh(textureData.panoData);\n    this.viewer.adapter.setTexture(this.mesh, textureData, false);\n    this.meshContainer.add(this.mesh);\n    this.state.textureData = textureData;\n    this.viewer.needsUpdate();\n  }\n  /**\n   * Applies a panorama data pose to a Mesh\n   * @internal\n   */\n  setPanoramaPose(panoData, mesh = this.mesh) {\n    const cleanCorrection = this.viewer.dataHelper.cleanPanoramaPose(panoData);\n    mesh.rotation.set(cleanCorrection.tilt, cleanCorrection.pan, cleanCorrection.roll, \"YXZ\");\n  }\n  /**\n   * Applies a SphereCorrection to a Group\n   * @internal\n   */\n  setSphereCorrection(sphereCorrection, group = this.meshContainer) {\n    const cleanCorrection = this.viewer.dataHelper.cleanSphereCorrection(sphereCorrection);\n    group.rotation.set(cleanCorrection.tilt, cleanCorrection.pan, cleanCorrection.roll, \"YXZ\");\n  }\n  /**\n   * Performs transition between the current and a new texture\n   * @internal\n   */\n  transition(textureData, options, transition) {\n    const zoomTransition = transition.effect === \"fade\" || transition.rotation;\n    const positionProvided = !isNil(options.position);\n    const zoomProvided = !isNil(options.zoom);\n    const e = new BeforeAnimateEvent(\n      positionProvided ? this.viewer.dataHelper.cleanPosition(options.position) : void 0,\n      options.zoom\n    );\n    this.viewer.dispatchEvent(e);\n    const tempContainer = new Group();\n    const newMesh = this.viewer.adapter.createMesh(textureData.panoData);\n    this.viewer.adapter.setTexture(newMesh, textureData, true);\n    this.viewer.adapter.setTextureOpacity(newMesh, 0);\n    this.setPanoramaPose(textureData.panoData, newMesh);\n    this.setSphereCorrection(options.sphereCorrection, tempContainer);\n    if (positionProvided && !transition.rotation) {\n      const currentPosition = this.viewer.getPosition();\n      const verticalAxis = new Vector33(0, 1, 0);\n      tempContainer.rotateOnWorldAxis(verticalAxis, e.position.yaw - currentPosition.yaw);\n      const horizontalAxis = new Vector33(0, 1, 0).cross(this.camera.getWorldDirection(new Vector33())).normalize();\n      tempContainer.rotateOnWorldAxis(horizontalAxis, e.position.pitch - currentPosition.pitch);\n    }\n    tempContainer.add(newMesh);\n    this.scene.add(tempContainer);\n    this.renderer.setRenderTarget(new WebGLRenderTarget());\n    this.renderer.render(this.scene, this.camera);\n    this.renderer.setRenderTarget(null);\n    const { duration, properties } = this.viewer.dataHelper.getAnimationProperties(\n      transition.speed,\n      transition.rotation ? e.position : null,\n      zoomTransition ? e.zoomLevel : null\n    );\n    const animation = new Animation({\n      properties: {\n        ...properties,\n        opacity: { start: 0, end: 1 }\n      },\n      duration,\n      easing: \"inOutCubic\",\n      onTick: (props) => {\n        switch (transition.effect) {\n          case \"fade\":\n            this.viewer.adapter.setTextureOpacity(newMesh, props.opacity);\n            break;\n          case \"black\":\n          case \"white\":\n            if (props.opacity < 0.5) {\n              this.renderer.toneMappingExposure = transition.effect === \"black\" ? MathUtils9.mapLinear(props.opacity, 0, 0.5, 1, 0) : MathUtils9.mapLinear(props.opacity, 0, 0.5, 1, 4);\n            } else {\n              this.renderer.toneMappingExposure = transition.effect === \"black\" ? MathUtils9.mapLinear(props.opacity, 0.5, 1, 0, 1) : MathUtils9.mapLinear(props.opacity, 0.5, 1, 4, 1);\n              this.mesh.visible = false;\n              this.viewer.adapter.setTextureOpacity(newMesh, 1);\n              if (zoomProvided && !zoomTransition) {\n                this.viewer.dynamics.zoom.setValue(e.zoomLevel);\n              }\n            }\n            break;\n        }\n        if (positionProvided && transition.rotation) {\n          this.viewer.dynamics.position.setValue({\n            yaw: props.yaw,\n            pitch: props.pitch\n          });\n        }\n        if (zoomProvided && zoomTransition) {\n          this.viewer.dynamics.zoom.setValue(props.zoom);\n        }\n        this.viewer.needsUpdate();\n      }\n    });\n    animation.then((completed) => {\n      tempContainer.remove(newMesh);\n      this.scene.remove(tempContainer);\n      if (completed) {\n        this.viewer.adapter.disposeTexture(this.state.textureData);\n        this.meshContainer.remove(this.mesh);\n        this.viewer.adapter.disposeMesh(this.mesh);\n        this.mesh = newMesh;\n        this.meshContainer.add(newMesh);\n        this.state.textureData = textureData;\n        this.setPanoramaPose(textureData.panoData);\n        this.setSphereCorrection(options.sphereCorrection);\n        if (positionProvided && !transition.rotation) {\n          this.viewer.rotate(options.position);\n        }\n      } else {\n        this.viewer.adapter.disposeTexture(textureData);\n        this.viewer.adapter.disposeMesh(newMesh);\n      }\n    });\n    return animation;\n  }\n  /**\n   * Returns intersections with objects in the scene\n   */\n  getIntersections(viewerPoint) {\n    vector2.x = 2 * viewerPoint.x / this.state.size.width - 1;\n    vector2.y = -2 * viewerPoint.y / this.state.size.height + 1;\n    this.raycaster.setFromCamera(vector2, this.camera);\n    const intersections = this.raycaster.intersectObjects(this.scene.children, true).filter((i) => i.object.visible).filter((i) => i.object.isMesh && !!i.object.userData);\n    if (this.customRenderer?.getIntersections) {\n      intersections.push(...this.customRenderer.getIntersections(this.raycaster, vector2));\n    }\n    return intersections;\n  }\n  /**\n   * Checks if an object/point is currently visible\n   */\n  isObjectVisible(value) {\n    if (!value) {\n      return false;\n    }\n    if (this.frustumNeedsUpdate) {\n      matrix4.multiplyMatrices(this.camera.projectionMatrix, this.camera.matrixWorldInverse);\n      this.frustum.setFromProjectionMatrix(matrix4);\n      this.frustumNeedsUpdate = false;\n    }\n    if (value.isVector3) {\n      return this.frustum.containsPoint(value);\n    } else if (value.isMesh && value.geometry) {\n      const mesh = value;\n      if (!mesh.geometry.boundingBox) {\n        mesh.geometry.computeBoundingBox();\n      }\n      box3.copy(mesh.geometry.boundingBox).applyMatrix4(mesh.matrixWorld);\n      return this.frustum.intersectsBox(box3);\n    } else if (value.isObject3D) {\n      return this.frustum.intersectsObject(value);\n    } else {\n      return false;\n    }\n  }\n  /**\n   * Adds an object to the THREE scene\n   */\n  addObject(object) {\n    this.scene.add(object);\n  }\n  /**\n   * Removes an object from the THREE scene\n   */\n  removeObject(object) {\n    this.scene.remove(object);\n  }\n  /**\n   * Calls `dispose` on all objects and textures\n   * @internal\n   */\n  cleanScene(object) {\n    const disposeMaterial = (material) => {\n      material.map?.dispose();\n      if (material.uniforms) {\n        Object.values(material.uniforms).forEach((uniform) => {\n          uniform.value?.dispose?.();\n        });\n      }\n      material.dispose();\n    };\n    object.traverse((item) => {\n      item.geometry?.dispose();\n      if (item.material) {\n        if (Array.isArray(item.material)) {\n          item.material.forEach((material) => {\n            disposeMaterial(material);\n          });\n        } else {\n          disposeMaterial(item.material);\n        }\n      }\n      if (!(item instanceof Scene)) {\n        item.dispose?.();\n      }\n      if (item !== object) {\n        this.cleanScene(item);\n      }\n    });\n  }\n};\n\n// src/lib/BlobLoader.ts\nimport { Loader as Loader2 } from \"three\";\nvar BlobLoader = class extends Loader2 {\n  // @ts-ignore\n  load(url, onLoad, onProgress, onError, abortSignal) {\n    const req = new Request(url, {\n      headers: new Headers(this.requestHeader),\n      credentials: this.withCredentials ? \"include\" : \"same-origin\"\n    });\n    fetch(req, {\n      signal: abortSignal\n    }).then((response) => {\n      if (response.status === 200 || response.status === 0) {\n        const reader = response.body.getReader();\n        const contentLength = response.headers.get(\"Content-Length\") || response.headers.get(\"X-File-Size\");\n        const total = contentLength ? parseInt(contentLength) : 0;\n        const lengthComputable = total !== 0;\n        let loaded = 0;\n        const stream = new ReadableStream({\n          start(controller) {\n            readData();\n            function readData() {\n              reader.read().then(({ done, value }) => {\n                if (done) {\n                  controller.close();\n                } else {\n                  loaded += value.byteLength;\n                  const event = new ProgressEvent(\"progress\", { lengthComputable, loaded, total });\n                  onProgress(event);\n                  controller.enqueue(value);\n                  readData();\n                }\n              }).catch((err) => {\n                onError(err);\n              });\n            }\n          }\n        });\n        return new Response(stream);\n      } else {\n        throw new Error(`fetch for \"${response.url}\" responded with ${response.status}: ${response.statusText}`);\n      }\n    }).then((response) => {\n      return response.blob();\n    }).then((data) => {\n      onLoad(data);\n    }).catch((err) => {\n      onError(err);\n    });\n  }\n};\n\n// src/lib/ImageLoader.ts\nimport { Loader as Loader3 } from \"three\";\nvar ImageLoader = class extends Loader3 {\n  // @ts-ignore\n  load(url, onLoad, onError, abortSignal) {\n    const image = document.createElement(\"img\");\n    function onImageLoad() {\n      removeEventListeners();\n      onLoad(this);\n    }\n    function onImageError(event) {\n      removeEventListeners();\n      if (abortSignal?.aborted) {\n        const e = new Error();\n        e.name = \"AbortError\";\n        e.message = \"The operation was aborted.\";\n        onError(e);\n      } else {\n        onError(event);\n      }\n    }\n    function onAbortSignal() {\n      image.src = \"\";\n    }\n    function removeEventListeners() {\n      image.removeEventListener(\"load\", onImageLoad, false);\n      image.removeEventListener(\"error\", onImageError, false);\n      abortSignal?.removeEventListener(\"abort\", onAbortSignal, false);\n    }\n    image.addEventListener(\"load\", onImageLoad, false);\n    image.addEventListener(\"error\", onImageError, false);\n    abortSignal?.addEventListener(\"abort\", onAbortSignal, false);\n    if (!url.startsWith(\"data:\") && this.crossOrigin !== void 0) {\n      image.crossOrigin = this.crossOrigin;\n    }\n    image.src = url;\n    return image;\n  }\n};\n\n// src/services/TextureLoader.ts\nvar TextureLoader = class extends AbstractService {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer);\n    this.abortCtrl = {};\n    this.fileLoader = new BlobLoader();\n    this.imageLoader = new ImageLoader();\n    if (this.config.withCredentials) {\n      this.fileLoader.setWithCredentials(true);\n      this.imageLoader.setCrossOrigin(\"use-credentials\");\n    }\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.abortLoading();\n    super.destroy();\n  }\n  /**\n   * Cancels current HTTP requests\n   * @internal\n   */\n  abortLoading() {\n    Object.values(this.abortCtrl).forEach((ctrl) => ctrl.abort());\n    this.abortCtrl = {};\n  }\n  /**\n   * Loads a Blob with FileLoader\n   */\n  loadFile(url, onProgress, cacheKey) {\n    const cached = Cache.get(url, cacheKey);\n    if (cached) {\n      if (cached instanceof Blob) {\n        onProgress?.(100);\n        return Promise.resolve(cached);\n      } else {\n        Cache.remove(url, cacheKey);\n      }\n    }\n    if (this.config.requestHeaders) {\n      this.fileLoader.setRequestHeader(this.config.requestHeaders(url));\n    }\n    return new Promise((resolve, reject) => {\n      let progress = 0;\n      onProgress?.(progress);\n      this.fileLoader.load(\n        url,\n        (result) => {\n          progress = 100;\n          onProgress?.(progress);\n          Cache.add(url, cacheKey, result);\n          resolve(result);\n        },\n        (e) => {\n          if (e.lengthComputable) {\n            const newProgress = e.loaded / e.total * 100;\n            if (newProgress > progress) {\n              progress = newProgress;\n              onProgress?.(progress);\n            }\n          }\n        },\n        (err) => {\n          reject(err);\n        },\n        this.__getAbortSignal(cacheKey)\n      );\n    });\n  }\n  /**\n   * Loads an image with ImageLoader or with FileLoader if progress is tracked or if request headers are configured\n   */\n  loadImage(url, onProgress, cacheKey) {\n    const cached = Cache.get(url, cacheKey);\n    if (cached) {\n      onProgress?.(100);\n      if (cached instanceof Blob) {\n        return this.blobToImage(cached);\n      } else {\n        return Promise.resolve(cached);\n      }\n    }\n    if (!onProgress && !this.config.requestHeaders) {\n      return new Promise((resolve, reject) => {\n        this.imageLoader.load(\n          url,\n          (result) => {\n            Cache.add(url, cacheKey, result);\n            resolve(result);\n          },\n          (err) => {\n            reject(err);\n          },\n          this.__getAbortSignal(cacheKey)\n        );\n      });\n    } else {\n      return this.loadFile(url, onProgress, cacheKey).then((blob) => this.blobToImage(blob));\n    }\n  }\n  /**\n   * Converts a file loaded with {@link loadFile} into an image\n   */\n  blobToImage(blob) {\n    return new Promise((resolve, reject) => {\n      const img = document.createElement(\"img\");\n      img.onload = () => {\n        URL.revokeObjectURL(img.src);\n        resolve(img);\n      };\n      img.onerror = reject;\n      img.src = URL.createObjectURL(blob);\n    });\n  }\n  /**\n   * Preload a panorama file without displaying it\n   */\n  preloadPanorama(panorama) {\n    if (this.viewer.adapter.supportsPreload(panorama)) {\n      return this.viewer.adapter.loadTexture(panorama, false);\n    } else {\n      return Promise.reject(new PSVError(\"Current adapter does not support preload\"));\n    }\n  }\n  /**\n   * @internal\n   */\n  dispatchProgress(progress) {\n    this.viewer.loader.setProgress(progress);\n    this.viewer.dispatchEvent(new LoadProgressEvent(Math.round(progress)));\n  }\n  /**\n   * Get an abort signal\n   * the signal is shared accross all requests with the same cache key (for tiles adapters)\n   */\n  __getAbortSignal(cacheKey) {\n    if (cacheKey) {\n      if (this.abortCtrl[cacheKey]?.signal.aborted) {\n        delete this.abortCtrl[cacheKey];\n      }\n      if (!this.abortCtrl[cacheKey]) {\n        this.abortCtrl[cacheKey] = new AbortController();\n      }\n      return this.abortCtrl[cacheKey].signal;\n    }\n    return null;\n  }\n};\n\n// src/services/ViewerDynamics.ts\nimport { MathUtils as MathUtils10 } from \"three\";\nvar ViewerDynamics = class extends AbstractService {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer);\n    this.zoom = new Dynamic(\n      (zoomLevel) => {\n        this.viewer.state.vFov = this.viewer.dataHelper.zoomLevelToFov(zoomLevel);\n        this.viewer.state.hFov = this.viewer.dataHelper.vFovToHFov(this.viewer.state.vFov);\n        this.viewer.dispatchEvent(new ZoomUpdatedEvent(zoomLevel));\n      },\n      {\n        defaultValue: this.viewer.config.defaultZoomLvl,\n        min: 0,\n        max: 100,\n        wrap: false\n      }\n    );\n    this.position = new MultiDynamic(\n      (position) => {\n        this.viewer.dataHelper.sphericalCoordsToVector3(position, this.viewer.state.direction);\n        this.viewer.dispatchEvent(new PositionUpdatedEvent(position));\n      },\n      {\n        yaw: new Dynamic(null, {\n          defaultValue: this.config.defaultYaw,\n          min: 0,\n          max: 2 * Math.PI,\n          wrap: true\n        }),\n        pitch: new Dynamic(null, {\n          defaultValue: this.config.defaultPitch,\n          min: -Math.PI / 2,\n          max: Math.PI / 2,\n          wrap: false\n        })\n      }\n    );\n    this.roll = new Dynamic(\n      (roll) => {\n        this.viewer.state.roll = roll;\n        this.viewer.dispatchEvent(new RollUpdatedEvent(roll));\n      },\n      {\n        defaultValue: 0,\n        min: -Math.PI,\n        max: Math.PI,\n        wrap: false\n      }\n    );\n    this.updateSpeeds();\n  }\n  /**\n   * @internal\n   */\n  updateSpeeds() {\n    this.zoom.setSpeed(this.config.zoomSpeed * 50);\n    this.position.setSpeed(MathUtils10.degToRad(this.config.moveSpeed * 50));\n    this.roll.setSpeed(MathUtils10.degToRad(this.config.moveSpeed * 50));\n  }\n  /**\n   * @internal\n   */\n  update(elapsed) {\n    this.zoom.update(elapsed);\n    this.position.update(elapsed);\n    this.roll.update(elapsed);\n  }\n};\n\n// src/services/ViewerState.ts\nimport { Vector3 as Vector34 } from \"three\";\nvar ViewerState = class {\n  /**\n   * @internal\n   */\n  // eslint-disable-next-line  @typescript-eslint/no-empty-function\n  constructor() {\n    /**\n     * when all components are loaded\n     */\n    this.ready = false;\n    /**\n     * if the view needs to be renderer\n     */\n    this.needsUpdate = false;\n    /**\n     * number of plugins requesting to continuously render the scene\n     */\n    this.continuousUpdateCount = 0;\n    /**\n     * if the keyboard events are currently listened to\n     */\n    this.keyboardEnabled = false;\n    /**\n     * direction of the camera\n     */\n    this.direction = new Vector34(0, 0, SPHERE_RADIUS);\n    /**\n     * current camera roll\n     */\n    this.roll = 0;\n    /**\n     * vertical FOV\n     */\n    this.vFov = 60;\n    /**\n     * horizontal FOV\n     */\n    this.hFov = 60;\n    /**\n     * renderer aspect ratio\n     */\n    this.aspect = 1;\n    /**\n     * currently running animation\n     */\n    this.animation = null;\n    /**\n     * currently running transition\n     */\n    this.transitionAnimation = null;\n    /**\n     * promise of the last \"setPanorama()\" call\n     */\n    this.loadingPromise = null;\n    /**\n     * time of the last user action\n     */\n    this.idleTime = -1;\n    /**\n     * registered THREE objects observer\n     */\n    this.objectsObservers = {};\n    /**\n     * size of the container\n     */\n    this.size = {\n      width: 0,\n      height: 0\n    };\n  }\n};\n\n// src/Viewer.ts\nvar Viewer = class extends TypedEventTarget {\n  constructor(config) {\n    super();\n    /** @internal */\n    this.plugins = {};\n    /** @internal */\n    this.children = [];\n    this.parent = getElement(config.container);\n    if (!this.parent) {\n      throw new PSVError(`\"container\" element not found.`);\n    }\n    this.parent[VIEWER_DATA] = this;\n    this.container = document.createElement(\"div\");\n    this.container.classList.add(\"psv-container\");\n    this.parent.appendChild(this.container);\n    checkClosedShadowDom(this.parent);\n    checkStylesheet(this.container, \"core\");\n    this.state = new ViewerState();\n    this.config = getViewerConfig(config);\n    this.__setSize(this.config.size);\n    this.overlay = new Overlay(this);\n    try {\n      SYSTEM.load();\n    } catch (err) {\n      console.error(err);\n      this.showError(this.config.lang.webglError);\n      return;\n    }\n    Cache.init();\n    this.adapter = new this.config.adapter[0](this, this.config.adapter[1]);\n    this.renderer = new Renderer(this);\n    this.textureLoader = new TextureLoader(this);\n    this.eventsHandler = new EventsHandler(this);\n    this.dataHelper = new DataHelper(this);\n    this.dynamics = new ViewerDynamics(this);\n    this.adapter.init?.();\n    this.loader = new Loader(this);\n    this.navbar = new Navbar(this);\n    this.panel = new Panel(this);\n    this.notification = new Notification(this);\n    this.autoSize();\n    this.setCursor(null);\n    resolveBoolean(SYSTEM.isTouchEnabled, (enabled) => {\n      toggleClass(this.container, \"psv--is-touch\", enabled);\n    });\n    this.config.plugins.forEach(([plugin, opts]) => {\n      this.plugins[plugin.id] = new plugin(this, opts);\n    });\n    for (const plugin of Object.values(this.plugins)) {\n      plugin.init?.();\n    }\n    if (this.config.navbar) {\n      this.navbar.setButtons(this.config.navbar);\n    }\n    if (!this.state.loadingPromise) {\n      if (this.config.panorama) {\n        this.setPanorama(this.config.panorama, {\n          sphereCorrection: this.config.sphereCorrection,\n          panoData: this.config.panoData\n        });\n      } else {\n        this.loader.show();\n      }\n    }\n  }\n  /**\n   * Destroys the viewer\n   */\n  destroy() {\n    this.stopAll();\n    this.stopKeyboardControl();\n    this.exitFullscreen();\n    for (const [id, plugin] of Object.entries(this.plugins)) {\n      plugin.destroy();\n      delete this.plugins[id];\n    }\n    this.children.slice().forEach((child) => child.destroy());\n    this.children.length = 0;\n    this.eventsHandler?.destroy();\n    this.renderer?.destroy();\n    this.textureLoader?.destroy();\n    this.dataHelper?.destroy();\n    this.adapter?.destroy();\n    this.dynamics?.destroy();\n    this.parent.removeChild(this.container);\n    delete this.parent[VIEWER_DATA];\n  }\n  init() {\n    this.eventsHandler.init();\n    this.renderer.init();\n    if (this.config.navbar) {\n      this.navbar.show();\n    }\n    if (this.config.keyboard === \"always\") {\n      this.startKeyboardControl();\n    }\n    this.resetIdleTimer();\n    this.state.ready = true;\n    this.dispatchEvent(new ReadyEvent());\n  }\n  /**\n   * Restarts the idle timer\n   * @internal\n   */\n  resetIdleTimer() {\n    this.state.idleTime = performance.now();\n  }\n  /**\n   * Stops the idle timer\n   * @internal\n   */\n  disableIdleTimer() {\n    this.state.idleTime = -1;\n  }\n  /**\n   * Returns the instance of a plugin if it exists\n   * @example By plugin identifier\n   * ```js\n   * viewer.getPlugin('markers')\n   * ```\n   * @example By plugin class with TypeScript support\n   * ```ts\n   * viewer.getPlugin<MarkersPlugin>(MarkersPlugin)\n   * ```\n   */\n  getPlugin(pluginId) {\n    if (typeof pluginId === \"string\") {\n      return this.plugins[pluginId];\n    } else {\n      const pluginCtor = pluginInterop(pluginId);\n      return pluginCtor ? this.plugins[pluginCtor.id] : null;\n    }\n  }\n  /**\n   * Returns the current position of the camera\n   */\n  getPosition() {\n    return this.dataHelper.cleanPosition(this.dynamics.position.current);\n  }\n  /**\n   * Returns the current zoom level\n   */\n  getZoomLevel() {\n    return this.dynamics.zoom.current;\n  }\n  /**\n   * Returns the current viewer size\n   */\n  getSize() {\n    return { ...this.state.size };\n  }\n  /**\n   * Checks if the viewer is in fullscreen\n   */\n  isFullscreenEnabled() {\n    return isFullscreenEnabled(this.parent, SYSTEM.isIphone);\n  }\n  /**\n   * Request a new render of the scene\n   */\n  needsUpdate() {\n    this.state.needsUpdate = true;\n  }\n  /**\n   * Request the scene to be continuously renderer (when using videos)\n   */\n  needsContinuousUpdate(enabled) {\n    if (enabled) {\n      this.state.continuousUpdateCount++;\n    } else if (this.state.continuousUpdateCount > 0) {\n      this.state.continuousUpdateCount--;\n    }\n  }\n  /**\n   * Resizes the scene if the viewer is resized\n   */\n  autoSize() {\n    if (this.container.clientWidth !== this.state.size.width || this.container.clientHeight !== this.state.size.height) {\n      this.state.size.width = Math.round(this.container.clientWidth);\n      this.state.size.height = Math.round(this.container.clientHeight);\n      this.state.aspect = this.state.size.width / this.state.size.height;\n      this.state.hFov = this.dataHelper.vFovToHFov(this.state.vFov);\n      this.dispatchEvent(new SizeUpdatedEvent(this.getSize()));\n      this.navbar.autoSize();\n    }\n  }\n  /**\n   * Loads a new panorama file\n   * Loads a new panorama file, optionally changing the camera position/zoom and activating the transition animation.<br>\n   * If the \"options\" parameter is not defined, the camera will not move and the ongoing animation will continue.<br>\n   * If another loading is already in progress it will be aborted.\n   * @returns promise resolved with false if the loading was aborted by another call\n   */\n  setPanorama(path, options = {}) {\n    this.textureLoader.abortLoading();\n    this.state.transitionAnimation?.cancel();\n    const transition = this.dataHelper.getTransitionOptions(options);\n    if (options.showLoader === void 0) {\n      options.showLoader = true;\n    }\n    if (options.caption === void 0) {\n      options.caption = this.config.caption;\n    }\n    if (options.description === void 0) {\n      options.description = this.config.description;\n    }\n    if (!options.panoData && typeof this.config.panoData === \"function\") {\n      options.panoData = this.config.panoData;\n    }\n    this.hideError();\n    this.resetIdleTimer();\n    this.config.panorama = path;\n    this.config.caption = options.caption;\n    this.config.description = options.description;\n    this.config.sphereCorrection = options.sphereCorrection;\n    const done = (err) => {\n      if (isAbortError(err)) {\n        return false;\n      }\n      this.loader.hide();\n      this.state.loadingPromise = null;\n      if (err) {\n        this.navbar.setCaption(null);\n        this.showError(this.config.lang.loadError);\n        console.error(err);\n        this.dispatchEvent(new PanoramaErrorEvent(path, err));\n        throw err;\n      } else {\n        this.navbar.setCaption(this.config.caption);\n        return true;\n      }\n    };\n    this.navbar.setCaption(`<em>${this.config.lang.loading}</em>`);\n    if (options.showLoader || !this.state.ready) {\n      this.loader.show();\n    }\n    this.dispatchEvent(new PanoramaLoadEvent(path));\n    const loadingPromise = this.adapter.loadTexture(this.config.panorama, true, options.panoData).then((textureData) => {\n      if (textureData.panorama !== this.config.panorama) {\n        this.adapter.disposeTexture(textureData);\n        throw getAbortError();\n      }\n      const cleanOptions = this.dataHelper.cleanPanoramaOptions(options, textureData.panoData);\n      if (!isNil(cleanOptions.zoom) || !isNil(cleanOptions.position)) {\n        this.stopAll();\n      }\n      return {\n        textureData,\n        cleanOptions\n      };\n    });\n    if (!transition || !this.state.ready || !this.adapter.supportsTransition(this.config.panorama)) {\n      this.state.loadingPromise = loadingPromise.then(({ textureData, cleanOptions }) => {\n        this.renderer.show();\n        this.renderer.setTexture(textureData);\n        this.renderer.setPanoramaPose(textureData.panoData);\n        this.renderer.setSphereCorrection(options.sphereCorrection);\n        if (!this.state.ready) {\n          this.init();\n        }\n        this.dispatchEvent(new PanoramaLoadedEvent(textureData));\n        if (!isNil(cleanOptions.zoom)) {\n          this.zoom(cleanOptions.zoom);\n        }\n        if (!isNil(cleanOptions.position)) {\n          this.rotate(cleanOptions.position);\n        }\n      }).then(\n        () => done(),\n        (err) => done(err)\n      );\n    } else {\n      this.state.loadingPromise = loadingPromise.then(({ textureData, cleanOptions }) => {\n        this.loader.hide();\n        this.dispatchEvent(new PanoramaLoadedEvent(textureData));\n        this.state.transitionAnimation = this.renderer.transition(textureData, cleanOptions, transition);\n        return this.state.transitionAnimation;\n      }).then((completed) => {\n        this.state.transitionAnimation = null;\n        this.dispatchEvent(new TransitionDoneEvent(completed));\n        if (!completed) {\n          throw getAbortError();\n        }\n      }).then(\n        () => done(),\n        (err) => done(err)\n      );\n    }\n    return this.state.loadingPromise;\n  }\n  /**\n   * Update options\n   * @throws {@link PSVError} if the configuration is invalid\n   */\n  setOptions(options) {\n    const rawConfig = {\n      ...this.config,\n      ...options\n    };\n    for (let [key, value] of Object.entries(options)) {\n      if (!(key in DEFAULTS)) {\n        logWarn(`Unknown option ${key}`);\n        continue;\n      }\n      if (key in READONLY_OPTIONS) {\n        logWarn(READONLY_OPTIONS[key]);\n        continue;\n      }\n      if (key in CONFIG_PARSERS) {\n        value = CONFIG_PARSERS[key](value, {\n          rawConfig,\n          defValue: DEFAULTS[key]\n        });\n      }\n      this.config[key] = value;\n      switch (key) {\n        case \"mousemove\":\n          if (!this.state.cursorOverride) {\n            this.setCursor(null);\n          }\n          break;\n        case \"caption\":\n          this.navbar.setCaption(this.config.caption);\n          break;\n        case \"size\":\n          this.resize(this.config.size);\n          break;\n        case \"sphereCorrection\":\n          this.renderer.setSphereCorrection(this.config.sphereCorrection);\n          break;\n        case \"navbar\":\n        case \"lang\":\n          this.navbar.setButtons(this.config.navbar);\n          break;\n        case \"moveSpeed\":\n        case \"zoomSpeed\":\n          this.dynamics.updateSpeeds();\n          break;\n        case \"minFov\":\n        case \"maxFov\":\n          this.dynamics.zoom.setValue(this.dataHelper.fovToZoomLevel(this.state.vFov));\n          this.dispatchEvent(new ZoomUpdatedEvent(this.getZoomLevel()));\n          break;\n        case \"keyboard\":\n          if (this.config.keyboard === \"always\") {\n            this.startKeyboardControl();\n          } else {\n            this.stopKeyboardControl();\n          }\n          break;\n        default:\n          break;\n      }\n    }\n    this.needsUpdate();\n    this.dispatchEvent(new ConfigChangedEvent(Object.keys(options)));\n  }\n  /**\n   * Update options\n   * @throws {@link PSVError} if the configuration is invalid\n   */\n  setOption(option, value) {\n    this.setOptions({ [option]: value });\n  }\n  /**\n   * Displays an error message over the viewer\n   */\n  showError(message) {\n    this.overlay.show({\n      id: IDS.ERROR,\n      image: error_default,\n      title: message,\n      dismissible: false\n    });\n  }\n  /**\n   *  Hides the error message\n   */\n  hideError() {\n    this.overlay.hide(IDS.ERROR);\n  }\n  /**\n   * Rotates the view to specific position\n   */\n  rotate(position) {\n    const e = new BeforeRotateEvent(this.dataHelper.cleanPosition(position));\n    this.dispatchEvent(e);\n    if (e.defaultPrevented) {\n      return;\n    }\n    this.dynamics.position.setValue(e.position);\n  }\n  /**\n   * Zooms to a specific level between `maxFov` and `minFov`\n   */\n  zoom(level) {\n    this.dynamics.zoom.setValue(level);\n  }\n  /**\n   * Increases the zoom level\n   */\n  zoomIn(step = 1) {\n    this.dynamics.zoom.step(step);\n  }\n  /**\n   * Decreases the zoom level\n   */\n  zoomOut(step = 1) {\n    this.dynamics.zoom.step(-step);\n  }\n  /**\n   * Rotates and zooms the view with a smooth animation\n   */\n  animate(options) {\n    const positionProvided = isExtendedPosition(options);\n    const zoomProvided = !isNil(options.zoom);\n    const e = new BeforeAnimateEvent(\n      positionProvided ? this.dataHelper.cleanPosition(options) : void 0,\n      options.zoom\n    );\n    this.dispatchEvent(e);\n    if (e.defaultPrevented) {\n      return;\n    }\n    this.stopAll();\n    const { duration, properties } = this.dataHelper.getAnimationProperties(options.speed, e.position, e.zoomLevel);\n    if (!duration) {\n      if (positionProvided) {\n        this.rotate(e.position);\n      }\n      if (zoomProvided) {\n        this.zoom(e.zoomLevel);\n      }\n      return new Animation(null);\n    }\n    this.state.animation = new Animation({\n      properties,\n      duration,\n      easing: options.easing || \"inOutSine\",\n      onTick: (props) => {\n        if (positionProvided) {\n          this.dynamics.position.setValue({\n            yaw: props.yaw,\n            pitch: props.pitch\n          });\n        }\n        if (zoomProvided) {\n          this.dynamics.zoom.setValue(props.zoom);\n        }\n      }\n    });\n    this.state.animation.then(() => {\n      this.state.animation = null;\n      this.resetIdleTimer();\n    });\n    return this.state.animation;\n  }\n  /**\n   * Stops the ongoing animation\n   * The return value is a Promise because the is no guaranty the animation can be stopped synchronously.\n   */\n  stopAnimation() {\n    if (this.state.animation) {\n      this.state.animation.cancel();\n      return this.state.animation;\n    } else {\n      return Promise.resolve();\n    }\n  }\n  /**\n   * Resizes the viewer\n   */\n  resize(size) {\n    this.__setSize(size);\n    this.autoSize();\n  }\n  __setSize(size) {\n    [\"width\", \"height\"].forEach((dim) => {\n      if (size?.[dim]) {\n        if (/^[0-9.]+$/.test(size[dim])) {\n          size[dim] += \"px\";\n        }\n        this.parent.style[dim] = size[dim];\n      }\n    });\n  }\n  /**\n   * Enters the fullscreen mode\n   */\n  enterFullscreen() {\n    if (!this.isFullscreenEnabled()) {\n      requestFullscreen(this.parent, SYSTEM.isIphone);\n    }\n  }\n  /**\n   * Exits the fullscreen mode\n   */\n  exitFullscreen() {\n    if (this.isFullscreenEnabled()) {\n      exitFullscreen(SYSTEM.isIphone);\n    }\n  }\n  /**\n   * Enters or exits the fullscreen mode\n   */\n  toggleFullscreen() {\n    if (!this.isFullscreenEnabled()) {\n      this.enterFullscreen();\n    } else {\n      this.exitFullscreen();\n    }\n  }\n  /**\n   * Enables the keyboard controls\n   */\n  startKeyboardControl() {\n    this.state.keyboardEnabled = true;\n  }\n  /**\n   * Disables the keyboard controls\n   */\n  stopKeyboardControl() {\n    this.state.keyboardEnabled = false;\n  }\n  /**\n   * Creates a new tooltip\n   * Use {@link Tooltip.move} to update the tooltip without re-create\n   * @throws {@link PSVError} if the configuration is invalid\n   */\n  createTooltip(config) {\n    return new Tooltip(this, config);\n  }\n  /**\n   * Changes the global mouse cursor\n   */\n  setCursor(cursor) {\n    this.state.cursorOverride = cursor;\n    if (!cursor) {\n      this.container.style.cursor = this.config.mousemove ? \"move\" : \"default\";\n    } else {\n      this.container.style.cursor = cursor;\n    }\n  }\n  /**\n   * Subscribes to events on objects in the three.js scene\n   * @param userDataKey - only objects with the following `userData` will be observed\n   */\n  observeObjects(userDataKey) {\n    if (!this.state.objectsObservers[userDataKey]) {\n      this.state.objectsObservers[userDataKey] = null;\n    }\n  }\n  /**\n   * Unsubscribes to events on objects\n   */\n  unobserveObjects(userDataKey) {\n    delete this.state.objectsObservers[userDataKey];\n  }\n  /**\n   * Stops all current animations\n   * @internal\n   */\n  stopAll() {\n    this.dispatchEvent(new StopAllEvent());\n    this.disableIdleTimer();\n    return this.stopAnimation();\n  }\n};\n\n// src/index.ts\nvar VERSION = \"5.13.2\";\nexport {\n  AbstractAdapter,\n  AbstractButton,\n  AbstractComponent,\n  AbstractConfigurablePlugin,\n  AbstractPlugin,\n  constants_exports as CONSTANTS,\n  Cache,\n  DEFAULTS,\n  DualFisheyeAdapter,\n  EquirectangularAdapter,\n  PSVError,\n  SYSTEM,\n  TypedEvent,\n  VERSION,\n  Viewer,\n  events_exports as events,\n  registerButton,\n  utils_exports as utils\n};\n//# sourceMappingURL=index.module.js.map","/*!\n * Photo Sphere Viewer / Markers Plugin 5.13.2\n * @copyright 2015-2025 Damien \"Mistic\" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\nvar __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// src/index.ts\nimport { DEFAULTS, registerButton } from \"@photo-sphere-viewer/core\";\n\n// src/events.ts\nvar events_exports = {};\n__export(events_exports, {\n  EnterMarkerEvent: () => EnterMarkerEvent,\n  GotoMarkerDoneEvent: () => GotoMarkerDoneEvent,\n  HideMarkersEvent: () => HideMarkersEvent,\n  LeaveMarkerEvent: () => LeaveMarkerEvent,\n  MarkerVisibilityEvent: () => MarkerVisibilityEvent,\n  MarkersPluginEvent: () => MarkersPluginEvent,\n  RenderMarkersListEvent: () => RenderMarkersListEvent,\n  SelectMarkerEvent: () => SelectMarkerEvent,\n  SelectMarkerListEvent: () => SelectMarkerListEvent,\n  SetMarkersEvent: () => SetMarkersEvent,\n  ShowMarkersEvent: () => ShowMarkersEvent,\n  UnselectMarkerEvent: () => UnselectMarkerEvent\n});\nimport { TypedEvent } from \"@photo-sphere-viewer/core\";\nvar MarkersPluginEvent = class extends TypedEvent {\n};\nvar _MarkerVisibilityEvent = class _MarkerVisibilityEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker, visible) {\n    super(_MarkerVisibilityEvent.type);\n    this.marker = marker;\n    this.visible = visible;\n  }\n};\n_MarkerVisibilityEvent.type = \"marker-visibility\";\nvar MarkerVisibilityEvent = _MarkerVisibilityEvent;\nvar _GotoMarkerDoneEvent = class _GotoMarkerDoneEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker) {\n    super(_GotoMarkerDoneEvent.type);\n    this.marker = marker;\n  }\n};\n_GotoMarkerDoneEvent.type = \"goto-marker-done\";\nvar GotoMarkerDoneEvent = _GotoMarkerDoneEvent;\nvar _LeaveMarkerEvent = class _LeaveMarkerEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker) {\n    super(_LeaveMarkerEvent.type);\n    this.marker = marker;\n  }\n};\n_LeaveMarkerEvent.type = \"leave-marker\";\nvar LeaveMarkerEvent = _LeaveMarkerEvent;\nvar _EnterMarkerEvent = class _EnterMarkerEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker) {\n    super(_EnterMarkerEvent.type);\n    this.marker = marker;\n  }\n};\n_EnterMarkerEvent.type = \"enter-marker\";\nvar EnterMarkerEvent = _EnterMarkerEvent;\nvar _SelectMarkerEvent = class _SelectMarkerEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker, doubleClick, rightClick) {\n    super(_SelectMarkerEvent.type);\n    this.marker = marker;\n    this.doubleClick = doubleClick;\n    this.rightClick = rightClick;\n  }\n};\n_SelectMarkerEvent.type = \"select-marker\";\nvar SelectMarkerEvent = _SelectMarkerEvent;\nvar _SelectMarkerListEvent = class _SelectMarkerListEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker) {\n    super(_SelectMarkerListEvent.type);\n    this.marker = marker;\n  }\n};\n_SelectMarkerListEvent.type = \"select-marker-list\";\nvar SelectMarkerListEvent = _SelectMarkerListEvent;\nvar _UnselectMarkerEvent = class _UnselectMarkerEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker) {\n    super(_UnselectMarkerEvent.type);\n    this.marker = marker;\n  }\n};\n_UnselectMarkerEvent.type = \"unselect-marker\";\nvar UnselectMarkerEvent = _UnselectMarkerEvent;\nvar _HideMarkersEvent = class _HideMarkersEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor() {\n    super(_HideMarkersEvent.type);\n  }\n};\n_HideMarkersEvent.type = \"hide-markers\";\nvar HideMarkersEvent = _HideMarkersEvent;\nvar _SetMarkersEvent = class _SetMarkersEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(markers) {\n    super(_SetMarkersEvent.type);\n    this.markers = markers;\n  }\n};\n_SetMarkersEvent.type = \"set-markers\";\nvar SetMarkersEvent = _SetMarkersEvent;\nvar _ShowMarkersEvent = class _ShowMarkersEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor() {\n    super(_ShowMarkersEvent.type);\n  }\n};\n_ShowMarkersEvent.type = \"show-markers\";\nvar ShowMarkersEvent = _ShowMarkersEvent;\nvar _RenderMarkersListEvent = class _RenderMarkersListEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(markers) {\n    super(_RenderMarkersListEvent.type);\n    this.markers = markers;\n  }\n};\n_RenderMarkersListEvent.type = \"render-markers-list\";\nvar RenderMarkersListEvent = _RenderMarkersListEvent;\n\n// src/MarkersButton.ts\nimport { AbstractButton } from \"@photo-sphere-viewer/core\";\n\n// src/icons/pin.svg\nvar pin_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"10 9 81 81\"><path fill=\"currentColor\" d=\"M50.5 90S22.9 51.9 22.9 36.6 35.2 9 50.5 9s27.6 12.4 27.6 27.6S50.5 90 50.5 90zm0-66.3c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11z\"/><!--Created by Rohith M S from the Noun Project--></svg>\\n';\n\n// src/MarkersButton.ts\nvar MarkersButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-markers-button\",\n      icon: pin_default,\n      hoverScale: true,\n      collapsable: true,\n      tabbable: true\n    });\n    this.plugin = this.viewer.getPlugin(\"markers\");\n    if (this.plugin) {\n      this.plugin.addEventListener(ShowMarkersEvent.type, this);\n      this.plugin.addEventListener(HideMarkersEvent.type, this);\n      this.toggleActive(true);\n    }\n  }\n  destroy() {\n    if (this.plugin) {\n      this.plugin.removeEventListener(ShowMarkersEvent.type, this);\n      this.plugin.removeEventListener(HideMarkersEvent.type, this);\n    }\n    super.destroy();\n  }\n  isSupported() {\n    return !!this.plugin;\n  }\n  handleEvent(e) {\n    if (e instanceof ShowMarkersEvent) {\n      this.toggleActive(true);\n    } else if (e instanceof HideMarkersEvent) {\n      this.toggleActive(false);\n    }\n  }\n  onClick() {\n    this.plugin.toggleAllMarkers();\n  }\n};\nMarkersButton.id = \"markers\";\n\n// src/MarkersListButton.ts\nimport { AbstractButton as AbstractButton2, events } from \"@photo-sphere-viewer/core\";\n\n// src/constants.ts\nimport { utils } from \"@photo-sphere-viewer/core\";\n\n// src/icons/pin-list.svg\nvar pin_list_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"9 9 81 81\"><path fill=\"currentColor\" d=\"M37.5 90S9.9 51.9 9.9 36.6 22.2 9 37.5 9s27.6 12.4 27.6 27.6S37.5 90 37.5 90zm0-66.3c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11zM86.7 55H70c-1.8 0-3.3-1.5-3.3-3.3s1.5-3.3 3.3-3.3h16.7c1.8 0 3.3 1.5 3.3 3.3S88.5 55 86.7 55zm0-25h-15a3.3 3.3 0 0 1-3.3-3.3c0-1.8 1.5-3.3 3.3-3.3h15c1.8 0 3.3 1.5 3.3 3.3 0 1.8-1.5 3.3-3.3 3.3zM56.5 73h30c1.8 0 3.3 1.5 3.3 3.3 0 1.8-1.5 3.3-3.3 3.3h-30a3.3 3.3 0 0 1-3.3-3.3 3.2 3.2 0 0 1 3.3-3.3z\"/><!--Created by Rohith M S from the Noun Project--></svg>\\n';\n\n// src/constants.ts\nvar SVG_NS = \"http://www.w3.org/2000/svg\";\nvar MARKER_DATA = \"psvMarker\";\nvar MARKER_DATA_KEY = utils.dasherize(MARKER_DATA);\nvar ID_PANEL_MARKER = \"marker\";\nvar ID_PANEL_MARKERS_LIST = \"markersList\";\nvar DEFAULT_HOVER_SCALE = {\n  amount: 2,\n  duration: 100,\n  easing: \"linear\"\n};\nvar MARKERS_LIST_TEMPLATE = (markers, title) => `\n<div class=\"psv-panel-menu psv-panel-menu--stripped\">\n    <h1 class=\"psv-panel-menu-title\">${pin_list_default} ${title}</h1>\n    <ul class=\"psv-panel-menu-list\">\n    ${markers.map((marker) => `\n        <li data-${MARKER_DATA_KEY}=\"${marker.id}\" class=\"psv-panel-menu-item\" tabindex=\"0\">\n          ${marker.type === \"image\" ? `<span class=\"psv-panel-menu-item-icon\"><img src=\"${marker.definition}\"/></span>` : \"\"}\n          <span class=\"psv-panel-menu-item-label\">${marker.getListContent()}</span>\n        </li>\n    `).join(\"\")}\n    </ul>\n</div>\n`;\n\n// src/MarkersListButton.ts\nvar MarkersListButton = class extends AbstractButton2 {\n  constructor(navbar) {\n    super(navbar, {\n      className: \" psv-markers-list-button\",\n      icon: pin_list_default,\n      hoverScale: true,\n      collapsable: true,\n      tabbable: true\n    });\n    this.plugin = this.viewer.getPlugin(\"markers\");\n    if (this.plugin) {\n      this.viewer.addEventListener(events.ShowPanelEvent.type, this);\n      this.viewer.addEventListener(events.HidePanelEvent.type, this);\n    }\n  }\n  destroy() {\n    this.viewer.removeEventListener(events.ShowPanelEvent.type, this);\n    this.viewer.removeEventListener(events.HidePanelEvent.type, this);\n    super.destroy();\n  }\n  isSupported() {\n    return !!this.plugin;\n  }\n  handleEvent(e) {\n    if (e instanceof events.ShowPanelEvent) {\n      this.toggleActive(e.panelId === ID_PANEL_MARKERS_LIST);\n    } else if (e instanceof events.HidePanelEvent) {\n      this.toggleActive(false);\n    }\n  }\n  onClick() {\n    this.plugin.toggleMarkersList();\n  }\n};\nMarkersListButton.id = \"markersList\";\n\n// src/MarkersPlugin.ts\nimport { AbstractConfigurablePlugin, PSVError as PSVError8, events as events3, utils as utils10 } from \"@photo-sphere-viewer/core\";\n\n// src/CSS3DContainer.ts\nimport { events as events2 } from \"@photo-sphere-viewer/core\";\nimport { Scene } from \"three\";\n\n// ../../node_modules/three/examples/jsm/renderers/CSS3DRenderer.js\nimport {\n  Matrix4,\n  Object3D,\n  Quaternion,\n  Vector3\n} from \"three\";\nvar _position = new Vector3();\nvar _quaternion = new Quaternion();\nvar _scale = new Vector3();\nvar CSS3DObject = class extends Object3D {\n  /**\n   * Constructs a new CSS3D object.\n   *\n   * @param {DOMElement} [element] - The DOM element.\n   */\n  constructor(element = document.createElement(\"div\")) {\n    super();\n    this.isCSS3DObject = true;\n    this.element = element;\n    this.element.style.position = \"absolute\";\n    this.element.style.pointerEvents = \"auto\";\n    this.element.style.userSelect = \"none\";\n    this.element.setAttribute(\"draggable\", false);\n    this.addEventListener(\"removed\", function() {\n      this.traverse(function(object) {\n        if (object.element instanceof object.element.ownerDocument.defaultView.Element && object.element.parentNode !== null) {\n          object.element.remove();\n        }\n      });\n    });\n  }\n  copy(source, recursive) {\n    super.copy(source, recursive);\n    this.element = source.element.cloneNode(true);\n    return this;\n  }\n};\nvar _matrix = new Matrix4();\nvar _matrix2 = new Matrix4();\nvar CSS3DRenderer = class {\n  /**\n   * Constructs a new CSS3D renderer.\n   *\n   * @param {CSS3DRenderer~Parameters} [parameters] - The parameters.\n   */\n  constructor(parameters = {}) {\n    const _this = this;\n    let _width, _height;\n    let _widthHalf, _heightHalf;\n    const cache = {\n      camera: { style: \"\" },\n      objects: /* @__PURE__ */ new WeakMap()\n    };\n    const domElement = parameters.element !== void 0 ? parameters.element : document.createElement(\"div\");\n    domElement.style.overflow = \"hidden\";\n    this.domElement = domElement;\n    const viewElement = document.createElement(\"div\");\n    viewElement.style.transformOrigin = \"0 0\";\n    viewElement.style.pointerEvents = \"none\";\n    domElement.appendChild(viewElement);\n    const cameraElement = document.createElement(\"div\");\n    cameraElement.style.transformStyle = \"preserve-3d\";\n    viewElement.appendChild(cameraElement);\n    this.getSize = function() {\n      return {\n        width: _width,\n        height: _height\n      };\n    };\n    this.render = function(scene, camera) {\n      const fov = camera.projectionMatrix.elements[5] * _heightHalf;\n      if (camera.view && camera.view.enabled) {\n        viewElement.style.transform = `translate( ${-camera.view.offsetX * (_width / camera.view.width)}px, ${-camera.view.offsetY * (_height / camera.view.height)}px )`;\n        viewElement.style.transform += `scale( ${camera.view.fullWidth / camera.view.width}, ${camera.view.fullHeight / camera.view.height} )`;\n      } else {\n        viewElement.style.transform = \"\";\n      }\n      if (scene.matrixWorldAutoUpdate === true) scene.updateMatrixWorld();\n      if (camera.parent === null && camera.matrixWorldAutoUpdate === true) camera.updateMatrixWorld();\n      let tx, ty;\n      if (camera.isOrthographicCamera) {\n        tx = -(camera.right + camera.left) / 2;\n        ty = (camera.top + camera.bottom) / 2;\n      }\n      const scaleByViewOffset = camera.view && camera.view.enabled ? camera.view.height / camera.view.fullHeight : 1;\n      const cameraCSSMatrix = camera.isOrthographicCamera ? `scale( ${scaleByViewOffset} )scale(` + fov + \")translate(\" + epsilon(tx) + \"px,\" + epsilon(ty) + \"px)\" + getCameraCSSMatrix(camera.matrixWorldInverse) : `scale( ${scaleByViewOffset} )translateZ(` + fov + \"px)\" + getCameraCSSMatrix(camera.matrixWorldInverse);\n      const perspective = camera.isPerspectiveCamera ? \"perspective(\" + fov + \"px) \" : \"\";\n      const style = perspective + cameraCSSMatrix + \"translate(\" + _widthHalf + \"px,\" + _heightHalf + \"px)\";\n      if (cache.camera.style !== style) {\n        cameraElement.style.transform = style;\n        cache.camera.style = style;\n      }\n      renderObject(scene, scene, camera, cameraCSSMatrix);\n    };\n    this.setSize = function(width, height) {\n      _width = width;\n      _height = height;\n      _widthHalf = _width / 2;\n      _heightHalf = _height / 2;\n      domElement.style.width = width + \"px\";\n      domElement.style.height = height + \"px\";\n      viewElement.style.width = width + \"px\";\n      viewElement.style.height = height + \"px\";\n      cameraElement.style.width = width + \"px\";\n      cameraElement.style.height = height + \"px\";\n    };\n    function epsilon(value) {\n      return Math.abs(value) < 1e-10 ? 0 : value;\n    }\n    function getCameraCSSMatrix(matrix) {\n      const elements = matrix.elements;\n      return \"matrix3d(\" + epsilon(elements[0]) + \",\" + epsilon(-elements[1]) + \",\" + epsilon(elements[2]) + \",\" + epsilon(elements[3]) + \",\" + epsilon(elements[4]) + \",\" + epsilon(-elements[5]) + \",\" + epsilon(elements[6]) + \",\" + epsilon(elements[7]) + \",\" + epsilon(elements[8]) + \",\" + epsilon(-elements[9]) + \",\" + epsilon(elements[10]) + \",\" + epsilon(elements[11]) + \",\" + epsilon(elements[12]) + \",\" + epsilon(-elements[13]) + \",\" + epsilon(elements[14]) + \",\" + epsilon(elements[15]) + \")\";\n    }\n    function getObjectCSSMatrix(matrix) {\n      const elements = matrix.elements;\n      const matrix3d = \"matrix3d(\" + epsilon(elements[0]) + \",\" + epsilon(elements[1]) + \",\" + epsilon(elements[2]) + \",\" + epsilon(elements[3]) + \",\" + epsilon(-elements[4]) + \",\" + epsilon(-elements[5]) + \",\" + epsilon(-elements[6]) + \",\" + epsilon(-elements[7]) + \",\" + epsilon(elements[8]) + \",\" + epsilon(elements[9]) + \",\" + epsilon(elements[10]) + \",\" + epsilon(elements[11]) + \",\" + epsilon(elements[12]) + \",\" + epsilon(elements[13]) + \",\" + epsilon(elements[14]) + \",\" + epsilon(elements[15]) + \")\";\n      return \"translate(-50%,-50%)\" + matrix3d;\n    }\n    function hideObject(object) {\n      if (object.isCSS3DObject) object.element.style.display = \"none\";\n      for (let i = 0, l = object.children.length; i < l; i++) {\n        hideObject(object.children[i]);\n      }\n    }\n    function renderObject(object, scene, camera, cameraCSSMatrix) {\n      if (object.visible === false) {\n        hideObject(object);\n        return;\n      }\n      if (object.isCSS3DObject) {\n        const visible = object.layers.test(camera.layers) === true;\n        const element = object.element;\n        element.style.display = visible === true ? \"\" : \"none\";\n        if (visible === true) {\n          object.onBeforeRender(_this, scene, camera);\n          let style;\n          if (object.isCSS3DSprite) {\n            _matrix.copy(camera.matrixWorldInverse);\n            _matrix.transpose();\n            if (object.rotation2D !== 0) _matrix.multiply(_matrix2.makeRotationZ(object.rotation2D));\n            object.matrixWorld.decompose(_position, _quaternion, _scale);\n            _matrix.setPosition(_position);\n            _matrix.scale(_scale);\n            _matrix.elements[3] = 0;\n            _matrix.elements[7] = 0;\n            _matrix.elements[11] = 0;\n            _matrix.elements[15] = 1;\n            style = getObjectCSSMatrix(_matrix);\n          } else {\n            style = getObjectCSSMatrix(object.matrixWorld);\n          }\n          const cachedObject = cache.objects.get(object);\n          if (cachedObject === void 0 || cachedObject.style !== style) {\n            element.style.transform = style;\n            const objectData = { style };\n            cache.objects.set(object, objectData);\n          }\n          if (element.parentNode !== cameraElement) {\n            cameraElement.appendChild(element);\n          }\n          object.onAfterRender(_this, scene, camera);\n        }\n      }\n      for (let i = 0, l = object.children.length; i < l; i++) {\n        renderObject(object.children[i], scene, camera, cameraCSSMatrix);\n      }\n    }\n  }\n};\n\n// src/CSS3DContainer.ts\nvar CSS3DContainer = class {\n  constructor(viewer) {\n    this.viewer = viewer;\n    this.element = document.createElement(\"div\");\n    this.element.className = \"psv-markers-css3d-container\";\n    this.renderer = new CSS3DRenderer({ element: this.element });\n    this.scene = new Scene();\n    this.intersectionObserver = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        const marker = entry.target[MARKER_DATA];\n        if (marker.config.visible) {\n          marker.viewportIntersection = entry.isIntersecting;\n        }\n      });\n    }, {\n      root: this.element\n    });\n    viewer.addEventListener(events2.ReadyEvent.type, this, { once: true });\n    viewer.addEventListener(events2.SizeUpdatedEvent.type, this);\n    viewer.addEventListener(events2.RenderEvent.type, this);\n  }\n  handleEvent(e) {\n    switch (e.type) {\n      case events2.ReadyEvent.type:\n      case events2.SizeUpdatedEvent.type:\n        this.updateSize();\n        break;\n      case events2.RenderEvent.type:\n        this.render();\n        break;\n    }\n  }\n  destroy() {\n    this.viewer.removeEventListener(events2.ReadyEvent.type, this);\n    this.viewer.removeEventListener(events2.SizeUpdatedEvent.type, this);\n    this.viewer.removeEventListener(events2.RenderEvent.type, this);\n    this.intersectionObserver.disconnect();\n  }\n  updateSize() {\n    const size = this.viewer.getSize();\n    this.renderer.setSize(size.width, size.height);\n  }\n  render() {\n    this.renderer.render(this.scene, this.viewer.renderer.camera);\n  }\n  addObject(marker) {\n    this.scene.add(marker.threeElement);\n    this.intersectionObserver.observe(marker.domElement);\n  }\n  removeObject(marker) {\n    this.scene.remove(marker.threeElement);\n    this.intersectionObserver.unobserve(marker.domElement);\n  }\n};\n\n// src/MarkerType.ts\nimport { PSVError } from \"@photo-sphere-viewer/core\";\nvar MarkerType = /* @__PURE__ */ ((MarkerType3) => {\n  MarkerType3[\"image\"] = \"image\";\n  MarkerType3[\"html\"] = \"html\";\n  MarkerType3[\"element\"] = \"element\";\n  MarkerType3[\"imageLayer\"] = \"imageLayer\";\n  MarkerType3[\"videoLayer\"] = \"videoLayer\";\n  MarkerType3[\"elementLayer\"] = \"elementLayer\";\n  MarkerType3[\"polygon\"] = \"polygon\";\n  MarkerType3[\"polygonPixels\"] = \"polygonPixels\";\n  MarkerType3[\"polyline\"] = \"polyline\";\n  MarkerType3[\"polylinePixels\"] = \"polylinePixels\";\n  MarkerType3[\"square\"] = \"square\";\n  MarkerType3[\"rect\"] = \"rect\";\n  MarkerType3[\"circle\"] = \"circle\";\n  MarkerType3[\"ellipse\"] = \"ellipse\";\n  MarkerType3[\"path\"] = \"path\";\n  return MarkerType3;\n})(MarkerType || {});\nfunction getMarkerType(config, allowNone = false) {\n  const found = [];\n  Object.keys(MarkerType).forEach((type) => {\n    if (config[type]) {\n      found.push(type);\n    }\n  });\n  if (found.length === 0 && !allowNone) {\n    throw new PSVError(`missing marker content, either ${Object.keys(MarkerType).join(\", \")}`);\n  } else if (found.length > 1) {\n    throw new PSVError(`multiple marker content, either ${Object.keys(MarkerType).join(\", \")}`);\n  }\n  return found[0];\n}\n\n// src/markers/AbstractStandardMarker.ts\nimport { CONSTANTS, PSVError as PSVError3, utils as utils4 } from \"@photo-sphere-viewer/core\";\nimport { MathUtils } from \"three\";\n\n// src/markers/AbstractDomMarker.ts\nimport { utils as utils3 } from \"@photo-sphere-viewer/core\";\n\n// src/markers/Marker.ts\nimport { PSVError as PSVError2, utils as utils2 } from \"@photo-sphere-viewer/core\";\nvar Marker = class {\n  constructor(viewer, plugin, config) {\n    this.viewer = viewer;\n    this.plugin = plugin;\n    /** @internal */\n    this.state = {\n      anchor: null,\n      visible: false,\n      staticTooltip: false,\n      position: null,\n      position2D: null,\n      positions3D: null,\n      size: null\n    };\n    if (!config.id) {\n      throw new PSVError2(\"missing marker id\");\n    }\n    this.type = getMarkerType(config);\n    this.createElement();\n    this.update(config);\n  }\n  get id() {\n    return this.config.id;\n  }\n  get data() {\n    return this.config.data;\n  }\n  get domElement() {\n    return null;\n  }\n  get threeElement() {\n    return null;\n  }\n  get video() {\n    return null;\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    delete this.viewer;\n    delete this.plugin;\n    delete this.element;\n    this.hideTooltip();\n  }\n  /**\n   * Checks if it is a 3D marker (imageLayer, videoLayer)\n   */\n  is3d() {\n    return false;\n  }\n  /**\n   * Checks if it is a normal marker (image, html, element)\n   */\n  isNormal() {\n    return false;\n  }\n  /**\n   * Checks if it is a polygon/polyline marker\n   */\n  isPoly() {\n    return false;\n  }\n  /**\n   * Checks if it is an SVG marker\n   */\n  isSvg() {\n    return false;\n  }\n  /**\n   * Checks if it is an CSS3D marker\n   */\n  isCss3d() {\n    return false;\n  }\n  /**\n   * Updates the marker with new properties\n   * @throws {@link PSVError} if the configuration is invalid\n   * @internal\n   */\n  update(config) {\n    const newType = getMarkerType(config, true);\n    if (newType !== void 0 && newType !== this.type) {\n      throw new PSVError2(`cannot change marker ${config.id} type`);\n    }\n    this.config = utils2.deepmerge(this.config, config);\n    if (typeof this.config.tooltip === \"string\") {\n      this.config.tooltip = { content: this.config.tooltip };\n    }\n    if (this.config.tooltip && !this.config.tooltip.trigger) {\n      this.config.tooltip.trigger = \"hover\";\n    }\n    if (utils2.isNil(this.config.visible)) {\n      this.config.visible = true;\n    }\n    if (utils2.isNil(this.config.zIndex)) {\n      this.config.zIndex = 1;\n    }\n    if (utils2.isNil(this.config.opacity)) {\n      this.config.opacity = 1;\n    }\n    if (this.config.rotation) {\n      const rot = this.config.rotation;\n      if (typeof rot === \"object\") {\n        this.config.rotation = {\n          yaw: rot.yaw ? utils2.parseAngle(rot.yaw, true, false) : 0,\n          pitch: rot.pitch ? utils2.parseAngle(rot.pitch, true, false) : 0,\n          roll: rot.roll ? utils2.parseAngle(rot.roll, true, false) : 0\n        };\n      } else {\n        this.config.rotation = {\n          yaw: 0,\n          pitch: 0,\n          roll: utils2.parseAngle(rot, true, false)\n        };\n      }\n    } else {\n      this.config.rotation = { yaw: 0, pitch: 0, roll: 0 };\n    }\n    this.state.anchor = utils2.parsePoint(this.config.anchor);\n  }\n  /**\n   * Returns the markers list content for the marker, it can be either :\n   * - the `listContent`\n   * - the `tooltip`\n   * - the `html`\n   * - the `id`\n   * @internal\n   */\n  getListContent() {\n    if (this.config.listContent) {\n      return this.config.listContent;\n    } else if (this.config.tooltip?.content) {\n      return this.config.tooltip.content;\n    } else if (this.config.html) {\n      return this.config.html;\n    } else {\n      return this.id;\n    }\n  }\n  /**\n   * Display the tooltip of this marker\n   * @internal\n   */\n  showTooltip(clientX, clientY, forceUpdate = false) {\n    if (this.state.visible && this.config.tooltip?.content && this.state.position2D) {\n      const config = {\n        ...this.config.tooltip,\n        style: {\n          // prevents conflicts with tooltip tracking\n          pointerEvents: this.state.staticTooltip ? \"auto\" : \"none\"\n        },\n        data: this,\n        top: 0,\n        left: 0\n      };\n      if (this.isPoly() || this.is3d() || this.isCss3d()) {\n        if (clientX || clientY) {\n          const viewerPos = utils2.getPosition(this.viewer.container);\n          config.top = clientY - viewerPos.y + 10;\n          config.left = clientX - viewerPos.x;\n          config.box = {\n            // separate the tooltip from the cursor\n            width: 20,\n            height: 20\n          };\n        } else {\n          config.top = this.state.position2D.y;\n          config.left = this.state.position2D.x;\n        }\n      } else {\n        const position = this.viewer.dataHelper.vector3ToViewerCoords(this.state.positions3D[0]);\n        let width = this.state.size.width;\n        let height = this.state.size.height;\n        if (this.config.hoverScale && !this.state.staticTooltip) {\n          width *= this.config.hoverScale.amount;\n          height *= this.config.hoverScale.amount;\n        }\n        config.top = position.y - height * this.state.anchor.y + height / 2;\n        config.left = position.x - width * this.state.anchor.x + width / 2;\n        config.box = { width, height };\n      }\n      if (this.tooltip) {\n        if (forceUpdate) {\n          this.tooltip.update(this.config.tooltip.content, config);\n        } else {\n          this.tooltip.move(config);\n        }\n      } else {\n        this.tooltip = this.viewer.createTooltip(config);\n      }\n    }\n  }\n  /**\n   * Hides the tooltip of this marker\n   * @internal\n   */\n  hideTooltip() {\n    if (this.tooltip) {\n      this.tooltip.hide();\n      this.tooltip = null;\n    }\n  }\n};\n\n// src/markers/AbstractDomMarker.ts\nvar AbstractDomMarker = class extends Marker {\n  get domElement() {\n    return this.element;\n  }\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n  }\n  afterCreateElement() {\n    this.element[MARKER_DATA] = this;\n  }\n  destroy() {\n    delete this.element[MARKER_DATA];\n    super.destroy();\n  }\n  update(config) {\n    super.update(config);\n    const element = this.domElement;\n    element.id = `psv-marker-${this.config.id}`;\n    element.setAttribute(\"class\", \"psv-marker\");\n    if (this.state.visible) {\n      element.classList.add(\"psv-marker--visible\");\n    }\n    if (this.config.tooltip) {\n      element.classList.add(\"psv-marker--has-tooltip\");\n    }\n    if (this.config.content) {\n      element.classList.add(\"psv-marker--has-content\");\n    }\n    if (this.config.className) {\n      utils3.addClasses(element, this.config.className);\n    }\n    element.style.opacity = `${this.config.opacity}`;\n    element.style.zIndex = `${30 + this.config.zIndex}`;\n    if (this.config.style) {\n      Object.assign(element.style, this.config.style);\n    }\n  }\n};\n\n// src/markers/AbstractStandardMarker.ts\nvar AbstractStandardMarker = class extends AbstractDomMarker {\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n  }\n  afterCreateElement() {\n    super.afterCreateElement();\n    this.domElement.addEventListener(\"transitionend\", () => {\n      this.domElement.style.transition = \"\";\n    });\n  }\n  render({\n    viewerPosition,\n    zoomLevel,\n    hoveringMarker\n  }) {\n    this.__updateSize();\n    const position = this.viewer.dataHelper.vector3ToViewerCoords(this.state.positions3D[0]);\n    position.x -= this.state.size.width * this.state.anchor.x;\n    position.y -= this.state.size.height * this.state.anchor.y;\n    const isVisible = this.state.positions3D[0].dot(this.viewer.state.direction) > 0 && position.x + this.state.size.width >= 0 && position.x - this.state.size.width <= this.viewer.state.size.width && position.y + this.state.size.height >= 0 && position.y - this.state.size.height <= this.viewer.state.size.height;\n    if (isVisible) {\n      this.domElement.style.translate = `${position.x}px ${position.y}px 0px`;\n      this.applyScale({\n        zoomLevel,\n        viewerPosition,\n        mouseover: this === hoveringMarker\n      });\n      return position;\n    } else {\n      return null;\n    }\n  }\n  update(config) {\n    super.update(config);\n    if (!utils4.isExtendedPosition(this.config.position)) {\n      throw new PSVError3(`missing marker ${this.id} position`);\n    }\n    try {\n      this.state.position = this.viewer.dataHelper.cleanPosition(this.config.position);\n    } catch (e) {\n      throw new PSVError3(`invalid marker ${this.id} position`, e);\n    }\n    this.state.positions3D = [this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position)];\n    const element = this.domElement;\n    element.classList.add(\"psv-marker--normal\");\n    if (this.config.scale && Array.isArray(this.config.scale)) {\n      this.config.scale = { zoom: this.config.scale };\n    }\n    if (typeof this.config.hoverScale === \"boolean\") {\n      this.config.hoverScale = this.config.hoverScale ? this.plugin.config.defaultHoverScale || DEFAULT_HOVER_SCALE : null;\n    } else if (typeof this.config.hoverScale === \"number\") {\n      this.config.hoverScale = { amount: this.config.hoverScale };\n    } else if (!this.config.hoverScale) {\n      this.config.hoverScale = this.plugin.config.defaultHoverScale;\n    }\n    if (this.config.hoverScale) {\n      this.config.hoverScale = {\n        ...this.plugin.config.defaultHoverScale,\n        ...this.config.hoverScale\n      };\n    }\n    element.style.rotate = this.config.rotation.roll !== 0 ? MathUtils.radToDeg(this.config.rotation.roll) + \"deg\" : null;\n    element.style.transformOrigin = `${this.state.anchor.x * 100}% ${this.state.anchor.y * 100}%`;\n  }\n  /**\n   * Computes the real size of a marker\n   * @description This is done by removing all it's transformations (if any) and making it visible\n   * before querying its bounding rect\n   */\n  __updateSize() {\n    if (!this.needsUpdateSize) {\n      return;\n    }\n    const element = this.domElement;\n    const makeTransparent = !this.state.visible || !this.state.size;\n    if (makeTransparent) {\n      element.classList.add(\"psv-marker--transparent\");\n    }\n    if (this.isSvg()) {\n      const rect = element.firstElementChild.getBoundingClientRect();\n      this.state.size = {\n        width: rect.width,\n        height: rect.height\n      };\n    } else {\n      this.state.size = {\n        width: element.offsetWidth,\n        height: element.offsetHeight\n      };\n    }\n    if (makeTransparent) {\n      element.classList.remove(\"psv-marker--transparent\");\n    }\n    if (this.isSvg()) {\n      element.style.width = this.state.size.width + \"px\";\n      element.style.height = this.state.size.height + \"px\";\n    }\n    if (this.type !== \"element\" /* element */) {\n      this.needsUpdateSize = false;\n    }\n  }\n  /**\n   * Computes and applies the scale to the marker\n   */\n  applyScale({\n    zoomLevel,\n    viewerPosition,\n    mouseover\n  }) {\n    if (mouseover !== null && this.config.hoverScale) {\n      this.domElement.style.transition = `scale ${this.config.hoverScale.duration}ms ${this.config.hoverScale.easing}`;\n    }\n    let scale = 1;\n    if (typeof this.config.scale === \"function\") {\n      scale = this.config.scale(zoomLevel, viewerPosition);\n    } else if (this.config.scale) {\n      if (Array.isArray(this.config.scale.zoom)) {\n        const [min, max] = this.config.scale.zoom;\n        scale *= min + (max - min) * CONSTANTS.EASINGS.inQuad(zoomLevel / 100);\n      }\n      if (Array.isArray(this.config.scale.yaw)) {\n        const [min, max] = this.config.scale.yaw;\n        const halfFov = MathUtils.degToRad(this.viewer.state.hFov) / 2;\n        const arc = Math.abs(utils4.getShortestArc(this.state.position.yaw, viewerPosition.yaw));\n        scale *= max + (min - max) * CONSTANTS.EASINGS.outQuad(Math.max(0, (halfFov - arc) / halfFov));\n      }\n    }\n    if (mouseover && this.config.hoverScale) {\n      scale *= this.config.hoverScale.amount;\n    }\n    this.domElement.style.scale = `${scale}`;\n  }\n};\n\n// src/markers/Marker3D.ts\nimport { PSVError as PSVError4, utils as utils6 } from \"@photo-sphere-viewer/core\";\nimport {\n  Group,\n  Mesh,\n  PlaneGeometry,\n  Texture as Texture2,\n  Vector3 as Vector33,\n  VideoTexture\n} from \"three\";\n\n// ../shared/ChromaKeyMaterial.ts\nimport { Color, ShaderMaterial, Vector2 } from \"three\";\n\n// ../shared/shaders/chromaKey.fragment.glsl\nvar chromaKey_fragment_default = \"// https://www.8thwall.com/playground/chromakey-threejs\\n\\nuniform sampler2D map;\\nuniform float alpha;\\nuniform bool keying;\\nuniform vec3 color;\\nuniform float similarity;\\nuniform float smoothness;\\nuniform float spill;\\n\\nvarying vec2 vUv;\\n\\nvec2 RGBtoUV(vec3 rgb) {\\n    return vec2(\\n        rgb.r * -0.169 + rgb.g * -0.331 + rgb.b *  0.5    + 0.5,\\n        rgb.r *  0.5   + rgb.g * -0.419 + rgb.b * -0.081  + 0.5\\n    );\\n}\\n\\nvoid main(void) {\\n    gl_FragColor = texture2D(map, vUv);\\n\\n    if (keying) {\\n        float chromaDist = distance(RGBtoUV(gl_FragColor.rgb), RGBtoUV(color));\\n\\n        float baseMask = chromaDist - similarity;\\n        float fullMask = pow(clamp(baseMask / smoothness, 0., 1.), 1.5);\\n        gl_FragColor.a *= fullMask * alpha;\\n\\n        float spillVal = pow(clamp(baseMask / spill, 0., 1.), 1.5);\\n        float desat = clamp(gl_FragColor.r * 0.2126 + gl_FragColor.g * 0.7152 + gl_FragColor.b * 0.0722, 0., 1.);\\n        gl_FragColor.rgb = mix(vec3(desat, desat, desat), gl_FragColor.rgb, spillVal);\\n    } else {\\n        gl_FragColor.a *= alpha;\\n    }\\n}\\n\";\n\n// ../shared/shaders/chromaKey.vertex.glsl\nvar chromaKey_vertex_default = \"varying vec2 vUv;\\nuniform vec2 repeat;\\nuniform vec2 offset;\\n\\nvoid main() {\\n    vUv = uv * repeat + offset;\\n    gl_Position = projectionMatrix *  modelViewMatrix * vec4( position, 1.0 );\\n}\\n\";\n\n// ../shared/ChromaKeyMaterial.ts\nvar ChromaKeyMaterial = class extends ShaderMaterial {\n  get map() {\n    return this.uniforms.map.value;\n  }\n  set map(map) {\n    this.uniforms.map.value = map;\n  }\n  set alpha(alpha) {\n    this.uniforms.alpha.value = alpha;\n  }\n  get offset() {\n    return this.uniforms.offset.value;\n  }\n  get repeat() {\n    return this.uniforms.repeat.value;\n  }\n  set chromaKey(chromaKey) {\n    this.uniforms.keying.value = chromaKey?.enabled === true;\n    if (chromaKey?.enabled) {\n      if (typeof chromaKey.color === \"object\" && \"r\" in chromaKey.color) {\n        this.uniforms.color.value.set(\n          chromaKey.color.r / 255,\n          chromaKey.color.g / 255,\n          chromaKey.color.b / 255\n        );\n      } else {\n        this.uniforms.color.value.set(chromaKey.color ?? 65280);\n      }\n      this.uniforms.similarity.value = chromaKey.similarity ?? 0.2;\n      this.uniforms.smoothness.value = chromaKey.smoothness ?? 0.2;\n    }\n  }\n  constructor(params) {\n    super({\n      transparent: true,\n      depthTest: false,\n      depthWrite: false,\n      uniforms: {\n        map: { value: params?.map },\n        repeat: { value: new Vector2(1, 1) },\n        offset: { value: new Vector2(0, 0) },\n        alpha: { value: params?.alpha ?? 1 },\n        keying: { value: false },\n        color: { value: new Color(65280) },\n        similarity: { value: 0.2 },\n        smoothness: { value: 0.2 },\n        spill: { value: 0.1 }\n      },\n      vertexShader: chromaKey_vertex_default,\n      fragmentShader: chromaKey_fragment_default\n    });\n    this.chromaKey = params?.chromaKey;\n  }\n};\n\n// ../shared/video-utils.ts\nfunction createVideo({\n  src,\n  withCredentials,\n  muted,\n  autoplay\n}) {\n  const video = document.createElement(\"video\");\n  video.crossOrigin = withCredentials ? \"use-credentials\" : \"anonymous\";\n  video.loop = true;\n  video.playsInline = true;\n  video.autoplay = autoplay;\n  video.muted = muted;\n  video.preload = \"metadata\";\n  if (src instanceof MediaStream) {\n    video.srcObject = src;\n  } else {\n    video.src = src;\n  }\n  return video;\n}\n\n// src/utils.ts\nimport { CONSTANTS as CONSTANTS2, utils as utils5 } from \"@photo-sphere-viewer/core\";\nimport { Vector3 as Vector32 } from \"three\";\nfunction greatArcIntermediaryPoint(p1, p2, f) {\n  const [\\u03BB1, \\u03C61] = p1;\n  const [\\u03BB2, \\u03C62] = p2;\n  const r = utils5.greatArcDistance(p1, p2);\n  const a = Math.sin((1 - f) * r) / Math.sin(r);\n  const b = Math.sin(f * r) / Math.sin(r);\n  const x = a * Math.cos(\\u03C61) * Math.cos(\\u03BB1) + b * Math.cos(\\u03C62) * Math.cos(\\u03BB2);\n  const y = a * Math.cos(\\u03C61) * Math.sin(\\u03BB1) + b * Math.cos(\\u03C62) * Math.sin(\\u03BB2);\n  const z = a * Math.sin(\\u03C61) + b * Math.sin(\\u03C62);\n  return [Math.atan2(y, x), Math.atan2(z, Math.sqrt(x * x + y * y))];\n}\nfunction getPolygonCoherentPoints(points) {\n  const workPoints = [points[0]];\n  let k = 0;\n  for (let i = 1; i < points.length; i++) {\n    const d = points[i - 1][0] - points[i][0];\n    if (d > Math.PI) {\n      k += 1;\n    } else if (d < -Math.PI) {\n      k -= 1;\n    }\n    workPoints.push([points[i][0] + k * 2 * Math.PI, points[i][1]]);\n  }\n  return workPoints;\n}\nfunction getPolygonCenter(polygon) {\n  const points = getPolygonCoherentPoints(polygon);\n  const sum = points.reduce((intermediary, point) => [intermediary[0] + point[0], intermediary[1] + point[1]]);\n  return [utils5.parseAngle(sum[0] / polygon.length), sum[1] / polygon.length];\n}\nfunction getPolylineCenter(polyline) {\n  const points = getPolygonCoherentPoints(polyline);\n  let length = 0;\n  const lengths = [];\n  for (let i = 0; i < points.length - 1; i++) {\n    const l = utils5.greatArcDistance(points[i], points[i + 1]) * CONSTANTS2.SPHERE_RADIUS;\n    lengths.push(l);\n    length += l;\n  }\n  let consumed = 0;\n  for (let j = 0; j < points.length - 1; j++) {\n    if (consumed + lengths[j] > length / 2) {\n      const r = (length / 2 - consumed) / lengths[j];\n      return greatArcIntermediaryPoint(points[j], points[j + 1], r);\n    }\n    consumed += lengths[j];\n  }\n  return points[Math.round(points.length / 2)];\n}\nvar C = new Vector32();\nvar N = new Vector32();\nvar V = new Vector32();\nvar X = new Vector32();\nvar Y = new Vector32();\nvar A = new Vector32();\nfunction getGreatCircleIntersection(P1, P2, direction) {\n  C.copy(direction).normalize();\n  N.crossVectors(P1, P2).normalize();\n  V.crossVectors(N, P1).normalize();\n  X.copy(P1).multiplyScalar(-C.dot(V));\n  Y.copy(V).multiplyScalar(C.dot(P1));\n  const H = new Vector32().addVectors(X, Y).normalize();\n  A.crossVectors(H, C);\n  return H.applyAxisAngle(A, 0.01).multiplyScalar(CONSTANTS2.SPHERE_RADIUS);\n}\n\n// src/markers/Marker3D.ts\nvar Marker3D = class extends Marker {\n  get threeElement() {\n    return this.element;\n  }\n  get threeMesh() {\n    return this.threeElement.children[0];\n  }\n  get video() {\n    if (this.type === \"videoLayer\" /* videoLayer */) {\n      return this.threeMesh.material.map.image;\n    } else {\n      return null;\n    }\n  }\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n  }\n  is3d() {\n    return true;\n  }\n  createElement() {\n    const material = new ChromaKeyMaterial({ alpha: 0 });\n    const geometry = new PlaneGeometry(1, 1);\n    const mesh = new Mesh(geometry, material);\n    mesh.userData = { [MARKER_DATA]: this };\n    Object.defineProperty(mesh, \"visible\", {\n      enumerable: true,\n      get: function() {\n        return this.userData[MARKER_DATA].config.visible;\n      },\n      set: function(visible) {\n        this.userData[MARKER_DATA].config.visible = visible;\n      }\n    });\n    this.element = new Group().add(mesh);\n    if (this.type === \"videoLayer\" /* videoLayer */) {\n      this.viewer.needsContinuousUpdate(true);\n    }\n  }\n  destroy() {\n    delete this.threeMesh.userData[MARKER_DATA];\n    if (this.type === \"videoLayer\" /* videoLayer */) {\n      this.video.pause();\n      this.viewer.needsContinuousUpdate(false);\n    }\n    super.destroy();\n  }\n  render() {\n    if (this.viewer.renderer.isObjectVisible(this.threeMesh)) {\n      return this.viewer.dataHelper.sphericalCoordsToViewerCoords(this.state.position);\n    } else {\n      return null;\n    }\n  }\n  update(config) {\n    super.update(config);\n    const mesh = this.threeMesh;\n    const group = mesh.parent;\n    const material = mesh.material;\n    if (utils6.isExtendedPosition(this.config.position)) {\n      try {\n        this.state.position = this.viewer.dataHelper.cleanPosition(this.config.position);\n      } catch (e) {\n        throw new PSVError4(`invalid marker ${this.id} position`, e);\n      }\n      if (!this.config.size) {\n        throw new PSVError4(`missing marker ${this.id} size`);\n      }\n      this.state.size = this.config.size;\n      mesh.scale.set(this.config.size.width / 100, this.config.size.height / 100, 1);\n      mesh.position.set(mesh.scale.x * (0.5 - this.state.anchor.x), mesh.scale.y * (this.state.anchor.y - 0.5), 0);\n      mesh.rotation.set(0, 0, 0);\n      this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position, group.position);\n      group.lookAt(0, group.position.y, 0);\n      mesh.rotateY(-this.config.rotation.yaw);\n      mesh.rotateX(-this.config.rotation.pitch);\n      mesh.rotateZ(-this.config.rotation.roll);\n      const p = mesh.geometry.getAttribute(\"position\");\n      this.state.positions3D = [0, 1, 3, 2].map((i) => {\n        const v3 = new Vector33();\n        v3.fromBufferAttribute(p, i);\n        return mesh.localToWorld(v3);\n      });\n    } else {\n      if (this.config.position?.length !== 4) {\n        throw new PSVError4(`missing marker ${this.id} position`);\n      }\n      let positions;\n      try {\n        positions = this.config.position.map((p2) => this.viewer.dataHelper.cleanPosition(p2));\n      } catch (e) {\n        throw new PSVError4(`invalid marker ${this.id} position`, e);\n      }\n      const positions3D = positions.map((p2) => this.viewer.dataHelper.sphericalCoordsToVector3(p2));\n      const centroid = getPolygonCenter(positions.map(({ yaw, pitch }) => [yaw, pitch]));\n      this.state.position = { yaw: centroid[0], pitch: centroid[1] };\n      this.state.positions3D = positions3D;\n      const p = mesh.geometry.getAttribute(\"position\");\n      [\n        positions3D[0],\n        positions3D[1],\n        positions3D[3],\n        // not a mistake!\n        positions3D[2]\n      ].forEach((v, i) => {\n        p.setX(i, v.x);\n        p.setY(i, v.y);\n        p.setZ(i, v.z);\n      });\n      p.needsUpdate = true;\n      this.__setTextureWrap(material);\n    }\n    switch (this.type) {\n      case \"videoLayer\" /* videoLayer */:\n        if (this.definition !== this.config.videoLayer) {\n          material.map?.dispose();\n          const video = createVideo({\n            src: this.config.videoLayer,\n            withCredentials: this.viewer.config.withCredentials,\n            muted: true,\n            autoplay: this.config.autoplay ?? true\n          });\n          const texture = new VideoTexture(video);\n          material.map = texture;\n          material.alpha = 0;\n          video.addEventListener(\"loadedmetadata\", () => {\n            if (!this.viewer) {\n              return;\n            }\n            material.alpha = this.config.opacity;\n            if (!utils6.isExtendedPosition(this.config.position)) {\n              mesh.material.userData[MARKER_DATA] = { width: video.videoWidth, height: video.videoHeight };\n              this.__setTextureWrap(material);\n            }\n          }, { once: true });\n          if (video.autoplay) {\n            video.play();\n          }\n          this.definition = this.config.videoLayer;\n        } else {\n          material.alpha = this.config.opacity;\n        }\n        break;\n      case \"imageLayer\" /* imageLayer */:\n        if (this.definition !== this.config.imageLayer) {\n          material.map?.dispose();\n          const texture = new Texture2();\n          material.map = texture;\n          material.alpha = 0;\n          this.viewer.textureLoader.loadImage(this.config.imageLayer).then((image) => {\n            if (!this.viewer) {\n              return;\n            }\n            if (!utils6.isExtendedPosition(this.config.position)) {\n              mesh.material.userData[MARKER_DATA] = { width: image.width, height: image.height };\n              this.__setTextureWrap(material);\n            }\n            texture.image = image;\n            texture.anisotropy = 4;\n            texture.needsUpdate = true;\n            material.alpha = this.config.opacity;\n            this.viewer.needsUpdate();\n          });\n          this.definition = this.config.imageLayer;\n        } else {\n          material.alpha = this.config.opacity;\n        }\n        break;\n    }\n    material.chromaKey = this.config.chromaKey;\n    mesh.renderOrder = 1e3 + this.config.zIndex;\n    mesh.geometry.boundingBox = null;\n  }\n  /**\n   * For layers positionned by corners, applies offset to the texture in order to keep its proportions\n   */\n  __setTextureWrap(material) {\n    const imageSize = material.userData[MARKER_DATA];\n    if (!imageSize || !imageSize.height || !imageSize.width) {\n      material.repeat.set(1, 1);\n      material.offset.set(0, 0);\n      return;\n    }\n    const positions = this.config.position.map((p) => {\n      return this.viewer.dataHelper.cleanPosition(p);\n    });\n    const w1 = utils6.greatArcDistance(\n      [positions[0].yaw, positions[0].pitch],\n      [positions[1].yaw, positions[1].pitch]\n    );\n    const w2 = utils6.greatArcDistance(\n      [positions[3].yaw, positions[3].pitch],\n      [positions[2].yaw, positions[2].pitch]\n    );\n    const h1 = utils6.greatArcDistance(\n      [positions[1].yaw, positions[1].pitch],\n      [positions[2].yaw, positions[2].pitch]\n    );\n    const h2 = utils6.greatArcDistance(\n      [positions[0].yaw, positions[0].pitch],\n      [positions[3].yaw, positions[3].pitch]\n    );\n    const layerRatio = (w1 + w2) / (h1 + h2);\n    const imageRatio = imageSize.width / imageSize.height;\n    let hMargin = 0;\n    let vMargin = 0;\n    if (layerRatio < imageRatio) {\n      hMargin = imageRatio - layerRatio;\n    } else {\n      vMargin = 1 / imageRatio - 1 / layerRatio;\n    }\n    material.repeat.set(1 - hMargin, 1 - vMargin);\n    material.offset.set(hMargin / 2, vMargin / 2);\n  }\n};\n\n// src/markers/MarkerCSS3D.ts\nimport { PSVError as PSVError5, utils as utils7 } from \"@photo-sphere-viewer/core\";\nvar MarkerCSS3D = class extends AbstractDomMarker {\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n    /**\n     * @internal\n     */\n    this.viewportIntersection = false;\n  }\n  get threeElement() {\n    return this.object;\n  }\n  isCss3d() {\n    return true;\n  }\n  createElement() {\n    this.element = document.createElement(\"div\");\n    this.object = new CSS3DObject(this.element);\n    this.object.userData = { [MARKER_DATA]: this };\n    Object.defineProperty(this.object, \"visible\", {\n      enumerable: true,\n      get: function() {\n        return this.userData[MARKER_DATA].config.visible;\n      },\n      set: function(visible) {\n        this.userData[MARKER_DATA].config.visible = visible;\n      }\n    });\n    this.afterCreateElement();\n  }\n  destroy() {\n    delete this.object.userData[MARKER_DATA];\n    delete this.object;\n    super.destroy();\n  }\n  render({\n    viewerPosition,\n    zoomLevel\n  }) {\n    const element = this.domElement;\n    this.state.size = {\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    };\n    const isVisible = this.state.positions3D[0].dot(this.viewer.state.direction) > 0 && this.viewportIntersection;\n    if (isVisible) {\n      const position = this.viewer.dataHelper.sphericalCoordsToViewerCoords(this.state.position);\n      this.config.elementLayer.updateMarker?.({\n        marker: this,\n        position,\n        viewerPosition,\n        zoomLevel,\n        viewerSize: this.viewer.state.size\n      });\n      return position;\n    } else {\n      return null;\n    }\n  }\n  update(config) {\n    super.update(config);\n    if (!utils7.isExtendedPosition(this.config.position)) {\n      throw new PSVError5(`missing marker ${this.id} position`);\n    }\n    try {\n      this.state.position = this.viewer.dataHelper.cleanPosition(this.config.position);\n    } catch (e) {\n      throw new PSVError5(`invalid marker ${this.id} position`, e);\n    }\n    this.state.positions3D = [this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position)];\n    const object = this.threeElement;\n    const element = this.domElement;\n    element.classList.add(\"psv-marker--css3d\");\n    element.childNodes.forEach((n) => n.remove());\n    element.appendChild(this.config.elementLayer);\n    this.config.elementLayer.style.display = \"block\";\n    object.position.copy(this.state.positions3D[0]).multiplyScalar(100);\n    object.lookAt(0, this.state.positions3D[0].y * 100, 0);\n    object.rotateY(-this.config.rotation.yaw);\n    object.rotateX(-this.config.rotation.pitch);\n    object.rotateZ(-this.config.rotation.roll);\n  }\n};\n\n// src/markers/MarkerNormal.ts\nimport { PSVError as PSVError6 } from \"@photo-sphere-viewer/core\";\nvar MarkerNormal = class extends AbstractStandardMarker {\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n  }\n  isNormal() {\n    return true;\n  }\n  createElement() {\n    this.element = document.createElement(\"div\");\n    this.afterCreateElement();\n  }\n  render(params) {\n    const position = super.render(params);\n    if (position && this.type === \"element\" /* element */) {\n      this.config.element.updateMarker?.({\n        marker: this,\n        position,\n        viewerPosition: params.viewerPosition,\n        zoomLevel: params.zoomLevel,\n        viewerSize: this.viewer.state.size\n      });\n    }\n    return position;\n  }\n  update(config) {\n    super.update(config);\n    const element = this.domElement;\n    if (this.config.image && !this.config.size) {\n      throw new PSVError6(`missing marker ${this.id} size`);\n    }\n    if (this.config.size) {\n      this.needsUpdateSize = false;\n      this.state.size = this.config.size;\n      element.style.width = this.config.size.width + \"px\";\n      element.style.height = this.config.size.height + \"px\";\n    } else {\n      this.needsUpdateSize = true;\n    }\n    switch (this.type) {\n      case \"image\" /* image */:\n        this.definition = this.config.image;\n        element.style.backgroundImage = `url(\"${this.config.image}\")`;\n        break;\n      case \"html\" /* html */:\n        this.definition = this.config.html;\n        element.innerHTML = this.config.html;\n        break;\n      case \"element\" /* element */:\n        if (this.definition !== this.config.element) {\n          this.definition = this.config.element;\n          element.childNodes.forEach((n) => n.remove());\n          element.appendChild(this.config.element);\n          this.config.element.style.display = \"block\";\n        }\n        break;\n    }\n  }\n};\n\n// src/markers/MarkerPolygon.ts\nimport {\n  PSVError as PSVError7,\n  utils as utils8\n} from \"@photo-sphere-viewer/core\";\nvar MarkerPolygon = class extends AbstractDomMarker {\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n  }\n  createElement() {\n    this.element = document.createElementNS(SVG_NS, \"path\");\n    this.element[MARKER_DATA] = this;\n  }\n  isPoly() {\n    return true;\n  }\n  /**\n   * Checks if it is a polygon/polyline using pixel coordinates\n   */\n  get isPixels() {\n    return this.type === \"polygonPixels\" /* polygonPixels */ || this.type === \"polylinePixels\" /* polylinePixels */;\n  }\n  /**\n   * Checks if it is a polygon marker\n   */\n  get isPolygon() {\n    return this.type === \"polygon\" /* polygon */ || this.type === \"polygonPixels\" /* polygonPixels */;\n  }\n  /**\n   * Checks if it is a polyline marker\n   */\n  get isPolyline() {\n    return this.type === \"polyline\" /* polyline */ || this.type === \"polylinePixels\" /* polylinePixels */;\n  }\n  get coords() {\n    return this.definition;\n  }\n  render() {\n    const positions = this.__getAllPolyPositions();\n    const isVisible = positions[0].length > (this.isPolygon ? 2 : 1);\n    if (isVisible) {\n      const position = this.viewer.dataHelper.sphericalCoordsToViewerCoords(this.state.position);\n      const points = positions.filter((innerPos) => innerPos.length > 0).map((innerPos) => {\n        let innerPoints = \"M\";\n        innerPoints += innerPos.map((pos) => `${pos.x - position.x},${pos.y - position.y}`).join(\"L\");\n        if (this.isPolygon) {\n          innerPoints += \"Z\";\n        }\n        return innerPoints;\n      }).join(\" \");\n      this.domElement.setAttributeNS(null, \"d\", points);\n      this.domElement.setAttributeNS(null, \"transform\", `translate(${position.x} ${position.y})`);\n      return position;\n    } else {\n      return null;\n    }\n  }\n  update(config) {\n    super.update(config);\n    const element = this.domElement;\n    element.classList.add(\"psv-marker--poly\");\n    if (this.config.svgStyle) {\n      Object.entries(this.config.svgStyle).forEach(([prop, value]) => {\n        element.setAttributeNS(null, utils8.dasherize(prop), value);\n      });\n      if (this.isPolyline && !this.config.svgStyle.fill) {\n        element.setAttributeNS(null, \"fill\", \"none\");\n      }\n    } else if (this.isPolygon) {\n      element.setAttributeNS(null, \"fill\", \"rgba(0,0,0,0.5)\");\n    } else if (this.isPolyline) {\n      element.setAttributeNS(null, \"fill\", \"none\");\n      element.setAttributeNS(null, \"stroke\", \"rgb(0,0,0)\");\n    }\n    try {\n      let actualPoly = this.config[this.type];\n      if (!Array.isArray(actualPoly[0]) && typeof actualPoly[0] !== \"object\") {\n        for (let i = 0; i < actualPoly.length; i++) {\n          actualPoly.splice(i, 2, [actualPoly[i], actualPoly[i + 1]]);\n        }\n      }\n      if (!Array.isArray(actualPoly[0][0]) && typeof actualPoly[0][0] !== \"object\") {\n        actualPoly = [actualPoly];\n      }\n      if (this.isPolyline && actualPoly.length > 1) {\n        throw new PSVError7(`polylines cannot have holes`);\n      }\n      if (this.isPixels) {\n        this.definition = actualPoly.map((coords) => {\n          return coords.map((coord) => {\n            let sphericalCoord;\n            if (utils8.isExtendedPosition(coord)) {\n              sphericalCoord = this.viewer.dataHelper.cleanPosition(coord);\n            } else {\n              sphericalCoord = this.viewer.dataHelper.textureCoordsToSphericalCoords({\n                textureX: coord[0],\n                textureY: coord[1]\n              });\n            }\n            return [sphericalCoord.yaw, sphericalCoord.pitch];\n          });\n        });\n      } else {\n        this.definition = actualPoly.map((coords) => {\n          return coords.map((coord) => {\n            let sphericalCoord;\n            if (utils8.isExtendedPosition(coord)) {\n              sphericalCoord = this.viewer.dataHelper.cleanPosition(coord);\n            } else {\n              sphericalCoord = this.viewer.dataHelper.cleanPosition({\n                yaw: coord[0],\n                pitch: coord[1]\n              });\n            }\n            return [sphericalCoord.yaw, sphericalCoord.pitch];\n          });\n        });\n      }\n    } catch (e) {\n      throw new PSVError7(`invalid marker ${this.id} position`, e);\n    }\n    const centroid = this.isPolygon ? getPolygonCenter(this.coords[0]) : getPolylineCenter(this.coords[0]);\n    this.state.position = { yaw: centroid[0], pitch: centroid[1] };\n    this.positions3D = this.coords.map((coords) => {\n      return coords.map((coord) => {\n        return this.viewer.dataHelper.sphericalCoordsToVector3({ yaw: coord[0], pitch: coord[1] });\n      });\n    });\n    this.state.positions3D = this.positions3D[0];\n  }\n  __getAllPolyPositions() {\n    return this.positions3D.map((positions) => {\n      return this.__getPolyPositions(positions);\n    });\n  }\n  /**\n   * Computes viewer coordinates of each point of a polygon/polyline<br>\n   * It handles points behind the camera by creating intermediary points suitable for the projector\n   */\n  __getPolyPositions(positions) {\n    const nbVectors = positions.length;\n    const positions3D = positions.map((vector) => {\n      return {\n        vector,\n        visible: vector.dot(this.viewer.state.direction) > 0\n      };\n    });\n    const toBeComputed = [];\n    positions3D.forEach((pos, i) => {\n      if (!pos.visible) {\n        const neighbours = [\n          i === 0 ? positions3D[nbVectors - 1] : positions3D[i - 1],\n          i === nbVectors - 1 ? positions3D[0] : positions3D[i + 1]\n        ];\n        neighbours.forEach((neighbour) => {\n          if (neighbour.visible) {\n            toBeComputed.push({\n              visible: neighbour.vector,\n              invisible: pos.vector,\n              index: i\n            });\n          }\n        });\n      }\n    });\n    toBeComputed.reverse().forEach((pair) => {\n      positions3D.splice(pair.index, 0, {\n        vector: getGreatCircleIntersection(pair.visible, pair.invisible, this.viewer.state.direction),\n        visible: true\n      });\n    });\n    return positions3D.filter((pos) => pos.visible).map((pos) => this.viewer.dataHelper.vector3ToViewerCoords(pos.vector));\n  }\n};\n\n// src/markers/MarkerSvg.ts\nimport { utils as utils9 } from \"@photo-sphere-viewer/core\";\nvar MarkerSvg = class extends AbstractStandardMarker {\n  get svgElement() {\n    return this.domElement.firstElementChild;\n  }\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n  }\n  isSvg() {\n    return true;\n  }\n  createElement() {\n    const svgType = this.type === \"square\" /* square */ ? \"rect\" : this.type;\n    const elt = document.createElementNS(SVG_NS, svgType);\n    this.element = document.createElementNS(SVG_NS, \"svg\");\n    this.element.appendChild(elt);\n    this.afterCreateElement();\n  }\n  update(config) {\n    super.update(config);\n    const svgElement = this.svgElement;\n    this.needsUpdateSize = true;\n    switch (this.type) {\n      case \"square\" /* square */:\n        this.definition = {\n          x: 0,\n          y: 0,\n          width: this.config.square,\n          height: this.config.square\n        };\n        break;\n      case \"rect\" /* rect */:\n        if (Array.isArray(this.config.rect)) {\n          this.definition = {\n            x: 0,\n            y: 0,\n            width: this.config.rect[0],\n            height: this.config.rect[1]\n          };\n        } else {\n          this.definition = {\n            x: 0,\n            y: 0,\n            width: this.config.rect.width,\n            height: this.config.rect.height\n          };\n        }\n        break;\n      case \"circle\" /* circle */:\n        this.definition = {\n          cx: this.config.circle,\n          cy: this.config.circle,\n          r: this.config.circle\n        };\n        break;\n      case \"ellipse\" /* ellipse */:\n        if (Array.isArray(this.config.ellipse)) {\n          this.definition = {\n            cx: this.config.ellipse[0],\n            cy: this.config.ellipse[1],\n            rx: this.config.ellipse[0],\n            ry: this.config.ellipse[1]\n          };\n        } else {\n          this.definition = {\n            cx: this.config.ellipse.rx,\n            cy: this.config.ellipse.ry,\n            rx: this.config.ellipse.rx,\n            ry: this.config.ellipse.ry\n          };\n        }\n        break;\n      case \"path\" /* path */:\n        this.definition = {\n          d: this.config.path\n        };\n        break;\n    }\n    Object.entries(this.definition).forEach(([prop, value]) => {\n      svgElement.setAttributeNS(null, prop, value);\n    });\n    if (this.config.svgStyle) {\n      Object.entries(this.config.svgStyle).forEach(([prop, value]) => {\n        svgElement.setAttributeNS(null, utils9.dasherize(prop), value);\n      });\n    } else {\n      svgElement.setAttributeNS(null, \"fill\", \"rgba(0,0,0,0.5)\");\n    }\n  }\n};\n\n// src/MarkersPlugin.ts\nvar getConfig = utils10.getConfigParser(\n  {\n    clickEventOnMarker: false,\n    gotoMarkerSpeed: \"8rpm\",\n    markers: null,\n    defaultHoverScale: null\n  },\n  {\n    defaultHoverScale(defaultHoverScale) {\n      if (!defaultHoverScale) {\n        return null;\n      }\n      if (defaultHoverScale === true) {\n        defaultHoverScale = DEFAULT_HOVER_SCALE;\n      }\n      if (typeof defaultHoverScale === \"number\") {\n        defaultHoverScale = { amount: defaultHoverScale };\n      }\n      return {\n        ...DEFAULT_HOVER_SCALE,\n        ...defaultHoverScale\n      };\n    }\n  }\n);\nfunction getMarkerCtor(config) {\n  const type = getMarkerType(config, false);\n  switch (type) {\n    case \"image\":\n    case \"html\":\n    case \"element\":\n      return MarkerNormal;\n    case \"imageLayer\":\n    case \"videoLayer\":\n      return Marker3D;\n    case \"elementLayer\":\n      return MarkerCSS3D;\n    case \"polygon\":\n    case \"polyline\":\n    case \"polygonPixels\":\n    case \"polylinePixels\":\n      return MarkerPolygon;\n    case \"square\":\n    case \"rect\":\n    case \"circle\":\n    case \"ellipse\":\n    case \"path\":\n      return MarkerSvg;\n    default:\n      throw new PSVError8(\"invalid marker type\");\n  }\n}\nvar MarkersPlugin = class extends AbstractConfigurablePlugin {\n  constructor(viewer, config) {\n    super(viewer, config);\n    this.markers = {};\n    this.state = {\n      allVisible: true,\n      showAllTooltips: false,\n      currentMarker: null,\n      hoveringMarker: null,\n      // require a 2nd render (only the scene) when 3d markers visibility changes\n      needsReRender: false,\n      // use when updating a polygon marker in order to keep the current position\n      lastClientX: null,\n      lastClientY: null\n    };\n    this.container = document.createElement(\"div\");\n    this.container.className = \"psv-markers\";\n    this.viewer.container.appendChild(this.container);\n    this.container.addEventListener(\"contextmenu\", (e) => e.preventDefault());\n    this.svgContainer = document.createElementNS(SVG_NS, \"svg\");\n    this.svgContainer.setAttribute(\"class\", \"psv-markers-svg-container\");\n    this.container.appendChild(this.svgContainer);\n    this.css3DContainer = new CSS3DContainer(viewer);\n    this.container.appendChild(this.css3DContainer.element);\n    this.container.addEventListener(\"mouseenter\", this, true);\n    this.container.addEventListener(\"mouseleave\", this, true);\n    this.container.addEventListener(\"mousemove\", this, true);\n  }\n  /**\n   * @internal\n   */\n  init() {\n    super.init();\n    utils10.checkStylesheet(this.viewer.container, \"markers-plugin\");\n    this.viewer.addEventListener(events3.ClickEvent.type, this);\n    this.viewer.addEventListener(events3.DoubleClickEvent.type, this);\n    this.viewer.addEventListener(events3.RenderEvent.type, this);\n    this.viewer.addEventListener(events3.ConfigChangedEvent.type, this);\n    this.viewer.addEventListener(events3.ObjectEnterEvent.type, this);\n    this.viewer.addEventListener(events3.ObjectHoverEvent.type, this);\n    this.viewer.addEventListener(events3.ObjectLeaveEvent.type, this);\n    this.viewer.addEventListener(events3.ReadyEvent.type, this, { once: true });\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.clearMarkers(false);\n    this.viewer.unobserveObjects(MARKER_DATA);\n    this.viewer.removeEventListener(events3.ClickEvent.type, this);\n    this.viewer.removeEventListener(events3.DoubleClickEvent.type, this);\n    this.viewer.removeEventListener(events3.RenderEvent.type, this);\n    this.viewer.removeEventListener(events3.ObjectEnterEvent.type, this);\n    this.viewer.removeEventListener(events3.ObjectHoverEvent.type, this);\n    this.viewer.removeEventListener(events3.ObjectLeaveEvent.type, this);\n    this.viewer.removeEventListener(events3.ReadyEvent.type, this);\n    this.css3DContainer.destroy();\n    this.viewer.container.removeChild(this.container);\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case events3.ReadyEvent.type:\n        if (this.config.markers) {\n          this.setMarkers(this.config.markers);\n          delete this.config.markers;\n        }\n        break;\n      case events3.RenderEvent.type:\n        this.renderMarkers();\n        break;\n      case events3.ClickEvent.type:\n        this.__onClick(e, false);\n        break;\n      case events3.DoubleClickEvent.type:\n        this.__onClick(e, true);\n        break;\n      case events3.ObjectEnterEvent.type:\n      case events3.ObjectLeaveEvent.type:\n      case events3.ObjectHoverEvent.type:\n        if (e.userDataKey === MARKER_DATA) {\n          const event = e.originalEvent;\n          const marker = e.object.userData[MARKER_DATA];\n          switch (e.type) {\n            case events3.ObjectEnterEvent.type:\n              if (marker.config.style?.cursor) {\n                this.viewer.setCursor(marker.config.style.cursor);\n              } else if (marker.config.tooltip || marker.config.content) {\n                this.viewer.setCursor(\"pointer\");\n              }\n              this.__onEnterMarker(event, marker);\n              break;\n            case events3.ObjectLeaveEvent.type:\n              this.viewer.setCursor(null);\n              this.__onLeaveMarker(marker);\n              break;\n            case events3.ObjectHoverEvent.type:\n              this.__onHoverMarker(event, marker);\n              break;\n          }\n        }\n        break;\n      case \"mouseenter\": {\n        const marker = this.__getTargetMarker(utils10.getEventTarget(e));\n        this.__onEnterMarker(e, marker);\n        break;\n      }\n      case \"mouseleave\": {\n        const marker = this.__getTargetMarker(utils10.getEventTarget(e));\n        this.__onLeaveMarker(marker);\n        break;\n      }\n      case \"mousemove\": {\n        const marker = this.__getTargetMarker(utils10.getEventTarget(e), true);\n        this.__onHoverMarker(e, marker);\n        break;\n      }\n    }\n  }\n  /**\n   * Toggles all markers\n   */\n  toggleAllMarkers() {\n    if (this.state.allVisible) {\n      this.hideAllMarkers();\n    } else {\n      this.showAllMarkers();\n    }\n  }\n  /**\n   * Shows all markers\n   */\n  showAllMarkers() {\n    this.state.allVisible = true;\n    Object.values(this.markers).forEach((marker) => {\n      marker.config.visible = true;\n    });\n    this.renderMarkers();\n    this.dispatchEvent(new ShowMarkersEvent());\n  }\n  /**\n   * Hides all markers\n   */\n  hideAllMarkers() {\n    this.state.allVisible = false;\n    Object.values(this.markers).forEach((marker) => {\n      marker.config.visible = false;\n    });\n    this.renderMarkers();\n    this.dispatchEvent(new HideMarkersEvent());\n  }\n  /**\n   * Toggles the visibility of all tooltips\n   */\n  toggleAllTooltips() {\n    if (this.state.showAllTooltips) {\n      this.hideAllTooltips();\n    } else {\n      this.showAllTooltips();\n    }\n  }\n  /**\n   *  Displays all tooltips\n   */\n  showAllTooltips() {\n    this.state.showAllTooltips = true;\n    Object.values(this.markers).forEach((marker) => {\n      marker.state.staticTooltip = true;\n      marker.showTooltip();\n    });\n  }\n  /**\n   * Hides all tooltips\n   */\n  hideAllTooltips() {\n    this.state.showAllTooltips = false;\n    Object.values(this.markers).forEach((marker) => {\n      marker.state.staticTooltip = false;\n      marker.hideTooltip();\n    });\n  }\n  /**\n   * Returns the total number of markers\n   */\n  getNbMarkers() {\n    return Object.keys(this.markers).length;\n  }\n  /**\n   * Returns all the markers\n   */\n  getMarkers() {\n    return Object.values(this.markers);\n  }\n  /**\n   * Adds a new marker to viewer\n   * @throws {@link PSVError} when the marker's id is missing or already exists\n   */\n  addMarker(config, render = true) {\n    if (this.markers[config.id]) {\n      throw new PSVError8(`marker \"${config.id}\" already exists`);\n    }\n    const marker = new (getMarkerCtor(config))(this.viewer, this, config);\n    if (marker.isPoly()) {\n      this.svgContainer.appendChild(marker.domElement);\n    } else if (marker.isCss3d()) {\n      this.css3DContainer.addObject(marker);\n    } else if (marker.is3d()) {\n      this.viewer.renderer.addObject(marker.threeElement);\n    } else {\n      this.container.appendChild(marker.domElement);\n    }\n    this.markers[marker.id] = marker;\n    if (this.state.showAllTooltips) {\n      marker.state.staticTooltip = true;\n    }\n    if (render) {\n      this.__afterChangeMarkers();\n    }\n  }\n  /**\n   * Returns the internal marker object for a marker id\n   * @throws {@link PSVError} when the marker cannot be found\n   */\n  getMarker(markerId) {\n    const id = typeof markerId === \"object\" ? markerId.id : markerId;\n    if (!this.markers[id]) {\n      throw new PSVError8(`cannot find marker \"${id}\"`);\n    }\n    return this.markers[id];\n  }\n  /**\n   * Returns the last marker selected by the user\n   */\n  getCurrentMarker() {\n    return this.state.currentMarker;\n  }\n  /**\n   * Updates the existing marker with the same id\n   * Every property can be changed but you can't change its type (Eg: `image` to `html`)\n   */\n  updateMarker(config, render = true) {\n    const marker = this.getMarker(config.id);\n    marker.update(config);\n    if (render) {\n      this.__afterChangeMarkers();\n      if (marker === this.state.hoveringMarker && marker.config.tooltip?.trigger === \"hover\" || marker.state.staticTooltip) {\n        marker.showTooltip(this.state.lastClientX, this.state.lastClientY, true);\n      }\n    }\n  }\n  /**\n   * Removes a marker from the viewer\n   */\n  removeMarker(markerId, render = true) {\n    const marker = this.getMarker(markerId);\n    if (marker.isPoly()) {\n      this.svgContainer.removeChild(marker.domElement);\n    } else if (marker.isCss3d()) {\n      this.css3DContainer.removeObject(marker);\n    } else if (marker.is3d()) {\n      this.viewer.renderer.removeObject(marker.threeElement);\n    } else {\n      this.container.removeChild(marker.domElement);\n    }\n    if (this.state.hoveringMarker === marker) {\n      this.state.hoveringMarker = null;\n    }\n    if (this.state.currentMarker === marker) {\n      this.state.currentMarker = null;\n    }\n    marker.destroy();\n    delete this.markers[marker.id];\n    if (render) {\n      this.__afterChangeMarkers();\n    }\n  }\n  /**\n   * Removes multiple markers\n   */\n  removeMarkers(markerIds, render = true) {\n    markerIds.forEach((markerId) => this.removeMarker(markerId, false));\n    if (render) {\n      this.__afterChangeMarkers();\n    }\n  }\n  /**\n   * Replaces all markers\n   */\n  setMarkers(markers, render = true) {\n    this.clearMarkers(false);\n    markers?.forEach((marker) => {\n      this.addMarker(marker, false);\n    });\n    if (render) {\n      this.__afterChangeMarkers();\n    }\n  }\n  /**\n   * Removes all markers\n   */\n  clearMarkers(render = true) {\n    Object.keys(this.markers).forEach((markerId) => {\n      this.removeMarker(markerId, false);\n    });\n    if (render) {\n      this.__afterChangeMarkers();\n    }\n  }\n  /**\n   * Rotate the view to face the marker\n   */\n  gotoMarker(markerId, speed = this.config.gotoMarkerSpeed) {\n    const marker = this.getMarker(markerId);\n    if (!speed) {\n      this.viewer.rotate(marker.state.position);\n      if (!utils10.isNil(marker.config.zoomLvl)) {\n        this.viewer.zoom(marker.config.zoomLvl);\n      }\n      this.dispatchEvent(new GotoMarkerDoneEvent(marker));\n      return Promise.resolve();\n    } else {\n      return this.viewer.animate({\n        ...marker.state.position,\n        zoom: marker.config.zoomLvl,\n        speed\n      }).then(() => {\n        this.dispatchEvent(new GotoMarkerDoneEvent(marker));\n      });\n    }\n  }\n  /**\n   * Hides a marker\n   */\n  hideMarker(markerId) {\n    this.toggleMarker(markerId, false);\n  }\n  /**\n   * Shows a marker\n   */\n  showMarker(markerId) {\n    this.toggleMarker(markerId, true);\n  }\n  /**\n   * Forces the display of the tooltip of a marker\n   */\n  showMarkerTooltip(markerId) {\n    const marker = this.getMarker(markerId);\n    marker.state.staticTooltip = true;\n    marker.showTooltip();\n  }\n  /**\n   * Hides the tooltip of a marker\n   */\n  hideMarkerTooltip(markerId) {\n    const marker = this.getMarker(markerId);\n    marker.state.staticTooltip = false;\n    marker.hideTooltip();\n  }\n  /**\n   * Toggles a marker visibility\n   */\n  toggleMarker(markerId, visible) {\n    const marker = this.getMarker(markerId);\n    marker.config.visible = utils10.isNil(visible) ? !marker.config.visible : visible;\n    this.renderMarkers();\n  }\n  /**\n   * Opens the panel with the content of the marker\n   */\n  showMarkerPanel(markerId) {\n    const marker = this.getMarker(markerId);\n    if (marker.config.content) {\n      this.viewer.panel.show({\n        id: ID_PANEL_MARKER,\n        content: marker.config.content\n      });\n    } else {\n      this.hideMarkerPanel();\n    }\n  }\n  /**\n   * Closes the panel if currently showing the content of a marker\n   */\n  hideMarkerPanel() {\n    this.viewer.panel.hide(ID_PANEL_MARKER);\n  }\n  /**\n   * Toggles the visibility of the list of markers\n   */\n  toggleMarkersList() {\n    if (this.viewer.panel.isVisible(ID_PANEL_MARKERS_LIST)) {\n      this.hideMarkersList();\n    } else {\n      this.showMarkersList();\n    }\n  }\n  /**\n   * Opens side panel with the list of markers\n   */\n  showMarkersList() {\n    let markers = [];\n    Object.values(this.markers).forEach((marker) => {\n      if (marker.config.visible && !marker.config.hideList) {\n        markers.push(marker);\n      }\n    });\n    const e = new RenderMarkersListEvent(markers);\n    this.dispatchEvent(e);\n    markers = e.markers;\n    this.viewer.panel.show({\n      id: ID_PANEL_MARKERS_LIST,\n      content: MARKERS_LIST_TEMPLATE(markers, this.viewer.config.lang[MarkersButton.id]),\n      noMargin: true,\n      clickHandler: (target) => {\n        const li = utils10.getClosest(target, \".psv-panel-menu-item\");\n        const markerId = li ? li.dataset[MARKER_DATA] : void 0;\n        if (markerId) {\n          const marker = this.getMarker(markerId);\n          this.dispatchEvent(new SelectMarkerListEvent(marker));\n          this.gotoMarker(marker.id);\n          this.hideMarkersList();\n        }\n      }\n    });\n  }\n  /**\n   * Closes side panel if it contains the list of markers\n   */\n  hideMarkersList() {\n    this.viewer.panel.hide(ID_PANEL_MARKERS_LIST);\n  }\n  /**\n   * Updates the visibility and the position of all markers\n   */\n  renderMarkers() {\n    if (this.state.needsReRender) {\n      this.state.needsReRender = false;\n      return;\n    }\n    const zoomLevel = this.viewer.getZoomLevel();\n    const viewerPosition = this.viewer.getPosition();\n    const hoveringMarker = this.state.hoveringMarker;\n    Object.values(this.markers).forEach((marker) => {\n      let isVisible = marker.config.visible;\n      let visibilityChanged = false;\n      let position = null;\n      if (isVisible) {\n        position = marker.render({ viewerPosition, zoomLevel, hoveringMarker });\n        isVisible = !!position;\n      }\n      visibilityChanged = marker.state.visible !== isVisible;\n      marker.state.visible = isVisible;\n      marker.state.position2D = position;\n      if (marker.domElement) {\n        utils10.toggleClass(marker.domElement, \"psv-marker--visible\", isVisible);\n      }\n      if (!isVisible) {\n        marker.hideTooltip();\n      } else if (marker.state.staticTooltip) {\n        marker.showTooltip();\n      } else if (marker !== this.state.hoveringMarker) {\n        marker.hideTooltip();\n      }\n      if (visibilityChanged) {\n        this.dispatchEvent(new MarkerVisibilityEvent(marker, isVisible));\n        if (marker.is3d() || marker.isCss3d()) {\n          this.state.needsReRender = true;\n        }\n      }\n    });\n    if (this.state.needsReRender) {\n      this.viewer.needsUpdate();\n    }\n  }\n  __getTargetMarker(target, closest = false) {\n    if (target instanceof Node) {\n      const target2 = closest ? utils10.getClosest(target, \".psv-marker\") : target;\n      return target2 ? target2[MARKER_DATA] : void 0;\n    } else if (Array.isArray(target)) {\n      return target.map((o) => o.userData[MARKER_DATA]).filter((m) => !!m).sort((a, b) => b.config.zIndex - a.config.zIndex)[0];\n    } else {\n      return null;\n    }\n  }\n  /**\n   * Handles mouse enter events, show the tooltip for non polygon markers\n   */\n  __onEnterMarker(e, marker) {\n    if (marker) {\n      this.state.hoveringMarker = marker;\n      this.state.lastClientX = e.clientX;\n      this.state.lastClientY = e.clientY;\n      this.dispatchEvent(new EnterMarkerEvent(marker));\n      if (marker instanceof AbstractStandardMarker) {\n        marker.applyScale({\n          zoomLevel: this.viewer.getZoomLevel(),\n          viewerPosition: this.viewer.getPosition(),\n          mouseover: true\n        });\n      }\n      if (!marker.state.staticTooltip && marker.config.tooltip?.trigger === \"hover\") {\n        marker.showTooltip(e.clientX, e.clientY);\n      }\n    }\n  }\n  /**\n   * Handles mouse leave events, hide the tooltip\n   */\n  __onLeaveMarker(marker) {\n    if (marker) {\n      this.dispatchEvent(new LeaveMarkerEvent(marker));\n      if (marker instanceof AbstractStandardMarker) {\n        marker.applyScale({\n          zoomLevel: this.viewer.getZoomLevel(),\n          viewerPosition: this.viewer.getPosition(),\n          mouseover: false\n        });\n      }\n      this.state.hoveringMarker = null;\n      if (!marker.state.staticTooltip && marker.config.tooltip?.trigger === \"hover\") {\n        marker.hideTooltip();\n      } else if (marker.state.staticTooltip) {\n        marker.showTooltip();\n      }\n    }\n  }\n  /**\n   * Handles mouse move events, refresh the tooltip for polygon markers\n   */\n  __onHoverMarker(e, marker) {\n    if (marker) {\n      this.state.lastClientX = e.clientX;\n      this.state.lastClientY = e.clientY;\n      if (marker.isPoly() || marker.is3d() || marker.isCss3d()) {\n        if (marker.config.tooltip?.trigger === \"hover\") {\n          marker.showTooltip(e.clientX, e.clientY);\n        }\n      }\n    }\n  }\n  /**\n   * Handles mouse click events, select the marker and open the panel if necessary\n   */\n  __onClick(e, dblclick) {\n    const threeMarker = this.__getTargetMarker(e.data.objects);\n    const stdMarker = this.__getTargetMarker(e.data.target, true);\n    const marker = stdMarker || threeMarker;\n    if (this.state.currentMarker && this.state.currentMarker !== marker) {\n      this.dispatchEvent(new UnselectMarkerEvent(this.state.currentMarker));\n      this.viewer.panel.hide(ID_PANEL_MARKER);\n      if (!this.state.showAllTooltips && this.state.currentMarker.config.tooltip?.trigger === \"click\") {\n        this.hideMarkerTooltip(this.state.currentMarker.id);\n      }\n      this.state.currentMarker = null;\n    }\n    if (marker) {\n      this.state.currentMarker = marker;\n      this.dispatchEvent(new SelectMarkerEvent(marker, dblclick, e.data.rightclick));\n      if (this.config.clickEventOnMarker) {\n        e.data.marker = marker;\n      } else {\n        e.stopImmediatePropagation();\n      }\n      if (this.markers[marker.id] && !e.data.rightclick) {\n        if (marker.config.tooltip?.trigger === \"click\") {\n          if (marker.tooltip) {\n            this.hideMarkerTooltip(marker.id);\n          } else {\n            this.showMarkerTooltip(marker.id);\n          }\n        } else {\n          this.showMarkerPanel(marker.id);\n        }\n      }\n    }\n  }\n  __afterChangeMarkers() {\n    this.__refreshUi();\n    this.__checkObjectsObserver();\n    this.viewer.needsUpdate();\n    this.dispatchEvent(new SetMarkersEvent(this.getMarkers()));\n  }\n  /**\n   * Updates the visiblity of the panel and the buttons\n   */\n  __refreshUi() {\n    const nbMarkers = Object.values(this.markers).filter((m) => !m.config.hideList).length;\n    if (nbMarkers === 0) {\n      this.viewer.panel.hide(ID_PANEL_MARKER);\n      this.viewer.panel.hide(ID_PANEL_MARKERS_LIST);\n    } else {\n      if (this.viewer.panel.isVisible(ID_PANEL_MARKERS_LIST)) {\n        this.showMarkersList();\n      } else if (this.viewer.panel.isVisible(ID_PANEL_MARKER)) {\n        this.state.currentMarker ? this.showMarkerPanel(this.state.currentMarker.id) : this.viewer.panel.hide();\n      }\n    }\n    this.viewer.navbar.getButton(MarkersButton.id, false)?.toggle(nbMarkers > 0);\n    this.viewer.navbar.getButton(MarkersListButton.id, false)?.toggle(nbMarkers > 0);\n  }\n  /**\n   * Adds or remove the objects observer if there are 3D markers\n   */\n  __checkObjectsObserver() {\n    const has3d = Object.values(this.markers).some((marker) => marker.is3d());\n    if (has3d) {\n      this.viewer.observeObjects(MARKER_DATA);\n    } else {\n      this.viewer.unobserveObjects(MARKER_DATA);\n    }\n  }\n};\nMarkersPlugin.id = \"markers\";\nMarkersPlugin.VERSION = \"5.13.2\";\nMarkersPlugin.configParser = getConfig;\nMarkersPlugin.readonlyOptions = [\"markers\"];\n\n// src/index.ts\nDEFAULTS.lang[MarkersButton.id] = \"Markers\";\nDEFAULTS.lang[MarkersListButton.id] = \"Markers list\";\nregisterButton(MarkersButton, \"caption:left\");\nregisterButton(MarkersListButton, \"caption:left\");\nexport {\n  MarkersPlugin,\n  events_exports as events\n};\n//# sourceMappingURL=index.module.js.map","/*!\n * Photo Sphere Viewer / Map Plugin 5.13.2\n * @copyright 2015-2025 Damien \"Mistic\" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\nvar __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// src/index.ts\nimport { DEFAULTS } from \"@photo-sphere-viewer/core\";\n\n// src/events.ts\nvar events_exports = {};\n__export(events_exports, {\n  SelectHotspot: () => SelectHotspot,\n  ViewChanged: () => ViewChanged\n});\nimport { TypedEvent } from \"@photo-sphere-viewer/core\";\nvar _SelectHotspot = class _SelectHotspot extends TypedEvent {\n  /** @internal */\n  constructor(hotspotId) {\n    super(_SelectHotspot.type);\n    this.hotspotId = hotspotId;\n  }\n};\n_SelectHotspot.type = \"select-hotspot\";\nvar SelectHotspot = _SelectHotspot;\nvar _ViewChanged = class _ViewChanged extends TypedEvent {\n  /** @internal */\n  constructor(view) {\n    super(_ViewChanged.type);\n    this.view = view;\n  }\n};\n_ViewChanged.type = \"view-changed\";\nvar ViewChanged = _ViewChanged;\n\n// src/MapPlugin.ts\nimport { AbstractConfigurablePlugin, events as events2, utils as utils3 } from \"@photo-sphere-viewer/core\";\nimport { Color } from \"three\";\n\n// src/components/MapComponent.ts\nimport { AbstractComponent as AbstractComponent3, CONSTANTS as CONSTANTS2, events, SYSTEM as SYSTEM2, utils as utils2 } from \"@photo-sphere-viewer/core\";\nimport { MathUtils } from \"three\";\n\n// src/constants.ts\nvar MARKER_DATA_KEY = \"map\";\nvar HOTSPOT_GENERATED_ID = \"__generated__\";\nvar HOTSPOT_MARKER_ID = \"__marker__\";\nvar PIN_SHADOW_OFFSET = 2;\nvar PIN_SHADOW_BLUR = 4;\nvar MAP_SHADOW_BLUR = 10;\n\n// src/utils.ts\nimport { SYSTEM } from \"@photo-sphere-viewer/core\";\nfunction loadImage(src) {\n  const image = document.createElement(\"img\");\n  if (!src.includes(\"<svg\")) {\n    image.src = src;\n  } else {\n    if (!/<svg[^>]*width=\"/.test(src) && src.includes(\"viewBox\")) {\n      const [, , , width, height] = /viewBox=\"([0-9-]+) ([0-9-]+) ([0-9]+) ([0-9]+)\"/.exec(src);\n      src = src.replace(\"<svg\", `<svg width=\"${width}px\" height=\"${height}px\"`);\n    }\n    const src64 = `data:image/svg+xml;base64,${window.btoa(src)}`;\n    image.src = src64;\n  }\n  return image;\n}\nfunction getImageHtml(src) {\n  if (!src) {\n    return \"\";\n  } else if (!src.includes(\"<svg\")) {\n    return `<img src=\"${src}\">`;\n  } else {\n    return src;\n  }\n}\nfunction getStyle(defaultStyle, style, isHover) {\n  return {\n    image: isHover ? style.hoverImage ?? style.image ?? defaultStyle.hoverImage ?? defaultStyle.image : style.image ?? defaultStyle.image,\n    size: isHover ? style.hoverSize ?? style.size ?? defaultStyle.hoverSize ?? defaultStyle.size : style.size ?? defaultStyle.size,\n    color: isHover ? style.hoverColor ?? style.color ?? defaultStyle.hoverColor ?? defaultStyle.color : style.color ?? defaultStyle.color,\n    borderColor: isHover ? style.hoverBorderColor ?? style.borderColor ?? defaultStyle.hoverBorderColor ?? defaultStyle.borderColor : style.borderColor ?? defaultStyle.borderColor,\n    borderSize: isHover ? style.hoverBorderSize ?? style.borderSize ?? defaultStyle.hoverBorderSize ?? defaultStyle.borderSize : style.borderSize ?? defaultStyle.borderSize\n  };\n}\nfunction unprojectPoint(pt, yaw, zoom) {\n  return {\n    x: (Math.cos(yaw) * pt.x - Math.sin(yaw) * pt.y) / zoom,\n    y: (Math.sin(yaw) * pt.x + Math.cos(yaw) * pt.y) / zoom\n  };\n}\nfunction projectPoint(pt, yaw, zoom) {\n  return {\n    x: (Math.cos(-yaw) * pt.x - Math.sin(-yaw) * pt.y) * zoom,\n    y: (Math.sin(-yaw) * pt.x + Math.cos(-yaw) * pt.y) * zoom\n  };\n}\nfunction canvasShadow(context, offsetX, offsetY, blur, color = \"black\") {\n  context.shadowOffsetX = offsetX * SYSTEM.pixelRatio;\n  context.shadowOffsetY = offsetY * SYSTEM.pixelRatio;\n  context.shadowBlur = blur * SYSTEM.pixelRatio;\n  context.shadowColor = color;\n}\nfunction drawImageCentered(context, image, size) {\n  const w = image.width;\n  const h = image.height;\n  drawImageHighDpi(\n    context,\n    image,\n    -size / 2,\n    -(h / w * size) / 2,\n    size,\n    h / w * size\n  );\n}\nfunction drawImageHighDpi(context, image, x, y, w, h) {\n  context.drawImage(\n    image,\n    0,\n    0,\n    image.width,\n    image.height,\n    x * SYSTEM.pixelRatio,\n    y * SYSTEM.pixelRatio,\n    w * SYSTEM.pixelRatio,\n    h * SYSTEM.pixelRatio\n  );\n}\nfunction rgbToRgba(rgb, alpha) {\n  return `rgba(${rgb.slice(4, -1)},${alpha})`;\n}\n\n// src/components/MapCloseButton.ts\nimport { CONSTANTS } from \"@photo-sphere-viewer/core\";\n\n// src/icons/map.svg\nvar map_default = '<svg viewBox=\"114 45 472 472\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"currentColor\"><path d=\"M383.6 196a67.3 67.3 0 1 0-134.5.1 67.3 67.3 0 0 0 134.5-.1zm-100.8 0a33.6 33.6 0 1 1 67.3 0 33.6 33.6 0 0 1-67.3 0z\"/><path d=\"M584 340.8a16.8 16.8 0 0 0-15.6-10.4H403.8c25.2-40.2 47-88 47-133.4A135 135 0 0 0 316.4 61.6 135 135 0 0 0 182 197c0 55.8 33 115.3 64.7 159.8L120.4 469a16.8 16.8 0 0 0 11.2 29.4H434c4.5 0 8.7-1.8 11.9-5l134.4-134.3c4.8-4.8 6.2-12 3.6-18.3zM215.5 197c0-56.1 45.2-101.8 100.8-101.8 55.6 0 100.8 45.6 100.8 101.8 0 65-57.1 144.2-100.8 192.8C273 341.7 215.6 262.3 215.6 197zM427 464.8H175.8l91.3-81.1a575.6 575.6 0 0 0 37.4 42.6 16.8 16.8 0 0 0 23.8 0c2.2-2.2 26.3-26.7 52.6-62.3h147z\"/></g><!-- Created by Ayub Irawan from Noun Project --></svg>';\n\n// src/components/AbstractMapButton.ts\nimport { AbstractComponent } from \"@photo-sphere-viewer/core\";\nvar INVERT_POSITIONS = {\n  top: \"bottom\",\n  bottom: \"top\",\n  left: \"right\",\n  right: \"left\"\n};\nfunction getButtonPosition(mapPosition, direction) {\n  switch (direction) {\n    case 1 /* DIAGONAL */:\n      return [INVERT_POSITIONS[mapPosition[0]], INVERT_POSITIONS[mapPosition[1]]];\n    case 2 /* HORIZONTAL */:\n      return [mapPosition[0], INVERT_POSITIONS[mapPosition[1]]];\n    case 3 /* VERTICAL */:\n      return [INVERT_POSITIONS[mapPosition[0]], mapPosition[1]];\n    default:\n      return mapPosition;\n  }\n}\nvar AbstractMapButton = class extends AbstractComponent {\n  constructor(map, position) {\n    super(map, {});\n    this.map = map;\n    this.position = position;\n  }\n  applyConfig() {\n    this.container.className = `psv-map__button psv-map__button--${getButtonPosition(this.map.config.position, this.position).join(\"-\")}`;\n    this.update();\n  }\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  update() {\n  }\n};\n\n// src/components/MapCloseButton.ts\nvar MapCloseButton = class extends AbstractMapButton {\n  constructor(map) {\n    super(map, 0 /* DEFAULT */);\n    this.container.addEventListener(\"click\", (e) => {\n      map.toggleCollapse();\n      e.stopPropagation();\n    });\n  }\n  applyConfig() {\n    super.applyConfig();\n    this.container.classList.add(\"psv-map__button-close\");\n  }\n  update() {\n    this.container.innerHTML = this.map.collapsed ? map_default : CONSTANTS.ICONS.close;\n    this.container.title = this.map.collapsed ? this.viewer.config.lang[\"map\"] : this.viewer.config.lang.close;\n  }\n};\n\n// src/icons/compass.svg\nvar compass_default = '<svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M50,0L70,50L50,100L30,50Z M50,86L64,50L36,50Z\" fill=\"currentColor\"/></svg>';\n\n// src/components/MapCompassButton.ts\nvar MapCompassButton = class extends AbstractMapButton {\n  constructor(map) {\n    super(map, 3 /* VERTICAL */);\n    this.container.innerHTML = compass_default;\n    this.container.querySelector(\"svg\").style.width = \"80%\";\n    this.container.addEventListener(\"click\", (e) => {\n      this.viewer.dynamics.position.goto({ yaw: -map.config.rotation }, 2);\n      e.stopPropagation();\n    });\n  }\n  rotate(angle) {\n    this.container.querySelector(\"svg\").style.transform = `rotate3d(0, 0, 1, ${-angle}rad)`;\n  }\n  update() {\n    this.container.title = this.viewer.config.lang[\"mapNorth\"];\n  }\n};\n\n// src/icons/maximize.svg\nvar maximize_default = '<svg viewBox=\"95 25 510 510\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M604.2 39.8v481c0 7.8-6.1 14-14 14H358.4c-7.8 0-14-6.2-14-14s6.2-14 14-14h217.8v-453H123.8v216.7c0 7.8-6.2 14-14 14-7.9 0-14-6.2-14-14V39.8c0-7.9 6.1-14 14-14h481c7.3 0 13.4 6.1 13.4 14zm-304 304v176.4c0 7.9-6.2 14-14 14H109.8c-7.9 0-14-6.1-14-14V343.8c0-7.8 6.1-14 14-14h176.4c7.2 0 14 6.8 14 14zm-28 14H123.8v148.4h148.4zm215.6-195.4v79.5c0 7.9 6.1 14 14 14 7.8 0 14-6.1 14-14V128.2c0-7.8-6.2-14-14-14H388.6c-7.8 0-14 6.2-14 14 0 7.9 6.2 14 14 14h79L326.5 283.4a13.5 13.5 0 0 0 0 19.6c2.8 2.8 6.1 3.9 10 3.9 4 0 7.3-1.1 10.1-4z\" fill=\"currentColor\"/><!-- Created by Gregor Cresnar from Noun Project --></svg>';\n\n// src/icons/minimize.svg\nvar minimize_default = '<svg viewBox=\"95 25 510 510\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M109.8 25.8h481c7.8 0 14 6.1 14 14v481c0 7.8-6.2 14-14 14H358.4c-7.8 0-14-6.2-14-14s6.2-14 14-14h217.8v-453H123.8v216.7c0 7.8-6.2 14-14 14-7.9 0-14-6.2-14-14V39.8c0-7.9 6.1-14 14-14zm176.4 508.4H109.8c-7.9 0-14-6.1-14-14V343.8c0-7.8 6.1-14 14-14h176.4c7.8 0 14 6.2 14 14v176.4c0 7.9-6.8 14-14 14zm-14-176.4H123.8v148.4h148.4zm64.4-191.5c-7.9 0-14 6.2-14 14v113.1c0 7.9 6.1 14 14 14h113c8 0 14-6.1 14-14s-6-14-14-14h-79.4l141-141a13.5 13.5 0 0 0 0-19.7 13.5 13.5 0 0 0-19.5 0L350.6 259.8v-79.5c0-7.8-6.2-14-14-14z\" fill=\"currentColor\"/><!-- Created by Gregor Cresnar from Noun Project --></svg>';\n\n// src/components/MapMaximizeButton.ts\nvar ROTATION = {\n  \"bottom-left\": 0,\n  \"bottom-right\": -90,\n  \"top-right\": 180,\n  \"top-left\": 90\n};\nvar MapMaximizeButton = class extends AbstractMapButton {\n  constructor(map) {\n    super(map, 1 /* DIAGONAL */);\n    this.container.addEventListener(\"click\", (e) => {\n      map.toggleMaximized();\n      e.stopPropagation();\n    });\n  }\n  update() {\n    this.container.innerHTML = this.map.maximized ? minimize_default : maximize_default;\n    this.container.querySelector(\"svg\").style.transform = `rotate3d(0, 0, 1, ${ROTATION[this.map.config.position.join(\"-\")]}deg)`;\n    this.container.title = this.map.maximized ? this.viewer.config.lang[\"mapMinimize\"] : this.viewer.config.lang[\"mapMaximize\"];\n  }\n};\n\n// src/icons/reset.svg\nvar reset_default = '<svg viewBox=\"170 100 360 360\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"currentColor\"><path d=\"M518.6 269h-18.5a150.8 150.8 0 0 0-138-137.9v-20.9c0-5.8-4.7-10.6-10.5-10.6h-3.2c-5.8 0-10.6 4.8-10.6 10.6v21A150.8 150.8 0 0 0 200 269h-18.5c-5.9 0-10.6 4.7-10.6 10.6v3.2c0 5.8 4.7 10.5 10.6 10.5h18.5c6 73.4 64.6 132 138 138v18.5c0 5.8 4.7 10.6 10.5 10.6h3.2c5.8 0 10.6-4.8 10.6-10.6v-18.6c73.3-5.9 132-64.5 137.9-137.9h18.5c5.9 0 10.6-4.7 10.6-10.5v-3.2c0-5.9-4.7-10.6-10.6-10.6zM362.2 414.4v-9.8c0-5.9-4.8-10.6-10.6-10.6h-3.2c-5.8 0-10.6 4.7-10.6 10.6v9.8a134 134 0 0 1-121-121h9.8c5.9 0 10.6-4.8 10.6-10.6v-3.2c0-5.9-4.7-10.6-10.6-10.6h-9.8a134 134 0 0 1 121-121v7.5c0 5.8 4.8 10.5 10.6 10.5h3.2c5.8 0 10.6-4.7 10.6-10.5V148a134 134 0 0 1 121 121h-9.8c-5.9 0-10.6 4.7-10.6 10.6v3.2c0 5.8 4.7 10.5 10.6 10.5h9.8a134 134 0 0 1-121 121z\"/><path d=\"M355.4 222a6 6 0 0 0-10.7 0L291 320a8.3 8.3 0 0 0 9.7 12l39.2-11.7c6.6-2 13.6-2 20.2 0l39.2 11.7a8.3 8.3 0 0 0 9.7-12z\"/></g><!-- Created by muhammad benani from Noun Project --></svg>';\n\n// src/components/MapResetButton.ts\nvar MapResetButton = class extends AbstractMapButton {\n  constructor(map) {\n    super(map, 2 /* HORIZONTAL */);\n    this.container.innerHTML = reset_default;\n    this.container.querySelector(\"svg\").style.width = \"80%\";\n    this.container.addEventListener(\"click\", (e) => {\n      map.reset();\n      e.stopPropagation();\n    });\n  }\n  update() {\n    this.container.title = this.viewer.config.lang[\"mapReset\"];\n  }\n};\n\n// src/components/MapZoomToolbar.ts\nimport { AbstractComponent as AbstractComponent2, utils } from \"@photo-sphere-viewer/core\";\n\n// src/icons/minus.svg\nvar minus_default = '<svg viewBox=\"128 58 444 444\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"currentColor\" d=\"M350 58.2a221.8 221.8 0 1 0 0 443.6 221.8 221.8 0 0 0 0-443.6zm130.3 252.7H219.7a31 31 0 1 1 0-61.8h260.6a31 31 0 1 1 0 61.8z\"/><!-- Created by Iconika from Noun Project --></svg>';\n\n// src/icons/plus.svg\nvar plus_default = '<svg viewBox=\"143.8 73.8 412.5 412.5\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"currentColor\" d=\"M350 73.8a206.2 206.2 0 1 0 0 412.4 206.2 206.2 0 0 0 0-412.4zm117.3 234H378v89.5a27.9 27.9 0 1 1-55.8 0V308h-89.4a27.9 27.9 0 1 1 0-55.8H322v-89.5a27.9 27.9 0 1 1 55.8 0v89.5h89.5a27.9 27.9 0 1 1 0 55.8z\"/><!-- Created by Iconika from Noun Project --></svg>';\n\n// src/components/MapZoomToolbar.ts\nvar MapZoomToolbar = class extends AbstractComponent2 {\n  constructor(map) {\n    super(map, {\n      className: \"psv-map__toolbar\"\n    });\n    this.map = map;\n    this.handler = new utils.PressHandler(100);\n    this.container.innerHTML = `${minus_default}<span class=\"psv-map__toolbar-text\">100%</span>${plus_default}`;\n    this.zoomIndicator = this.container.querySelector(\".psv-map__toolbar-text\");\n    const zoomButtons = this.container.querySelectorAll(\"svg\");\n    zoomButtons[0].dataset[\"delta\"] = \"-1\";\n    zoomButtons[1].dataset[\"delta\"] = \"1\";\n    this.container.addEventListener(\"mousedown\", this);\n    window.addEventListener(\"mouseup\", this);\n    this.container.addEventListener(\"touchstart\", this);\n    window.addEventListener(\"touchend\", this);\n  }\n  destroy() {\n    window.removeEventListener(\"mouseup\", this);\n    window.removeEventListener(\"touchend\", this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    switch (e.type) {\n      case \"mousedown\":\n      case \"touchstart\": {\n        const button = utils.getMatchingTarget(e, \"svg[data-delta]\");\n        const delta = button?.dataset[\"delta\"];\n        if (delta) {\n          cancelAnimationFrame(this.animation);\n          this.handler.down();\n          this.time = performance.now();\n          this.animateZoom(parseInt(delta, 10));\n          e.preventDefault();\n          e.stopPropagation();\n        }\n        break;\n      }\n      case \"mouseup\":\n      case \"touchend\":\n        if (this.animation) {\n          this.handler.up(() => {\n            cancelAnimationFrame(this.animation);\n            this.animation = null;\n          });\n          e.preventDefault();\n          e.stopPropagation();\n        }\n        break;\n      default:\n        break;\n    }\n  }\n  setText(zoom) {\n    this.zoomIndicator.innerText = `${Math.round(Math.exp(zoom) * 100)}%`;\n  }\n  animateZoom(delta) {\n    this.animation = requestAnimationFrame((t) => {\n      this.map.zoom(delta * (t - this.time) / 1e3);\n      this.time = t;\n      this.animateZoom(delta);\n    });\n  }\n};\n\n// src/overlay-round.svg\nvar overlay_round_default = '<svg viewBox=\"0 0 500 500\" xmlns=\"http://www.w3.org/2000/svg\">\\n    <defs>\\n        <radialGradient id=\"gradient\">\\n            <stop offset=\"80%\" stop-color=\"rgba(255, 255, 255, 0)\"/>\\n            <stop offset=\"90%\" stop-color=\"rgba(255, 255, 255, .5)\"/>\\n        </radialGradient>\\n    </defs>\\n    <circle cx=\"250\" cy=\"250\" r=\"250\" fill=\"url(#gradient)\"/>\\n    <circle cx=\"250\" cy=\"250\" r=\"245\" fill=\"none\" stroke=\"rgba(255, 255, 255, 0.8)\" stroke-width=\"10\"/>\\n    <g fill=\"#222\">\\n        <rect x=\"1\" y=\"248\" width=\"18\" height=\"4\"/>\\n        <rect x=\"481\" y=\"248\" width=\"18\" height=\"4\"/>\\n        <rect x=\"248\" y=\"1\" width=\"4\" height=\"18\"/>\\n        <rect x=\"248\" y=\"481\" width=\"4\" height=\"18\"/>\\n    </g>\\n</svg>';\n\n// src/overlay-square.svg\nvar overlay_square_default = '<svg viewBox=\"0 0 500 500\" xmlns=\"http://www.w3.org/2000/svg\">\\n    <defs>\\n        <linearGradient id=\"gradient\">\\n            <stop offset=\"5%\" stop-color=\"rgba(255, 255, 255, .5)\"/>\\n            <stop offset=\"10%\" stop-color=\"rgba(255, 255, 255, 0)\"/>\\n            <stop offset=\"90%\" stop-color=\"rgba(255, 255, 255, 0)\"/>\\n            <stop offset=\"95%\" stop-color=\"rgba(255, 255, 255, .5)\"/>\\n        </linearGradient>\\n        <linearGradient id=\"gradient2\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\">\\n            <stop offset=\"5%\" stop-color=\"rgba(255, 255, 255, .5)\"/>\\n            <stop offset=\"10%\" stop-color=\"rgba(255, 255, 255, 0)\"/>\\n            <stop offset=\"90%\" stop-color=\"rgba(255, 255, 255, 0)\"/>\\n            <stop offset=\"95%\" stop-color=\"rgba(255, 255, 255, .5)\"/>\\n        </linearGradient>\\n    </defs>=\\n    <rect x=\"0\" y=\"0\" width=\"500\" height=\"500\" fill=\"url(#gradient)\"/>\\n    <rect x=\"0\" y=\"0\" width=\"500\" height=\"500\" fill=\"url(#gradient2)\"/>\\n    <rect x=\"5\" y=\"5\" width=\"490\" height=\"490\" fill=\"none\" stroke=\"rgba(255, 255, 255, 0.8)\" stroke-width=\"10\"/>\\n    <g fill=\"#222\">\\n        <rect x=\"1\" y=\"248\" width=\"18\" height=\"4\"/>\\n        <rect x=\"481\" y=\"248\" width=\"18\" height=\"4\"/>\\n        <rect x=\"248\" y=\"1\" width=\"4\" height=\"18\"/>\\n        <rect x=\"248\" y=\"481\" width=\"4\" height=\"18\"/>\\n    </g>\\n</svg>';\n\n// src/components/MapComponent.ts\nvar MapComponent = class extends AbstractComponent3 {\n  constructor(viewer, plugin) {\n    super(viewer, {\n      className: `psv-map ${CONSTANTS2.CAPTURE_EVENTS_CLASS}`\n    });\n    this.plugin = plugin;\n    this.state = {\n      visible: false,\n      maximized: false,\n      collapsed: false,\n      galleryWasVisible: false,\n      imgScale: 1,\n      zoom: this.config.defaultZoom,\n      offset: { x: 0, y: 0 },\n      mouseX: null,\n      mouseY: null,\n      mousedown: false,\n      pinchDist: 0,\n      pinchAngle: 0,\n      hotspotPos: {},\n      hotspotId: null,\n      hotspotTooltip: null,\n      markers: [],\n      forceRender: false,\n      needsUpdate: false,\n      renderLoop: null,\n      images: {}\n    };\n    const canvasContainer = document.createElement(\"div\");\n    canvasContainer.className = \"psv-map__container\";\n    canvasContainer.addEventListener(\"mousedown\", this);\n    window.addEventListener(\"mousemove\", this);\n    window.addEventListener(\"mouseup\", this);\n    canvasContainer.addEventListener(\"touchstart\", this);\n    window.addEventListener(\"touchmove\", this);\n    window.addEventListener(\"touchend\", this);\n    canvasContainer.addEventListener(\"wheel\", this);\n    viewer.addEventListener(events.KeypressEvent.type, this);\n    viewer.addEventListener(events.ConfigChangedEvent.type, this);\n    this.canvas = document.createElement(\"canvas\");\n    this.__setCursor(\"move\");\n    canvasContainer.appendChild(this.canvas);\n    this.overlay = document.createElement(\"div\");\n    this.overlay.className = \"psv-map__overlay\";\n    canvasContainer.appendChild(this.overlay);\n    this.container.appendChild(canvasContainer);\n    this.container.addEventListener(\"transitionstart\", this);\n    this.container.addEventListener(\"transitionend\", this);\n    if (this.config.buttons.reset) {\n      this.resetButton = new MapResetButton(this);\n    }\n    if (this.config.buttons.maximize) {\n      this.maximizeButton = new MapMaximizeButton(this);\n    }\n    if (this.config.buttons.close) {\n      this.closeButton = new MapCloseButton(this);\n    }\n    if (this.config.buttons.north) {\n      this.compassButton = new MapCompassButton(this);\n    }\n    this.zoomToolbar = new MapZoomToolbar(this);\n    const renderLoop = () => {\n      if (this.isVisible() && (this.state.needsUpdate || this.state.forceRender)) {\n        this.render();\n        this.state.needsUpdate = false;\n      }\n      this.state.renderLoop = requestAnimationFrame(renderLoop);\n    };\n    renderLoop();\n    this.applyConfig();\n    this.hide();\n    if (!this.config.visibleOnLoad) {\n      this.toggleCollapse();\n    }\n  }\n  get config() {\n    return this.plugin.config;\n  }\n  get maximized() {\n    return this.state.maximized;\n  }\n  get collapsed() {\n    return this.state.collapsed;\n  }\n  init() {\n    this.gallery = this.viewer.getPlugin(\"gallery\");\n    this.gallery?.addEventListener(\"show-gallery\", this);\n    this.gallery?.addEventListener(\"hide-gallery\", this);\n  }\n  destroy() {\n    this.canvas.width = 0;\n    this.canvas.height = 0;\n    window.removeEventListener(\"touchmove\", this);\n    window.removeEventListener(\"mousemove\", this);\n    window.removeEventListener(\"touchend\", this);\n    window.removeEventListener(\"mouseup\", this);\n    this.viewer.removeEventListener(events.KeypressEvent.type, this);\n    this.gallery?.removeEventListener(\"show-gallery\", this);\n    this.gallery?.removeEventListener(\"hide-gallery\", this);\n    cancelAnimationFrame(this.state.renderLoop);\n    super.destroy();\n  }\n  handleEvent(e) {\n    if (utils2.getMatchingTarget(e, `.${CONSTANTS2.CAPTURE_EVENTS_CLASS}:not(.psv-map)`)) {\n      return;\n    }\n    switch (e.type) {\n      case events.KeypressEvent.type:\n        if (this.state.maximized) {\n          this.__onKeyPress(e.key);\n          e.preventDefault();\n        }\n        break;\n      case events.ConfigChangedEvent.type:\n        if (e.containsOptions(\"lang\")) {\n          this.resetButton?.update();\n          this.closeButton?.update();\n          this.compassButton?.update();\n          this.maximizeButton?.update();\n        }\n        break;\n      case \"mousedown\": {\n        const event = e;\n        this.state.mouseX = event.clientX;\n        this.state.mouseY = event.clientY;\n        this.state.mousedown = true;\n        e.stopPropagation();\n        break;\n      }\n      case \"touchstart\": {\n        const event = e;\n        if (event.touches.length === 1) {\n          this.state.mouseX = event.touches[0].clientX;\n          this.state.mouseY = event.touches[0].clientY;\n          this.state.mousedown = true;\n        } else if (event.touches.length === 2) {\n          ({\n            distance: this.state.pinchDist,\n            angle: this.state.pinchAngle,\n            center: { x: this.state.mouseX, y: this.state.mouseY }\n          } = utils2.getTouchData(event));\n        }\n        e.stopPropagation();\n        e.preventDefault();\n        break;\n      }\n      case \"mousemove\": {\n        const event = e;\n        if (this.state.mousedown) {\n          this.__move(event.clientX, event.clientY);\n          e.stopPropagation();\n        } else if (e.composedPath().includes(this.canvas)) {\n          this.__handleHotspots(event.clientX, event.clientY);\n        }\n        break;\n      }\n      case \"touchmove\": {\n        const event = e;\n        if (this.state.mousedown && event.touches.length === 1) {\n          this.__move(event.touches[0].clientX, event.touches[0].clientY);\n          e.stopPropagation();\n        } else if (this.state.mousedown && event.touches.length === 2) {\n          const touchData = utils2.getTouchData(event);\n          const delta = (touchData.distance - this.state.pinchDist) / SYSTEM2.pixelRatio;\n          this.zoom(delta / 100);\n          this.__move(touchData.center.x, touchData.center.y);\n          if (this.state.maximized && !this.config.static) {\n            this.viewer.dynamics.position.step({ yaw: this.state.pinchAngle - touchData.angle }, 0);\n          }\n          ({ distance: this.state.pinchDist, angle: this.state.pinchAngle } = touchData);\n          e.stopPropagation();\n        }\n        break;\n      }\n      case \"mouseup\":\n      case \"touchend\": {\n        const mouse = e.changedTouches?.[0] || e;\n        if (this.state.mousedown) {\n          this.state.mousedown = false;\n          e.stopPropagation();\n        }\n        if (e.composedPath().includes(this.canvas)) {\n          this.__clickHotspot(mouse.clientX, mouse.clientY);\n        }\n        break;\n      }\n      case \"wheel\": {\n        const event = e;\n        const delta = event.deltaY / Math.abs(event.deltaY);\n        if (event.ctrlKey) {\n          this.viewer.dynamics.position.step({ yaw: delta / 10 });\n        } else {\n          this.zoom(-delta / 10);\n        }\n        e.stopPropagation();\n        e.preventDefault();\n        break;\n      }\n      case \"transitionstart\":\n        this.state.forceRender = true;\n        break;\n      case \"transitionend\":\n        if (!this.state.maximized) {\n          this.overlay.style.display = \"\";\n          this.recenter();\n        }\n        this.state.forceRender = false;\n        this.update();\n        break;\n      case \"hide-gallery\":\n        this.__onToggleGallery(false);\n        break;\n      case \"show-gallery\":\n        if (!e.fullscreen) {\n          this.__onToggleGallery(true);\n        }\n        break;\n    }\n  }\n  applyConfig() {\n    this.container.classList.remove(\n      \"psv-map--top-right\",\n      \"psv-map--top-left\",\n      \"psv-map--bottom-right\",\n      \"psv-map--bottom-left\",\n      \"psv-map--round\",\n      \"psv-map--square\"\n    );\n    this.container.classList.add(`psv-map--${this.config.position.join(\"-\")}`);\n    this.container.classList.add(`psv-map--${this.config.shape}`);\n    this.container.style.width = this.config.size;\n    this.container.style.height = this.config.size;\n    this.overlay.innerHTML = this.config.overlayImage === null ? \"\" : getImageHtml(this.config.overlayImage ?? (this.config.shape === \"square\" ? overlay_square_default : overlay_round_default));\n    this.resetButton?.applyConfig();\n    this.closeButton?.applyConfig();\n    this.compassButton?.applyConfig();\n    this.maximizeButton?.applyConfig();\n    if (this.config.static) {\n      this.compassButton?.rotate(0);\n      this.overlay.style.transform = \"\";\n    }\n    if (this.config.shape === \"square\") {\n      this.overlay.style.transform = \"\";\n    }\n    this.update();\n  }\n  isVisible() {\n    return this.state.visible && !this.state.collapsed;\n  }\n  show() {\n    super.show();\n    this.update();\n    if (!this.state.maximized) {\n      this.overlay.style.display = \"\";\n    }\n  }\n  hide() {\n    super.hide();\n    this.state.forceRender = false;\n  }\n  /**\n   * Flag for render\n   */\n  update(clear = true) {\n    this.state.needsUpdate = true;\n    if (clear) {\n      this.state.hotspotPos = {};\n      this.__resetHotspot();\n    }\n  }\n  /**\n   * Load a new map image\n   */\n  reload(url) {\n    delete this.state.images[this.config.imageUrl];\n    this.config.imageUrl = url;\n    this.state.imgScale = 1;\n    this.__loadImage(this.config.imageUrl, true);\n    this.recenter();\n  }\n  /**\n   * Clears the offset and zoom level\n   */\n  reset() {\n    this.state.zoom = this.config.defaultZoom;\n    this.recenter();\n  }\n  /**\n   * Clears the offset\n   */\n  recenter() {\n    this.state.offset.x = 0;\n    this.state.offset.y = 0;\n    this.update();\n  }\n  /**\n   * Switch collapsed mode\n   */\n  toggleCollapse() {\n    if (this.state.maximized) {\n      this.toggleMaximized(false);\n    }\n    this.state.collapsed = !this.state.collapsed;\n    utils2.toggleClass(this.container, \"psv-map--collapsed\", this.state.collapsed);\n    if (!this.state.collapsed) {\n      this.reset();\n      this.plugin.dispatchEvent(new ViewChanged(\"normal\"));\n    } else {\n      this.plugin.dispatchEvent(new ViewChanged(\"closed\"));\n    }\n    this.closeButton?.update();\n  }\n  /**\n   * Switch maximized mode\n   */\n  toggleMaximized(dispatchMinimizeEvent = true) {\n    if (this.state.collapsed) {\n      return;\n    }\n    this.state.maximized = !this.state.maximized;\n    utils2.toggleClass(this.container, \"psv-map--maximized\", this.state.maximized);\n    if (this.state.maximized) {\n      this.state.galleryWasVisible = this.gallery?.isVisible();\n      this.gallery?.hide();\n      this.overlay.style.display = \"none\";\n      this.plugin.dispatchEvent(new ViewChanged(\"maximized\"));\n    } else {\n      if (this.state.galleryWasVisible) {\n        this.gallery.show();\n      }\n      if (dispatchMinimizeEvent) {\n        this.plugin.dispatchEvent(new ViewChanged(\"normal\"));\n      }\n    }\n    this.maximizeButton?.update();\n  }\n  /**\n   * Changes the zoom level\n   */\n  zoom(d) {\n    this.setZoom(this.state.zoom + d);\n  }\n  /**\n   * Changes the zoom level\n   */\n  setZoom(value) {\n    this.state.zoom = MathUtils.clamp(value, this.config.minZoom, this.config.maxZoom);\n    this.update();\n  }\n  /**\n   * Updates the markers\n   */\n  setMarkers(markers) {\n    this.state.markers = markers;\n    this.update();\n  }\n  /**\n   * Changes the highlighted hotspot\n   */\n  setActiveHotspot(hotspotId) {\n    this.state.hotspotId = hotspotId;\n    this.update(false);\n  }\n  render() {\n    if (!this.config.center) {\n      return;\n    }\n    const mapImage = this.__loadImage(this.config.imageUrl);\n    if (!mapImage) {\n      return;\n    }\n    const yaw = this.viewer.getPosition().yaw;\n    const zoom = Math.exp(this.state.zoom) / this.state.imgScale;\n    const center = {\n      x: this.config.center.x * this.state.imgScale,\n      y: this.config.center.y * this.state.imgScale\n    };\n    const offset = {\n      x: this.state.offset.x * this.state.imgScale,\n      y: this.state.offset.y * this.state.imgScale\n    };\n    const rotation = this.config.rotation;\n    const yawAndRotation = this.config.static ? 0 : yaw + rotation;\n    if (!this.config.static) {\n      if (this.config.shape === \"round\") {\n        this.overlay.style.transform = `rotate(${-yawAndRotation}rad)`;\n      }\n      this.compassButton?.rotate(yawAndRotation);\n    }\n    this.zoomToolbar.setText(this.state.zoom);\n    this.canvas.width = this.container.clientWidth * SYSTEM2.pixelRatio;\n    this.canvas.height = this.container.clientHeight * SYSTEM2.pixelRatio;\n    const canvasPos = utils2.getPosition(this.canvas);\n    const canvasW = this.canvas.width;\n    const canvasH = this.canvas.height;\n    const canvasVirtualCenterX = canvasW / 2 / SYSTEM2.pixelRatio;\n    const canvasVirtualCenterY = canvasH / 2 / SYSTEM2.pixelRatio;\n    const context = this.canvas.getContext(\"2d\");\n    context.clearRect(0, 0, canvasW, canvasH);\n    const mapW = mapImage.width;\n    const mapH = mapImage.height;\n    context.save();\n    context.translate(canvasW / 2, canvasH / 2);\n    context.rotate(-yawAndRotation);\n    context.scale(zoom, zoom);\n    canvasShadow(context, 0, 0, MAP_SHADOW_BLUR);\n    drawImageHighDpi(\n      context,\n      mapImage,\n      -center.x - offset.x,\n      -center.y - offset.y,\n      mapW,\n      mapH\n    );\n    context.restore();\n    [...this.config.hotspots, ...this.state.markers].sort((a, b) => {\n      if (this.state.hotspotId === a.id) {\n        return 1;\n      }\n      if (this.state.hotspotId === b.id) {\n        return -1;\n      }\n      return (a.zIndex ?? 0) - (b.zIndex ?? 0);\n    }).forEach((hotspot) => {\n      const isHover = this.state.hotspotId === hotspot.id;\n      const style = getStyle(this.config.spotStyle, hotspot, isHover);\n      const image = this.__loadImage(style.image);\n      const hotspotPos = { ...offset };\n      if (\"yaw\" in hotspot && \"distance\" in hotspot) {\n        const angle = utils2.parseAngle(hotspot.yaw) + rotation;\n        hotspotPos.x += Math.sin(-angle) * hotspot.distance * this.state.imgScale;\n        hotspotPos.y += Math.cos(-angle) * hotspot.distance * this.state.imgScale;\n      } else if (\"x\" in hotspot && \"y\" in hotspot) {\n        hotspotPos.x += center.x - hotspot.x * this.state.imgScale;\n        hotspotPos.y += center.y - hotspot.y * this.state.imgScale;\n      } else {\n        utils2.logWarn(`Hotspot ${hotspot[\"id\"]} is missing position (yaw+distance or x+y)`);\n        return;\n      }\n      const spotPos = projectPoint(hotspotPos, yawAndRotation, zoom);\n      const x = canvasVirtualCenterX - spotPos.x;\n      const y = canvasVirtualCenterY - spotPos.y;\n      this.state.hotspotPos[hotspot.id] = {\n        x: x + canvasPos.x,\n        y: y + canvasPos.y,\n        s: style.size\n      };\n      context.save();\n      context.translate(x * SYSTEM2.pixelRatio, y * SYSTEM2.pixelRatio);\n      canvasShadow(context, PIN_SHADOW_OFFSET, PIN_SHADOW_OFFSET, PIN_SHADOW_BLUR);\n      if (image) {\n        drawImageCentered(context, image, style.size);\n      } else {\n        context.fillStyle = style.color;\n        context.beginPath();\n        context.arc(0, 0, style.size * SYSTEM2.pixelRatio / 2, 0, 2 * Math.PI);\n        context.fill();\n        if (style.borderColor && style.borderSize) {\n          context.shadowColor = \"transparent\";\n          context.strokeStyle = style.borderColor;\n          context.lineWidth = style.borderSize;\n          context.beginPath();\n          context.arc(0, 0, (style.size + style.borderSize) * SYSTEM2.pixelRatio / 2, 0, 2 * Math.PI);\n          context.stroke();\n        }\n      }\n      context.restore();\n    });\n    const pinImage = this.__loadImage(this.config.pinImage);\n    if (pinImage || this.config.coneColor && this.config.coneSize) {\n      const pinPos = projectPoint(offset, yawAndRotation, zoom);\n      const x = canvasVirtualCenterX - pinPos.x;\n      const y = canvasVirtualCenterY - pinPos.y;\n      const size = this.config.pinSize;\n      const angle = this.config.static ? yaw + rotation : 0;\n      context.save();\n      context.translate(x * SYSTEM2.pixelRatio, y * SYSTEM2.pixelRatio);\n      context.rotate(angle);\n      if (this.config.coneColor && this.config.coneSize) {\n        const fov = MathUtils.degToRad(this.viewer.state.hFov);\n        const a1 = -Math.PI / 2 - fov / 2;\n        const a2 = a1 + fov;\n        const c = this.config.coneSize * SYSTEM2.pixelRatio;\n        const grad = context.createRadialGradient(0, 0, c / 4, 0, 0, c);\n        grad.addColorStop(0, this.config.coneColor);\n        grad.addColorStop(1, rgbToRgba(this.config.coneColor, 0));\n        context.beginPath();\n        context.moveTo(0, 0);\n        context.lineTo(Math.cos(a1) * c, Math.sin(a1) * c);\n        context.arc(0, 0, c, a1, a2, false);\n        context.lineTo(0, 0);\n        context.fillStyle = grad;\n        context.fill();\n      }\n      if (pinImage) {\n        canvasShadow(context, PIN_SHADOW_OFFSET, PIN_SHADOW_OFFSET, PIN_SHADOW_BLUR);\n        drawImageCentered(context, pinImage, size);\n      }\n      context.restore();\n    }\n  }\n  /**\n   * Applies mouse movement to the map\n   */\n  __move(clientX, clientY) {\n    const yaw = this.viewer.getPosition().yaw;\n    const zoom = Math.exp(this.state.zoom);\n    const move = unprojectPoint(\n      {\n        x: this.state.mouseX - clientX,\n        y: this.state.mouseY - clientY\n      },\n      this.config.static ? 0 : yaw + this.config.rotation,\n      zoom\n    );\n    this.state.offset.x += move.x;\n    this.state.offset.y += move.y;\n    this.update();\n    this.state.mouseX = clientX;\n    this.state.mouseY = clientY;\n  }\n  /**\n   * Finds the hotspot under the mouse\n   */\n  __findHotspot(clientX, clientY) {\n    const k = this.config.spotStyle.size / 2;\n    let hotspotId = null;\n    for (const [id, { x, y }] of Object.entries(this.state.hotspotPos)) {\n      if (clientX > x - k && clientX < x + k && clientY > y - k && clientY < y + k) {\n        hotspotId = id;\n        break;\n      }\n    }\n    return hotspotId;\n  }\n  /**\n   * Updates current hotspot on mouse move and displays tooltip\n   */\n  __handleHotspots(clientX, clientY) {\n    const hotspotId = this.__findHotspot(clientX, clientY);\n    if (this.state.hotspotId !== hotspotId) {\n      this.__resetHotspot();\n      if (hotspotId) {\n        let tooltip;\n        if (hotspotId.startsWith(HOTSPOT_MARKER_ID)) {\n          tooltip = this.state.markers.find(({ id }) => id === hotspotId)?.tooltip;\n        } else {\n          tooltip = this.config.hotspots.find(({ id }) => id === hotspotId)?.tooltip;\n        }\n        if (tooltip) {\n          if (typeof tooltip === \"string\") {\n            tooltip = { content: tooltip };\n          }\n          const hotspotPos = this.state.hotspotPos[hotspotId];\n          const viewerPos = utils2.getPosition(this.viewer.container);\n          this.state.hotspotTooltip = this.viewer.createTooltip({\n            content: tooltip.content,\n            className: tooltip.className,\n            left: hotspotPos.x - viewerPos.x,\n            top: hotspotPos.y - viewerPos.y,\n            box: {\n              width: hotspotPos.s,\n              height: hotspotPos.s\n            }\n          });\n        }\n      }\n      this.setActiveHotspot(hotspotId);\n      this.__setCursor(hotspotId ? \"pointer\" : \"move\");\n    }\n  }\n  /**\n   * Dispatch event when a hotspot is clicked\n   */\n  __clickHotspot(clientX, clientY) {\n    const hotspotId = this.__findHotspot(clientX, clientY);\n    if (hotspotId) {\n      this.plugin.dispatchEvent(new SelectHotspot(hotspotId));\n      if (hotspotId.startsWith(HOTSPOT_MARKER_ID)) {\n        const markerId = hotspotId.substring(HOTSPOT_MARKER_ID.length);\n        this.viewer.getPlugin(\"markers\").gotoMarker(markerId);\n      }\n      if (this.maximized && this.config.minimizeOnHotspotClick) {\n        this.toggleMaximized();\n      }\n    }\n    this.__resetHotspot();\n  }\n  __resetHotspot() {\n    this.state.hotspotTooltip?.hide();\n    this.state.hotspotTooltip = null;\n    this.state.hotspotId = null;\n  }\n  /**\n   * Loads an image and returns the result **synchronously**.\n   * If the image is not already loaded it returns `null` and schedules a new render when the image is ready.\n   */\n  __loadImage(url, isInit = false) {\n    if (!url) {\n      return null;\n    }\n    if (!this.state.images[url]) {\n      const image = loadImage(url);\n      this.state.images[url] = {\n        loading: true,\n        value: image\n      };\n      image.onload = () => {\n        if (isInit && Math.max(image.width, image.height) > SYSTEM2.maxCanvasWidth) {\n          this.state.imgScale = SYSTEM2.maxCanvasWidth / Math.max(image.width, image.height);\n          const buffer = document.createElement(\"canvas\");\n          buffer.width = image.width * this.state.imgScale;\n          buffer.height = image.height * this.state.imgScale;\n          const ctx = buffer.getContext(\"2d\");\n          ctx.drawImage(image, 0, 0, buffer.width, buffer.height);\n          this.state.images[url].value = buffer;\n        }\n        this.state.images[url].loading = false;\n        this.update(false);\n        if (isInit) {\n          this.show();\n        }\n      };\n      return null;\n    }\n    if (this.state.images[url].loading) {\n      return null;\n    }\n    return this.state.images[url].value;\n  }\n  __onKeyPress(key) {\n    if (key === CONSTANTS2.KEY_CODES.Escape) {\n      this.toggleMaximized();\n      return;\n    }\n    if (!this.viewer.state.keyboardEnabled) {\n      return;\n    }\n    let x = 0;\n    let y = 0;\n    let z = 0;\n    switch (key) {\n      case CONSTANTS2.KEY_CODES.ArrowUp:\n        y = 1;\n        break;\n      case CONSTANTS2.KEY_CODES.ArrowDown:\n        y = -1;\n        break;\n      case CONSTANTS2.KEY_CODES.ArrowLeft:\n        x = 1;\n        break;\n      case CONSTANTS2.KEY_CODES.ArrowRight:\n        x = -1;\n        break;\n      case CONSTANTS2.KEY_CODES.Plus:\n        z = 1;\n        break;\n      case CONSTANTS2.KEY_CODES.Minus:\n        z = -1;\n        break;\n      case CONSTANTS2.KEY_CODES.PageUp:\n        z = 1;\n        break;\n      case CONSTANTS2.KEY_CODES.PageDown:\n        z = -1;\n        break;\n    }\n    if (x || y) {\n      this.state.mouseX = 0;\n      this.state.mouseY = 0;\n      this.__move(x * 10, y * 10);\n    }\n    if (z) {\n      this.zoom(z / 10);\n    }\n  }\n  __setCursor(cursor) {\n    this.canvas.style.cursor = cursor;\n  }\n  __onToggleGallery(visible) {\n    if (!visible) {\n      this.container.style.marginBottom = \"\";\n    } else {\n      this.container.style.marginBottom = this.viewer.container.querySelector(\".psv-gallery\").offsetHeight + 10 + \"px\";\n    }\n  }\n};\n\n// src/icons/pin.svg\nvar pin_default = '<svg viewBox=\"-20 -20 740 740\" xmlns=\"http://www.w3.org/2000/svg\">\\n    <circle cx=\"350\" cy=\"350\" r=\"190\" fill=\"white\"/>\\n    <circle cx=\"350\" cy=\"350\" r=\"150\" fill=\"#1E78E6\"/>\\n</svg>\\n';\n\n// src/MapPlugin.ts\nvar getConfig = utils3.getConfigParser(\n  {\n    imageUrl: null,\n    center: null,\n    rotation: 0,\n    shape: \"round\",\n    size: \"200px\",\n    position: [\"bottom\", \"left\"],\n    visibleOnLoad: true,\n    overlayImage: void 0,\n    pinImage: pin_default,\n    pinSize: 35,\n    coneColor: \"#1E78E6\",\n    coneSize: 40,\n    spotStyle: {\n      size: 15,\n      image: null,\n      color: \"white\",\n      borderSize: 0,\n      borderColor: null,\n      hoverSize: null,\n      hoverImage: null,\n      hoverColor: null,\n      hoverBorderSize: 4,\n      hoverBorderColor: \"rgba(255, 255, 255, 0.6)\"\n    },\n    static: false,\n    defaultZoom: 100,\n    minZoom: 20,\n    maxZoom: 200,\n    hotspots: [],\n    minimizeOnHotspotClick: true,\n    buttons: {\n      maximize: true,\n      close: true,\n      reset: true,\n      north: true\n    }\n  },\n  {\n    spotStyle: (spotStyle, { defValue }) => ({ ...defValue, ...spotStyle }),\n    position: (position, { defValue }) => {\n      return utils3.cleanCssPosition(position, { allowCenter: false, cssOrder: true }) || defValue;\n    },\n    rotation: (rotation) => utils3.parseAngle(rotation),\n    coneColor: (coneColor) => coneColor ? new Color(coneColor).getStyle() : null,\n    // must be in rgb format\n    defaultZoom: (defaultZoom) => Math.log(defaultZoom / 100),\n    maxZoom: (maxZoom) => Math.log(maxZoom / 100),\n    minZoom: (minZoom) => Math.log(minZoom / 100),\n    buttons: (buttons, { defValue }) => ({ ...defValue, ...buttons })\n  }\n);\nvar MapPlugin = class extends AbstractConfigurablePlugin {\n  constructor(viewer, config) {\n    super(viewer, config);\n    this.component = new MapComponent(this.viewer, this);\n  }\n  /**\n   * @internal\n   */\n  init() {\n    super.init();\n    utils3.checkStylesheet(this.viewer.container, \"map-plugin\");\n    this.component.init();\n    this.markers = this.viewer.getPlugin(\"markers\");\n    this.viewer.addEventListener(events2.PositionUpdatedEvent.type, this);\n    this.viewer.addEventListener(events2.ZoomUpdatedEvent.type, this);\n    this.viewer.addEventListener(events2.SizeUpdatedEvent.type, this);\n    this.viewer.addEventListener(events2.ReadyEvent.type, this, { once: true });\n    this.markers?.addEventListener(\"set-markers\", this);\n    this.setHotspots(this.config.hotspots, false);\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.viewer.removeEventListener(events2.PositionUpdatedEvent.type, this);\n    this.viewer.removeEventListener(events2.ZoomUpdatedEvent.type, this);\n    this.viewer.removeEventListener(events2.SizeUpdatedEvent.type, this);\n    this.viewer.removeEventListener(events2.ReadyEvent.type, this);\n    this.markers?.removeEventListener(\"set-markers\", this);\n    this.component.destroy();\n    delete this.markers;\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case events2.ReadyEvent.type:\n        this.component.reload(this.config.imageUrl);\n        break;\n      case events2.PositionUpdatedEvent.type:\n      case events2.ZoomUpdatedEvent.type:\n        this.component.update();\n        break;\n      case events2.SizeUpdatedEvent.type:\n        if (this.component.maximized) {\n          this.component.update();\n        }\n        break;\n      case \"set-markers\":\n        this.component.setMarkers(this.__markersToHotspots(e.markers));\n        break;\n      default:\n        break;\n    }\n  }\n  setOptions(options) {\n    super.setOptions(options);\n    if (options.center) {\n      this.component.recenter();\n    }\n    if (options.hotspots !== void 0) {\n      this.setHotspots(options.hotspots);\n    }\n    this.component.applyConfig();\n  }\n  /**\n   * Hides the map\n   */\n  hide() {\n    this.component.hide();\n  }\n  /**\n   * Shows the map\n   */\n  show() {\n    this.component.show();\n  }\n  /**\n   * Changes the current zoom level\n   */\n  setZoom(level) {\n    this.component.setZoom(Math.log(level / 100));\n  }\n  /**\n   * Closes the map\n   */\n  close() {\n    if (!this.component.collapsed) {\n      this.component.toggleCollapse();\n    }\n  }\n  /**\n   * Open the map\n   */\n  open() {\n    if (this.component.collapsed) {\n      this.component.toggleCollapse();\n    }\n  }\n  /**\n   * Minimizes the map\n   */\n  minimize() {\n    if (this.component.maximized) {\n      this.component.toggleMaximized();\n    }\n  }\n  /**\n   * Maximizes the map\n   */\n  maximize() {\n    if (!this.component.maximized) {\n      this.component.toggleMaximized();\n    }\n  }\n  /**\n   * Changes the image of the map\n   * @param rotation Also change the image rotation\n   * @param center Also change the position on the map\n   */\n  setImage(url, center, rotation) {\n    if (!utils3.isNil(rotation)) {\n      this.config.rotation = utils3.parseAngle(rotation);\n    }\n    if (!utils3.isNil(center)) {\n      this.config.center = center;\n    }\n    this.component.reload(url);\n  }\n  /**\n   * Changes the position on the map\n   */\n  setCenter(center) {\n    this.config.center = center;\n    this.component.recenter();\n  }\n  /**\n   * Changes the hotspots on the map\n   */\n  setHotspots(hotspots, render = true) {\n    const ids = [];\n    let i = 1;\n    hotspots?.forEach((hotspot) => {\n      if (!hotspot.id) {\n        hotspot.id = HOTSPOT_GENERATED_ID + i++;\n      } else if (ids.includes(hotspot.id)) {\n        utils3.logWarn(`Duplicated hotspot id \"${hotspot.id}`);\n      } else {\n        ids.push(hotspot.id);\n      }\n    });\n    this.config.hotspots = hotspots || [];\n    if (render) {\n      this.component.update();\n    }\n  }\n  /**\n   * Removes all hotspots\n   */\n  clearHotspots() {\n    this.setHotspots(null);\n  }\n  /**\n   * Changes the highlighted hotspot\n   */\n  setActiveHotspot(hotspotId) {\n    this.component.setActiveHotspot(hotspotId);\n  }\n  __markersToHotspots(markers) {\n    return markers.filter((marker) => marker.data?.[MARKER_DATA_KEY]).map((marker) => {\n      const hotspot = {\n        ...marker.data[MARKER_DATA_KEY],\n        id: HOTSPOT_MARKER_ID + marker.id,\n        tooltip: marker.config.tooltip\n      };\n      if (\"distance\" in hotspot) {\n        hotspot.yaw = marker.state.position.yaw;\n      } else if (!(\"x\" in hotspot) || !(\"y\" in hotspot)) {\n        utils3.logWarn(`Marker #${marker.id} \"map\" data is missing position (distance or x+y)`);\n        return null;\n      }\n      return hotspot;\n    }).filter((h) => h);\n  }\n};\nMapPlugin.id = \"map\";\nMapPlugin.VERSION = \"5.13.2\";\nMapPlugin.configParser = getConfig;\nMapPlugin.readonlyOptions = [\n  \"imageUrl\",\n  \"visibleOnLoad\",\n  \"defaultZoom\",\n  \"buttons\"\n];\n\n// src/index.ts\nDEFAULTS.lang[\"map\"] = \"Map\";\nDEFAULTS.lang[\"mapMaximize\"] = \"Maximize\";\nDEFAULTS.lang[\"mapMinimize\"] = \"Minimize\";\nDEFAULTS.lang[\"mapNorth\"] = \"Go to north\";\nDEFAULTS.lang[\"mapReset\"] = \"Reset\";\nexport {\n  MapPlugin,\n  events_exports as events\n};\n//# sourceMappingURL=index.module.js.map","/*!\n * Photo Sphere Viewer / Autorotate Plugin 5.13.2\n * @copyright 2015-2025 Damien \"Mistic\" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\nvar __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// src/index.ts\nimport { DEFAULTS, registerButton } from \"@photo-sphere-viewer/core\";\n\n// src/AutorotateButton.ts\nimport { AbstractButton } from \"@photo-sphere-viewer/core\";\n\n// src/events.ts\nvar events_exports = {};\n__export(events_exports, {\n  AutorotateEvent: () => AutorotateEvent\n});\nimport { TypedEvent } from \"@photo-sphere-viewer/core\";\nvar _AutorotateEvent = class _AutorotateEvent extends TypedEvent {\n  /** @internal */\n  constructor(autorotateEnabled) {\n    super(_AutorotateEvent.type);\n    this.autorotateEnabled = autorotateEnabled;\n  }\n};\n_AutorotateEvent.type = \"autorotate\";\nvar AutorotateEvent = _AutorotateEvent;\n\n// src/icons/play-active.svg\nvar play_active_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 41 41\" overflow=\"visible\"><g fill=\"currentColor\" transform-origin=\"center\" transform=\"scale(1.3)\"><path d=\"M40.5 14.1c-.1-.1-1.2-.5-2.898-1-.102 0-.202-.1-.202-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.399 2.7.899.1 0 .2.101.2.199C6.3 34.4 12.9 39 20.5 39c7.602 0 14.102-4.6 16.9-11.1 0-.102.1-.102.199-.2 1.699-.601 2.699-1 2.801-1l.6-.3V14.3l-.5-.2zM6.701 11.5C9.7 7 14.8 4 20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.799-1-8.799-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5zM25.1 20.3L18.7 24c-.3.2-.7 0-.7-.5v-7.4c0-.4.4-.6.7-.4l6.399 3.8c.301.1.301.6.001.8zm9.4 8.901A16.421 16.421 0 0 1 20.5 37c-5.9 0-11.1-3.1-14-7.898-.2-.302.1-.602.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.602-2 .298-.1.5.198.398.499z\"/></g><!--Created by Nick Bluth from the Noun Project--></svg>\\n';\n\n// src/icons/play.svg\nvar play_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 41 41\" overflow=\"visible\"><g fill=\"currentColor\" transform-origin=\"center\" transform=\"scale(1.3)\"><path d=\"M40.5 14.1c-.1-.1-1.2-.5-2.899-1-.101 0-.2-.1-.2-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.4 2.7.9.1 0 .2.1.2.199C6.3 34.4 12.9 39 20.5 39c7.601 0 14.101-4.6 16.9-11.1 0-.101.1-.101.2-.2 1.699-.6 2.699-1 2.8-1l.6-.3V14.3l-.5-.2zM20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.8-1-8.8-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5C9.7 7 14.8 4 20.5 4zm0 33c-5.9 0-11.1-3.1-14-7.899-.2-.301.1-.601.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.601-2 .3-.1.5.2.399.5A16.422 16.422 0 0 1 20.5 37zm18.601-12.1c0 .1-.101.3-.2.3-2.5.9-10.4 3.6-18.4 3.6-7.1 0-15.6-2.699-18.3-3.6C2.1 25.2 2 25 2 24.9V16c0-.1.1-.3.2-.3 2.6-.9 10.6-3.6 18.2-3.6 7.5 0 15.899 2.7 18.5 3.6.1 0 .2.2.2.3v8.9z\"/><path d=\"M18.7 24l6.4-3.7c.3-.2.3-.7 0-.8l-6.4-3.8c-.3-.2-.7 0-.7.4v7.4c0 .5.4.7.7.5z\"/></g><!--Created by Nick Bluth from the Noun Project--></svg>\\n';\n\n// src/AutorotateButton.ts\nvar AutorotateButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-autorotate-button\",\n      hoverScale: true,\n      collapsable: true,\n      tabbable: true,\n      icon: play_default,\n      iconActive: play_active_default\n    });\n    this.plugin = this.viewer.getPlugin(\"autorotate\");\n    this.plugin?.addEventListener(AutorotateEvent.type, this);\n  }\n  destroy() {\n    this.plugin?.removeEventListener(AutorotateEvent.type, this);\n    super.destroy();\n  }\n  isSupported() {\n    return !!this.plugin;\n  }\n  handleEvent(e) {\n    if (e instanceof AutorotateEvent) {\n      this.toggleActive(e.autorotateEnabled);\n    }\n  }\n  onClick() {\n    if (this.plugin.isEnabled()) {\n      this.plugin.disableOnIdle();\n    }\n    this.plugin.toggle();\n  }\n};\nAutorotateButton.id = \"autorotate\";\n\n// src/AutorotatePlugin.ts\nimport { AbstractConfigurablePlugin, CONSTANTS, events, PSVError, utils } from \"@photo-sphere-viewer/core\";\nimport { MathUtils, SplineCurve, Vector2 } from \"three\";\nvar getConfig = utils.getConfigParser(\n  {\n    autostartDelay: 2e3,\n    autostartOnIdle: true,\n    autorotateSpeed: utils.parseSpeed(\"2rpm\"),\n    autorotatePitch: null,\n    autorotateZoomLvl: null,\n    keypoints: null,\n    startFromClosest: true\n  },\n  {\n    autostartOnIdle: (autostartOnIdle, { rawConfig }) => {\n      if (autostartOnIdle && utils.isNil(rawConfig.autostartDelay)) {\n        utils.logWarn(\"autostartOnIdle requires a non null autostartDelay\");\n        return false;\n      }\n      return autostartOnIdle;\n    },\n    autorotateSpeed: (autorotateSpeed) => {\n      return utils.parseSpeed(autorotateSpeed);\n    },\n    autorotatePitch: (autorotatePitch) => {\n      if (!utils.isNil(autorotatePitch)) {\n        return utils.parseAngle(autorotatePitch, true);\n      }\n      return null;\n    },\n    autorotateZoomLvl: (autorotateZoomLvl) => {\n      if (!utils.isNil(autorotateZoomLvl)) {\n        return MathUtils.clamp(autorotateZoomLvl, 0, 100);\n      }\n      return null;\n    }\n  }\n);\nvar NUM_STEPS = 16;\nfunction serializePt(position) {\n  return [position.yaw, position.pitch];\n}\nvar AutorotatePlugin = class extends AbstractConfigurablePlugin {\n  constructor(viewer, config) {\n    super(viewer, config);\n    this.state = {\n      initialStart: true,\n      disableOnIdle: false,\n      /** if the automatic rotation is enabled */\n      enabled: false,\n      /** current index in keypoints */\n      idx: -1,\n      /** curve between idx and idx + 1 */\n      curve: [],\n      /** start point of the current step */\n      startStep: null,\n      /** end point of the current step */\n      endStep: null,\n      /** start time of the current step  */\n      startTime: null,\n      /** expected duration of the step */\n      stepDuration: null,\n      /** time remaining for the pause */\n      remainingPause: null,\n      /** previous timestamp in render loop */\n      lastTime: null,\n      /** currently displayed tooltip */\n      tooltip: null\n    };\n    this.state.initialStart = !utils.isNil(this.config.autostartDelay);\n  }\n  /**\n   * @internal\n   */\n  init() {\n    super.init();\n    this.video = this.viewer.getPlugin(\"video\");\n    this.markers = this.viewer.getPlugin(\"markers\");\n    if (this.config.keypoints) {\n      this.setKeypoints(this.config.keypoints);\n      delete this.config.keypoints;\n    }\n    this.viewer.addEventListener(events.StopAllEvent.type, this);\n    this.viewer.addEventListener(events.BeforeRenderEvent.type, this);\n    if (!this.video) {\n      this.viewer.addEventListener(events.KeypressEvent.type, this);\n    }\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.viewer.removeEventListener(events.StopAllEvent.type, this);\n    this.viewer.removeEventListener(events.BeforeRenderEvent.type, this);\n    this.viewer.removeEventListener(events.KeypressEvent.type, this);\n    delete this.video;\n    delete this.markers;\n    delete this.keypoints;\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case events.StopAllEvent.type:\n        this.stop();\n        break;\n      case events.BeforeRenderEvent.type: {\n        this.__beforeRender(e.timestamp);\n        break;\n      }\n      case events.KeypressEvent.type:\n        this.__onKeyPress(e.originalEvent);\n        break;\n    }\n  }\n  /**\n   * Changes the keypoints\n   * @throws {@link PSVError} if the configuration is invalid\n   */\n  setKeypoints(keypoints) {\n    if (!keypoints) {\n      this.keypoints = null;\n    } else {\n      if (keypoints.length < 2) {\n        throw new PSVError(\"At least two points are required\");\n      }\n      this.keypoints = keypoints.map((pt, i) => {\n        const keypoint = {\n          position: null,\n          markerId: null,\n          pause: 0,\n          tooltip: null\n        };\n        let position;\n        if (typeof pt === \"string\") {\n          keypoint.markerId = pt;\n        } else if (utils.isExtendedPosition(pt)) {\n          position = pt;\n        } else {\n          keypoint.markerId = pt.markerId;\n          keypoint.pause = pt.pause;\n          position = pt.position;\n          if (pt.tooltip && typeof pt.tooltip === \"object\") {\n            keypoint.tooltip = pt.tooltip;\n          } else if (typeof pt.tooltip === \"string\") {\n            keypoint.tooltip = { content: pt.tooltip };\n          }\n        }\n        if (keypoint.markerId) {\n          if (!this.markers) {\n            throw new PSVError(`Keypoint #${i} references a marker but the markers plugin is not loaded`);\n          }\n          const marker = this.markers.getMarker(keypoint.markerId);\n          keypoint.position = serializePt(marker.state.position);\n        } else if (position) {\n          keypoint.position = serializePt(this.viewer.dataHelper.cleanPosition(position));\n        } else {\n          throw new PSVError(`Keypoint #${i} is missing marker or position`);\n        }\n        return keypoint;\n      });\n    }\n    if (this.isEnabled()) {\n      this.stop();\n      this.start();\n    }\n  }\n  /**\n   * Checks if the automatic rotation is enabled\n   */\n  isEnabled() {\n    return this.state.enabled;\n  }\n  /**\n   * Starts the automatic rotation\n   */\n  start() {\n    if (this.isEnabled()) {\n      return;\n    }\n    this.viewer.stopAll();\n    if (!this.keypoints) {\n      this.__animate();\n    } else if (this.config.startFromClosest) {\n      this.__shiftKeypoints();\n    }\n    this.state.initialStart = false;\n    this.state.disableOnIdle = false;\n    this.state.enabled = true;\n    this.dispatchEvent(new AutorotateEvent(true));\n  }\n  /**\n   * Stops the automatic rotation\n   */\n  stop() {\n    if (!this.isEnabled()) {\n      return;\n    }\n    this.__hideTooltip();\n    this.__reset();\n    this.viewer.stopAnimation();\n    this.viewer.dynamics.position.stop();\n    this.viewer.dynamics.zoom.stop();\n    this.state.enabled = false;\n    this.dispatchEvent(new AutorotateEvent(false));\n  }\n  /**\n   * Starts or stops the automatic rotation\n   */\n  toggle() {\n    if (this.isEnabled()) {\n      this.stop();\n    } else {\n      this.start();\n    }\n  }\n  /**\n   * @internal\n   */\n  reverse() {\n    if (this.isEnabled() && !this.keypoints) {\n      this.config.autorotateSpeed = -this.config.autorotateSpeed;\n      this.__animate();\n    }\n  }\n  /**\n   * @internal\n   */\n  disableOnIdle() {\n    this.state.disableOnIdle = true;\n  }\n  /**\n   * Launches the standard animation\n   */\n  __animate() {\n    let p;\n    if (!utils.isNil(this.config.autorotateZoomLvl)) {\n      p = this.viewer.animate({\n        zoom: this.config.autorotateZoomLvl,\n        // \"2\" is magic, and kinda related to the \"PI/4\" in getAnimationProperties()\n        speed: `${this.viewer.config.zoomSpeed * 2}rpm`\n      });\n    } else {\n      p = Promise.resolve(true);\n    }\n    p.then((done) => {\n      if (done) {\n        this.viewer.dynamics.position.roll(\n          {\n            yaw: this.config.autorotateSpeed < 0\n          },\n          Math.abs(this.config.autorotateSpeed / this.viewer.config.moveSpeed)\n        );\n        if (!utils.isNil(this.config.autorotatePitch)) {\n          this.viewer.dynamics.position.goto(\n            {\n              pitch: this.config.autorotatePitch\n            },\n            Math.abs(this.config.autorotateSpeed / this.viewer.config.moveSpeed)\n          );\n        }\n      }\n    });\n  }\n  /**\n   * Resets all the curve variables\n   */\n  __reset() {\n    this.state.idx = -1;\n    this.state.curve = [];\n    this.state.startStep = null;\n    this.state.endStep = null;\n    this.state.startTime = null;\n    this.state.stepDuration = null;\n    this.state.remainingPause = null;\n    this.state.lastTime = null;\n    this.state.tooltip = null;\n  }\n  /**\n   * Automatically starts if the delay is reached\n   * Performs keypoints animation\n   */\n  __beforeRender(timestamp) {\n    if ((this.state.initialStart || this.config.autostartOnIdle && !this.state.disableOnIdle) && this.viewer.state.idleTime > 0 && timestamp - this.viewer.state.idleTime > this.config.autostartDelay) {\n      this.start();\n    }\n    if (this.isEnabled() && this.keypoints) {\n      if (!this.state.startTime) {\n        this.state.endStep = serializePt(this.viewer.getPosition());\n        this.__nextStep();\n        this.state.startTime = timestamp;\n        this.state.lastTime = timestamp;\n      }\n      this.__nextFrame(timestamp);\n    }\n  }\n  __shiftKeypoints() {\n    const currentPosition = serializePt(this.viewer.getPosition());\n    const index = this.__findMinIndex(this.keypoints, (keypoint) => {\n      return utils.greatArcDistance(keypoint.position, currentPosition);\n    });\n    this.keypoints.push(...this.keypoints.splice(0, index));\n  }\n  __incrementIdx() {\n    this.state.idx++;\n    if (this.state.idx === this.keypoints.length) {\n      this.state.idx = 0;\n    }\n  }\n  __showTooltip() {\n    const keypoint = this.keypoints[this.state.idx];\n    if (keypoint.tooltip) {\n      const position = this.viewer.dataHelper.vector3ToViewerCoords(this.viewer.state.direction);\n      this.state.tooltip = this.viewer.createTooltip({\n        content: keypoint.tooltip.content,\n        position: keypoint.tooltip.position,\n        top: position.y,\n        left: position.x\n      });\n    } else if (keypoint.markerId) {\n      const marker = this.markers.getMarker(keypoint.markerId);\n      marker.showTooltip();\n      this.state.tooltip = marker.tooltip;\n    }\n  }\n  __hideTooltip() {\n    if (this.state.tooltip) {\n      const keypoint = this.keypoints[this.state.idx];\n      if (keypoint.tooltip) {\n        this.state.tooltip.hide();\n      } else if (keypoint.markerId) {\n        const marker = this.markers.getMarker(keypoint.markerId);\n        marker.hideTooltip();\n      }\n      this.state.tooltip = null;\n    }\n  }\n  __nextPoint() {\n    const workPoints = [];\n    if (this.state.idx === -1) {\n      const currentPosition = serializePt(this.viewer.getPosition());\n      workPoints.push(\n        currentPosition,\n        currentPosition,\n        this.keypoints[0].position,\n        this.keypoints[1].position\n      );\n    } else {\n      for (let i = -1; i < 3; i++) {\n        const keypoint = this.state.idx + i < 0 ? this.keypoints[this.keypoints.length - 1] : this.keypoints[(this.state.idx + i) % this.keypoints.length];\n        workPoints.push(keypoint.position);\n      }\n    }\n    const workVectors = [new Vector2(workPoints[0][0], workPoints[0][1])];\n    let k = 0;\n    for (let i = 1; i <= 3; i++) {\n      const d = workPoints[i - 1][0] - workPoints[i][0];\n      if (d > Math.PI) {\n        k += 1;\n      } else if (d < -Math.PI) {\n        k -= 1;\n      }\n      if (k !== 0 && i === 1) {\n        workVectors[0].x -= k * 2 * Math.PI;\n        k = 0;\n      }\n      workVectors.push(new Vector2(workPoints[i][0] + k * 2 * Math.PI, workPoints[i][1]));\n    }\n    const curve = new SplineCurve(workVectors).getPoints(NUM_STEPS * 3).map((p) => [p.x, p.y]);\n    this.state.curve = curve.slice(NUM_STEPS + 1, NUM_STEPS * 2 + 1);\n    if (this.state.idx !== -1) {\n      this.state.remainingPause = this.keypoints[this.state.idx].pause;\n      if (this.state.remainingPause) {\n        this.__showTooltip();\n      } else {\n        this.__incrementIdx();\n      }\n    } else {\n      this.__incrementIdx();\n    }\n  }\n  __nextStep() {\n    if (this.state.curve.length === 0) {\n      this.__nextPoint();\n      this.state.endStep[0] = utils.parseAngle(this.state.endStep[0]);\n    }\n    this.state.startStep = this.state.endStep;\n    this.state.endStep = this.state.curve.shift();\n    const distance = utils.greatArcDistance(this.state.startStep, this.state.endStep);\n    this.state.stepDuration = distance * 1e3 / Math.abs(this.config.autorotateSpeed);\n    if (distance === 0) {\n      this.__nextStep();\n    }\n  }\n  __nextFrame(timestamp) {\n    const ellapsed = timestamp - this.state.lastTime;\n    this.state.lastTime = timestamp;\n    if (this.state.remainingPause) {\n      this.state.remainingPause = Math.max(0, this.state.remainingPause - ellapsed);\n      if (this.state.remainingPause > 0) {\n        return;\n      } else {\n        this.__hideTooltip();\n        this.__incrementIdx();\n        this.state.startTime = timestamp;\n      }\n    }\n    let progress = (timestamp - this.state.startTime) / this.state.stepDuration;\n    if (progress >= 1) {\n      this.__nextStep();\n      progress = 0;\n      this.state.startTime = timestamp;\n    }\n    this.viewer.rotate({\n      yaw: this.state.startStep[0] + (this.state.endStep[0] - this.state.startStep[0]) * progress,\n      pitch: this.state.startStep[1] + (this.state.endStep[1] - this.state.startStep[1]) * progress\n    });\n  }\n  __findMinIndex(array, mapper) {\n    let idx = 0;\n    let current = Number.MAX_VALUE;\n    array.forEach((item, i) => {\n      const value = mapper(item);\n      if (value < current) {\n        current = value;\n        idx = i;\n      }\n    });\n    return idx;\n  }\n  __onKeyPress(e) {\n    if (this.viewer.state.keyboardEnabled && e.key === CONSTANTS.KEY_CODES.Space && !e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey) {\n      this.toggle();\n      e.preventDefault();\n    }\n  }\n};\nAutorotatePlugin.id = \"autorotate\";\nAutorotatePlugin.VERSION = \"5.13.2\";\nAutorotatePlugin.configParser = getConfig;\nAutorotatePlugin.readonlyOptions = [\"keypoints\"];\n\n// src/index.ts\nregisterButton(AutorotateButton, \"start\");\nDEFAULTS.lang[AutorotateButton.id] = \"Automatic rotation\";\nexport {\n  AutorotatePlugin,\n  events_exports as events\n};\n//# sourceMappingURL=index.module.js.map"],"names":["System","register","exports","module","MathUtils","Vector3","Cache$1","LinearSRGBColorSpace","LinearToneMapping","Scene","PerspectiveCamera","Mesh","SphereGeometry","MeshBasicMaterial","Raycaster","Frustum","Group","WebGLRenderTarget","Vector2","Matrix4","Euler","Loader$1","Quaternion","Texture","LinearMipmapLinearFilter","LinearFilter","PlaneGeometry","VideoTexture","Object3D","ShaderMaterial","Color","SplineCurve","setters","M","V","C","WebGLRenderer","W","a","S","P","c","d","R","F","e","f","B","E","h","Q","i","j","ColorManagement","k","l","O","n","o","p","execute","__vite_style__","document","createElement","textContent","head","appendChild","__defProp","Object","defineProperty","__export","__export$3","target","all","name","get","enumerable","constants_exports","ACTIONS","ANIMATION_MIN_DURATION","CAPTURE_EVENTS_CLASS","CTRLZOOM_TIMEOUT","DBLCLICK_DELAY","EASINGS","ICONS","IDS","KEY_CODES","LONGTOUCH_DELAY","MOVE_THRESHOLD","SPHERE_RADIUS","TWOFINGERSOVERLAY_DELAY","VIEWER_DATA","fullscreenElement","ACTIONS2","MENU","TWO_FINGERS","CTRL_ZOOM","ERROR","DESCRIPTION","Enter","Control","Escape","Space","PageUp","PageDown","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Delete","Plus","Minus","arrow","close","download","fullscreenIn","fullscreenOut","info","menu","zoomIn","zoomOut","linear","t","inQuad","outQuad","inOutQuad","inCubic","outCubic","inOutCubic","inQuart","outQuart","inOutQuart","inQuint","outQuint","inOutQuint","inSine","Math","cos","PI","outSine","sin","inOutSine","inExpo","pow","outExpo","inOutExpo","inCirc","sqrt","outCirc","inOutCirc","utils_exports","wrap","value","max","result","sum","array","reduce","b","distance","p1","p2","x","y","angle","atan2","getShortestArc","from","to","candidate","newCandidate","abs","Infinity","getAngle","position1","position2","acos","pitch","yaw","greatArcDistance","yaw1","pitch1","yaw2","pitch2","getElement","selector","match","getElementById","querySelector","toggleClass","element","className","active","classList","toggle","add","remove","addClasses","split","filter","removeClasses","hasParent","el","parent","test","parentElement","getClosest","matches","getEventTarget","composedPath","getMatchingTarget","find","HTMLElement","SVGElement","getPosition","offsetLeft","scrollLeft","clientLeft","offsetTop","scrollTop","clientTop","offsetParent","window","scrollX","scrollY","getStyleProperty","elt","varname","getComputedStyle","getPropertyValue","getTouchData","touches","length","clientX","clientY","center","isFullscreenEnabled","isIphone","requestFullscreen","dispatchEvent","Event","exitFullscreen","dasherize","str","replace","s","toLowerCase","throttle","callback","wait","paused","args","setTimeout","apply","this","isPlainObject","prototype","toString","call","getPrototypeOf","proto","deepmerge","src","first","merge","target2","src2","Array","isArray","forEach","keys","key","clone","isEmpty","obj","constructor","isNil","val","firstNonNull","values","deepEqual","obj1","obj2","isObject","prop","Animation","Dynamic","MultiDynamic","PressHandler","Slider","SliderDirection","applyEulerInverse","checkClosedShadowDom","checkStylesheet","checkVersion","cleanCssPosition","createTexture","cssPositionIsOrdered","getAbortError","getConfigParser","getXMPValue","invertResolvableBoolean","isAbortError","isExtendedPosition","logWarn","mergePanoData","parseAngle","parsePoint","parseSpeed","resolveBoolean","speedToDuration","PSVError","_PSVError","Error","message","reason","super","captureStackTrace","cb","initial","promise","then","res","error","err","console","warn","object","some","key1","key2","data","attr","intVal","parseInt","parseFloat","isNaN","CSS_POSITIONS","top","bottom","left","right","X_VALUES","Y_VALUES","POS_VALUES","CENTER","tokens","toLocaleLowerCase","slice","xFirst","map","token","reverse","parsed","join","allowCenter","cssOrder","indexOf","speed","speedStr","trim","speedValue","speedUnit","degToRad","angle2","zeroCenter","halfCircle","unit","clamp","img","mimaps","texture","needsUpdate","minFilter","generateMipmaps","anisotropy","quaternion","vector","euler","setFromEuler","invert","applyQuaternion","defaults","parsers","parser","userConfig","rawConfig","config","entries","defValue","version","coreVersion","ShadowRoot","mode","parentNode","width","height","newPanoData","xmpPanoData","panoData","isEquirectangular","fullWidth","fullHeight","croppedWidth","croppedHeight","croppedX","croppedY","poseHeading","posePitch","poseRoll","initialHeading","initialPitch","initialFov","round","options","easing","callbacks","resolved","cancelled","delayTimeout","animationFrame","requestAnimationFrame","__run","delay","timestamp","start","progress","duration","current","properties","end","onTick","__resolve","onFulfilled","Promise","resolve","push","cancel","clearTimeout","cancelAnimationFrame","fn","speedMult","currentSpeed","__current","min","defaultValue","setSpeed","goto","position","MathUtils2","step","setValue","roll","stop","update","elapsed","dstStop","targetSpeed","next","dynamics","dynamic","positions","steps","rolls","hasUpdates","time","pending","down","timeout","Date","getTime","up","now","SliderDirection2","container","direction","listener","mousedown","mouseover","addEventListener","isVertical","isHorizontal","destroy","removeEventListener","handleEvent","type","stopPropagation","__onMouseDown","__onMouseEnter","__onMouseLeave","__onTouchStart","__onMouseMove","__onTouchMove","__onMouseUp","__onTouchEnd","evt","__update","touch","changedTouches","moving","boundingClientRect","getBoundingClientRect","MathUtils3","click","cursor","events_exports","BeforeAnimateEvent","BeforeRenderEvent","BeforeRotateEvent","ClickEvent","ConfigChangedEvent","DoubleClickEvent","FullscreenEvent","HideNotificationEvent","HideOverlayEvent","HidePanelEvent","HideTooltipEvent","KeypressEvent","LoadProgressEvent","ObjectEnterEvent","ObjectEvent","ObjectHoverEvent","ObjectLeaveEvent","PanoramaErrorEvent","PanoramaLoadEvent","PanoramaLoadedEvent","PositionUpdatedEvent","ReadyEvent","RenderEvent","RollUpdatedEvent","ShowNotificationEvent","ShowOverlayEvent","ShowPanelEvent","ShowTooltipEvent","SizeUpdatedEvent","StopAllEvent","TransitionDoneEvent","ViewerEvent","ZoomUpdatedEvent","TypedEvent","cancelable","TypedEventTarget","EventTarget","_BeforeAnimateEvent","zoomLevel","_BeforeRenderEvent","_BeforeRotateEvent","_ClickEvent","_ConfigChangedEvent","containsOptions","option","includes","_DoubleClickEvent","_FullscreenEvent","fullscreenEnabled","_HideNotificationEvent","notificationId","_HideOverlayEvent","overlayId","_HidePanelEvent","panelId","_HideTooltipEvent","tooltipData","_KeypressEvent","originalEvent","_LoadProgressEvent","_PanoramaLoadEvent","panorama","_PanoramaLoadedEvent","_PanoramaErrorEvent","_TransitionDoneEvent","completed","_PositionUpdatedEvent","_RollUpdatedEvent","_ReadyEvent","_RenderEvent","_ShowNotificationEvent","_ShowOverlayEvent","_ShowPanelEvent","_ShowTooltipEvent","tooltip","_SizeUpdatedEvent","size","_StopAllEvent","_ZoomUpdatedEvent","viewerPoint","userDataKey","_ObjectEnterEvent","_ObjectLeaveEvent","_ObjectHoverEvent","AbstractAdapter","viewer","init","supportsTransition","supportsPreload","textureCoordsToSphericalCoords","point","sphericalCoordsToTextureCoords","adapterInterop","adapter","id","VERSION","supportsDownload","LOCALSTORAGE_TOUCH_SUPPORT","SYSTEM","loaded","pixelRatio","isWebGLSupported","maxTextureWidth","isTouchEnabled","__maxCanvasWidth","maxCanvasWidth","maxWidth","pass","cropCanvas","cropCtx","getContext","testCanvas","testCtx","fillStyle","fillRect","drawImage","getImageData","getMaxCanvasWidth","load","ctx","getWebGLCtx","devicePixelRatio","getParameter","MAX_TEXTURE_SIZE","navigator","maxTouchPoints","localStorage","clear","listenerMouse","listenerTouch","listenerTimeoutId","listenerTimeout","userAgent","getConfig","resolution","useXmpData","blur","MathUtils4","isPowerOfTwo","EquirectangularAdapter","SPHERE_SEGMENTS","SPHERE_HORIZONTAL_SEGMENTS","textureX","textureY","relativeX","relativeY","relativeLong","relativeLat","loadTexture","loader","useXmpPanoData","path","reject","cleanPanorama","blob","textureLoader","loadFile","dispatchProgress","loadXMP","blobToImage","createEquirectangularTexture","cacheKey","binary","loadBlobAsString","substring","reader","FileReader","onload","onerror","readAsText","ratio","buffer","OffscreenCanvas","floor","createMesh","hStart","hLength","vStart","vLength","geometry","scale","material","depthTest","depthWrite","setTexture","mesh","textureData","setTextureOpacity","opacity","transparent","disposeTexture","dispose","disposeMesh","DualFisheyeAdapter","SphereGeometry2","toNonIndexed","uvs","getAttribute","normals","count","index","getX","getY","z","getZ","correction","setXY","rotateX","rotateY","MeshBasicMaterial2","Mesh2","AbstractComponent","_AbstractComponent","children","state","visible","tagName","removeChild","childIdx","splice","child","isVisible","show","hide","style","display","getConfig2","title","hoverScale","collapsable","tabbable","icon","iconActive","AbstractButton","navbar","enabled","supported","collapsed","__setIcon","offsetWidth","lang","tabIndex","onClick","content","innerHTML","refresh","autoSize","checkSupported","isSupported","toggleActive","disable","enable","collapse","uncollapse","CustomButton","random","customOnClick","attachViewer","disabled","DescriptionButton","closed","__close","__open","caption","getButton","captionHidden","hasDescription","description","notification","panel","DownloadButton","downloadUrl","link","href","startsWith","downloadName","pop","FullscreenButton","toggleFullscreen","MenuButton","__hideMenu","__showMenu","MENU_TEMPLATE","buttons","button","noMargin","clickHandler","li","buttonId","dataset","getIcon","AbstractMoveButton","handler","dynamicRoll","stopAll","resetIdleTimer","groupId","MoveDownButton","MoveLeftButton","MoveRightButton","MoveUpButton","AbstractZoomButton","zoom","ZoomInButton","ZoomOutButton","ZoomRangeButton","zoomRange","zoomValue","slider","__onSliderUpdate","mediaMinWidth","ready","__moveZoomValue","getZoomLevel","level","AbstractPlugin","AbstractConfigurablePlugin","configParser","setOption","setOptions","ctor","readonly","readonlyOptions","pluginInterop","plugin","DEFAULTS","plugins","loadingImg","loadingTxt","fisheye","minFov","maxFov","defaultZoomLvl","defaultYaw","defaultPitch","sphereCorrection","moveSpeed","zoomSpeed","moveInertia","mousewheel","mousemove","mousewheelCtrlKey","touchmoveTwoFingers","requestHeaders","canvasBackground","defaultTransition","rotation","effect","rendererParameters","alpha","antialias","withCredentials","moveUp","moveDown","moveLeft","moveRight","fullscreen","loading","twoFingers","ctrlZoom","loadError","webglError","keyboard","keyboardActions","READONLY_OPTIONS","CONFIG_PARSERS","MathUtils5","getViewerConfig","NavbarCaption","contentWidth","contentElt","setCaption","html","__refreshButton","AVAILABLE_BUTTONS","AVAILABLE_GROUPS","registerButton","defaultPosition","unshift","pos","idx","btn","Navbar","setButtons","item","buttonCtor","warnNotFound","focusButton","firstElementChild","focus","availableWidth","totalWidth","collapsableButtons","ThreeCache","Cache","maxItems","ttl","items","purgeInterval","setInterval","purge","url","files","lastAccess","sort","Loader","canvas","createElementNS","setAttribute","textColor","color","border","thickness","halfSize","__updateContent","setProgress","MathUtils6","startX","startY","radius","endX","endY","largeArc","setAttributeNS","showUndefined","inner","maxHeight","Notification","contentId","Overlay","dismissible","image","text","preventDefault","PANEL_CLASS_NO_INTERACTION","Panel","mouseX","mouseY","keyHandler","resizer","closeBtn","__onKeyPress","wasVisible","__startResize","__resize","Tooltip","hideTimeout","__onTransitionEnd","assign","__waitImages","rect","move","box","posClass","arrowTop","arrowLeft","__computeTooltipPosition","swapY","swapX","ordered","newPos","propertyName","offsetSide","offsetX","offsetY","images","querySelectorAll","promises","complete","AbstractService","vector3","Vector32","EULER_ZERO","Euler2","DataHelper","fovToZoomLevel","fov","temp","MathUtils7","zoomLevelToFov","vFovToHFov","vFov","radToDeg","atan","tan","aspect","hFovToVFov","hFov","getAnimationProperties","targetPosition","targetZoom","positionProvided","zoomProvided","currentPosition","dYaw","currentZoom","dZoom","getTransitionOptions","transition","equals","renderer","panoramaPose","sphericalCoordsToVector3","applyEuler","vector3ToSphericalCoords","distance2","phi","theta","viewerCoordsToVector3","sphereIntersect","getIntersections","userData","viewerCoordsToSphericalCoords","vector3ToViewerCoords","vectorClone","project","camera","sphericalCoordsToViewerCoords","isPointVisible","dot","cleanPosition","cleanSphereCorrection","pan","tilt","cleanPanoramaPose","cleanPanoramaOptions","_Step","$","IDLE","is","set","CLICK","MOVING","Step","EventsHandler","startMouseX","startMouseY","pinchDist","moveDelta","accumulatorFactor","ctrlKeyDown","dblclickData","dblclickTimeout","longtouchTimeout","twofingersTimeout","ctrlZoomTimeout","resizeObserver","ResizeObserver","moveThreshold","passive","observe","disconnect","__onKeyDown","__onKeyUp","__onFullscreenChange","__applyMoveDelta","__clearMoveDelta","__onMouseWheel","overlay","keyboardEnabled","action","ctrlKey","altKey","shiftKey","metaKey","__stopMove","__doMove","__handleObjectsEvents","__cancelLongTouch","__cancelTwoFingersOverlay","__startMoveZoom","__doMoveZoom","deltaY","delta","startKeyboardControl","stopKeyboardControl","__resetMove","touchData","event","rightclick","__moveThresholdReached","__doClick","boundingRect","viewerX","viewerY","intersections","sphereIntersection","sphericalCoords","dataHelper","objects","textureCoords","objectsObservers","viewerPos","emit","evtCtor","intersection","MathUtils8","EPS","rotate","vector2","matrix4","box3","Box3","Renderer","frustumNeedsUpdate","setPixelRatio","outputColorSpace","toneMapping","domElement","background","scene","matrixAutoUpdate","raycasterMesh","Mesh4","SphereGeometry3","MeshBasicMaterial3","raycaster","frustum","meshContainer","setAnimationLoop","__renderLoop","cleanScene","__onSizeUpdated","__onZoomUpdated","__onPositionUpdated","setCustomRenderer","factory","customRenderer","setSize","updateProjectionMatrix","lookAt","copy","multiplyScalar","negate","rotateZ","updateMatrix","updateMatrixWorld","continuousUpdateCount","render","setPanoramaPose","cleanCorrection","setSphereCorrection","group","zoomTransition","tempContainer","newMesh","verticalAxis","Vector33","rotateOnWorldAxis","horizontalAxis","cross","getWorldDirection","normalize","setRenderTarget","animation","props","toneMappingExposure","MathUtils9","mapLinear","setFromCamera","intersectObjects","isMesh","isObjectVisible","multiplyMatrices","projectionMatrix","matrixWorldInverse","setFromProjectionMatrix","isVector3","containsPoint","boundingBox","computeBoundingBox","applyMatrix4","matrixWorld","intersectsBox","isObject3D","intersectsObject","addObject","removeObject","disposeMaterial","uniforms","uniform","traverse","BlobLoader","Loader2","onLoad","onProgress","onError","abortSignal","req","Request","headers","Headers","requestHeader","credentials","fetch","signal","response","status","body","getReader","contentLength","total","lengthComputable","stream","ReadableStream","controller","readData","read","done","byteLength","ProgressEvent","enqueue","catch","Response","statusText","ImageLoader","Loader3","onImageLoad","removeEventListeners","onImageError","aborted","onAbortSignal","crossOrigin","TextureLoader","abortCtrl","fileLoader","imageLoader","setWithCredentials","setCrossOrigin","abortLoading","ctrl","abort","cached","Blob","setRequestHeader","newProgress","__getAbortSignal","loadImage","URL","revokeObjectURL","createObjectURL","preloadPanorama","AbortController","ViewerDynamics","updateSpeeds","MathUtils10","ViewerState","Vector34","transitionAnimation","loadingPromise","idleTime","__setSize","showError","eventsHandler","setCursor","opts","setPanorama","performance","disableIdleTimer","getPlugin","pluginId","pluginCtor","getSize","needsContinuousUpdate","clientWidth","clientHeight","showLoader","hideError","cleanOptions","cursorOverride","resize","defaultPrevented","animate","stopAnimation","dim","enterFullscreen","createTooltip","observeObjects","unobserveObjects","__export$2","EnterMarkerEvent","GotoMarkerDoneEvent","HideMarkersEvent","LeaveMarkerEvent","MarkerVisibilityEvent","MarkersPluginEvent","RenderMarkersListEvent","SelectMarkerEvent","SelectMarkerListEvent","SetMarkersEvent","ShowMarkersEvent","UnselectMarkerEvent","_MarkerVisibilityEvent","marker","_GotoMarkerDoneEvent","_LeaveMarkerEvent","_EnterMarkerEvent","_SelectMarkerEvent","doubleClick","rightClick","_SelectMarkerListEvent","_UnselectMarkerEvent","_HideMarkersEvent","_SetMarkersEvent","markers","_ShowMarkersEvent","_RenderMarkersListEvent","MarkersButton","toggleAllMarkers","pin_list_default","SVG_NS","MARKER_DATA","MARKER_DATA_KEY","utils","ID_PANEL_MARKER","ID_PANEL_MARKERS_LIST","DEFAULT_HOVER_SCALE","amount","MARKERS_LIST_TEMPLATE","definition","getListContent","MarkersListButton","AbstractButton2","events","toggleMarkersList","_position","_quaternion","_scale","CSS3DObject","isCSS3DObject","pointerEvents","userSelect","ownerDocument","defaultView","Element","source","recursive","cloneNode","_matrix","_matrix2","CSS3DRenderer","parameters","_this","_width","_height","_widthHalf","_heightHalf","cache","WeakMap","overflow","viewElement","transformOrigin","cameraElement","epsilon","getCameraCSSMatrix","matrix","elements","getObjectCSSMatrix","hideObject","renderObject","cameraCSSMatrix","layers","onBeforeRender","isCSS3DSprite","transpose","rotation2D","multiply","makeRotationZ","decompose","setPosition","cachedObject","transform","objectData","onAfterRender","transformStyle","tx","ty","view","matrixWorldAutoUpdate","isOrthographicCamera","scaleByViewOffset","isPerspectiveCamera","CSS3DContainer","intersectionObserver","IntersectionObserver","entry","viewportIntersection","isIntersecting","root","events2","once","updateSize","threeElement","unobserve","MarkerType","MarkerType3","getMarkerType","allowNone","found","Marker","anchor","staticTooltip","position2D","positions3D","PSVError2","video","hideTooltip","is3d","isNormal","isPoly","isSvg","isCss3d","newType","utils2","trigger","zIndex","rot","listContent","showTooltip","forceUpdate","AbstractDomMarker","afterCreateElement","utils3","AbstractStandardMarker","viewerPosition","hoveringMarker","__updateSize","translate","applyScale","utils4","PSVError3","defaultHoverScale","needsUpdateSize","makeTransparent","offsetHeight","CONSTANTS","halfFov","arc","ChromaKeyMaterial","offset","repeat","chromaKey","keying","r","g","similarity","smoothness","params","spill","vertexShader","fragmentShader","greatArcIntermediaryPoint","λ1","φ1","λ2","φ2","utils5","getPolygonCoherentPoints","points","workPoints","getPolygonCenter","polygon","intermediary","N","X","Y","A","getGreatCircleIntersection","P1","P2","crossVectors","H","addVectors","applyAxisAngle","CONSTANTS2","Marker3D","threeMesh","pause","utils6","PSVError4","v3","fromBufferAttribute","localToWorld","centroid","v","setX","setY","setZ","__setTextureWrap","videoLayer","muted","autoplay","loop","playsInline","preload","MediaStream","srcObject","createVideo","videoWidth","videoHeight","play","imageLayer","Texture2","renderOrder","imageSize","layerRatio","imageRatio","hMargin","vMargin","MarkerCSS3D","elementLayer","updateMarker","viewerSize","utils7","PSVError5","childNodes","MarkerNormal","PSVError6","backgroundImage","MarkerPolygon","isPixels","isPolygon","isPolyline","coords","__getAllPolyPositions","innerPos","innerPoints","svgStyle","utils8","fill","actualPoly","PSVError7","coord","sphericalCoord","polyline","lengths","consumed","getPolylineCenter","__getPolyPositions","nbVectors","toBeComputed","neighbour","invisible","pair","MarkerSvg","svgElement","svgType","square","cx","circle","cy","ellipse","rx","ry","utils9","utils10","clickEventOnMarker","gotoMarkerSpeed","MarkersPlugin","allVisible","showAllTooltips","currentMarker","needsReRender","lastClientX","lastClientY","svgContainer","css3DContainer","events3","clearMarkers","setMarkers","renderMarkers","__onClick","__onEnterMarker","__onLeaveMarker","__onHoverMarker","__getTargetMarker","hideAllMarkers","showAllMarkers","toggleAllTooltips","hideAllTooltips","getNbMarkers","getMarkers","addMarker","PSVError8","__afterChangeMarkers","getMarker","markerId","getCurrentMarker","removeMarker","removeMarkers","markerIds","gotoMarker","zoomLvl","hideMarker","toggleMarker","showMarker","showMarkerTooltip","hideMarkerTooltip","showMarkerPanel","hideMarkerPanel","hideMarkersList","showMarkersList","hideList","visibilityChanged","closest","Node","m","dblclick","threeMarker","stopImmediatePropagation","__refreshUi","__checkObjectsObserver","nbMarkers","__export$1","SelectHotspot","ViewChanged","_SelectHotspot","hotspotId","_ViewChanged","HOTSPOT_MARKER_ID","projectPoint","pt","canvasShadow","context","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","drawImageCentered","w","drawImageHighDpi","INVERT_POSITIONS","AbstractMapButton","applyConfig","mapPosition","getButtonPosition","MapCloseButton","toggleCollapse","MapCompassButton","ROTATION","MapMaximizeButton","toggleMaximized","maximized","MapResetButton","reset","MapZoomToolbar","AbstractComponent2","zoomIndicator","zoomButtons","animateZoom","setText","innerText","exp","MapComponent","AbstractComponent3","galleryWasVisible","imgScale","defaultZoom","pinchAngle","hotspotPos","hotspotTooltip","forceRender","renderLoop","canvasContainer","__setCursor","resetButton","maximize","maximizeButton","closeButton","north","compassButton","zoomToolbar","visibleOnLoad","gallery","__move","__handleHotspots","SYSTEM2","static","mouse","__clickHotspot","recenter","__onToggleGallery","shape","overlayImage","__resetHotspot","reload","imageUrl","__loadImage","dispatchMinimizeEvent","setZoom","minZoom","maxZoom","setActiveHotspot","mapImage","yawAndRotation","canvasPos","canvasW","canvasH","canvasVirtualCenterX","canvasVirtualCenterY","clearRect","mapW","mapH","save","restore","hotspots","hotspot","isHover","defaultStyle","hoverImage","hoverSize","hoverColor","borderColor","hoverBorderColor","borderSize","hoverBorderSize","getStyle","spotStyle","spotPos","beginPath","strokeStyle","lineWidth","stroke","pinImage","coneColor","coneSize","pinPos","pinSize","a1","a2","grad","createRadialGradient","addColorStop","rgb","moveTo","lineTo","unprojectPoint","__findHotspot","minimizeOnHotspotClick","isInit","exec","src64","btoa","marginBottom","log","MapPlugin","component","setHotspots","__markersToHotspots","open","minimize","setImage","setCenter","ids","clearHotspots","AutorotateEvent","_AutorotateEvent","autorotateEnabled","AutorotateButton","isEnabled","disableOnIdle","autostartDelay","autostartOnIdle","autorotateSpeed","autorotatePitch","autorotateZoomLvl","keypoints","startFromClosest","serializePt","AutorotatePlugin","initialStart","curve","startStep","endStep","startTime","stepDuration","remainingPause","lastTime","setKeypoints","__beforeRender","keypoint","__shiftKeypoints","__animate","__hideTooltip","__reset","__nextStep","__nextFrame","__findMinIndex","__incrementIdx","__showTooltip","__nextPoint","workVectors","getPoints","NUM_STEPS","shift","ellapsed","mapper","Number","MAX_VALUE"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}