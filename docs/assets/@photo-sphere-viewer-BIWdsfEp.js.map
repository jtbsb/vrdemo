{"version":3,"file":"@photo-sphere-viewer-BIWdsfEp.js","sources":["../../node_modules/@photo-sphere-viewer/core/index.module.js","../../node_modules/@photo-sphere-viewer/markers-plugin/index.module.js","../../node_modules/@photo-sphere-viewer/map-plugin/index.module.js","../../node_modules/@photo-sphere-viewer/autorotate-plugin/index.module.js"],"sourcesContent":["/*!\n * Photo Sphere Viewer 5.13.2\n * @copyright 2014-2015 Jérémy Heleine\n * @copyright 2015-2025 Damien \"Mistic\" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\nvar __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// src/data/constants.ts\nvar constants_exports = {};\n__export(constants_exports, {\n  ACTIONS: () => ACTIONS,\n  ANIMATION_MIN_DURATION: () => ANIMATION_MIN_DURATION,\n  CAPTURE_EVENTS_CLASS: () => CAPTURE_EVENTS_CLASS,\n  CTRLZOOM_TIMEOUT: () => CTRLZOOM_TIMEOUT,\n  DBLCLICK_DELAY: () => DBLCLICK_DELAY,\n  EASINGS: () => EASINGS,\n  ICONS: () => ICONS,\n  IDS: () => IDS,\n  KEY_CODES: () => KEY_CODES,\n  LONGTOUCH_DELAY: () => LONGTOUCH_DELAY,\n  MOVE_THRESHOLD: () => MOVE_THRESHOLD,\n  SPHERE_RADIUS: () => SPHERE_RADIUS,\n  TWOFINGERSOVERLAY_DELAY: () => TWOFINGERSOVERLAY_DELAY,\n  VIEWER_DATA: () => VIEWER_DATA\n});\n\n// src/icons/arrow.svg\nvar arrow_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"40 40 432 432\"><g transform=\"rotate(0, 256, 256)\"><path fill=\"currentColor\" d=\"M425.23 210.55H227.39a5 5 0 01-3.53-8.53l56.56-56.57a45.5 45.5 0 000-64.28 45.15 45.15 0 00-32.13-13.3 45.15 45.15 0 00-32.14 13.3L41.32 256l174.83 174.83a45.15 45.15 0 0032.14 13.3 45.15 45.15 0 0032.13-13.3 45.5 45.5 0 000-64.28l-56.57-56.57a5 5 0 013.54-8.53h197.84c25.06 0 45.45-20.39 45.45-45.45s-20.4-45.45-45.45-45.45z\"/></g><!-- Created by Flatart from the Noun Project --></svg>\\n';\n\n// src/icons/close.svg\nvar close_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><g fill=\"currentColor\" transform=\" translate(50, 50) rotate(45)\"><rect x=\"-5\" y=\"-65\" width=\"10\" height=\"130\"/><rect x=\"-65\" y=\"-5\" width=\"130\" height=\"10\"/></g></svg>';\n\n// src/icons/download.svg\nvar download_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path fill=\"currentColor\" d=\"M83.3 35.6h-17V3H32.2v32.6H16.6l33.6 32.7 33-32.7z\"/><path fill=\"currentColor\" d=\"M83.3 64.2v16.3H16.6V64.2H-.1v32.6H100V64.2H83.3z\"/><!--Created by Michael Zenaty from the Noun Project--></svg>\\n';\n\n// src/icons/fullscreen-in.svg\nvar fullscreen_in_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path fill=\"currentColor\" d=\"M100 40H87.1V18.8h-21V6H100zM100 93.2H66V80.3h21.1v-21H100zM34 93.2H0v-34h12.9v21.1h21zM12.9 40H0V6h34v12.9H12.8z\"/><!--Created by Garrett Knoll from the Noun Project--></svg>\\n';\n\n// src/icons/fullscreen-out.svg\nvar fullscreen_out_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path fill=\"currentColor\" d=\"M66 7h13v21h21v13H66zM66 60.3h34v12.9H79v21H66zM0 60.3h34v34H21V73.1H0zM21 7h13v34H0V28h21z\"/><!--Created by Garrett Knoll from the Noun Project--></svg>\\n';\n\n// src/icons/info.svg\nvar info_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 64 64\"><path fill=\"currentColor\" d=\"M28.3 26.1c-1 2.6-1.9 4.8-2.6 7-2.5 7.4-5 14.7-7.2 22-1.3 4.4.5 7.2 4.3 7.8 1.3.2 2.8.2 4.2-.1 8.2-2 11.9-8.6 15.7-15.2l-2.2 2a18.8 18.8 0 0 1-7.4 5.2 2 2 0 0 1-1.6-.2c-.2-.1 0-1 0-1.4l.8-1.8L41.9 28c.5-1.4.9-3 .7-4.4-.2-2.6-3-4.4-6.3-4.4-8.8.2-15 4.5-19.5 11.8-.2.3-.2.6-.3 1.3 3.7-2.8 6.8-6.1 11.8-6.2z\"/><circle fill=\"currentColor\" cx=\"39.3\" cy=\"9.2\" r=\"8.2\"/><!--Created by Arafat Uddin from the Noun Project--></svg>\\n';\n\n// src/icons/menu.svg\nvar menu_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"10 10 80 80\"><g fill=\"currentColor\"><circle r=\"10\" cx=\"20\" cy=\"20\"/><circle r=\"10\" cx=\"50\" cy=\"20\"/><circle r=\"10\" cx=\"80\" cy=\"20\"/><circle r=\"10\" cx=\"20\" cy=\"50\"/><circle r=\"10\" cx=\"50\" cy=\"50\"/><circle r=\"10\" cx=\"80\" cy=\"50\"/><circle r=\"10\" cx=\"20\" cy=\"80\"/><circle r=\"10\" cx=\"50\" cy=\"80\"/><circle r=\"10\" cx=\"80\" cy=\"80\"/></g><!-- Created by Richard Kun\\xE1k from the Noun Project--></svg>\\n';\n\n// src/icons/zoom-in.svg\nvar zoom_in_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path fill=\"currentColor\" d=\"M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z\"/><path fill=\"currentColor\" d=\"M8.728 4.009H6.744v2.737H4.006V8.73h2.738v2.736h1.984V8.73h2.737V6.746H8.728z\"/><!--Created by Ryan Canning from the Noun Project--></svg>\\n';\n\n// src/icons/zoom-out.svg\nvar zoom_out_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 20 20\"><path fill=\"currentColor\" d=\"M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z\"/><path fill=\"currentColor\" d=\"M4.006 6.746h7.459V8.73H4.006z\"/><!--Created by Ryan Canning from the Noun Project--></svg>\\n';\n\n// src/data/constants.ts\nvar ANIMATION_MIN_DURATION = 500;\nvar MOVE_THRESHOLD = 4;\nvar DBLCLICK_DELAY = 300;\nvar LONGTOUCH_DELAY = 500;\nvar TWOFINGERSOVERLAY_DELAY = 100;\nvar CTRLZOOM_TIMEOUT = 2e3;\nvar SPHERE_RADIUS = 10;\nvar VIEWER_DATA = \"photoSphereViewer\";\nvar CAPTURE_EVENTS_CLASS = \"psv--capture-event\";\nvar ACTIONS = /* @__PURE__ */ ((ACTIONS2) => {\n  ACTIONS2[\"ROTATE_UP\"] = \"ROTATE_UP\";\n  ACTIONS2[\"ROTATE_DOWN\"] = \"ROTATE_DOWN\";\n  ACTIONS2[\"ROTATE_RIGHT\"] = \"ROTATE_RIGHT\";\n  ACTIONS2[\"ROTATE_LEFT\"] = \"ROTATE_LEFT\";\n  ACTIONS2[\"ZOOM_IN\"] = \"ZOOM_IN\";\n  ACTIONS2[\"ZOOM_OUT\"] = \"ZOOM_OUT\";\n  return ACTIONS2;\n})(ACTIONS || {});\nvar IDS = {\n  MENU: \"menu\",\n  TWO_FINGERS: \"twoFingers\",\n  CTRL_ZOOM: \"ctrlZoom\",\n  ERROR: \"error\",\n  DESCRIPTION: \"description\"\n};\nvar KEY_CODES = {\n  Enter: \"Enter\",\n  Control: \"Control\",\n  Escape: \"Escape\",\n  Space: \" \",\n  PageUp: \"PageUp\",\n  PageDown: \"PageDown\",\n  ArrowLeft: \"ArrowLeft\",\n  ArrowUp: \"ArrowUp\",\n  ArrowRight: \"ArrowRight\",\n  ArrowDown: \"ArrowDown\",\n  Delete: \"Delete\",\n  Plus: \"+\",\n  Minus: \"-\"\n};\nvar ICONS = {\n  arrow: arrow_default,\n  close: close_default,\n  download: download_default,\n  fullscreenIn: fullscreen_in_default,\n  fullscreenOut: fullscreen_out_default,\n  info: info_default,\n  menu: menu_default,\n  zoomIn: zoom_in_default,\n  zoomOut: zoom_out_default\n};\nvar EASINGS = {\n  linear: (t) => t,\n  inQuad: (t) => t * t,\n  outQuad: (t) => t * (2 - t),\n  inOutQuad: (t) => t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t,\n  inCubic: (t) => t * t * t,\n  outCubic: (t) => --t * t * t + 1,\n  inOutCubic: (t) => t < 0.5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,\n  inQuart: (t) => t * t * t * t,\n  outQuart: (t) => 1 - --t * t * t * t,\n  inOutQuart: (t) => t < 0.5 ? 8 * t * t * t * t : 1 - 8 * --t * t * t * t,\n  inQuint: (t) => t * t * t * t * t,\n  outQuint: (t) => 1 + --t * t * t * t * t,\n  inOutQuint: (t) => t < 0.5 ? 16 * t * t * t * t * t : 1 + 16 * --t * t * t * t * t,\n  inSine: (t) => 1 - Math.cos(t * (Math.PI / 2)),\n  outSine: (t) => Math.sin(t * (Math.PI / 2)),\n  inOutSine: (t) => 0.5 - 0.5 * Math.cos(Math.PI * t),\n  inExpo: (t) => Math.pow(2, 10 * (t - 1)),\n  outExpo: (t) => 1 - Math.pow(2, -10 * t),\n  inOutExpo: (t) => (t = t * 2 - 1) < 0 ? 0.5 * Math.pow(2, 10 * t) : 1 - 0.5 * Math.pow(2, -10 * t),\n  inCirc: (t) => 1 - Math.sqrt(1 - t * t),\n  outCirc: (t) => Math.sqrt(1 - (t - 1) * (t - 1)),\n  inOutCirc: (t) => (t *= 2) < 1 ? 0.5 - 0.5 * Math.sqrt(1 - t * t) : 0.5 + 0.5 * Math.sqrt(1 - (t -= 2) * t)\n};\n\n// src/utils/index.ts\nvar utils_exports = {};\n__export(utils_exports, {\n  Animation: () => Animation,\n  Dynamic: () => Dynamic,\n  MultiDynamic: () => MultiDynamic,\n  PressHandler: () => PressHandler,\n  Slider: () => Slider,\n  SliderDirection: () => SliderDirection,\n  addClasses: () => addClasses,\n  angle: () => angle,\n  applyEulerInverse: () => applyEulerInverse,\n  checkClosedShadowDom: () => checkClosedShadowDom,\n  checkStylesheet: () => checkStylesheet,\n  checkVersion: () => checkVersion,\n  cleanCssPosition: () => cleanCssPosition,\n  clone: () => clone,\n  createTexture: () => createTexture,\n  cssPositionIsOrdered: () => cssPositionIsOrdered,\n  dasherize: () => dasherize,\n  deepEqual: () => deepEqual,\n  deepmerge: () => deepmerge,\n  distance: () => distance,\n  exitFullscreen: () => exitFullscreen,\n  firstNonNull: () => firstNonNull,\n  getAbortError: () => getAbortError,\n  getAngle: () => getAngle,\n  getClosest: () => getClosest,\n  getConfigParser: () => getConfigParser,\n  getElement: () => getElement,\n  getEventTarget: () => getEventTarget,\n  getMatchingTarget: () => getMatchingTarget,\n  getPosition: () => getPosition,\n  getShortestArc: () => getShortestArc,\n  getStyleProperty: () => getStyleProperty,\n  getTouchData: () => getTouchData,\n  getXMPValue: () => getXMPValue,\n  greatArcDistance: () => greatArcDistance,\n  hasParent: () => hasParent,\n  invertResolvableBoolean: () => invertResolvableBoolean,\n  isAbortError: () => isAbortError,\n  isEmpty: () => isEmpty,\n  isExtendedPosition: () => isExtendedPosition,\n  isFullscreenEnabled: () => isFullscreenEnabled,\n  isNil: () => isNil,\n  isPlainObject: () => isPlainObject,\n  logWarn: () => logWarn,\n  mergePanoData: () => mergePanoData,\n  parseAngle: () => parseAngle,\n  parsePoint: () => parsePoint,\n  parseSpeed: () => parseSpeed,\n  removeClasses: () => removeClasses,\n  requestFullscreen: () => requestFullscreen,\n  resolveBoolean: () => resolveBoolean,\n  speedToDuration: () => speedToDuration,\n  sum: () => sum,\n  throttle: () => throttle,\n  toggleClass: () => toggleClass,\n  wrap: () => wrap\n});\n\n// src/utils/math.ts\nfunction wrap(value, max) {\n  let result = value % max;\n  if (result < 0) {\n    result += max;\n  }\n  return result;\n}\nfunction sum(array) {\n  return array.reduce((a, b) => a + b, 0);\n}\nfunction distance(p1, p2) {\n  return Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\n}\nfunction angle(p1, p2) {\n  return Math.atan2(p2.y - p1.y, p2.x - p1.x);\n}\nfunction getShortestArc(from, to) {\n  const candidates = [\n    0,\n    // direct\n    Math.PI * 2,\n    // clock-wise cross zero\n    -Math.PI * 2\n    // counter-clock-wise cross zero\n  ];\n  return candidates.reduce((value, candidate) => {\n    const newCandidate = to - from + candidate;\n    return Math.abs(newCandidate) < Math.abs(value) ? newCandidate : value;\n  }, Infinity);\n}\nfunction getAngle(position1, position2) {\n  return Math.acos(\n    Math.cos(position1.pitch) * Math.cos(position2.pitch) * Math.cos(position1.yaw - position2.yaw) + Math.sin(position1.pitch) * Math.sin(position2.pitch)\n  );\n}\nfunction greatArcDistance([yaw1, pitch1], [yaw2, pitch2]) {\n  if (yaw1 - yaw2 > Math.PI) {\n    yaw1 -= 2 * Math.PI;\n  } else if (yaw1 - yaw2 < -Math.PI) {\n    yaw1 += 2 * Math.PI;\n  }\n  const x = (yaw2 - yaw1) * Math.cos((pitch1 + pitch2) / 2);\n  const y = pitch2 - pitch1;\n  return Math.sqrt(x * x + y * y);\n}\n\n// src/utils/browser.ts\nfunction getElement(selector) {\n  if (typeof selector === \"string\") {\n    return selector.match(/^[a-z]/i) ? document.getElementById(selector) : document.querySelector(selector);\n  } else {\n    return selector;\n  }\n}\nfunction toggleClass(element, className, active) {\n  if (active === void 0) {\n    element.classList.toggle(className);\n  } else if (active) {\n    element.classList.add(className);\n  } else if (!active) {\n    element.classList.remove(className);\n  }\n}\nfunction addClasses(element, className) {\n  element.classList.add(...className.split(\" \").filter((c) => !!c));\n}\nfunction removeClasses(element, className) {\n  element.classList.remove(...className.split(\" \").filter((c) => !!c));\n}\nfunction hasParent(el, parent) {\n  let test = el;\n  do {\n    if (test === parent) {\n      return true;\n    }\n    test = test.parentElement;\n  } while (test);\n  return false;\n}\nfunction getClosest(el, selector) {\n  if (!el?.matches) {\n    return null;\n  }\n  let test = el;\n  do {\n    if (test.matches(selector)) {\n      return test;\n    }\n    test = test.parentElement;\n  } while (test);\n  return null;\n}\nfunction getEventTarget(e) {\n  return e?.composedPath()[0] || null;\n}\nfunction getMatchingTarget(e, selector) {\n  if (!e) {\n    return null;\n  }\n  return e.composedPath().find((el) => {\n    if (!(el instanceof HTMLElement) && !(el instanceof SVGElement)) {\n      return false;\n    }\n    return el.matches(selector);\n  });\n}\nfunction getPosition(el) {\n  let x = 0;\n  let y = 0;\n  let test = el;\n  while (test) {\n    x += test.offsetLeft - test.scrollLeft + test.clientLeft;\n    y += test.offsetTop - test.scrollTop + test.clientTop;\n    test = test.offsetParent;\n  }\n  x -= window.scrollX;\n  y -= window.scrollY;\n  return { x, y };\n}\nfunction getStyleProperty(elt, varname) {\n  return window.getComputedStyle(elt).getPropertyValue(varname);\n}\nfunction getTouchData(e) {\n  if (e.touches.length < 2) {\n    return null;\n  }\n  const p1 = { x: e.touches[0].clientX, y: e.touches[0].clientY };\n  const p2 = { x: e.touches[1].clientX, y: e.touches[1].clientY };\n  return {\n    distance: distance(p1, p2),\n    angle: angle(p1, p2),\n    center: { x: (p1.x + p2.x) / 2, y: (p1.y + p2.y) / 2 }\n  };\n}\nvar fullscreenElement;\nfunction isFullscreenEnabled(elt, isIphone = false) {\n  if (isIphone) {\n    return elt === fullscreenElement;\n  } else {\n    return document.fullscreenElement === elt;\n  }\n}\nfunction requestFullscreen(elt, isIphone = false) {\n  if (isIphone) {\n    fullscreenElement = elt;\n    elt.classList.add(\"psv-fullscreen-emulation\");\n    document.dispatchEvent(new Event(\"fullscreenchange\"));\n  } else {\n    elt.requestFullscreen();\n  }\n}\nfunction exitFullscreen(isIphone = false) {\n  if (isIphone) {\n    fullscreenElement.classList.remove(\"psv-fullscreen-emulation\");\n    fullscreenElement = null;\n    document.dispatchEvent(new Event(\"fullscreenchange\"));\n  } else {\n    document.exitFullscreen();\n  }\n}\n\n// src/utils/misc.ts\nfunction dasherize(str) {\n  return str.replace(/[A-Z](?:(?=[^A-Z])|[A-Z]*(?=[A-Z][^A-Z]|$))/g, (s, i) => {\n    return (i > 0 ? \"-\" : \"\") + s.toLowerCase();\n  });\n}\nfunction throttle(callback, wait) {\n  let paused = false;\n  return function(...args) {\n    if (!paused) {\n      paused = true;\n      setTimeout(() => {\n        callback.apply(this, args);\n        paused = false;\n      }, wait);\n    }\n  };\n}\nfunction isPlainObject(value) {\n  if (typeof value !== \"object\" || value === null || Object.prototype.toString.call(value) !== \"[object Object]\") {\n    return false;\n  }\n  if (Object.getPrototypeOf(value) === null) {\n    return true;\n  }\n  let proto = value;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n  return Object.getPrototypeOf(value) === proto;\n}\nfunction deepmerge(target, src) {\n  const first = src;\n  return function merge(target2, src2) {\n    if (Array.isArray(src2)) {\n      if (!target2 || !Array.isArray(target2)) {\n        target2 = [];\n      } else {\n        target2.length = 0;\n      }\n      src2.forEach((e, i) => {\n        target2[i] = merge(null, e);\n      });\n    } else if (typeof src2 === \"object\") {\n      if (!target2 || Array.isArray(target2)) {\n        target2 = {};\n      }\n      Object.keys(src2).forEach((key) => {\n        if (key === \"__proto__\") {\n          return;\n        }\n        if (typeof src2[key] !== \"object\" || !src2[key] || !isPlainObject(src2[key])) {\n          target2[key] = src2[key];\n        } else if (src2[key] !== first) {\n          if (!target2[key]) {\n            target2[key] = merge(null, src2[key]);\n          } else {\n            merge(target2[key], src2[key]);\n          }\n        }\n      });\n    } else {\n      target2 = src2;\n    }\n    return target2;\n  }(target, src);\n}\nfunction clone(src) {\n  return deepmerge(null, src);\n}\nfunction isEmpty(obj) {\n  return !obj || Object.keys(obj).length === 0 && obj.constructor === Object;\n}\nfunction isNil(val) {\n  return val === null || val === void 0;\n}\nfunction firstNonNull(...values) {\n  for (const val of values) {\n    if (!isNil(val)) {\n      return val;\n    }\n  }\n  return null;\n}\nfunction deepEqual(obj1, obj2) {\n  if (obj1 === obj2) {\n    return true;\n  } else if (isObject(obj1) && isObject(obj2)) {\n    if (Object.keys(obj1).length !== Object.keys(obj2).length) {\n      return false;\n    }\n    for (const prop of Object.keys(obj1)) {\n      if (!deepEqual(obj1[prop], obj2[prop])) {\n        return false;\n      }\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\nfunction isObject(obj) {\n  return typeof obj === \"object\" && obj !== null;\n}\n\n// src/utils/psv.ts\nimport { LinearFilter, LinearMipmapLinearFilter, MathUtils, Quaternion, Texture } from \"three\";\n\n// src/PSVError.ts\nvar PSVError = class _PSVError extends Error {\n  constructor(message, reason) {\n    super(reason && reason instanceof Error ? `${message}: ${reason.message}` : message);\n    this.name = \"PSVError\";\n    Error.captureStackTrace?.(this, _PSVError);\n  }\n};\n\n// src/utils/psv.ts\nfunction resolveBoolean(value, cb) {\n  if (isPlainObject(value)) {\n    cb(value.initial, true);\n    value.promise.then((res) => cb(res, false));\n  } else {\n    cb(value, true);\n  }\n}\nfunction invertResolvableBoolean(value) {\n  return {\n    initial: !value.initial,\n    promise: value.promise.then((res) => !res)\n  };\n}\nfunction getAbortError() {\n  const error = new Error(\"Loading was aborted.\");\n  error.name = \"AbortError\";\n  return error;\n}\nfunction isAbortError(err) {\n  return err?.name === \"AbortError\";\n}\nfunction logWarn(message) {\n  console.warn(`PhotoSphereViewer: ${message}`);\n}\nfunction isExtendedPosition(object) {\n  if (!object || Array.isArray(object)) {\n    return false;\n  }\n  return [\n    [\"textureX\", \"textureY\"],\n    [\"yaw\", \"pitch\"]\n  ].some(([key1, key2]) => {\n    return object[key1] !== void 0 && object[key2] !== void 0;\n  });\n}\nfunction getXMPValue(data, attr, intVal = true) {\n  let result = data.match(\"<GPano:\" + attr + \">(.*)</GPano:\" + attr + \">\");\n  if (result !== null) {\n    const val = intVal ? parseInt(result[1], 10) : parseFloat(result[1]);\n    return isNaN(val) ? null : val;\n  }\n  result = data.match(\"GPano:\" + attr + '=\"(.*?)\"');\n  if (result !== null) {\n    const val = intVal ? parseInt(result[1], 10) : parseFloat(result[1]);\n    return isNaN(val) ? null : val;\n  }\n  return null;\n}\nvar CSS_POSITIONS = {\n  top: \"0%\",\n  bottom: \"100%\",\n  left: \"0%\",\n  right: \"100%\",\n  center: \"50%\"\n};\nvar X_VALUES = [\"left\", \"center\", \"right\"];\nvar Y_VALUES = [\"top\", \"center\", \"bottom\"];\nvar POS_VALUES = [...X_VALUES, ...Y_VALUES];\nvar CENTER = \"center\";\nfunction parsePoint(value) {\n  if (!value) {\n    return { x: 0.5, y: 0.5 };\n  }\n  if (typeof value === \"object\") {\n    return value;\n  }\n  let tokens = value.toLocaleLowerCase().split(\" \").slice(0, 2);\n  if (tokens.length === 1) {\n    if (CSS_POSITIONS[tokens[0]]) {\n      tokens = [tokens[0], CENTER];\n    } else {\n      tokens = [tokens[0], tokens[0]];\n    }\n  }\n  const xFirst = tokens[1] !== \"left\" && tokens[1] !== \"right\" && tokens[0] !== \"top\" && tokens[0] !== \"bottom\";\n  tokens = tokens.map((token) => CSS_POSITIONS[token] || token);\n  if (!xFirst) {\n    tokens.reverse();\n  }\n  const parsed = tokens.join(\" \").match(/^([0-9.]+)% ([0-9.]+)%$/);\n  if (parsed) {\n    return {\n      x: parseFloat(parsed[1]) / 100,\n      y: parseFloat(parsed[2]) / 100\n    };\n  } else {\n    return { x: 0.5, y: 0.5 };\n  }\n}\nfunction cleanCssPosition(value, { allowCenter, cssOrder } = {\n  allowCenter: true,\n  cssOrder: true\n}) {\n  if (!value) {\n    return null;\n  }\n  if (typeof value === \"string\") {\n    value = value.split(\" \");\n  }\n  if (value.length === 1) {\n    if (value[0] === CENTER) {\n      value = [CENTER, CENTER];\n    } else if (X_VALUES.indexOf(value[0]) !== -1) {\n      value = [CENTER, value[0]];\n    } else if (Y_VALUES.indexOf(value[0]) !== -1) {\n      value = [value[0], CENTER];\n    }\n  }\n  if (value.length !== 2 || POS_VALUES.indexOf(value[0]) === -1 || POS_VALUES.indexOf(value[1]) === -1) {\n    logWarn(`Unparsable position ${value}`);\n    return null;\n  }\n  if (!allowCenter && value[0] === CENTER && value[1] === CENTER) {\n    logWarn(`Invalid position center center`);\n    return null;\n  }\n  if (cssOrder && !cssPositionIsOrdered(value)) {\n    value = [value[1], value[0]];\n  }\n  if (value[1] === CENTER && X_VALUES.indexOf(value[0]) !== -1) {\n    value = [CENTER, value[0]];\n  }\n  if (value[0] === CENTER && Y_VALUES.indexOf(value[1]) !== -1) {\n    value = [value[1], CENTER];\n  }\n  return value;\n}\nfunction cssPositionIsOrdered(value) {\n  return Y_VALUES.indexOf(value[0]) !== -1 && X_VALUES.indexOf(value[1]) !== -1;\n}\nfunction parseSpeed(speed) {\n  let parsed;\n  if (typeof speed === \"string\") {\n    const speedStr = speed.toString().trim();\n    let speedValue = parseFloat(speedStr.replace(/^(-?[0-9]+(?:\\.[0-9]*)?).*$/, \"$1\"));\n    const speedUnit = speedStr.replace(/^-?[0-9]+(?:\\.[0-9]*)?(.*)$/, \"$1\").trim();\n    if (speedUnit.match(/(pm|per minute)$/)) {\n      speedValue /= 60;\n    }\n    switch (speedUnit) {\n      // Degrees per minute / second\n      case \"dpm\":\n      case \"degrees per minute\":\n      case \"dps\":\n      case \"degrees per second\":\n        parsed = MathUtils.degToRad(speedValue);\n        break;\n      // Radians per minute / second\n      case \"rdpm\":\n      case \"radians per minute\":\n      case \"rdps\":\n      case \"radians per second\":\n        parsed = speedValue;\n        break;\n      // Revolutions per minute / second\n      case \"rpm\":\n      case \"revolutions per minute\":\n      case \"rps\":\n      case \"revolutions per second\":\n        parsed = speedValue * Math.PI * 2;\n        break;\n      // Unknown unit\n      default:\n        throw new PSVError(`Unknown speed unit \"${speedUnit}\"`);\n    }\n  } else {\n    parsed = speed;\n  }\n  return parsed;\n}\nfunction speedToDuration(value, angle2) {\n  if (typeof value !== \"number\") {\n    const speed = parseSpeed(value);\n    return angle2 / Math.abs(speed) * 1e3;\n  } else {\n    return Math.abs(value);\n  }\n}\nfunction parseAngle(angle2, zeroCenter = false, halfCircle = zeroCenter) {\n  let parsed;\n  if (typeof angle2 === \"string\") {\n    const match = angle2.toLowerCase().trim().match(/^(-?[0-9]+(?:\\.[0-9]*)?)(.*)$/);\n    if (!match) {\n      throw new PSVError(`Unknown angle \"${angle2}\"`);\n    }\n    const value = parseFloat(match[1]);\n    const unit = match[2];\n    if (unit) {\n      switch (unit) {\n        case \"deg\":\n        case \"degs\":\n          parsed = MathUtils.degToRad(value);\n          break;\n        case \"rad\":\n        case \"rads\":\n          parsed = value;\n          break;\n        default:\n          throw new PSVError(`Unknown angle unit \"${unit}\"`);\n      }\n    } else {\n      parsed = value;\n    }\n  } else if (typeof angle2 === \"number\" && !isNaN(angle2)) {\n    parsed = angle2;\n  } else {\n    throw new PSVError(`Unknown angle \"${angle2}\"`);\n  }\n  parsed = wrap(zeroCenter ? parsed + Math.PI : parsed, Math.PI * 2);\n  return zeroCenter ? MathUtils.clamp(parsed - Math.PI, -Math.PI / (halfCircle ? 2 : 1), Math.PI / (halfCircle ? 2 : 1)) : parsed;\n}\nfunction createTexture(img, mimaps = false) {\n  const texture = new Texture(img);\n  texture.needsUpdate = true;\n  texture.minFilter = mimaps ? LinearMipmapLinearFilter : LinearFilter;\n  texture.generateMipmaps = mimaps;\n  texture.anisotropy = mimaps ? 2 : 1;\n  return texture;\n}\nvar quaternion = new Quaternion();\nfunction applyEulerInverse(vector, euler) {\n  quaternion.setFromEuler(euler).invert();\n  vector.applyQuaternion(quaternion);\n}\nfunction getConfigParser(defaults, parsers) {\n  const parser = function(userConfig) {\n    const rawConfig = clone({\n      ...defaults,\n      ...userConfig\n    });\n    const config = {};\n    for (let [key, value] of Object.entries(rawConfig)) {\n      if (parsers && key in parsers) {\n        value = parsers[key](value, {\n          rawConfig,\n          defValue: defaults[key]\n        });\n      } else if (!(key in defaults)) {\n        logWarn(`Unknown option ${key}`);\n        continue;\n      }\n      config[key] = value;\n    }\n    return config;\n  };\n  parser.defaults = defaults;\n  parser.parsers = parsers || {};\n  return parser;\n}\nfunction checkStylesheet(element, name) {\n  if (getStyleProperty(element, `--psv-${name}-loaded`) !== \"true\") {\n    console.error(`PhotoSphereViewer: stylesheet \"@photo-sphere-viewer/${name}/index.css\" is not loaded`);\n  }\n}\nfunction checkVersion(name, version, coreVersion) {\n  if (version && version !== coreVersion) {\n    console.error(`PhotoSphereViewer: @photo-sphere-viewer/${name} is in version ${version} but @photo-sphere-viewer/core is in version ${coreVersion}`);\n  }\n}\nfunction checkClosedShadowDom(el) {\n  do {\n    if (el instanceof ShadowRoot && el.mode === \"closed\") {\n      console.error(`PhotoSphereViewer: closed shadow DOM detected, the viewer might not work as expected`);\n      return;\n    }\n    el = el.parentNode;\n  } while (el);\n}\nfunction mergePanoData(width, height, newPanoData, xmpPanoData) {\n  const panoData = {\n    isEquirectangular: true,\n    fullWidth: firstNonNull(newPanoData?.fullWidth, xmpPanoData?.fullWidth),\n    fullHeight: firstNonNull(newPanoData?.fullHeight, xmpPanoData?.fullHeight),\n    croppedWidth: width,\n    croppedHeight: height,\n    croppedX: firstNonNull(newPanoData?.croppedX, xmpPanoData?.croppedX),\n    croppedY: firstNonNull(newPanoData?.croppedY, xmpPanoData?.croppedY),\n    poseHeading: firstNonNull(newPanoData?.poseHeading, xmpPanoData?.poseHeading, 0),\n    posePitch: firstNonNull(newPanoData?.posePitch, xmpPanoData?.posePitch, 0),\n    poseRoll: firstNonNull(newPanoData?.poseRoll, xmpPanoData?.poseRoll, 0),\n    initialHeading: xmpPanoData?.initialHeading,\n    initialPitch: xmpPanoData?.initialPitch,\n    initialFov: xmpPanoData?.initialFov\n  };\n  if (!panoData.fullWidth && !panoData.fullHeight) {\n    panoData.fullWidth = Math.max(width, height * 2);\n    panoData.fullHeight = Math.round(panoData.fullWidth / 2);\n  }\n  if (!panoData.fullWidth) {\n    panoData.fullWidth = panoData.fullHeight * 2;\n  }\n  if (!panoData.fullHeight) {\n    panoData.fullHeight = Math.round(panoData.fullWidth / 2);\n  }\n  if (panoData.croppedX === null) {\n    panoData.croppedX = Math.round((panoData.fullWidth - width) / 2);\n  }\n  if (panoData.croppedY === null) {\n    panoData.croppedY = Math.round((panoData.fullHeight - height) / 2);\n  }\n  if (Math.abs(panoData.fullWidth - panoData.fullHeight * 2) > 1) {\n    logWarn(\"Invalid panoData, fullWidth should be twice fullHeight\");\n    panoData.fullHeight = Math.round(panoData.fullWidth / 2);\n  }\n  if (panoData.croppedX + panoData.croppedWidth > panoData.fullWidth) {\n    logWarn(\"Invalid panoData, croppedX + croppedWidth > fullWidth\");\n    panoData.croppedX = panoData.fullWidth - panoData.croppedWidth;\n  }\n  if (panoData.croppedY + panoData.croppedHeight > panoData.fullHeight) {\n    logWarn(\"Invalid panoData, croppedY + croppedHeight > fullHeight\");\n    panoData.croppedY = panoData.fullHeight - panoData.croppedHeight;\n  }\n  if (panoData.croppedX < 0) {\n    logWarn(\"Invalid panoData, croppedX < 0\");\n    panoData.croppedX = 0;\n  }\n  if (panoData.croppedY < 0) {\n    logWarn(\"Invalid panoData, croppedY < 0\");\n    panoData.croppedY = 0;\n  }\n  return panoData;\n}\n\n// src/utils/Animation.ts\nvar Animation = class {\n  constructor(options) {\n    this.easing = EASINGS[\"linear\"];\n    this.callbacks = [];\n    this.resolved = false;\n    this.cancelled = false;\n    this.options = options;\n    if (options) {\n      if (options.easing) {\n        this.easing = typeof options.easing === \"function\" ? options.easing : EASINGS[options.easing] || EASINGS[\"linear\"];\n      }\n      this.delayTimeout = setTimeout(() => {\n        this.delayTimeout = void 0;\n        this.animationFrame = window.requestAnimationFrame((t) => this.__run(t));\n      }, options.delay || 0);\n    } else {\n      this.resolved = true;\n    }\n  }\n  __run(timestamp) {\n    if (this.cancelled) {\n      return;\n    }\n    if (!this.start) {\n      this.start = timestamp;\n    }\n    const progress = (timestamp - this.start) / this.options.duration;\n    const current = {};\n    if (progress < 1) {\n      for (const [name, prop] of Object.entries(this.options.properties)) {\n        if (prop) {\n          const value = prop.start + (prop.end - prop.start) * this.easing(progress);\n          current[name] = value;\n        }\n      }\n      this.options.onTick(current, progress);\n      this.animationFrame = window.requestAnimationFrame((t) => this.__run(t));\n    } else {\n      for (const [name, prop] of Object.entries(this.options.properties)) {\n        if (prop) {\n          current[name] = prop.end;\n        }\n      }\n      this.options.onTick(current, 1);\n      this.__resolve(true);\n      this.animationFrame = void 0;\n    }\n  }\n  __resolve(value) {\n    if (value) {\n      this.resolved = true;\n    } else {\n      this.cancelled = true;\n    }\n    this.callbacks.forEach((cb) => cb(value));\n    this.callbacks.length = 0;\n  }\n  /**\n   * Promise chaining\n   * @param [onFulfilled] - Called when the animation is complete (true) or cancelled (false)\n   */\n  then(onFulfilled) {\n    if (this.resolved || this.cancelled) {\n      return Promise.resolve(this.resolved).then(onFulfilled);\n    }\n    return new Promise((resolve) => {\n      this.callbacks.push(resolve);\n    }).then(onFulfilled);\n  }\n  /**\n   * Cancels the animation\n   */\n  cancel() {\n    if (!this.cancelled && !this.resolved) {\n      this.__resolve(false);\n      if (this.delayTimeout) {\n        window.clearTimeout(this.delayTimeout);\n        this.delayTimeout = void 0;\n      }\n      if (this.animationFrame) {\n        window.cancelAnimationFrame(this.animationFrame);\n        this.animationFrame = void 0;\n      }\n    }\n  }\n};\n\n// src/utils/Dynamic.ts\nimport { MathUtils as MathUtils2 } from \"three\";\nvar Dynamic = class {\n  constructor(fn, config) {\n    this.fn = fn;\n    this.mode = 0 /* STOP */;\n    this.speed = 0;\n    this.speedMult = 0;\n    this.currentSpeed = 0;\n    this.target = 0;\n    this.__current = 0;\n    this.min = config.min;\n    this.max = config.max;\n    this.wrap = config.wrap;\n    this.current = config.defaultValue;\n    if (this.wrap && this.min !== 0) {\n      throw new PSVError(\"invalid config\");\n    }\n    if (this.fn) {\n      this.fn(this.current);\n    }\n  }\n  get current() {\n    return this.__current;\n  }\n  set current(current) {\n    this.__current = current;\n  }\n  /**\n   * Changes base speed\n   */\n  setSpeed(speed) {\n    this.speed = speed;\n  }\n  /**\n   * Defines the target position\n   */\n  goto(position, speedMult = 1) {\n    this.mode = 2 /* POSITION */;\n    this.target = this.wrap ? wrap(position, this.max) : MathUtils2.clamp(position, this.min, this.max);\n    this.speedMult = speedMult;\n  }\n  /**\n   * Increases/decreases the target position\n   */\n  step(step, speedMult = 1) {\n    if (speedMult === 0) {\n      this.setValue(this.current + step);\n    } else {\n      if (this.mode !== 2 /* POSITION */) {\n        this.target = this.current;\n      }\n      this.goto(this.target + step, speedMult);\n    }\n  }\n  /**\n   * Starts infinite movement\n   */\n  roll(invert = false, speedMult = 1) {\n    this.mode = 1 /* INFINITE */;\n    this.target = invert ? -Infinity : Infinity;\n    this.speedMult = speedMult;\n  }\n  /**\n   * Stops movement\n   */\n  stop() {\n    this.mode = 0 /* STOP */;\n  }\n  /**\n   * Defines the current position and immediately stops movement\n   * @param {number} value\n   */\n  setValue(value) {\n    this.target = this.wrap ? wrap(value, this.max) : MathUtils2.clamp(value, this.min, this.max);\n    this.mode = 0 /* STOP */;\n    this.currentSpeed = 0;\n    if (this.target !== this.current) {\n      this.current = this.target;\n      if (this.fn) {\n        this.fn(this.current);\n      }\n      return true;\n    }\n    return false;\n  }\n  /**\n   * @internal\n   */\n  update(elapsed) {\n    if (this.mode === 2 /* POSITION */) {\n      if (this.wrap && Math.abs(this.target - this.current) > this.max / 2) {\n        this.current = this.current < this.target ? this.current + this.max : this.current - this.max;\n      }\n      const dstStop = this.currentSpeed * this.currentSpeed / (this.speed * this.speedMult * 4);\n      if (Math.abs(this.target - this.current) <= dstStop) {\n        this.mode = 0 /* STOP */;\n      }\n    }\n    let targetSpeed = this.mode === 0 /* STOP */ ? 0 : this.speed * this.speedMult;\n    if (this.target < this.current) {\n      targetSpeed = -targetSpeed;\n    }\n    if (this.currentSpeed < targetSpeed) {\n      this.currentSpeed = Math.min(\n        targetSpeed,\n        this.currentSpeed + elapsed / 1e3 * this.speed * this.speedMult * 2\n      );\n    } else if (this.currentSpeed > targetSpeed) {\n      this.currentSpeed = Math.max(\n        targetSpeed,\n        this.currentSpeed - elapsed / 1e3 * this.speed * this.speedMult * 2\n      );\n    }\n    let next = null;\n    if (this.current > this.target && this.currentSpeed) {\n      next = Math.max(this.target, this.current + this.currentSpeed * elapsed / 1e3);\n    } else if (this.current < this.target && this.currentSpeed) {\n      next = Math.min(this.target, this.current + this.currentSpeed * elapsed / 1e3);\n    }\n    if (next !== null) {\n      next = this.wrap ? wrap(next, this.max) : MathUtils2.clamp(next, this.min, this.max);\n      if (next !== this.current) {\n        this.current = next;\n        if (this.fn) {\n          this.fn(this.current);\n        }\n        return true;\n      }\n    }\n    return false;\n  }\n};\n\n// src/utils/MultiDynamic.ts\nvar MultiDynamic = class {\n  constructor(fn, dynamics) {\n    this.fn = fn;\n    this.dynamics = dynamics;\n    if (this.fn) {\n      this.fn(this.current);\n    }\n  }\n  get current() {\n    return Object.entries(this.dynamics).reduce(\n      (values, [name, dynamic]) => {\n        values[name] = dynamic.current;\n        return values;\n      },\n      {}\n    );\n  }\n  /**\n   * Changes base speed\n   */\n  setSpeed(speed) {\n    for (const d of Object.values(this.dynamics)) {\n      d.setSpeed(speed);\n    }\n  }\n  /**\n   * Defines the target positions\n   */\n  goto(positions, speedMult = 1) {\n    for (const [name, position] of Object.entries(positions)) {\n      this.dynamics[name].goto(position, speedMult);\n    }\n  }\n  /**\n   * Increase/decrease the target positions\n   */\n  step(steps, speedMult = 1) {\n    if (speedMult === 0) {\n      this.setValue(\n        Object.keys(steps).reduce(\n          (values, name) => {\n            values[name] = steps[name] + this.dynamics[name].current;\n            return values;\n          },\n          {}\n        )\n      );\n    } else {\n      for (const [name, step] of Object.entries(steps)) {\n        this.dynamics[name].step(step, speedMult);\n      }\n    }\n  }\n  /**\n   * Starts infinite movements\n   */\n  roll(rolls, speedMult = 1) {\n    for (const [name, roll] of Object.entries(rolls)) {\n      this.dynamics[name].roll(roll, speedMult);\n    }\n  }\n  /**\n   * Stops movements\n   */\n  stop() {\n    for (const d of Object.values(this.dynamics)) {\n      d.stop();\n    }\n  }\n  /**\n   * Defines the current positions and immediately stops movements\n   */\n  setValue(values) {\n    let hasUpdates = false;\n    for (const [name, value] of Object.entries(values)) {\n      hasUpdates = this.dynamics[name].setValue(value) || hasUpdates;\n    }\n    if (hasUpdates && this.fn) {\n      this.fn(this.current);\n    }\n    return hasUpdates;\n  }\n  /**\n   * @internal\n   */\n  update(elapsed) {\n    let hasUpdates = false;\n    for (const d of Object.values(this.dynamics)) {\n      hasUpdates = d.update(elapsed) || hasUpdates;\n    }\n    if (hasUpdates && this.fn) {\n      this.fn(this.current);\n    }\n    return hasUpdates;\n  }\n};\n\n// src/utils/PressHandler.ts\nvar PressHandler = class {\n  constructor(delay = 200) {\n    this.delay = delay;\n    this.time = 0;\n    this.delay = delay;\n  }\n  get pending() {\n    return this.time !== 0;\n  }\n  down(data) {\n    if (this.timeout) {\n      clearTimeout(this.timeout);\n      this.timeout = void 0;\n    }\n    this.time = (/* @__PURE__ */ new Date()).getTime();\n    this.data = data;\n  }\n  up(cb) {\n    if (!this.time) {\n      return;\n    }\n    const elapsed = Date.now() - this.time;\n    if (elapsed < this.delay) {\n      this.timeout = setTimeout(() => {\n        cb(this.data);\n        this.timeout = void 0;\n        this.time = 0;\n        this.data = void 0;\n      }, this.delay);\n    } else {\n      cb(this.data);\n      this.time = 0;\n      this.data = void 0;\n    }\n  }\n};\n\n// src/utils/Slider.ts\nimport { MathUtils as MathUtils3 } from \"three\";\nvar SliderDirection = /* @__PURE__ */ ((SliderDirection2) => {\n  SliderDirection2[\"VERTICAL\"] = \"VERTICAL\";\n  SliderDirection2[\"HORIZONTAL\"] = \"HORIZONTAL\";\n  return SliderDirection2;\n})(SliderDirection || {});\nvar Slider = class {\n  constructor(container, direction, listener) {\n    this.container = container;\n    this.direction = direction;\n    this.listener = listener;\n    this.mousedown = false;\n    this.mouseover = false;\n    this.container.addEventListener(\"click\", this);\n    this.container.addEventListener(\"mousedown\", this);\n    this.container.addEventListener(\"mouseenter\", this);\n    this.container.addEventListener(\"mouseleave\", this);\n    this.container.addEventListener(\"touchstart\", this);\n    this.container.addEventListener(\"mousemove\", this, true);\n    this.container.addEventListener(\"touchmove\", this, true);\n    window.addEventListener(\"mouseup\", this);\n    window.addEventListener(\"touchend\", this);\n  }\n  get isVertical() {\n    return this.direction === \"VERTICAL\" /* VERTICAL */;\n  }\n  get isHorizontal() {\n    return this.direction === \"HORIZONTAL\" /* HORIZONTAL */;\n  }\n  destroy() {\n    window.removeEventListener(\"mouseup\", this);\n    window.removeEventListener(\"touchend\", this);\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case \"click\":\n        e.stopPropagation();\n        break;\n      case \"mousedown\":\n        this.__onMouseDown(e);\n        break;\n      case \"mouseenter\":\n        this.__onMouseEnter(e);\n        break;\n      case \"mouseleave\":\n        this.__onMouseLeave(e);\n        break;\n      case \"touchstart\":\n        this.__onTouchStart(e);\n        break;\n      case \"mousemove\":\n        this.__onMouseMove(e);\n        break;\n      case \"touchmove\":\n        this.__onTouchMove(e);\n        break;\n      case \"mouseup\":\n        this.__onMouseUp(e);\n        break;\n      case \"touchend\":\n        this.__onTouchEnd(e);\n        break;\n    }\n  }\n  __onMouseDown(evt) {\n    this.mousedown = true;\n    this.__update(evt.clientX, evt.clientY, true);\n  }\n  __onMouseEnter(evt) {\n    this.mouseover = true;\n    this.__update(evt.clientX, evt.clientY, true);\n  }\n  __onTouchStart(evt) {\n    this.mouseover = true;\n    this.mousedown = true;\n    const touch = evt.changedTouches[0];\n    this.__update(touch.clientX, touch.clientY, true);\n  }\n  __onMouseMove(evt) {\n    if (this.mousedown || this.mouseover) {\n      evt.stopPropagation();\n      this.__update(evt.clientX, evt.clientY, true);\n    }\n  }\n  __onTouchMove(evt) {\n    if (this.mousedown || this.mouseover) {\n      evt.stopPropagation();\n      const touch = evt.changedTouches[0];\n      this.__update(touch.clientX, touch.clientY, true);\n    }\n  }\n  __onMouseUp(evt) {\n    if (this.mousedown) {\n      this.mousedown = false;\n      this.__update(evt.clientX, evt.clientY, false);\n    }\n  }\n  __onMouseLeave(evt) {\n    if (this.mouseover) {\n      this.mouseover = false;\n      this.__update(evt.clientX, evt.clientY, true);\n    }\n  }\n  __onTouchEnd(evt) {\n    if (this.mousedown) {\n      this.mouseover = false;\n      this.mousedown = false;\n      const touch = evt.changedTouches[0];\n      this.__update(touch.clientX, touch.clientY, false);\n    }\n  }\n  __update(clientX, clientY, moving) {\n    const boundingClientRect = this.container.getBoundingClientRect();\n    let val;\n    if (this.isVertical) {\n      val = MathUtils3.clamp((boundingClientRect.bottom - clientY) / boundingClientRect.height, 0, 1);\n    } else {\n      val = MathUtils3.clamp((clientX - boundingClientRect.left) / boundingClientRect.width, 0, 1);\n    }\n    this.listener({\n      value: val,\n      click: !moving,\n      mousedown: this.mousedown,\n      mouseover: this.mouseover,\n      cursor: { clientX, clientY }\n    });\n  }\n};\n\n// src/events.ts\nvar events_exports = {};\n__export(events_exports, {\n  BeforeAnimateEvent: () => BeforeAnimateEvent,\n  BeforeRenderEvent: () => BeforeRenderEvent,\n  BeforeRotateEvent: () => BeforeRotateEvent,\n  ClickEvent: () => ClickEvent,\n  ConfigChangedEvent: () => ConfigChangedEvent,\n  DoubleClickEvent: () => DoubleClickEvent,\n  FullscreenEvent: () => FullscreenEvent,\n  HideNotificationEvent: () => HideNotificationEvent,\n  HideOverlayEvent: () => HideOverlayEvent,\n  HidePanelEvent: () => HidePanelEvent,\n  HideTooltipEvent: () => HideTooltipEvent,\n  KeypressEvent: () => KeypressEvent,\n  LoadProgressEvent: () => LoadProgressEvent,\n  ObjectEnterEvent: () => ObjectEnterEvent,\n  ObjectEvent: () => ObjectEvent,\n  ObjectHoverEvent: () => ObjectHoverEvent,\n  ObjectLeaveEvent: () => ObjectLeaveEvent,\n  PanoramaErrorEvent: () => PanoramaErrorEvent,\n  PanoramaLoadEvent: () => PanoramaLoadEvent,\n  PanoramaLoadedEvent: () => PanoramaLoadedEvent,\n  PositionUpdatedEvent: () => PositionUpdatedEvent,\n  ReadyEvent: () => ReadyEvent,\n  RenderEvent: () => RenderEvent,\n  RollUpdatedEvent: () => RollUpdatedEvent,\n  ShowNotificationEvent: () => ShowNotificationEvent,\n  ShowOverlayEvent: () => ShowOverlayEvent,\n  ShowPanelEvent: () => ShowPanelEvent,\n  ShowTooltipEvent: () => ShowTooltipEvent,\n  SizeUpdatedEvent: () => SizeUpdatedEvent,\n  StopAllEvent: () => StopAllEvent,\n  TransitionDoneEvent: () => TransitionDoneEvent,\n  ViewerEvent: () => ViewerEvent,\n  ZoomUpdatedEvent: () => ZoomUpdatedEvent\n});\n\n// src/lib/TypedEventTarget.ts\nvar TypedEvent = class extends Event {\n  constructor(type, cancelable = false) {\n    super(type, { cancelable });\n  }\n};\nvar TypedEventTarget = class extends EventTarget {\n  dispatchEvent(e) {\n    return super.dispatchEvent(e);\n  }\n  /**\n   * @template T the name of event\n   * @template E the class of the event\n   */\n  addEventListener(type, callback, options) {\n    super.addEventListener(type, callback, options);\n  }\n  /**\n   * @template T the name of event\n   * @template E the class of the event\n   */\n  removeEventListener(type, callback, options) {\n    super.removeEventListener(type, callback, options);\n  }\n};\n\n// src/events.ts\nvar ViewerEvent = class extends TypedEvent {\n};\nvar _BeforeAnimateEvent = class _BeforeAnimateEvent extends ViewerEvent {\n  /** @internal */\n  constructor(position, zoomLevel) {\n    super(_BeforeAnimateEvent.type, true);\n    this.position = position;\n    this.zoomLevel = zoomLevel;\n  }\n};\n_BeforeAnimateEvent.type = \"before-animate\";\nvar BeforeAnimateEvent = _BeforeAnimateEvent;\nvar _BeforeRenderEvent = class _BeforeRenderEvent extends ViewerEvent {\n  /** @internal */\n  constructor(timestamp, elapsed) {\n    super(_BeforeRenderEvent.type);\n    this.timestamp = timestamp;\n    this.elapsed = elapsed;\n  }\n};\n_BeforeRenderEvent.type = \"before-render\";\nvar BeforeRenderEvent = _BeforeRenderEvent;\nvar _BeforeRotateEvent = class _BeforeRotateEvent extends ViewerEvent {\n  /** @internal */\n  constructor(position) {\n    super(_BeforeRotateEvent.type, true);\n    this.position = position;\n  }\n};\n_BeforeRotateEvent.type = \"before-rotate\";\nvar BeforeRotateEvent = _BeforeRotateEvent;\nvar _ClickEvent = class _ClickEvent extends ViewerEvent {\n  /** @internal */\n  constructor(data) {\n    super(_ClickEvent.type);\n    this.data = data;\n  }\n};\n_ClickEvent.type = \"click\";\nvar ClickEvent = _ClickEvent;\nvar _ConfigChangedEvent = class _ConfigChangedEvent extends ViewerEvent {\n  /** @internal */\n  constructor(options) {\n    super(_ConfigChangedEvent.type);\n    this.options = options;\n  }\n  /**\n   * Checks if at least one of the `options` has been modified\n   */\n  containsOptions(...options) {\n    return options.some((option) => this.options.includes(option));\n  }\n};\n_ConfigChangedEvent.type = \"config-changed\";\nvar ConfigChangedEvent = _ConfigChangedEvent;\nvar _DoubleClickEvent = class _DoubleClickEvent extends ViewerEvent {\n  /** @internal */\n  constructor(data) {\n    super(_DoubleClickEvent.type);\n    this.data = data;\n  }\n};\n_DoubleClickEvent.type = \"dblclick\";\nvar DoubleClickEvent = _DoubleClickEvent;\nvar _FullscreenEvent = class _FullscreenEvent extends ViewerEvent {\n  /** @internal */\n  constructor(fullscreenEnabled) {\n    super(_FullscreenEvent.type);\n    this.fullscreenEnabled = fullscreenEnabled;\n  }\n};\n_FullscreenEvent.type = \"fullscreen\";\nvar FullscreenEvent = _FullscreenEvent;\nvar _HideNotificationEvent = class _HideNotificationEvent extends ViewerEvent {\n  /** @internal */\n  constructor(notificationId) {\n    super(_HideNotificationEvent.type);\n    this.notificationId = notificationId;\n  }\n};\n_HideNotificationEvent.type = \"hide-notification\";\nvar HideNotificationEvent = _HideNotificationEvent;\nvar _HideOverlayEvent = class _HideOverlayEvent extends ViewerEvent {\n  /** @internal */\n  constructor(overlayId) {\n    super(_HideOverlayEvent.type);\n    this.overlayId = overlayId;\n  }\n};\n_HideOverlayEvent.type = \"hide-overlay\";\nvar HideOverlayEvent = _HideOverlayEvent;\nvar _HidePanelEvent = class _HidePanelEvent extends ViewerEvent {\n  /** @internal */\n  constructor(panelId) {\n    super(_HidePanelEvent.type);\n    this.panelId = panelId;\n  }\n};\n_HidePanelEvent.type = \"hide-panel\";\nvar HidePanelEvent = _HidePanelEvent;\nvar _HideTooltipEvent = class _HideTooltipEvent extends ViewerEvent {\n  /** @internal */\n  constructor(tooltipData) {\n    super(_HideTooltipEvent.type);\n    this.tooltipData = tooltipData;\n  }\n};\n_HideTooltipEvent.type = \"hide-tooltip\";\nvar HideTooltipEvent = _HideTooltipEvent;\nvar _KeypressEvent = class _KeypressEvent extends ViewerEvent {\n  /** @internal */\n  constructor(key, originalEvent) {\n    super(_KeypressEvent.type, true);\n    this.key = key;\n    this.originalEvent = originalEvent;\n  }\n};\n_KeypressEvent.type = \"key-press\";\nvar KeypressEvent = _KeypressEvent;\nvar _LoadProgressEvent = class _LoadProgressEvent extends ViewerEvent {\n  /** @internal */\n  constructor(progress) {\n    super(_LoadProgressEvent.type);\n    this.progress = progress;\n  }\n};\n_LoadProgressEvent.type = \"load-progress\";\nvar LoadProgressEvent = _LoadProgressEvent;\nvar _PanoramaLoadEvent = class _PanoramaLoadEvent extends ViewerEvent {\n  /** @internal */\n  constructor(panorama) {\n    super(_PanoramaLoadEvent.type);\n    this.panorama = panorama;\n  }\n};\n_PanoramaLoadEvent.type = \"panorama-load\";\nvar PanoramaLoadEvent = _PanoramaLoadEvent;\nvar _PanoramaLoadedEvent = class _PanoramaLoadedEvent extends ViewerEvent {\n  /** @internal */\n  constructor(data) {\n    super(_PanoramaLoadedEvent.type);\n    this.data = data;\n  }\n};\n_PanoramaLoadedEvent.type = \"panorama-loaded\";\nvar PanoramaLoadedEvent = _PanoramaLoadedEvent;\nvar _PanoramaErrorEvent = class _PanoramaErrorEvent extends ViewerEvent {\n  /** @internal */\n  constructor(panorama, error) {\n    super(_PanoramaErrorEvent.type);\n    this.panorama = panorama;\n    this.error = error;\n  }\n};\n_PanoramaErrorEvent.type = \"panorama-error\";\nvar PanoramaErrorEvent = _PanoramaErrorEvent;\nvar _TransitionDoneEvent = class _TransitionDoneEvent extends ViewerEvent {\n  /** @internal */\n  constructor(completed) {\n    super(_TransitionDoneEvent.type);\n    this.completed = completed;\n  }\n};\n_TransitionDoneEvent.type = \"transition-done\";\nvar TransitionDoneEvent = _TransitionDoneEvent;\nvar _PositionUpdatedEvent = class _PositionUpdatedEvent extends ViewerEvent {\n  /** @internal */\n  constructor(position) {\n    super(_PositionUpdatedEvent.type);\n    this.position = position;\n  }\n};\n_PositionUpdatedEvent.type = \"position-updated\";\nvar PositionUpdatedEvent = _PositionUpdatedEvent;\nvar _RollUpdatedEvent = class _RollUpdatedEvent extends ViewerEvent {\n  /** @internal */\n  constructor(roll) {\n    super(_RollUpdatedEvent.type);\n    this.roll = roll;\n  }\n};\n_RollUpdatedEvent.type = \"roll-updated\";\nvar RollUpdatedEvent = _RollUpdatedEvent;\nvar _ReadyEvent = class _ReadyEvent extends ViewerEvent {\n  /** @internal */\n  constructor() {\n    super(_ReadyEvent.type);\n  }\n};\n_ReadyEvent.type = \"ready\";\nvar ReadyEvent = _ReadyEvent;\nvar _RenderEvent = class _RenderEvent extends ViewerEvent {\n  /** @internal */\n  constructor() {\n    super(_RenderEvent.type);\n  }\n};\n_RenderEvent.type = \"render\";\nvar RenderEvent = _RenderEvent;\nvar _ShowNotificationEvent = class _ShowNotificationEvent extends ViewerEvent {\n  /** @internal */\n  constructor(notificationId) {\n    super(_ShowNotificationEvent.type);\n    this.notificationId = notificationId;\n  }\n};\n_ShowNotificationEvent.type = \"show-notification\";\nvar ShowNotificationEvent = _ShowNotificationEvent;\nvar _ShowOverlayEvent = class _ShowOverlayEvent extends ViewerEvent {\n  /** @internal */\n  constructor(overlayId) {\n    super(_ShowOverlayEvent.type);\n    this.overlayId = overlayId;\n  }\n};\n_ShowOverlayEvent.type = \"show-overlay\";\nvar ShowOverlayEvent = _ShowOverlayEvent;\nvar _ShowPanelEvent = class _ShowPanelEvent extends ViewerEvent {\n  /** @internal */\n  constructor(panelId) {\n    super(_ShowPanelEvent.type);\n    this.panelId = panelId;\n  }\n};\n_ShowPanelEvent.type = \"show-panel\";\nvar ShowPanelEvent = _ShowPanelEvent;\nvar _ShowTooltipEvent = class _ShowTooltipEvent extends ViewerEvent {\n  /** @internal */\n  constructor(tooltip, tooltipData) {\n    super(_ShowTooltipEvent.type);\n    this.tooltip = tooltip;\n    this.tooltipData = tooltipData;\n  }\n};\n_ShowTooltipEvent.type = \"show-tooltip\";\nvar ShowTooltipEvent = _ShowTooltipEvent;\nvar _SizeUpdatedEvent = class _SizeUpdatedEvent extends ViewerEvent {\n  /** @internal */\n  constructor(size) {\n    super(_SizeUpdatedEvent.type);\n    this.size = size;\n  }\n};\n_SizeUpdatedEvent.type = \"size-updated\";\nvar SizeUpdatedEvent = _SizeUpdatedEvent;\nvar _StopAllEvent = class _StopAllEvent extends ViewerEvent {\n  /** @internal */\n  constructor() {\n    super(_StopAllEvent.type);\n  }\n};\n_StopAllEvent.type = \"stop-all\";\nvar StopAllEvent = _StopAllEvent;\nvar _ZoomUpdatedEvent = class _ZoomUpdatedEvent extends ViewerEvent {\n  /** @internal */\n  constructor(zoomLevel) {\n    super(_ZoomUpdatedEvent.type);\n    this.zoomLevel = zoomLevel;\n  }\n};\n_ZoomUpdatedEvent.type = \"zoom-updated\";\nvar ZoomUpdatedEvent = _ZoomUpdatedEvent;\nvar ObjectEvent = class extends ViewerEvent {\n  /** @internal */\n  constructor(type, originalEvent, object, viewerPoint, userDataKey) {\n    super(type);\n    this.originalEvent = originalEvent;\n    this.object = object;\n    this.viewerPoint = viewerPoint;\n    this.userDataKey = userDataKey;\n  }\n};\nvar _ObjectEnterEvent = class _ObjectEnterEvent extends ObjectEvent {\n  /** @internal */\n  constructor(originalEvent, object, viewerPoint, userDataKey) {\n    super(_ObjectEnterEvent.type, originalEvent, object, viewerPoint, userDataKey);\n  }\n};\n_ObjectEnterEvent.type = \"enter-object\";\nvar ObjectEnterEvent = _ObjectEnterEvent;\nvar _ObjectLeaveEvent = class _ObjectLeaveEvent extends ObjectEvent {\n  /** @internal */\n  constructor(originalEvent, object, viewerPoint, userDataKey) {\n    super(_ObjectLeaveEvent.type, originalEvent, object, viewerPoint, userDataKey);\n  }\n};\n_ObjectLeaveEvent.type = \"leave-object\";\nvar ObjectLeaveEvent = _ObjectLeaveEvent;\nvar _ObjectHoverEvent = class _ObjectHoverEvent extends ObjectEvent {\n  /** @internal */\n  constructor(originalEvent, object, viewerPoint, userDataKey) {\n    super(_ObjectHoverEvent.type, originalEvent, object, viewerPoint, userDataKey);\n  }\n};\n_ObjectHoverEvent.type = \"hover-object\";\nvar ObjectHoverEvent = _ObjectHoverEvent;\n\n// src/adapters/AbstractAdapter.ts\nvar AbstractAdapter = class {\n  constructor(viewer) {\n    this.viewer = viewer;\n  }\n  /**\n   * Initializes the adapter\n   */\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  init() {\n  }\n  /**\n   * Destroys the adapter\n   */\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  destroy() {\n  }\n  /**\n   * Indicates if the adapter supports transitions between panoramas\n   */\n  // @ts-ignore unused parameter\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  supportsTransition(panorama) {\n    return false;\n  }\n  /**\n   * Indicates if the adapter supports preload of a panorama\n   */\n  // @ts-ignore unused parameter\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  supportsPreload(panorama) {\n    return false;\n  }\n  /**\n   * Converts pixel texture coordinates to spherical radians coordinates\n   * @throws {@link PSVError} when the current adapter does not support texture coordinates\n   */\n  // @ts-ignore unused parameter\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  textureCoordsToSphericalCoords(point, data) {\n    throw new PSVError(\"Current adapter does not support texture coordinates.\");\n  }\n  /**\n   * Converts spherical radians coordinates to pixel texture coordinates\n   * @throws {@link PSVError} when the current adapter does not support texture coordinates\n   */\n  // @ts-ignore unused parameter\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  sphericalCoordsToTextureCoords(position, data) {\n    throw new PSVError(\"Current adapter does not support texture coordinates.\");\n  }\n};\n/**\n * Indicates if the adapter supports panorama download natively\n */\nAbstractAdapter.supportsDownload = false;\nfunction adapterInterop(adapter) {\n  if (adapter) {\n    for (const [, p] of [[\"_\", adapter], ...Object.entries(adapter)]) {\n      if (p.prototype instanceof AbstractAdapter) {\n        checkVersion(p.id, p.VERSION, \"5.13.2\");\n        return p;\n      }\n    }\n  }\n  return null;\n}\n\n// src/adapters/DualFisheyeAdapter.ts\nimport { Mesh as Mesh2, MeshBasicMaterial as MeshBasicMaterial2, SphereGeometry as SphereGeometry2 } from \"three\";\n\n// src/adapters/EquirectangularAdapter.ts\nimport { MathUtils as MathUtils4, Mesh, MeshBasicMaterial, SphereGeometry } from \"three\";\n\n// src/data/system.ts\nvar LOCALSTORAGE_TOUCH_SUPPORT = `${VIEWER_DATA}_touchSupport`;\nvar SYSTEM = {\n  /**\n   * Indicates if the system data has been loaded\n   */\n  loaded: false,\n  /**\n   * Device screen pixel ratio\n   */\n  pixelRatio: 1,\n  /**\n   * Device supports WebGL\n   */\n  isWebGLSupported: false,\n  /**\n   * Maximum WebGL texture width\n   */\n  maxTextureWidth: 0,\n  /**\n   * Device supports touch events\n   */\n  isTouchEnabled: null,\n  /**\n   * @internal\n   */\n  __maxCanvasWidth: null,\n  /**\n   * If the current device is an iPhone\n   */\n  isIphone: false,\n  /**\n   * Maximum canvas width\n   */\n  get maxCanvasWidth() {\n    if (this.__maxCanvasWidth === null) {\n      this.__maxCanvasWidth = getMaxCanvasWidth(this.maxTextureWidth);\n    }\n    return this.__maxCanvasWidth;\n  },\n  /**\n   * Loads the system if not already loaded\n   * @internal\n   */\n  load() {\n    if (!this.loaded) {\n      const ctx = getWebGLCtx();\n      this.pixelRatio = window.devicePixelRatio || 1;\n      this.isWebGLSupported = !!ctx;\n      this.maxTextureWidth = ctx ? ctx.getParameter(ctx.MAX_TEXTURE_SIZE) : 0;\n      this.isTouchEnabled = isTouchEnabled();\n      this.isIphone = /iPhone/i.test(navigator.userAgent);\n      this.loaded = true;\n    }\n    if (!SYSTEM.isWebGLSupported) {\n      throw new PSVError(\"WebGL 2 is not supported.\");\n    }\n    if (SYSTEM.maxTextureWidth === 0) {\n      throw new PSVError(\"Unable to detect system capabilities\");\n    }\n  }\n};\nfunction getWebGLCtx() {\n  try {\n    const canvas = document.createElement(\"canvas\");\n    return canvas.getContext(\"webgl2\");\n  } catch {\n    return null;\n  }\n}\nfunction isTouchEnabled() {\n  let initial = \"ontouchstart\" in window || navigator.maxTouchPoints > 0;\n  if (LOCALSTORAGE_TOUCH_SUPPORT in localStorage) {\n    initial = localStorage[LOCALSTORAGE_TOUCH_SUPPORT] === \"true\";\n  }\n  const promise = new Promise((resolve) => {\n    const clear = () => {\n      window.removeEventListener(\"mousedown\", listenerMouse);\n      window.removeEventListener(\"touchstart\", listenerTouch);\n      clearTimeout(listenerTimeoutId);\n    };\n    const listenerMouse = () => {\n      clear();\n      localStorage[LOCALSTORAGE_TOUCH_SUPPORT] = false;\n      resolve(false);\n    };\n    const listenerTouch = () => {\n      clear();\n      localStorage[LOCALSTORAGE_TOUCH_SUPPORT] = true;\n      resolve(true);\n    };\n    const listenerTimeout = () => {\n      clear();\n      localStorage[LOCALSTORAGE_TOUCH_SUPPORT] = initial;\n      resolve(initial);\n    };\n    window.addEventListener(\"mousedown\", listenerMouse, false);\n    window.addEventListener(\"touchstart\", listenerTouch, false);\n    const listenerTimeoutId = setTimeout(listenerTimeout, 1e4);\n  });\n  return { initial, promise };\n}\nfunction getMaxCanvasWidth(maxWidth) {\n  let width = maxWidth;\n  let pass = false;\n  const cropCanvas = document.createElement(\"canvas\");\n  const cropCtx = cropCanvas.getContext(\"2d\");\n  cropCanvas.width = 1;\n  cropCanvas.height = 1;\n  while (width > 1024 && !pass) {\n    const testCanvas = document.createElement(\"canvas\");\n    const testCtx = testCanvas.getContext(\"2d\");\n    testCanvas.width = width;\n    testCanvas.height = width / 2;\n    try {\n      testCtx.fillStyle = \"white\";\n      testCtx.fillRect(width - 1, width / 2 - 1, 1, 1);\n      cropCtx.drawImage(testCanvas, width - 1, width / 2 - 1, 1, 1, 0, 0, 1, 1);\n      if (cropCtx.getImageData(0, 0, 1, 1).data[0] > 0) {\n        pass = true;\n      }\n    } catch {\n    }\n    testCanvas.width = 0;\n    testCanvas.height = 0;\n    if (!pass) {\n      width /= 2;\n    }\n  }\n  if (pass) {\n    return width;\n  } else {\n    throw new PSVError(\"Unable to detect system capabilities\");\n  }\n}\n\n// src/adapters/EquirectangularAdapter.ts\nvar getConfig = getConfigParser(\n  {\n    resolution: 64,\n    useXmpData: true,\n    blur: false\n  },\n  {\n    resolution: (resolution) => {\n      if (!resolution || !MathUtils4.isPowerOfTwo(resolution)) {\n        throw new PSVError(\"EquirectangularAdapter resolution must be power of two.\");\n      }\n      return resolution;\n    }\n  }\n);\nvar EquirectangularAdapter = class extends AbstractAdapter {\n  constructor(viewer, config) {\n    super(viewer);\n    this.config = getConfig(config);\n    this.SPHERE_SEGMENTS = this.config.resolution;\n    this.SPHERE_HORIZONTAL_SEGMENTS = this.SPHERE_SEGMENTS / 2;\n  }\n  supportsTransition() {\n    return true;\n  }\n  supportsPreload() {\n    return true;\n  }\n  textureCoordsToSphericalCoords(point, data) {\n    if (isNil(point.textureX) || isNil(point.textureY)) {\n      throw new PSVError(`Texture position is missing 'textureX' or 'textureY'`);\n    }\n    const relativeX = (point.textureX + data.croppedX) / data.fullWidth * Math.PI * 2;\n    const relativeY = (point.textureY + data.croppedY) / data.fullHeight * Math.PI;\n    return {\n      yaw: relativeX >= Math.PI ? relativeX - Math.PI : relativeX + Math.PI,\n      pitch: Math.PI / 2 - relativeY\n    };\n  }\n  sphericalCoordsToTextureCoords(position, data) {\n    const relativeLong = position.yaw / Math.PI / 2 * data.fullWidth;\n    const relativeLat = position.pitch / Math.PI * data.fullHeight;\n    let textureX = Math.round(position.yaw < Math.PI ? relativeLong + data.fullWidth / 2 : relativeLong - data.fullWidth / 2) - data.croppedX;\n    let textureY = Math.round(data.fullHeight / 2 - relativeLat) - data.croppedY;\n    if (textureX < 0 || textureX > data.croppedWidth || textureY < 0 || textureY > data.croppedHeight) {\n      textureX = textureY = void 0;\n    }\n    return { textureX, textureY };\n  }\n  async loadTexture(panorama, loader = true, newPanoData, useXmpPanoData = this.config.useXmpData) {\n    if (typeof panorama !== \"string\" && (typeof panorama !== \"object\" || !panorama.path)) {\n      return Promise.reject(new PSVError(\"Invalid panorama url, are you using the right adapter?\"));\n    }\n    let cleanPanorama;\n    if (typeof panorama === \"string\") {\n      cleanPanorama = {\n        path: panorama,\n        data: newPanoData\n      };\n    } else {\n      cleanPanorama = {\n        data: newPanoData,\n        ...panorama\n      };\n    }\n    const blob = await this.viewer.textureLoader.loadFile(\n      cleanPanorama.path,\n      loader ? (p) => this.viewer.textureLoader.dispatchProgress(p) : null,\n      cleanPanorama.path\n    );\n    const xmpPanoData = useXmpPanoData ? await this.loadXMP(blob) : null;\n    const img = await this.viewer.textureLoader.blobToImage(blob);\n    if (typeof cleanPanorama.data === \"function\") {\n      cleanPanorama.data = cleanPanorama.data(img, xmpPanoData);\n    }\n    const panoData = mergePanoData(img.width, img.height, cleanPanorama.data, xmpPanoData);\n    const texture = this.createEquirectangularTexture(img);\n    return {\n      panorama,\n      texture,\n      panoData,\n      cacheKey: cleanPanorama.path\n    };\n  }\n  /**\n   * Loads the XMP data of an image\n   */\n  async loadXMP(blob) {\n    const binary = await this.loadBlobAsString(blob);\n    const a = binary.indexOf(\"<x:xmpmeta\");\n    if (a === -1) {\n      return null;\n    }\n    const b = binary.indexOf(\"</x:xmpmeta>\", a);\n    if (b === -1) {\n      return null;\n    }\n    const data = binary.substring(a, b);\n    if (!data.includes(\"GPano:\")) {\n      return null;\n    }\n    return {\n      fullWidth: getXMPValue(data, \"FullPanoWidthPixels\"),\n      fullHeight: getXMPValue(data, \"FullPanoHeightPixels\"),\n      croppedWidth: getXMPValue(data, \"CroppedAreaImageWidthPixels\"),\n      croppedHeight: getXMPValue(data, \"CroppedAreaImageHeightPixels\"),\n      croppedX: getXMPValue(data, \"CroppedAreaLeftPixels\"),\n      croppedY: getXMPValue(data, \"CroppedAreaTopPixels\"),\n      poseHeading: getXMPValue(data, \"PoseHeadingDegrees\", false),\n      posePitch: getXMPValue(data, \"PosePitchDegrees\", false),\n      poseRoll: getXMPValue(data, \"PoseRollDegrees\", false),\n      initialHeading: getXMPValue(data, \"InitialViewHeadingDegrees\", false),\n      initialPitch: getXMPValue(data, \"InitialViewPitchDegrees\", false),\n      initialFov: getXMPValue(data, \"InitialHorizontalFOVDegrees\", false)\n    };\n  }\n  /**\n   * Reads a Blob as a string\n   */\n  loadBlobAsString(blob) {\n    return new Promise((resolve, reject) => {\n      const reader = new FileReader();\n      reader.onload = () => resolve(reader.result);\n      reader.onerror = reject;\n      reader.readAsText(blob);\n    });\n  }\n  /**\n   * Creates the final texture from image and panorama data\n   */\n  createEquirectangularTexture(img) {\n    if (this.config.blur || img.width > SYSTEM.maxTextureWidth) {\n      const ratio = Math.min(1, SYSTEM.maxCanvasWidth / img.width);\n      const buffer = new OffscreenCanvas(Math.floor(img.width * ratio), Math.floor(img.height * ratio));\n      const ctx = buffer.getContext(\"2d\");\n      if (this.config.blur) {\n        ctx.filter = `blur(${buffer.width / 2048}px)`;\n      }\n      ctx.drawImage(img, 0, 0, buffer.width, buffer.height);\n      return createTexture(buffer);\n    }\n    return createTexture(img);\n  }\n  createMesh(panoData) {\n    const hStart = panoData.croppedX / panoData.fullWidth * 2 * Math.PI;\n    const hLength = panoData.croppedWidth / panoData.fullWidth * 2 * Math.PI;\n    const vStart = panoData.croppedY / panoData.fullHeight * Math.PI;\n    const vLength = panoData.croppedHeight / panoData.fullHeight * Math.PI;\n    const geometry = new SphereGeometry(\n      SPHERE_RADIUS,\n      Math.round(this.SPHERE_SEGMENTS / (2 * Math.PI) * hLength),\n      Math.round(this.SPHERE_HORIZONTAL_SEGMENTS / Math.PI * vLength),\n      -Math.PI / 2 + hStart,\n      hLength,\n      vStart,\n      vLength\n    ).scale(-1, 1, 1);\n    const material = new MeshBasicMaterial({ depthTest: false, depthWrite: false });\n    return new Mesh(geometry, material);\n  }\n  setTexture(mesh, textureData) {\n    mesh.material.map = textureData.texture;\n  }\n  setTextureOpacity(mesh, opacity) {\n    mesh.material.opacity = opacity;\n    mesh.material.transparent = opacity < 1;\n  }\n  disposeTexture({ texture }) {\n    texture.dispose();\n  }\n  disposeMesh(mesh) {\n    mesh.geometry.dispose();\n    mesh.material.dispose();\n  }\n};\nEquirectangularAdapter.id = \"equirectangular\";\nEquirectangularAdapter.VERSION = \"5.13.2\";\nEquirectangularAdapter.supportsDownload = true;\n\n// src/adapters/DualFisheyeAdapter.ts\nvar DualFisheyeAdapter = class extends EquirectangularAdapter {\n  constructor(viewer, config) {\n    super(viewer, {\n      resolution: config?.resolution ?? 64,\n      useXmpData: false\n    });\n  }\n  async loadTexture(panorama, loader) {\n    const result = await super.loadTexture(panorama, loader, null, false);\n    result.panoData = null;\n    return result;\n  }\n  createMesh() {\n    const geometry = new SphereGeometry2(\n      SPHERE_RADIUS,\n      this.SPHERE_SEGMENTS,\n      this.SPHERE_HORIZONTAL_SEGMENTS\n    ).scale(-1, 1, 1).toNonIndexed();\n    const uvs = geometry.getAttribute(\"uv\");\n    const normals = geometry.getAttribute(\"normal\");\n    for (let i = 0; i < uvs.count; i++) {\n      for (let j = 0; j < 3; j++) {\n        const index = i * 3 + j;\n        const x = normals.getX(index);\n        const y = normals.getY(index);\n        const z = normals.getZ(index);\n        const c = 0.947;\n        if (i < uvs.count / 6) {\n          const correction = x === 0 && z === 0 ? 1 : Math.acos(y) / Math.sqrt(x * x + z * z) * (2 / Math.PI);\n          uvs.setXY(\n            index,\n            x * (c / 4) * correction + 1 / 4,\n            z * (c / 2) * correction + 1 / 2\n          );\n        } else {\n          const correction = x === 0 && z === 0 ? 1 : Math.acos(-y) / Math.sqrt(x * x + z * z) * (2 / Math.PI);\n          uvs.setXY(\n            index,\n            -x * (c / 4) * correction + 3 / 4,\n            z * (c / 2) * correction + 1 / 2\n          );\n        }\n      }\n    }\n    geometry.rotateX(-Math.PI / 2);\n    geometry.rotateY(Math.PI);\n    const material = new MeshBasicMaterial2({ depthTest: false, depthWrite: false });\n    return new Mesh2(geometry, material);\n  }\n};\nDualFisheyeAdapter.id = \"dual-fisheye\";\nDualFisheyeAdapter.VERSION = \"5.13.2\";\n\n// src/components/AbstractComponent.ts\nvar AbstractComponent = class _AbstractComponent {\n  constructor(parent, config) {\n    this.parent = parent;\n    /**\n     * All child components\n     * @internal\n     */\n    this.children = [];\n    /**\n     * Internal properties\n     * @internal\n     */\n    this.state = {\n      visible: true\n    };\n    this.viewer = parent instanceof _AbstractComponent ? parent.viewer : parent;\n    this.container = document.createElement(config.tagName ?? \"div\");\n    this.container.className = config.className || \"\";\n    this.parent.children.push(this);\n    this.parent.container.appendChild(this.container);\n  }\n  /**\n   * Destroys the component\n   */\n  destroy() {\n    this.parent.container.removeChild(this.container);\n    const childIdx = this.parent.children.indexOf(this);\n    if (childIdx !== -1) {\n      this.parent.children.splice(childIdx, 1);\n    }\n    this.children.slice().forEach((child) => child.destroy());\n    this.children.length = 0;\n  }\n  /**\n   * Displays or hides the component\n   */\n  toggle(visible = !this.isVisible()) {\n    if (!visible) {\n      this.hide();\n    } else {\n      this.show();\n    }\n  }\n  /**\n   * Hides the component\n   */\n  // @ts-ignore unused parameter\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  hide(options) {\n    this.container.style.display = \"none\";\n    this.state.visible = false;\n  }\n  /**\n   * Displays the component\n   */\n  // @ts-ignore unused parameter\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  show(options) {\n    this.container.style.display = \"\";\n    this.state.visible = true;\n  }\n  /**\n   * Checks if the component is visible\n   */\n  isVisible() {\n    return this.state.visible;\n  }\n};\n\n// src/buttons/AbstractButton.ts\nvar getConfig2 = getConfigParser({\n  id: null,\n  tagName: null,\n  className: null,\n  title: null,\n  hoverScale: false,\n  collapsable: false,\n  tabbable: true,\n  icon: null,\n  iconActive: null\n});\nvar AbstractButton = class extends AbstractComponent {\n  constructor(navbar, config) {\n    super(navbar, {\n      tagName: config.tagName,\n      className: `psv-button ${config.hoverScale ? \"psv-button--hover-scale\" : \"\"} ${config.className || \"\"}`\n    });\n    /**\n     * Internal properties\n     */\n    this.state = {\n      visible: true,\n      enabled: true,\n      supported: true,\n      collapsed: false,\n      active: false,\n      width: 0\n    };\n    this.config = getConfig2(config);\n    if (!config.id) {\n      this.config.id = this.constructor.id;\n    }\n    if (config.icon) {\n      this.__setIcon(config.icon);\n    }\n    this.state.width = this.container.offsetWidth;\n    if (this.config.title) {\n      this.container.title = this.viewer.config.lang[this.config.title] ?? this.config.title;\n    } else if (this.id && this.id in this.viewer.config.lang) {\n      this.container.title = this.viewer.config.lang[this.id];\n    }\n    if (config.tabbable) {\n      this.container.tabIndex = 0;\n    }\n    this.container.addEventListener(\"click\", (e) => {\n      if (this.state.enabled) {\n        this.onClick();\n      }\n      e.stopPropagation();\n    });\n    this.container.addEventListener(\"keydown\", (e) => {\n      if (e.key === KEY_CODES.Enter && this.state.enabled) {\n        this.onClick();\n        e.stopPropagation();\n      }\n    });\n  }\n  get id() {\n    return this.config.id;\n  }\n  get title() {\n    return this.container.title;\n  }\n  get content() {\n    return this.container.innerHTML;\n  }\n  get width() {\n    return this.state.width;\n  }\n  get collapsable() {\n    return this.config.collapsable;\n  }\n  show(refresh = true) {\n    if (!this.isVisible()) {\n      this.state.visible = true;\n      if (!this.state.collapsed) {\n        this.container.style.display = \"\";\n      }\n      if (refresh) {\n        this.viewer.navbar.autoSize();\n      }\n    }\n  }\n  hide(refresh = true) {\n    if (this.isVisible()) {\n      this.state.visible = false;\n      this.container.style.display = \"none\";\n      if (refresh) {\n        this.viewer.navbar.autoSize();\n      }\n    }\n  }\n  /**\n   * Hides/shows the button depending of the result of {@link isSupported}\n   * @internal\n   */\n  checkSupported() {\n    resolveBoolean(this.isSupported(), (supported, init) => {\n      if (!this.state) {\n        return;\n      }\n      this.state.supported = supported;\n      if (!init) {\n        this.toggle(supported);\n      } else if (!supported) {\n        this.hide();\n      }\n    });\n  }\n  /**\n   * Perform action when the navbar size/content changes\n   * @internal\n   */\n  autoSize() {\n  }\n  /**\n   * Checks if the button can be displayed\n   */\n  isSupported() {\n    return true;\n  }\n  /**\n   * Changes the active state of the button\n   */\n  toggleActive(active = !this.state.active) {\n    if (active !== this.state.active) {\n      this.state.active = active;\n      toggleClass(this.container, \"psv-button--active\", this.state.active);\n      if (this.config.iconActive) {\n        this.__setIcon(this.state.active ? this.config.iconActive : this.config.icon);\n      }\n    }\n  }\n  /**\n   * Disables the button\n   */\n  disable() {\n    this.container.classList.add(\"psv-button--disabled\");\n    this.state.enabled = false;\n  }\n  /**\n   * Enables the button\n   */\n  enable() {\n    this.container.classList.remove(\"psv-button--disabled\");\n    this.state.enabled = true;\n  }\n  /**\n   * Collapses the button in the navbar menu\n   */\n  collapse() {\n    this.state.collapsed = true;\n    this.container.style.display = \"none\";\n  }\n  /**\n   * Uncollapses the button from the navbar menu\n   */\n  uncollapse() {\n    this.state.collapsed = false;\n    if (this.state.visible) {\n      this.container.style.display = \"\";\n    }\n  }\n  __setIcon(icon) {\n    this.container.innerHTML = icon;\n    addClasses(this.container.querySelector(\"svg\"), \"psv-button-svg\");\n  }\n};\n\n// src/buttons/CustomButton.ts\nvar CustomButton = class extends AbstractButton {\n  constructor(navbar, config) {\n    super(navbar, {\n      id: config.id ?? `psvButton-${Math.random().toString(36).substring(2)}`,\n      className: `psv-custom-button ${config.className || \"\"}`,\n      hoverScale: false,\n      collapsable: config.collapsable !== false,\n      tabbable: config.tabbable !== false,\n      title: config.title\n    });\n    this.customOnClick = config.onClick;\n    if (config.content) {\n      if (typeof config.content === \"string\") {\n        this.container.innerHTML = config.content;\n      } else {\n        this.container.classList.add(\"psv-custom-button--no-padding\");\n        config.content.style.height = \"100%\";\n        config.content.attachViewer?.(this.viewer);\n        this.container.appendChild(config.content);\n      }\n    }\n    this.state.width = this.container.offsetWidth;\n    if (config.disabled) {\n      this.disable();\n    }\n    if (config.visible === false) {\n      this.hide();\n    }\n  }\n  onClick() {\n    this.customOnClick?.(this.viewer);\n  }\n};\n\n// src/buttons/DescriptionButton.ts\nvar DescriptionButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-description-button\",\n      hoverScale: true,\n      collapsable: false,\n      tabbable: true,\n      icon: ICONS.info\n    });\n    this.mode = 0 /* NONE */;\n    this.viewer.addEventListener(HideNotificationEvent.type, this);\n    this.viewer.addEventListener(ShowNotificationEvent.type, this);\n    this.viewer.addEventListener(HidePanelEvent.type, this);\n    this.viewer.addEventListener(ShowPanelEvent.type, this);\n    this.viewer.addEventListener(ConfigChangedEvent.type, this);\n  }\n  destroy() {\n    this.viewer.removeEventListener(HideNotificationEvent.type, this);\n    this.viewer.removeEventListener(ShowNotificationEvent.type, this);\n    this.viewer.removeEventListener(HidePanelEvent.type, this);\n    this.viewer.removeEventListener(ShowPanelEvent.type, this);\n    this.viewer.removeEventListener(ConfigChangedEvent.type, this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    if (e instanceof ConfigChangedEvent) {\n      e.containsOptions(\"description\") && this.autoSize(true);\n      return;\n    }\n    if (!this.mode) {\n      return;\n    }\n    let closed = false;\n    if (e instanceof HideNotificationEvent) {\n      closed = this.mode === 1 /* NOTIF */;\n    } else if (e instanceof ShowNotificationEvent) {\n      closed = this.mode === 1 /* NOTIF */ && e.notificationId !== IDS.DESCRIPTION;\n    } else if (e instanceof HidePanelEvent) {\n      closed = this.mode === 2 /* PANEL */;\n    } else if (e instanceof ShowPanelEvent) {\n      closed = this.mode === 2 /* PANEL */ && e.panelId !== IDS.DESCRIPTION;\n    }\n    if (closed) {\n      this.toggleActive(false);\n      this.mode = 0 /* NONE */;\n    }\n  }\n  onClick() {\n    if (this.mode) {\n      this.__close();\n    } else {\n      this.__open();\n    }\n  }\n  hide(refresh) {\n    super.hide(refresh);\n    if (this.mode) {\n      this.__close();\n    }\n  }\n  /**\n   * This button can only be refreshed from NavbarCaption\n   * @internal\n   */\n  autoSize(refresh = false) {\n    if (refresh) {\n      const caption = this.viewer.navbar.getButton(\"caption\", false);\n      const captionHidden = caption && !caption.isVisible();\n      const hasDescription = !!this.viewer.config.description;\n      if (captionHidden || hasDescription) {\n        this.show(false);\n      } else {\n        this.hide(false);\n      }\n    }\n  }\n  __close() {\n    switch (this.mode) {\n      case 1 /* NOTIF */:\n        this.viewer.notification.hide(IDS.DESCRIPTION);\n        break;\n      case 2 /* PANEL */:\n        this.viewer.panel.hide(IDS.DESCRIPTION);\n        break;\n      default:\n    }\n  }\n  __open() {\n    this.toggleActive(true);\n    if (this.viewer.config.description) {\n      this.mode = 2 /* PANEL */;\n      this.viewer.panel.show({\n        id: IDS.DESCRIPTION,\n        content: `${this.viewer.config.caption ? `<p>${this.viewer.config.caption}</p>` : \"\"}${this.viewer.config.description}`\n      });\n    } else {\n      this.mode = 1 /* NOTIF */;\n      this.viewer.notification.show({\n        id: IDS.DESCRIPTION,\n        content: this.viewer.config.caption\n      });\n    }\n  }\n};\nDescriptionButton.id = \"description\";\n\n// src/buttons/DownloadButton.ts\nvar DownloadButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      tagName: \"a\",\n      className: \"psv-download-button\",\n      hoverScale: true,\n      collapsable: true,\n      tabbable: true,\n      icon: ICONS.download\n    });\n    this.viewer.addEventListener(ConfigChangedEvent.type, this);\n    this.viewer.addEventListener(PanoramaLoadedEvent.type, this);\n  }\n  destroy() {\n    this.viewer.removeEventListener(ConfigChangedEvent.type, this);\n    this.viewer.removeEventListener(PanoramaLoadedEvent.type, this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    if (e instanceof ConfigChangedEvent) {\n      e.containsOptions(\"downloadUrl\") && this.checkSupported();\n      e.containsOptions(\"downloadUrl\", \"downloadName\") && this.__update();\n    } else if (e instanceof PanoramaLoadedEvent) {\n      this.__update();\n    }\n  }\n  onClick() {\n  }\n  checkSupported() {\n    const adapter = this.viewer.adapter.constructor;\n    const supported = adapter.supportsDownload || this.viewer.config.downloadUrl;\n    if (supported) {\n      this.show();\n    } else {\n      this.hide();\n    }\n  }\n  __update() {\n    const link = this.container;\n    link.href = this.viewer.config.downloadUrl || this.viewer.config.panorama;\n    link.target = \"_blank\";\n    if (link.href.startsWith(\"data:\") && !this.viewer.config.downloadName) {\n      link.download = \"panorama.\" + link.href.substring(0, link.href.indexOf(\";\")).split(\"/\").pop();\n    } else {\n      link.download = this.viewer.config.downloadName || link.href.split(\"/\").pop();\n    }\n  }\n};\nDownloadButton.id = \"download\";\n\n// src/buttons/FullscreenButton.ts\nvar FullscreenButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-fullscreen-button\",\n      hoverScale: true,\n      collapsable: false,\n      tabbable: true,\n      icon: ICONS.fullscreenIn,\n      iconActive: ICONS.fullscreenOut\n    });\n    this.viewer.addEventListener(FullscreenEvent.type, this);\n  }\n  destroy() {\n    this.viewer.removeEventListener(FullscreenEvent.type, this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    if (e instanceof FullscreenEvent) {\n      this.toggleActive(e.fullscreenEnabled);\n    }\n  }\n  onClick() {\n    this.viewer.toggleFullscreen();\n  }\n};\nFullscreenButton.id = \"fullscreen\";\n\n// src/buttons/MenuButton.ts\nvar BUTTON_DATA = \"psvButton\";\nvar MENU_TEMPLATE = (buttons, title) => `\n<div class=\"psv-panel-menu psv-panel-menu--stripped\">\n  <h1 class=\"psv-panel-menu-title\">${ICONS.menu} ${title}</h1>\n  <ul class=\"psv-panel-menu-list\">\n    ${buttons.map(\n  (button) => `\n    <li data-psv-button=\"${button.id}\" class=\"psv-panel-menu-item\" tabindex=\"0\">\n      <span class=\"psv-panel-menu-item-icon\">${button.content}</span>\n      <span class=\"psv-panel-menu-item-label\">${button.title}</span>\n    </li>\n    `\n).join(\"\")}\n  </ul>\n</div>\n`;\nvar MenuButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-menu-button\",\n      hoverScale: true,\n      collapsable: false,\n      tabbable: true,\n      icon: ICONS.menu\n    });\n    this.viewer.addEventListener(ShowPanelEvent.type, this);\n    this.viewer.addEventListener(HidePanelEvent.type, this);\n    super.hide();\n  }\n  destroy() {\n    this.viewer.removeEventListener(ShowPanelEvent.type, this);\n    this.viewer.removeEventListener(HidePanelEvent.type, this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    if (e instanceof ShowPanelEvent) {\n      this.toggleActive(e.panelId === IDS.MENU);\n    } else if (e instanceof HidePanelEvent) {\n      this.toggleActive(false);\n    }\n  }\n  onClick() {\n    if (this.state.active) {\n      this.__hideMenu();\n    } else {\n      this.__showMenu();\n    }\n  }\n  hide(refresh) {\n    super.hide(refresh);\n    this.__hideMenu();\n  }\n  show(refresh) {\n    super.show(refresh);\n    if (this.state.active) {\n      this.__showMenu();\n    }\n  }\n  __showMenu() {\n    this.viewer.panel.show({\n      id: IDS.MENU,\n      content: MENU_TEMPLATE(this.viewer.navbar.collapsed, this.viewer.config.lang.menu),\n      noMargin: true,\n      clickHandler: (target) => {\n        const li = target ? getClosest(target, \".psv-panel-menu-item\") : void 0;\n        const buttonId = li ? li.dataset[BUTTON_DATA] : void 0;\n        if (buttonId) {\n          this.viewer.navbar.getButton(buttonId).onClick();\n          this.__hideMenu();\n        }\n      }\n    });\n  }\n  __hideMenu() {\n    this.viewer.panel.hide(IDS.MENU);\n  }\n};\nMenuButton.id = \"menu\";\n\n// src/buttons/AbstractMoveButton.ts\nfunction getIcon(value) {\n  let angle2 = 0;\n  switch (value) {\n    case 0 /* UP */:\n      angle2 = 90;\n      break;\n    case 1 /* DOWN */:\n      angle2 = -90;\n      break;\n    case 3 /* RIGHT */:\n      angle2 = 180;\n      break;\n    default:\n      angle2 = 0;\n      break;\n  }\n  return ICONS.arrow.replace(\"rotate(0\", `rotate(${angle2}`);\n}\nvar AbstractMoveButton = class extends AbstractButton {\n  constructor(navbar, direction) {\n    super(navbar, {\n      className: \"psv-move-button\",\n      hoverScale: true,\n      collapsable: false,\n      tabbable: true,\n      icon: getIcon(direction)\n    });\n    this.direction = direction;\n    this.handler = new PressHandler();\n    this.container.addEventListener(\"mousedown\", this);\n    this.container.addEventListener(\"keydown\", this);\n    this.container.addEventListener(\"keyup\", this);\n    this.viewer.container.addEventListener(\"mouseup\", this);\n    this.viewer.container.addEventListener(\"touchend\", this);\n  }\n  destroy() {\n    this.__onMouseUp();\n    this.viewer.container.removeEventListener(\"mouseup\", this);\n    this.viewer.container.removeEventListener(\"touchend\", this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    switch (e.type) {\n      case \"mousedown\":\n        this.__onMouseDown();\n        break;\n      case \"mouseup\":\n        this.__onMouseUp();\n        break;\n      case \"touchend\":\n        this.__onMouseUp();\n        break;\n      case \"keydown\":\n        e.key === KEY_CODES.Enter && this.__onMouseDown();\n        break;\n      case \"keyup\":\n        e.key === KEY_CODES.Enter && this.__onMouseUp();\n        break;\n    }\n  }\n  onClick() {\n  }\n  isSupported() {\n    return invertResolvableBoolean(SYSTEM.isTouchEnabled);\n  }\n  __onMouseDown() {\n    if (!this.state.enabled) {\n      return;\n    }\n    const dynamicRoll = {};\n    switch (this.direction) {\n      case 0 /* UP */:\n        dynamicRoll.pitch = false;\n        break;\n      case 1 /* DOWN */:\n        dynamicRoll.pitch = true;\n        break;\n      case 3 /* RIGHT */:\n        dynamicRoll.yaw = false;\n        break;\n      default:\n        dynamicRoll.yaw = true;\n        break;\n    }\n    this.viewer.stopAll();\n    this.viewer.dynamics.position.roll(dynamicRoll);\n    this.handler.down();\n  }\n  __onMouseUp() {\n    if (!this.state.enabled) {\n      return;\n    }\n    this.handler.up(() => {\n      this.viewer.dynamics.position.stop();\n      this.viewer.resetIdleTimer();\n    });\n  }\n};\nAbstractMoveButton.groupId = \"move\";\n\n// src/buttons/MoveDownButton.ts\nvar MoveDownButton = class extends AbstractMoveButton {\n  constructor(navbar) {\n    super(navbar, 1 /* DOWN */);\n  }\n};\nMoveDownButton.id = \"moveDown\";\n\n// src/buttons/MoveLeftButton.ts\nvar MoveLeftButton = class extends AbstractMoveButton {\n  constructor(navbar) {\n    super(navbar, 2 /* LEFT */);\n  }\n};\nMoveLeftButton.id = \"moveLeft\";\n\n// src/buttons/MoveRightButton.ts\nvar MoveRightButton = class extends AbstractMoveButton {\n  constructor(navbar) {\n    super(navbar, 3 /* RIGHT */);\n  }\n};\nMoveRightButton.id = \"moveRight\";\n\n// src/buttons/MoveUpButton.ts\nvar MoveUpButton = class extends AbstractMoveButton {\n  constructor(navbar) {\n    super(navbar, 0 /* UP */);\n  }\n};\nMoveUpButton.id = \"moveUp\";\n\n// src/buttons/AbstractZoomButton.ts\nvar AbstractZoomButton = class extends AbstractButton {\n  constructor(navbar, icon, direction) {\n    super(navbar, {\n      className: \"psv-zoom-button\",\n      hoverScale: true,\n      collapsable: false,\n      tabbable: true,\n      icon\n    });\n    this.direction = direction;\n    this.handler = new PressHandler();\n    this.container.addEventListener(\"mousedown\", this);\n    this.container.addEventListener(\"keydown\", this);\n    this.container.addEventListener(\"keyup\", this);\n    this.viewer.container.addEventListener(\"mouseup\", this);\n    this.viewer.container.addEventListener(\"touchend\", this);\n  }\n  destroy() {\n    this.__onMouseUp();\n    this.viewer.container.removeEventListener(\"mouseup\", this);\n    this.viewer.container.removeEventListener(\"touchend\", this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    switch (e.type) {\n      case \"mousedown\":\n        this.__onMouseDown();\n        break;\n      case \"mouseup\":\n        this.__onMouseUp();\n        break;\n      case \"touchend\":\n        this.__onMouseUp();\n        break;\n      case \"keydown\":\n        e.key === KEY_CODES.Enter && this.__onMouseDown();\n        break;\n      case \"keyup\":\n        e.key === KEY_CODES.Enter && this.__onMouseUp();\n        break;\n    }\n  }\n  onClick() {\n  }\n  isSupported() {\n    return invertResolvableBoolean(SYSTEM.isTouchEnabled);\n  }\n  __onMouseDown() {\n    if (!this.state.enabled) {\n      return;\n    }\n    this.viewer.dynamics.zoom.roll(this.direction === 1 /* OUT */);\n    this.handler.down();\n  }\n  __onMouseUp() {\n    if (!this.state.enabled) {\n      return;\n    }\n    this.handler.up(() => this.viewer.dynamics.zoom.stop());\n  }\n};\nAbstractZoomButton.groupId = \"zoom\";\n\n// src/buttons/ZoomInButton.ts\nvar ZoomInButton = class extends AbstractZoomButton {\n  constructor(navbar) {\n    super(navbar, ICONS.zoomIn, 0 /* IN */);\n  }\n};\nZoomInButton.id = \"zoomIn\";\n\n// src/buttons/ZoomOutButton.ts\nvar ZoomOutButton = class extends AbstractZoomButton {\n  constructor(navbar) {\n    super(navbar, ICONS.zoomOut, 1 /* OUT */);\n  }\n};\nZoomOutButton.id = \"zoomOut\";\n\n// src/buttons/ZoomRangeButton.ts\nvar ZoomRangeButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-zoom-range\",\n      hoverScale: false,\n      collapsable: false,\n      tabbable: false\n    });\n    this.zoomRange = document.createElement(\"div\");\n    this.zoomRange.className = \"psv-zoom-range-line\";\n    this.container.appendChild(this.zoomRange);\n    this.zoomValue = document.createElement(\"div\");\n    this.zoomValue.className = \"psv-zoom-range-handle\";\n    this.zoomRange.appendChild(this.zoomValue);\n    this.slider = new Slider(this.container, \"HORIZONTAL\" /* HORIZONTAL */, (data) => this.__onSliderUpdate(data));\n    this.mediaMinWidth = parseInt(getStyleProperty(this.container, \"max-width\"), 10);\n    this.viewer.addEventListener(ZoomUpdatedEvent.type, this);\n    if (this.viewer.state.ready) {\n      this.__moveZoomValue(this.viewer.getZoomLevel());\n    } else {\n      this.viewer.addEventListener(ReadyEvent.type, this);\n    }\n  }\n  destroy() {\n    this.slider.destroy();\n    this.viewer.removeEventListener(ZoomUpdatedEvent.type, this);\n    this.viewer.removeEventListener(ReadyEvent.type, this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    if (e instanceof ZoomUpdatedEvent) {\n      this.__moveZoomValue(e.zoomLevel);\n    } else if (e instanceof ReadyEvent) {\n      this.__moveZoomValue(this.viewer.getZoomLevel());\n    }\n  }\n  onClick() {\n  }\n  isSupported() {\n    return invertResolvableBoolean(SYSTEM.isTouchEnabled);\n  }\n  autoSize() {\n    if (this.state.supported) {\n      if (this.viewer.state.size.width <= this.mediaMinWidth && this.state.visible) {\n        this.hide(false);\n      } else if (this.viewer.state.size.width > this.mediaMinWidth && !this.state.visible) {\n        this.show(false);\n      }\n    }\n  }\n  __moveZoomValue(level) {\n    this.zoomValue.style.left = level / 100 * this.zoomRange.offsetWidth - this.zoomValue.offsetWidth / 2 + \"px\";\n  }\n  __onSliderUpdate(data) {\n    if (data.mousedown) {\n      this.viewer.zoom(data.value * 100);\n    }\n  }\n};\nZoomRangeButton.id = \"zoomRange\";\nZoomRangeButton.groupId = \"zoom\";\n\n// src/data/config.ts\nimport { MathUtils as MathUtils5 } from \"three\";\n\n// src/plugins/AbstractPlugin.ts\nvar AbstractPlugin = class extends TypedEventTarget {\n  constructor(viewer) {\n    super();\n    this.viewer = viewer;\n  }\n  /**\n   * Initializes the plugin\n   */\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  init() {\n  }\n  /**\n   * Destroys the plugin\n   */\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  destroy() {\n  }\n};\nvar AbstractConfigurablePlugin = class extends AbstractPlugin {\n  constructor(viewer, config) {\n    super(viewer);\n    this.config = this.constructor.configParser(config);\n  }\n  /**\n   * Update options\n   */\n  setOption(option, value) {\n    this.setOptions({ [option]: value });\n  }\n  /**\n   * Update options\n   */\n  setOptions(options) {\n    const rawConfig = {\n      ...this.config,\n      ...options\n    };\n    const ctor = this.constructor;\n    const parser = ctor.configParser;\n    const readonly = ctor.readonlyOptions;\n    const id = ctor.id;\n    for (let [key, value] of Object.entries(options)) {\n      if (!(key in parser.defaults)) {\n        logWarn(`${id}: Unknown option \"${key}\"`);\n        continue;\n      }\n      if (readonly.includes(key)) {\n        logWarn(`${id}: Option \"${key}\" cannot be updated`);\n        continue;\n      }\n      if (key in parser.parsers) {\n        value = parser.parsers[key](value, {\n          rawConfig,\n          defValue: parser.defaults[key]\n        });\n      }\n      this.config[key] = value;\n    }\n  }\n};\nAbstractConfigurablePlugin.readonlyOptions = [];\nfunction pluginInterop(plugin) {\n  if (plugin) {\n    for (const [, p] of [[\"_\", plugin], ...Object.entries(plugin)]) {\n      if (p.prototype instanceof AbstractPlugin) {\n        checkVersion(p.id, p.VERSION, \"5.13.2\");\n        return p;\n      }\n    }\n  }\n  return null;\n}\n\n// src/data/config.ts\nvar DEFAULTS = {\n  panorama: null,\n  container: null,\n  adapter: [EquirectangularAdapter, null],\n  plugins: [],\n  caption: null,\n  description: null,\n  downloadUrl: null,\n  downloadName: null,\n  loadingImg: null,\n  loadingTxt: \"\",\n  // empty string => `lang.loading`\n  size: null,\n  fisheye: 0,\n  minFov: 30,\n  maxFov: 90,\n  defaultZoomLvl: 50,\n  defaultYaw: 0,\n  defaultPitch: 0,\n  sphereCorrection: null,\n  moveSpeed: 1,\n  zoomSpeed: 1,\n  moveInertia: 0.8,\n  mousewheel: true,\n  mousemove: true,\n  mousewheelCtrlKey: false,\n  touchmoveTwoFingers: false,\n  panoData: null,\n  requestHeaders: null,\n  canvasBackground: \"#000\",\n  defaultTransition: {\n    speed: 1500,\n    rotation: true,\n    effect: \"fade\"\n  },\n  rendererParameters: { alpha: true, antialias: true },\n  withCredentials: false,\n  navbar: [\n    \"zoom\",\n    \"move\",\n    \"download\",\n    \"description\",\n    \"caption\",\n    \"fullscreen\"\n  ],\n  lang: {\n    zoom: \"Zoom\",\n    zoomOut: \"Zoom out\",\n    zoomIn: \"Zoom in\",\n    moveUp: \"Move up\",\n    moveDown: \"Move down\",\n    moveLeft: \"Move left\",\n    moveRight: \"Move right\",\n    description: \"Description\",\n    download: \"Download\",\n    fullscreen: \"Fullscreen\",\n    loading: \"Loading...\",\n    menu: \"Menu\",\n    close: \"Close\",\n    twoFingers: \"Use two fingers to navigate\",\n    ctrlZoom: \"Use ctrl + scroll to zoom the image\",\n    loadError: \"The panorama cannot be loaded\",\n    webglError: \"Your browser does not seem to support WebGL\"\n  },\n  keyboard: \"fullscreen\",\n  keyboardActions: {\n    [KEY_CODES.ArrowUp]: \"ROTATE_UP\" /* ROTATE_UP */,\n    [KEY_CODES.ArrowDown]: \"ROTATE_DOWN\" /* ROTATE_DOWN */,\n    [KEY_CODES.ArrowRight]: \"ROTATE_RIGHT\" /* ROTATE_RIGHT */,\n    [KEY_CODES.ArrowLeft]: \"ROTATE_LEFT\" /* ROTATE_LEFT */,\n    [KEY_CODES.PageUp]: \"ZOOM_IN\" /* ZOOM_IN */,\n    [KEY_CODES.PageDown]: \"ZOOM_OUT\" /* ZOOM_OUT */,\n    [KEY_CODES.Plus]: \"ZOOM_IN\" /* ZOOM_IN */,\n    [KEY_CODES.Minus]: \"ZOOM_OUT\" /* ZOOM_OUT */\n  }\n};\nvar READONLY_OPTIONS = {\n  panorama: \"Use setPanorama method to change the panorama\",\n  panoData: \"Use setPanorama method to change the panorama\",\n  container: \"Cannot change viewer container\",\n  adapter: \"Cannot change adapter\",\n  plugins: \"Cannot change plugins\"\n};\nvar CONFIG_PARSERS = {\n  container: (container) => {\n    if (!container) {\n      throw new PSVError(\"No value given for container.\");\n    }\n    return container;\n  },\n  adapter: (adapter, { defValue }) => {\n    if (!adapter) {\n      adapter = defValue;\n    } else if (Array.isArray(adapter)) {\n      adapter = [adapterInterop(adapter[0]), adapter[1]];\n    } else {\n      adapter = [adapterInterop(adapter), null];\n    }\n    if (!adapter[0]) {\n      throw new PSVError(\"An undefined value was given for adapter.\");\n    }\n    if (!adapter[0].id) {\n      throw new PSVError(`Adapter has no id.`);\n    }\n    return adapter;\n  },\n  defaultYaw: (defaultYaw) => {\n    return parseAngle(defaultYaw);\n  },\n  defaultPitch: (defaultPitch) => {\n    return parseAngle(defaultPitch, true);\n  },\n  defaultZoomLvl: (defaultZoomLvl) => {\n    return MathUtils5.clamp(defaultZoomLvl, 0, 100);\n  },\n  minFov: (minFov, { rawConfig }) => {\n    if (rawConfig.maxFov < minFov) {\n      logWarn(\"maxFov cannot be lower than minFov\");\n      minFov = rawConfig.maxFov;\n    }\n    return MathUtils5.clamp(minFov, 1, 179);\n  },\n  maxFov: (maxFov, { rawConfig }) => {\n    if (maxFov < rawConfig.minFov) {\n      maxFov = rawConfig.minFov;\n    }\n    return MathUtils5.clamp(maxFov, 1, 179);\n  },\n  moveInertia: (moveInertia, { defValue }) => {\n    if (moveInertia === true) {\n      return defValue;\n    }\n    if (moveInertia === false) {\n      return 0;\n    }\n    return moveInertia;\n  },\n  lang: (lang) => {\n    return {\n      ...DEFAULTS.lang,\n      ...lang\n    };\n  },\n  keyboardActions: (keyboardActions, { rawConfig }) => {\n    if (rawConfig.keyboard && typeof rawConfig.keyboard === \"object\") {\n      return rawConfig.keyboard;\n    }\n    return keyboardActions;\n  },\n  fisheye: (fisheye) => {\n    if (fisheye === true) {\n      return 1;\n    } else if (fisheye === false) {\n      return 0;\n    }\n    return fisheye;\n  },\n  requestHeaders: (requestHeaders) => {\n    if (requestHeaders && typeof requestHeaders === \"object\") {\n      return () => requestHeaders;\n    }\n    if (typeof requestHeaders === \"function\") {\n      return requestHeaders;\n    }\n    return null;\n  },\n  defaultTransition: (defaultTransition, { defValue }) => {\n    if (defaultTransition === null || defaultTransition.speed === 0) {\n      return null;\n    } else {\n      return { ...defValue, ...defaultTransition };\n    }\n  },\n  rendererParameters: (rendererParameters, { defValue }) => ({\n    ...rendererParameters,\n    ...defValue\n  }),\n  plugins: (plugins) => {\n    return plugins.map((plugin, i) => {\n      if (Array.isArray(plugin)) {\n        plugin = [pluginInterop(plugin[0]), plugin[1]];\n      } else {\n        plugin = [pluginInterop(plugin), null];\n      }\n      if (!plugin[0]) {\n        throw new PSVError(`An undefined value was given for plugin ${i}.`);\n      }\n      if (!plugin[0].id) {\n        throw new PSVError(`Plugin ${i} has no id.`);\n      }\n      return plugin;\n    });\n  },\n  navbar: (navbar) => {\n    if (navbar === false) {\n      return null;\n    }\n    if (navbar === true) {\n      return clone(DEFAULTS.navbar);\n    }\n    if (typeof navbar === \"string\") {\n      return navbar.split(/[ ,]/);\n    }\n    return navbar;\n  }\n};\nvar getViewerConfig = getConfigParser(DEFAULTS, CONFIG_PARSERS);\n\n// src/components/NavbarCaption.ts\nvar NavbarCaption = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-caption\",\n      hoverScale: false,\n      collapsable: false,\n      tabbable: true\n    });\n    this.contentWidth = 0;\n    this.state.width = 0;\n    this.contentElt = document.createElement(\"div\");\n    this.contentElt.className = \"psv-caption-content\";\n    this.container.appendChild(this.contentElt);\n    this.setCaption(this.viewer.config.caption);\n  }\n  hide() {\n    this.contentElt.style.display = \"none\";\n    this.state.visible = false;\n  }\n  show() {\n    this.contentElt.style.display = \"\";\n    this.state.visible = true;\n  }\n  onClick() {\n  }\n  /**\n   * Changes the caption\n   */\n  setCaption(html) {\n    this.show();\n    this.contentElt.innerHTML = html ?? \"\";\n    if (this.contentElt.innerHTML) {\n      this.contentWidth = this.contentElt.offsetWidth;\n    } else {\n      this.contentWidth = 0;\n    }\n    this.autoSize();\n  }\n  /**\n   * Toggles content and icon depending on available space\n   */\n  autoSize() {\n    this.toggle(this.container.offsetWidth >= this.contentWidth);\n    this.__refreshButton();\n  }\n  __refreshButton() {\n    this.viewer.navbar.getButton(DescriptionButton.id, false)?.autoSize(true);\n  }\n};\nNavbarCaption.id = \"caption\";\n\n// src/components/Navbar.ts\nvar AVAILABLE_BUTTONS = {};\nvar AVAILABLE_GROUPS = {};\nfunction registerButton(button, defaultPosition) {\n  if (!button.id) {\n    throw new PSVError(\"Button id is required\");\n  }\n  AVAILABLE_BUTTONS[button.id] = button;\n  if (button.groupId) {\n    (AVAILABLE_GROUPS[button.groupId] = AVAILABLE_GROUPS[button.groupId] || []).push(button);\n  }\n  if (defaultPosition) {\n    const navbar = DEFAULTS.navbar;\n    switch (defaultPosition) {\n      case \"start\":\n        navbar.unshift(button.id);\n        break;\n      case \"end\":\n        navbar.push(button.id);\n        break;\n      default: {\n        const [id, pos] = defaultPosition.split(\":\");\n        const idx = navbar.indexOf(id);\n        if (!id || !pos || idx === -1) {\n          throw new PSVError(`Invalid defaultPosition ${defaultPosition}`);\n        }\n        navbar.splice(idx + (pos === \"right\" ? 1 : 0), 0, button.id);\n      }\n    }\n  }\n}\n[\n  ZoomOutButton,\n  ZoomRangeButton,\n  ZoomInButton,\n  DescriptionButton,\n  NavbarCaption,\n  DownloadButton,\n  FullscreenButton,\n  MoveLeftButton,\n  MoveRightButton,\n  MoveUpButton,\n  MoveDownButton\n].forEach((btn) => registerButton(btn));\nvar Navbar = class extends AbstractComponent {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer, {\n      className: `psv-navbar ${CAPTURE_EVENTS_CLASS}`\n    });\n    /**\n     * @internal\n     */\n    this.collapsed = [];\n    this.state.visible = false;\n  }\n  /**\n   * Shows the navbar\n   */\n  show() {\n    this.viewer.container.classList.add(\"psv--has-navbar\");\n    this.container.classList.add(\"psv-navbar--open\");\n    this.state.visible = true;\n  }\n  /**\n   * Hides the navbar\n   */\n  hide() {\n    this.viewer.container.classList.remove(\"psv--has-navbar\");\n    this.container.classList.remove(\"psv-navbar--open\");\n    this.state.visible = false;\n  }\n  /**\n   * Change the buttons visible on the navbar\n   */\n  setButtons(buttons) {\n    this.children.slice().forEach((item) => item.destroy());\n    this.children.length = 0;\n    if (buttons.indexOf(NavbarCaption.id) !== -1 && buttons.indexOf(DescriptionButton.id) === -1) {\n      buttons.splice(buttons.indexOf(NavbarCaption.id), 0, DescriptionButton.id);\n    }\n    buttons.forEach((button) => {\n      if (typeof button === \"object\") {\n        new CustomButton(this, button);\n      } else if (AVAILABLE_BUTTONS[button]) {\n        new AVAILABLE_BUTTONS[button](this);\n      } else if (AVAILABLE_GROUPS[button]) {\n        AVAILABLE_GROUPS[button].forEach((buttonCtor) => {\n          new buttonCtor(this);\n        });\n      } else {\n        logWarn(`Unknown button ${button}`);\n      }\n    });\n    new MenuButton(this);\n    this.children.forEach((item) => {\n      if (item instanceof AbstractButton) {\n        item.checkSupported();\n      }\n    });\n    this.autoSize();\n  }\n  /**\n   * Changes the navbar caption\n   */\n  setCaption(html) {\n    this.children.some((item) => {\n      if (item instanceof NavbarCaption) {\n        item.setCaption(html);\n        return true;\n      } else {\n        return false;\n      }\n    });\n  }\n  /**\n   * Returns a button by its identifier\n   */\n  getButton(id, warnNotFound = true) {\n    const button = this.children.find((item) => {\n      return item instanceof AbstractButton && item.id === id;\n    });\n    if (!button && warnNotFound) {\n      logWarn(`button \"${id}\" not found in the navbar`);\n    }\n    return button;\n  }\n  /**\n   * Try to focus a button, will focus the first button if the requested button does not exist.\n   */\n  focusButton(id) {\n    if (this.isVisible()) {\n      (this.getButton(id, false)?.container || this.container.firstElementChild)?.focus();\n    }\n  }\n  /**\n   * Automatically collapses buttons\n   * @internal\n   */\n  autoSize() {\n    this.children.forEach((child) => {\n      if (child instanceof AbstractButton) {\n        child.autoSize();\n      }\n    });\n    const availableWidth = this.container.offsetWidth;\n    let totalWidth = 0;\n    const collapsableButtons = [];\n    this.children.forEach((item) => {\n      if (item.isVisible() && item instanceof AbstractButton) {\n        totalWidth += item.width;\n        if (item.collapsable) {\n          collapsableButtons.push(item);\n        }\n      }\n    });\n    if (totalWidth === 0) {\n      return;\n    }\n    if (availableWidth < totalWidth && collapsableButtons.length > 0) {\n      collapsableButtons.forEach((item) => item.collapse());\n      this.collapsed = collapsableButtons;\n      this.getButton(MenuButton.id).show(false);\n    } else if (availableWidth >= totalWidth && this.collapsed.length > 0) {\n      this.collapsed.forEach((item) => item.uncollapse());\n      this.collapsed = [];\n      this.getButton(MenuButton.id).hide(false);\n    }\n    this.getButton(NavbarCaption.id, false)?.autoSize();\n  }\n};\n\n// src/data/cache.ts\nimport { Cache as ThreeCache } from \"three\";\nThreeCache.enabled = false;\nvar Cache = {\n  enabled: true,\n  maxItems: 10,\n  ttl: 10 * 60,\n  items: {},\n  purgeInterval: null,\n  init() {\n    if (ThreeCache.enabled) {\n      logWarn(\"ThreeJS cache should be disabled\");\n      ThreeCache.enabled = false;\n    }\n    if (!this.purgeInterval && this.enabled) {\n      this.purgeInterval = setInterval(() => this.purge(), 60 * 1e3);\n    }\n  },\n  add(url, key, data) {\n    if (this.enabled && key) {\n      this.items[key] = this.items[key] ?? { files: {}, lastAccess: null };\n      this.items[key].files[url] = data;\n      this.items[key].lastAccess = Date.now();\n    }\n  },\n  get(url, key) {\n    if (this.enabled && key && this.items[key]) {\n      this.items[key].lastAccess = Date.now();\n      return this.items[key].files[url];\n    }\n  },\n  remove(url, key) {\n    if (this.enabled && key && this.items[key]) {\n      delete this.items[key].files[url];\n      if (Object.keys(this.items[key].files).length === 0) {\n        delete this.items[key];\n      }\n    }\n  },\n  purge() {\n    Object.entries(this.items).sort(([, a], [, b]) => {\n      return b.lastAccess - a.lastAccess;\n    }).forEach(([key, { lastAccess }], index) => {\n      if (index > 0 && (Date.now() - lastAccess >= this.ttl * 1e3 || index >= this.maxItems)) {\n        delete this.items[key];\n      }\n    });\n  }\n};\n\n// src/components/Loader.ts\nimport { MathUtils as MathUtils6 } from \"three\";\nvar Loader = class extends AbstractComponent {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer, { className: \"psv-loader-container\" });\n    this.loader = document.createElement(\"div\");\n    this.loader.className = \"psv-loader\";\n    this.container.appendChild(this.loader);\n    this.size = this.loader.offsetWidth;\n    this.canvas = document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\");\n    this.canvas.setAttribute(\"class\", \"psv-loader-canvas\");\n    this.canvas.setAttribute(\"viewBox\", `0 0 ${this.size} ${this.size}`);\n    this.loader.appendChild(this.canvas);\n    this.textColor = getStyleProperty(this.loader, \"color\");\n    this.color = getStyleProperty(this.canvas, \"color\");\n    this.border = parseInt(getStyleProperty(this.loader, \"--psv-loader-border\"), 10);\n    this.thickness = parseInt(getStyleProperty(this.loader, \"--psv-loader-tickness\"), 10);\n    const halfSize = this.size / 2;\n    this.canvas.innerHTML = `\n            <circle cx=\"${halfSize}\" cy=\"${halfSize}\" r=\"${halfSize}\" fill=\"${this.color}\"/>\n            <path d=\"\" fill=\"none\" stroke=\"${this.textColor}\" stroke-width=\"${this.thickness}\" stroke-linecap=\"round\"/>\n        `;\n    this.viewer.addEventListener(ConfigChangedEvent.type, this);\n    this.__updateContent();\n    this.hide();\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.viewer.removeEventListener(ConfigChangedEvent.type, this);\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    if (e instanceof ConfigChangedEvent) {\n      e.containsOptions(\"loadingImg\", \"loadingTxt\", \"lang\") && this.__updateContent();\n    }\n  }\n  /**\n   * Sets the loader progression\n   */\n  setProgress(value) {\n    this.container.classList.remove(\"psv-loader--undefined\");\n    const angle2 = MathUtils6.clamp(value, 0, 99.999) / 100 * Math.PI * 2;\n    const halfSize = this.size / 2;\n    const startX = halfSize;\n    const startY = this.thickness / 2 + this.border;\n    const radius = (this.size - this.thickness) / 2 - this.border;\n    const endX = Math.sin(angle2) * radius + halfSize;\n    const endY = -Math.cos(angle2) * radius + halfSize;\n    const largeArc = value > 50 ? \"1\" : \"0\";\n    this.canvas.querySelector(\"path\").setAttributeNS(\n      null,\n      \"d\",\n      `M ${startX} ${startY} A ${radius} ${radius} 0 ${largeArc} 1 ${endX} ${endY}`\n    );\n  }\n  /**\n   * Animates the loader with an unknown state\n   */\n  showUndefined() {\n    this.show();\n    this.setProgress(25);\n    this.container.classList.add(\"psv-loader--undefined\");\n  }\n  __updateContent() {\n    const current = this.loader.querySelector(\".psv-loader-image, .psv-loader-text\");\n    if (current) {\n      this.loader.removeChild(current);\n    }\n    let inner;\n    if (this.viewer.config.loadingImg) {\n      inner = document.createElement(\"img\");\n      inner.className = \"psv-loader-image\";\n      inner.src = this.viewer.config.loadingImg;\n    } else if (this.viewer.config.loadingTxt !== null) {\n      inner = document.createElement(\"div\");\n      inner.className = \"psv-loader-text\";\n      inner.innerHTML = this.viewer.config.loadingTxt || this.viewer.config.lang.loading;\n    }\n    if (inner) {\n      const size = Math.round(Math.sqrt(2 * Math.pow(this.size / 2 - this.thickness / 2 - this.border, 2)));\n      inner.style.maxWidth = size + \"px\";\n      inner.style.maxHeight = size + \"px\";\n      this.loader.appendChild(inner);\n    }\n  }\n};\n\n// src/components/Notification.ts\nvar Notification = class extends AbstractComponent {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer, {\n      className: \"psv-notification\"\n    });\n    /**\n     * @internal\n     */\n    this.state = {\n      visible: false,\n      contentId: null,\n      timeout: null\n    };\n    this.content = document.createElement(\"div\");\n    this.content.className = \"psv-notification-content\";\n    this.container.appendChild(this.content);\n    this.content.addEventListener(\"click\", () => this.hide());\n  }\n  /**\n   * Checks if the notification is visible\n   */\n  isVisible(id) {\n    return this.state.visible && (!id || !this.state.contentId || this.state.contentId === id);\n  }\n  /**\n   * @throws {@link PSVError} always\n   * @internal\n   */\n  toggle() {\n    throw new PSVError(\"Notification cannot be toggled\");\n  }\n  /**\n   * Displays a notification on the viewer\n   *\n   * @example\n   * viewer.showNotification({ content: 'Hello world', timeout: 5000 })\n   * @example\n   * viewer.showNotification('Hello world')\n   */\n  show(config) {\n    if (this.state.timeout) {\n      clearTimeout(this.state.timeout);\n      this.state.timeout = null;\n    }\n    if (typeof config === \"string\") {\n      config = { content: config };\n    }\n    this.state.contentId = config.id || null;\n    this.content.innerHTML = config.content;\n    this.container.classList.add(\"psv-notification--visible\");\n    this.state.visible = true;\n    this.viewer.dispatchEvent(new ShowNotificationEvent(this.state.contentId));\n    if (config.timeout) {\n      this.state.timeout = setTimeout(() => this.hide(this.state.contentId), config.timeout);\n    }\n  }\n  /**\n   * Hides the notification\n   */\n  hide(id) {\n    if (this.isVisible(id)) {\n      const contentId = this.state.contentId;\n      this.container.classList.remove(\"psv-notification--visible\");\n      this.state.visible = false;\n      this.state.contentId = null;\n      this.viewer.dispatchEvent(new HideNotificationEvent(contentId));\n    }\n  }\n};\n\n// src/components/Overlay.ts\nvar Overlay = class extends AbstractComponent {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer, {\n      className: `psv-overlay ${CAPTURE_EVENTS_CLASS}`\n    });\n    /**\n     * @internal\n     */\n    this.state = {\n      visible: false,\n      contentId: null,\n      dismissible: true\n    };\n    this.image = document.createElement(\"div\");\n    this.image.className = \"psv-overlay-image\";\n    this.container.appendChild(this.image);\n    this.title = document.createElement(\"div\");\n    this.title.className = \"psv-overlay-title\";\n    this.container.appendChild(this.title);\n    this.text = document.createElement(\"div\");\n    this.text.className = \"psv-overlay-text\";\n    this.container.appendChild(this.text);\n    this.container.addEventListener(\"click\", this);\n    this.viewer.addEventListener(KeypressEvent.type, this);\n    super.hide();\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.viewer.removeEventListener(KeypressEvent.type, this);\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    if (e.type === \"click\") {\n      if (this.isVisible() && this.state.dismissible) {\n        this.hide();\n        e.stopPropagation();\n      }\n    } else if (e instanceof KeypressEvent) {\n      if (this.isVisible() && this.state.dismissible && e.key === KEY_CODES.Escape) {\n        this.hide();\n        e.preventDefault();\n      }\n    }\n  }\n  /**\n   * Checks if the overlay is visible\n   */\n  isVisible(id) {\n    return this.state.visible && (!id || !this.state.contentId || this.state.contentId === id);\n  }\n  /**\n   * @throws {@link PSVError} always\n   * @internal\n   */\n  toggle() {\n    throw new PSVError(\"Overlay cannot be toggled\");\n  }\n  /**\n   * Displays an overlay on the viewer\n   */\n  show(config) {\n    if (typeof config === \"string\") {\n      config = { title: config };\n    }\n    this.state.contentId = config.id || null;\n    this.state.dismissible = config.dismissible !== false;\n    this.image.innerHTML = config.image || \"\";\n    this.title.innerHTML = config.title || \"\";\n    this.text.innerHTML = config.text || \"\";\n    super.show();\n    this.viewer.dispatchEvent(new ShowOverlayEvent(this.state.contentId));\n  }\n  /**\n   * Hides the overlay\n   */\n  hide(id) {\n    if (this.isVisible(id)) {\n      const contentId = this.state.contentId;\n      super.hide();\n      this.state.contentId = null;\n      this.viewer.dispatchEvent(new HideOverlayEvent(contentId));\n    }\n  }\n};\n\n// src/components/Panel.ts\nvar PANEL_MIN_WIDTH = 200;\nvar PANEL_CLASS_NO_INTERACTION = \"psv-panel-content--no-interaction\";\nvar Panel = class extends AbstractComponent {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer, {\n      className: `psv-panel ${CAPTURE_EVENTS_CLASS}`\n    });\n    /**\n     * @internal\n     */\n    this.state = {\n      visible: false,\n      contentId: null,\n      mouseX: 0,\n      mouseY: 0,\n      mousedown: false,\n      clickHandler: null,\n      keyHandler: null,\n      width: {}\n    };\n    const resizer = document.createElement(\"div\");\n    resizer.className = \"psv-panel-resizer\";\n    this.container.appendChild(resizer);\n    const closeBtn = document.createElement(\"div\");\n    closeBtn.className = \"psv-panel-close-button\";\n    closeBtn.innerHTML = ICONS.close;\n    closeBtn.title = viewer.config.lang.close;\n    this.container.appendChild(closeBtn);\n    this.content = document.createElement(\"div\");\n    this.content.className = \"psv-panel-content\";\n    this.container.appendChild(this.content);\n    closeBtn.addEventListener(\"click\", () => this.hide());\n    resizer.addEventListener(\"mousedown\", this);\n    resizer.addEventListener(\"touchstart\", this);\n    this.viewer.container.addEventListener(\"mouseup\", this);\n    this.viewer.container.addEventListener(\"touchend\", this);\n    this.viewer.container.addEventListener(\"mousemove\", this);\n    this.viewer.container.addEventListener(\"touchmove\", this);\n    this.viewer.addEventListener(KeypressEvent.type, this);\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.viewer.removeEventListener(KeypressEvent.type, this);\n    this.viewer.container.removeEventListener(\"mousemove\", this);\n    this.viewer.container.removeEventListener(\"touchmove\", this);\n    this.viewer.container.removeEventListener(\"mouseup\", this);\n    this.viewer.container.removeEventListener(\"touchend\", this);\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case \"mousedown\":\n        this.__onMouseDown(e);\n        break;\n      case \"touchstart\":\n        this.__onTouchStart(e);\n        break;\n      case \"mousemove\":\n        this.__onMouseMove(e);\n        break;\n      case \"touchmove\":\n        this.__onTouchMove(e);\n        break;\n      case \"mouseup\":\n        this.__onMouseUp(e);\n        break;\n      case \"touchend\":\n        this.__onTouchEnd(e);\n        break;\n      case KeypressEvent.type:\n        this.__onKeyPress(e);\n        break;\n    }\n  }\n  /**\n   * Checks if the panel is visible\n   */\n  isVisible(id) {\n    return this.state.visible && (!id || !this.state.contentId || this.state.contentId === id);\n  }\n  /**\n   * @throws {@link PSVError} always\n   * @internal\n   */\n  toggle() {\n    throw new PSVError(\"Panel cannot be toggled\");\n  }\n  /**\n   * Shows the panel\n   */\n  show(config) {\n    if (typeof config === \"string\") {\n      config = { content: config };\n    }\n    const wasVisible = this.isVisible(config.id);\n    this.state.contentId = config.id || null;\n    this.state.visible = true;\n    if (this.state.clickHandler) {\n      this.content.removeEventListener(\"click\", this.state.clickHandler);\n      this.content.removeEventListener(\"keydown\", this.state.keyHandler);\n      this.state.clickHandler = null;\n      this.state.keyHandler = null;\n    }\n    if (config.id && this.state.width[config.id]) {\n      this.container.style.width = this.state.width[config.id];\n    } else if (config.width) {\n      this.container.style.width = config.width;\n    } else {\n      this.container.style.width = null;\n    }\n    this.content.innerHTML = config.content;\n    this.content.scrollTop = 0;\n    this.container.classList.add(\"psv-panel--open\");\n    toggleClass(this.content, \"psv-panel-content--no-margin\", config.noMargin === true);\n    if (config.clickHandler) {\n      this.state.clickHandler = (e) => {\n        config.clickHandler(getEventTarget(e));\n      };\n      this.state.keyHandler = (e) => {\n        if (e.key === KEY_CODES.Enter) {\n          config.clickHandler(getEventTarget(e));\n        }\n      };\n      this.content.addEventListener(\"click\", this.state.clickHandler);\n      this.content.addEventListener(\"keydown\", this.state.keyHandler);\n      if (!wasVisible) {\n        setTimeout(() => {\n          this.content.querySelector(\"a,button,[tabindex]\")?.focus();\n        }, 300);\n      }\n    }\n    this.viewer.dispatchEvent(new ShowPanelEvent(this.state.contentId));\n  }\n  /**\n   * Hides the panel\n   */\n  hide(id) {\n    if (this.isVisible(id)) {\n      const contentId = this.state.contentId;\n      this.state.visible = false;\n      this.state.contentId = null;\n      this.content.innerHTML = null;\n      this.container.classList.remove(\"psv-panel--open\");\n      if (this.state.clickHandler) {\n        this.content.removeEventListener(\"click\", this.state.clickHandler);\n        this.content.removeEventListener(\"keydown\", this.state.keyHandler);\n        this.state.clickHandler = null;\n        this.state.keyHandler = null;\n      }\n      this.viewer.dispatchEvent(new HidePanelEvent(contentId));\n    }\n  }\n  __onMouseDown(evt) {\n    evt.stopPropagation();\n    this.__startResize(evt.clientX, evt.clientY);\n  }\n  __onTouchStart(evt) {\n    evt.stopPropagation();\n    if (evt.touches.length === 1) {\n      const touch = evt.touches[0];\n      this.__startResize(touch.clientX, touch.clientY);\n    }\n  }\n  __onMouseUp(evt) {\n    if (this.state.mousedown) {\n      evt.stopPropagation();\n      this.state.mousedown = false;\n      this.content.classList.remove(PANEL_CLASS_NO_INTERACTION);\n    }\n  }\n  __onTouchEnd(evt) {\n    if (this.state.mousedown) {\n      evt.stopPropagation();\n      if (evt.touches.length === 0) {\n        this.state.mousedown = false;\n        this.content.classList.remove(PANEL_CLASS_NO_INTERACTION);\n      }\n    }\n  }\n  __onMouseMove(evt) {\n    if (this.state.mousedown) {\n      evt.stopPropagation();\n      this.__resize(evt.clientX, evt.clientY);\n    }\n  }\n  __onTouchMove(evt) {\n    if (this.state.mousedown) {\n      const touch = evt.touches[0];\n      this.__resize(touch.clientX, touch.clientY);\n    }\n  }\n  __onKeyPress(evt) {\n    if (this.isVisible() && evt.key === KEY_CODES.Escape) {\n      this.hide();\n      evt.preventDefault();\n    }\n  }\n  __startResize(clientX, clientY) {\n    this.state.mouseX = clientX;\n    this.state.mouseY = clientY;\n    this.state.mousedown = true;\n    this.content.classList.add(PANEL_CLASS_NO_INTERACTION);\n  }\n  __resize(clientX, clientY) {\n    const x = clientX;\n    const y = clientY;\n    const width = Math.max(PANEL_MIN_WIDTH, this.container.offsetWidth - (x - this.state.mouseX)) + \"px\";\n    if (this.state.contentId) {\n      this.state.width[this.state.contentId] = width;\n    }\n    this.container.style.width = width;\n    this.state.mouseX = x;\n    this.state.mouseY = y;\n  }\n};\n\n// src/components/Tooltip.ts\nvar Tooltip = class extends AbstractComponent {\n  /**\n   * @internal\n   */\n  constructor(viewer, config) {\n    super(viewer, {\n      className: \"psv-tooltip\"\n    });\n    /**\n     * @internal\n     */\n    this.state = {\n      visible: true,\n      arrow: 0,\n      border: 0,\n      state: 0 /* NONE */,\n      width: 0,\n      height: 0,\n      pos: \"\",\n      config: null,\n      data: null,\n      hideTimeout: null\n    };\n    this.content = document.createElement(\"div\");\n    this.content.className = \"psv-tooltip-content\";\n    this.container.appendChild(this.content);\n    this.arrow = document.createElement(\"div\");\n    this.arrow.className = \"psv-tooltip-arrow\";\n    this.container.appendChild(this.arrow);\n    this.container.addEventListener(\"transitionend\", this);\n    this.container.addEventListener(\"touchdown\", (e) => e.stopPropagation());\n    this.container.addEventListener(\"mousedown\", (e) => e.stopPropagation());\n    this.container.style.top = \"-1000px\";\n    this.container.style.left = \"-1000px\";\n    this.show(config);\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    if (e.type === \"transitionend\") {\n      this.__onTransitionEnd(e);\n    }\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    clearTimeout(this.state.hideTimeout);\n    delete this.state.data;\n    super.destroy();\n  }\n  /**\n   * @throws {@link PSVError} always\n   * @internal\n   */\n  toggle() {\n    throw new PSVError(\"Tooltip cannot be toggled\");\n  }\n  /**\n   * Displays the tooltip on the viewer\n   * @internal\n   */\n  show(config) {\n    if (this.state.state !== 0 /* NONE */) {\n      throw new PSVError(\"Initialized tooltip cannot be re-initialized\");\n    }\n    if (config.className) {\n      addClasses(this.container, config.className);\n    }\n    if (config.style) {\n      Object.assign(this.container.style, config.style);\n    }\n    this.state.state = 3 /* READY */;\n    this.update(config.content, config);\n    this.state.data = config.data;\n    this.state.state = 1 /* SHOWING */;\n    this.viewer.dispatchEvent(new ShowTooltipEvent(this, this.state.data));\n    this.__waitImages();\n  }\n  /**\n   * Updates the content of the tooltip, optionally with a new position\n   * @throws {@link PSVError} if the configuration is invalid\n   */\n  update(content, config) {\n    this.content.innerHTML = content;\n    const rect = this.container.getBoundingClientRect();\n    this.state.width = rect.right - rect.left;\n    this.state.height = rect.bottom - rect.top;\n    this.state.arrow = parseInt(getStyleProperty(this.arrow, \"border-top-width\"), 10);\n    this.state.border = parseInt(getStyleProperty(this.container, \"border-top-left-radius\"), 10);\n    this.move(config ?? this.state.config);\n    this.__waitImages();\n  }\n  /**\n   * Moves the tooltip to a new position\n   * @throws {@link PSVError} if the configuration is invalid\n   */\n  move(config) {\n    if (this.state.state !== 1 /* SHOWING */ && this.state.state !== 3 /* READY */) {\n      throw new PSVError(\"Uninitialized tooltip cannot be moved\");\n    }\n    config.box = config.box ?? this.state.config?.box ?? { width: 0, height: 0 };\n    this.state.config = config;\n    const t = this.container;\n    const a = this.arrow;\n    const style = {\n      posClass: cleanCssPosition(config.position, { allowCenter: false, cssOrder: false }) || [\"top\", \"center\"],\n      width: this.state.width,\n      height: this.state.height,\n      top: 0,\n      left: 0,\n      arrowTop: 0,\n      arrowLeft: 0\n    };\n    this.__computeTooltipPosition(style, config);\n    let swapY = null;\n    let swapX = null;\n    if (style.top < 0) {\n      swapY = \"bottom\";\n    } else if (style.top + style.height > this.viewer.state.size.height) {\n      swapY = \"top\";\n    }\n    if (style.left < 0) {\n      swapX = \"right\";\n    } else if (style.left + style.width > this.viewer.state.size.width) {\n      swapX = \"left\";\n    }\n    if (swapX || swapY) {\n      const ordered = cssPositionIsOrdered(style.posClass);\n      if (swapY) {\n        style.posClass[ordered ? 0 : 1] = swapY;\n      }\n      if (swapX) {\n        style.posClass[ordered ? 1 : 0] = swapX;\n      }\n      this.__computeTooltipPosition(style, config);\n    }\n    t.style.top = style.top + \"px\";\n    t.style.left = style.left + \"px\";\n    a.style.top = style.arrowTop + \"px\";\n    a.style.left = style.arrowLeft + \"px\";\n    const newPos = style.posClass.join(\"-\");\n    if (newPos !== this.state.pos) {\n      t.classList.remove(`psv-tooltip--${this.state.pos}`);\n      this.state.pos = newPos;\n      t.classList.add(`psv-tooltip--${this.state.pos}`);\n    }\n  }\n  /**\n   * Hides the tooltip\n   */\n  hide() {\n    this.container.classList.remove(\"psv-tooltip--visible\");\n    this.state.state = 2 /* HIDING */;\n    this.viewer.dispatchEvent(new HideTooltipEvent(this.state.data));\n    const duration = parseFloat(getStyleProperty(this.container, \"transition-duration\"));\n    this.state.hideTimeout = setTimeout(() => {\n      this.destroy();\n    }, duration * 2);\n  }\n  /**\n   * Finalize transition\n   */\n  __onTransitionEnd(e) {\n    if (e.propertyName === \"transform\") {\n      switch (this.state.state) {\n        case 1 /* SHOWING */:\n          this.container.classList.add(\"psv-tooltip--visible\");\n          this.state.state = 3 /* READY */;\n          break;\n        case 2 /* HIDING */:\n          this.state.state = 0 /* NONE */;\n          this.destroy();\n          break;\n        default:\n      }\n    }\n  }\n  /**\n   * Computes the position of the tooltip and its arrow\n   */\n  __computeTooltipPosition(style, config) {\n    const arrow = this.state.arrow;\n    const top = config.top;\n    const height = style.height;\n    const left = config.left;\n    const width = style.width;\n    const offsetSide = arrow + this.state.border;\n    const offsetX = config.box.width / 2 + arrow * 2;\n    const offsetY = config.box.height / 2 + arrow * 2;\n    switch (style.posClass.join(\"-\")) {\n      case \"top-left\":\n        style.top = top - offsetY - height;\n        style.left = left + offsetSide - width;\n        style.arrowTop = height;\n        style.arrowLeft = width - offsetSide - arrow;\n        break;\n      case \"top-center\":\n        style.top = top - offsetY - height;\n        style.left = left - width / 2;\n        style.arrowTop = height;\n        style.arrowLeft = width / 2 - arrow;\n        break;\n      case \"top-right\":\n        style.top = top - offsetY - height;\n        style.left = left - offsetSide;\n        style.arrowTop = height;\n        style.arrowLeft = arrow;\n        break;\n      case \"bottom-left\":\n        style.top = top + offsetY;\n        style.left = left + offsetSide - width;\n        style.arrowTop = -arrow * 2;\n        style.arrowLeft = width - offsetSide - arrow;\n        break;\n      case \"bottom-center\":\n        style.top = top + offsetY;\n        style.left = left - width / 2;\n        style.arrowTop = -arrow * 2;\n        style.arrowLeft = width / 2 - arrow;\n        break;\n      case \"bottom-right\":\n        style.top = top + offsetY;\n        style.left = left - offsetSide;\n        style.arrowTop = -arrow * 2;\n        style.arrowLeft = arrow;\n        break;\n      case \"left-top\":\n        style.top = top + offsetSide - height;\n        style.left = left - offsetX - width;\n        style.arrowTop = height - offsetSide - arrow;\n        style.arrowLeft = width;\n        break;\n      case \"center-left\":\n        style.top = top - height / 2;\n        style.left = left - offsetX - width;\n        style.arrowTop = height / 2 - arrow;\n        style.arrowLeft = width;\n        break;\n      case \"left-bottom\":\n        style.top = top - offsetSide;\n        style.left = left - offsetX - width;\n        style.arrowTop = arrow;\n        style.arrowLeft = width;\n        break;\n      case \"right-top\":\n        style.top = top + offsetSide - height;\n        style.left = left + offsetX;\n        style.arrowTop = height - offsetSide - arrow;\n        style.arrowLeft = -arrow * 2;\n        break;\n      case \"center-right\":\n        style.top = top - height / 2;\n        style.left = left + offsetX;\n        style.arrowTop = height / 2 - arrow;\n        style.arrowLeft = -arrow * 2;\n        break;\n      case \"right-bottom\":\n        style.top = top - offsetSide;\n        style.left = left + offsetX;\n        style.arrowTop = arrow;\n        style.arrowLeft = -arrow * 2;\n        break;\n    }\n  }\n  /**\n   * If the tooltip contains images, recompute its size once they are loaded\n   */\n  __waitImages() {\n    const images = this.content.querySelectorAll(\"img\");\n    if (images.length > 0) {\n      const promises = [];\n      images.forEach((image) => {\n        if (!image.complete) {\n          promises.push(\n            new Promise((resolve) => {\n              image.onload = resolve;\n              image.onerror = resolve;\n            })\n          );\n        }\n      });\n      if (promises.length) {\n        Promise.all(promises).then(() => {\n          if (this.state.state === 1 /* SHOWING */ || this.state.state === 3 /* READY */) {\n            const rect = this.container.getBoundingClientRect();\n            this.state.width = rect.right - rect.left;\n            this.state.height = rect.bottom - rect.top;\n            this.move(this.state.config);\n          }\n        });\n      }\n    }\n  }\n};\n\n// src/icons/error.svg\nvar error_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"15 15 70 70\"><path fill=\"currentColor\" d=\"M50,16.2c-18.6,0-33.8,15.1-33.8,33.8S31.4,83.7,50,83.7S83.8,68.6,83.8,50S68.6,16.2,50,16.2z M50,80.2c-16.7,0-30.2-13.6-30.2-30.2S33.3,19.7,50,19.7S80.3,33.3,80.3,50S66.7,80.2,50,80.2z\"/><rect fill=\"currentColor\" x=\"48\" y=\"31.7\" width=\"4\" height=\"28\"/><rect fill=\"currentColor\" x=\"48\" y=\"63.2\" width=\"4\" height=\"5\"/><!--Created by Shastry from the Noun Project--></svg>\\n';\n\n// src/services/DataHelper.ts\nimport { Euler as Euler2, MathUtils as MathUtils7, Vector3 as Vector32 } from \"three\";\n\n// src/services/AbstractService.ts\nvar AbstractService = class {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    this.viewer = viewer;\n    this.config = viewer.config;\n    this.state = viewer.state;\n  }\n  /**\n   * Destroys the service\n   * @internal\n   */\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  destroy() {\n  }\n};\n\n// src/services/DataHelper.ts\nvar vector3 = new Vector32();\nvar EULER_ZERO = new Euler2(0, 0, 0, \"ZXY\");\nvar DataHelper = class extends AbstractService {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer);\n  }\n  /**\n   * Converts vertical FOV to zoom level\n   */\n  fovToZoomLevel(fov) {\n    const temp = Math.round((fov - this.config.minFov) / (this.config.maxFov - this.config.minFov) * 100);\n    return MathUtils7.clamp(temp - 2 * (temp - 50), 0, 100);\n  }\n  /**\n   * Converts zoom level to vertical FOV\n   */\n  zoomLevelToFov(level) {\n    return this.config.maxFov + level / 100 * (this.config.minFov - this.config.maxFov);\n  }\n  /**\n   * Converts vertical FOV to horizontal FOV\n   */\n  vFovToHFov(vFov) {\n    return MathUtils7.radToDeg(2 * Math.atan(Math.tan(MathUtils7.degToRad(vFov) / 2) * this.state.aspect));\n  }\n  /**\n   * Converts horizontal FOV to vertical FOV\n   */\n  hFovToVFov(hFov) {\n    return MathUtils7.radToDeg(2 * Math.atan(Math.tan(MathUtils7.degToRad(hFov) / 2) / this.state.aspect));\n  }\n  /**\n   * @internal\n   */\n  getAnimationProperties(speed, targetPosition, targetZoom) {\n    const positionProvided = !isNil(targetPosition);\n    const zoomProvided = !isNil(targetZoom);\n    const properties = {};\n    let duration = null;\n    if (positionProvided) {\n      const currentPosition = this.viewer.getPosition();\n      const dYaw = getShortestArc(currentPosition.yaw, targetPosition.yaw);\n      properties.yaw = { start: currentPosition.yaw, end: currentPosition.yaw + dYaw };\n      properties.pitch = { start: currentPosition.pitch, end: targetPosition.pitch };\n      duration = speedToDuration(speed, getAngle(currentPosition, targetPosition));\n    }\n    if (zoomProvided) {\n      const currentZoom = this.viewer.getZoomLevel();\n      const dZoom = Math.abs(targetZoom - currentZoom);\n      properties.zoom = { start: currentZoom, end: targetZoom };\n      if (duration === null) {\n        duration = speedToDuration(speed, Math.PI / 4 * dZoom / 100);\n      }\n    }\n    if (duration === null) {\n      if (typeof speed === \"number\") {\n        duration = speed;\n      } else {\n        duration = ANIMATION_MIN_DURATION;\n      }\n    } else {\n      duration = Math.max(ANIMATION_MIN_DURATION, duration);\n    }\n    return { duration, properties };\n  }\n  /**\n   * @internal\n   */\n  getTransitionOptions(options) {\n    let transition;\n    const defaultTransition = this.config.defaultTransition ?? DEFAULTS.defaultTransition;\n    if (options.transition === false || options.transition === null) {\n      transition = null;\n    } else if (options.transition === true) {\n      transition = {\n        ...defaultTransition\n      };\n    } else if (typeof options.transition === \"object\") {\n      transition = {\n        ...defaultTransition,\n        ...options.transition\n      };\n    } else {\n      transition = this.config.defaultTransition;\n    }\n    return transition;\n  }\n  /**\n   * Converts pixel texture coordinates to spherical radians coordinates\n   * @throws {@link PSVError} when the current adapter does not support texture coordinates\n   */\n  textureCoordsToSphericalCoords(point) {\n    if (!this.state.textureData?.panoData) {\n      throw new PSVError(\"Current adapter does not support texture coordinates or no texture has been loaded\");\n    }\n    const result = this.viewer.adapter.textureCoordsToSphericalCoords(point, this.state.textureData.panoData);\n    if (!EULER_ZERO.equals(this.viewer.renderer.panoramaPose) || !EULER_ZERO.equals(this.viewer.renderer.sphereCorrection)) {\n      this.sphericalCoordsToVector3(result, vector3);\n      vector3.applyEuler(this.viewer.renderer.panoramaPose);\n      vector3.applyEuler(this.viewer.renderer.sphereCorrection);\n      return this.vector3ToSphericalCoords(vector3);\n    } else {\n      return result;\n    }\n  }\n  /**\n   * Converts spherical radians coordinates to pixel texture coordinates\n   * @throws {@link PSVError} when the current adapter does not support texture coordinates\n   */\n  sphericalCoordsToTextureCoords(position) {\n    if (!this.state.textureData?.panoData) {\n      throw new PSVError(\"Current adapter does not support texture coordinates or no texture has been loaded\");\n    }\n    if (!EULER_ZERO.equals(this.viewer.renderer.panoramaPose) || !EULER_ZERO.equals(this.viewer.renderer.sphereCorrection)) {\n      this.sphericalCoordsToVector3(position, vector3);\n      applyEulerInverse(vector3, this.viewer.renderer.sphereCorrection);\n      applyEulerInverse(vector3, this.viewer.renderer.panoramaPose);\n      position = this.vector3ToSphericalCoords(vector3);\n    }\n    return this.viewer.adapter.sphericalCoordsToTextureCoords(position, this.state.textureData.panoData);\n  }\n  /**\n   * Converts spherical radians coordinates to a Vector3\n   */\n  sphericalCoordsToVector3(position, vector, distance2 = SPHERE_RADIUS) {\n    if (!vector) {\n      vector = new Vector32();\n    }\n    vector.x = distance2 * -Math.cos(position.pitch) * Math.sin(position.yaw);\n    vector.y = distance2 * Math.sin(position.pitch);\n    vector.z = distance2 * Math.cos(position.pitch) * Math.cos(position.yaw);\n    return vector;\n  }\n  /**\n   * Converts a Vector3 to spherical radians coordinates\n   */\n  vector3ToSphericalCoords(vector) {\n    const phi = Math.acos(vector.y / Math.sqrt(vector.x * vector.x + vector.y * vector.y + vector.z * vector.z));\n    const theta = Math.atan2(vector.x, vector.z);\n    return {\n      yaw: theta < 0 ? -theta : Math.PI * 2 - theta,\n      pitch: Math.PI / 2 - phi\n    };\n  }\n  /**\n   * Converts position on the viewer to a THREE.Vector3\n   */\n  viewerCoordsToVector3(viewerPoint) {\n    const sphereIntersect = this.viewer.renderer.getIntersections(viewerPoint).filter((i) => i.object.userData[VIEWER_DATA]);\n    if (sphereIntersect.length) {\n      return sphereIntersect[0].point;\n    } else {\n      return null;\n    }\n  }\n  /**\n   * Converts position on the viewer to spherical radians coordinates\n   */\n  viewerCoordsToSphericalCoords(viewerPoint) {\n    const vector = this.viewerCoordsToVector3(viewerPoint);\n    return vector ? this.vector3ToSphericalCoords(vector) : null;\n  }\n  /**\n   * Converts a Vector3 to position on the viewer\n   */\n  vector3ToViewerCoords(vector) {\n    const vectorClone = vector.clone();\n    vectorClone.project(this.viewer.renderer.camera);\n    return {\n      x: Math.round((vectorClone.x + 1) / 2 * this.state.size.width),\n      y: Math.round((1 - vectorClone.y) / 2 * this.state.size.height)\n    };\n  }\n  /**\n   * Converts spherical radians coordinates to position on the viewer\n   */\n  sphericalCoordsToViewerCoords(position) {\n    this.sphericalCoordsToVector3(position, vector3);\n    return this.vector3ToViewerCoords(vector3);\n  }\n  /**\n   * @internal\n   */\n  isPointVisible(point) {\n    let vector;\n    let viewerPoint;\n    if (point instanceof Vector32) {\n      vector = point;\n      viewerPoint = this.vector3ToViewerCoords(point);\n    } else if (isExtendedPosition(point)) {\n      vector = this.sphericalCoordsToVector3(point, vector3);\n      viewerPoint = this.vector3ToViewerCoords(vector);\n    } else {\n      return false;\n    }\n    return vector.dot(this.viewer.state.direction) > 0 && viewerPoint.x >= 0 && viewerPoint.x <= this.viewer.state.size.width && viewerPoint.y >= 0 && viewerPoint.y <= this.viewer.state.size.height;\n  }\n  /**\n   * Converts pixel position to angles if present and ensure boundaries\n   */\n  cleanPosition(position) {\n    if (\"yaw\" in position || \"pitch\" in position) {\n      if (!(\"yaw\" in position) || !(\"pitch\" in position)) {\n        throw new PSVError(`Position is missing 'yaw' or 'pitch'`);\n      }\n      return {\n        yaw: parseAngle(position.yaw),\n        pitch: parseAngle(position.pitch, true)\n      };\n    } else {\n      return this.textureCoordsToSphericalCoords(position);\n    }\n  }\n  /**\n   * Ensure a SphereCorrection object is valid\n   */\n  cleanSphereCorrection(sphereCorrection) {\n    return {\n      pan: parseAngle(sphereCorrection?.pan || 0),\n      tilt: parseAngle(sphereCorrection?.tilt || 0, true),\n      roll: parseAngle(sphereCorrection?.roll || 0, true, false)\n    };\n  }\n  /**\n   * Parse the pose angles of the pano data\n   */\n  cleanPanoramaPose(panoData) {\n    return {\n      pan: MathUtils7.degToRad(panoData?.poseHeading || 0),\n      tilt: MathUtils7.degToRad(panoData?.posePitch || 0),\n      roll: MathUtils7.degToRad(panoData?.poseRoll || 0)\n    };\n  }\n  /**\n   * Update the panorama options if the panorama files contains \"InitialView\" metadata\n   */\n  cleanPanoramaOptions(options, panoData) {\n    if (!panoData?.isEquirectangular) {\n      return options;\n    }\n    if (isNil(options.zoom) && !isNil(panoData.initialFov)) {\n      options = {\n        ...options,\n        zoom: this.fovToZoomLevel(this.hFovToVFov(panoData.initialFov))\n      };\n    }\n    if (isNil(options.position) && !isNil(panoData.initialHeading) && !isNil(panoData.initialPitch)) {\n      options = {\n        ...options,\n        position: {\n          yaw: parseAngle(panoData.initialHeading),\n          pitch: parseAngle(panoData.initialPitch, true)\n        }\n      };\n    }\n    return options;\n  }\n};\n\n// src/services/EventsHandler.ts\nimport { MathUtils as MathUtils8 } from \"three\";\n\n// src/icons/gesture.svg\nvar gesture_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 100 100\"><path fill=\"currentColor\" d=\"M33.38 33.2a1.96 1.96 0 0 0 1.5-3.23 10.61 10.61 0 0 1 7.18-17.51c.7-.06 1.31-.49 1.61-1.12a13.02 13.02 0 0 1 11.74-7.43c7.14 0 12.96 5.8 12.96 12.9 0 3.07-1.1 6.05-3.1 8.38-.7.82-.61 2.05.21 2.76.83.7 2.07.6 2.78-.22a16.77 16.77 0 0 0 4.04-10.91C72.3 7.54 64.72 0 55.4 0a16.98 16.98 0 0 0-14.79 8.7 14.6 14.6 0 0 0-12.23 14.36c0 3.46 1.25 6.82 3.5 9.45.4.45.94.69 1.5.69m45.74 43.55a22.13 22.13 0 0 1-5.23 12.4c-4 4.55-9.53 6.86-16.42 6.86-12.6 0-20.1-10.8-20.17-10.91a1.82 1.82 0 0 0-.08-.1c-5.3-6.83-14.55-23.82-17.27-28.87-.05-.1 0-.21.02-.23a6.3 6.3 0 0 1 8.24 1.85l9.38 12.59a1.97 1.97 0 0 0 3.54-1.17V25.34a4 4 0 0 1 1.19-2.87 3.32 3.32 0 0 1 2.4-.95c1.88.05 3.4 1.82 3.4 3.94v24.32a1.96 1.96 0 0 0 3.93 0v-33.1a3.5 3.5 0 0 1 7 0v35.39a1.96 1.96 0 0 0 3.93 0v-.44c.05-2.05 1.6-3.7 3.49-3.7 1.93 0 3.5 1.7 3.5 3.82v5.63c0 .24.04.48.13.71l.1.26a1.97 1.97 0 0 0 3.76-.37c.33-1.78 1.77-3.07 3.43-3.07 1.9 0 3.45 1.67 3.5 3.74l-1.77 18.1zM77.39 51c-1.25 0-2.45.32-3.5.9v-.15c0-4.27-3.33-7.74-7.42-7.74-1.26 0-2.45.33-3.5.9V16.69a7.42 7.42 0 0 0-14.85 0v1.86a7 7 0 0 0-3.28-.94 7.21 7.21 0 0 0-5.26 2.07 7.92 7.92 0 0 0-2.38 5.67v37.9l-5.83-7.82a10.2 10.2 0 0 0-13.35-2.92 4.1 4.1 0 0 0-1.53 5.48C20 64.52 28.74 80.45 34.07 87.34c.72 1.04 9.02 12.59 23.4 12.59 7.96 0 14.66-2.84 19.38-8.2a26.06 26.06 0 0 0 6.18-14.6l1.78-18.2v-.2c0-4.26-3.32-7.73-7.42-7.73z\"/><!--Created by AomAm from the Noun Project--></svg>\\n';\n\n// src/icons/mousewheel.svg\nvar mousewheel_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"10 17 79 79\"><path fill=\"currentColor\" d=\"M38.1 29.27c-.24 0-.44.2-.44.45v10.7a.45.45 0 00.9 0v-10.7c0-.25-.2-.45-.45-.45zm10.2 26.66a11.54 11.54 0 01-8.48-6.14.45.45 0 10-.8.41 12.45 12.45 0 009.22 6.62.45.45 0 00.07-.9zm24.55-13.08a23.04 23.04 0 00-22.56-23v7.07l-.01.05a2.83 2.83 0 012.39 2.78v14.03l.09-.02h8.84v-9.22a.45.45 0 11.9 0v9.22h10.35v-.9zm0 27.33V44.66H62.5c-.02 2.01-.52 4-1.47 5.76a.45.45 0 01-.61.18.45.45 0 01-.19-.61 11.54 11.54 0 001.36-5.33h-8.83l-.1-.01a2.83 2.83 0 01-2.83 2.84h-.04-.04a2.83 2.83 0 01-2.83-2.83v-14.9a2.82 2.82 0 012.47-2.8v-7.11a23.04 23.04 0 00-22.57 23v.91h14.72V29.88a8.2 8.2 0 015.02-7.57c.22-.1.5.01.59.24.1.23-.01.5-.24.6a7.3 7.3 0 00-4.47 6.73v13.88h3.9a.45.45 0 110 .9h-3.9v.15a7.32 7.32 0 0011.23 6.17.45.45 0 01.49.76 8.22 8.22 0 01-12.62-6.93v-.15H26.82v25.52a23.04 23.04 0 0023.01 23.01 23.04 23.04 0 0023.02-23.01zm1.8-27.33v27.33A24.85 24.85 0 0149.84 95a24.85 24.85 0 01-24.82-24.82V42.85a24.85 24.85 0 0124.82-24.82 24.85 24.85 0 0124.83 24.82zM57.98 29.88v9.36a.45.45 0 11-.9 0v-9.36a7.28 7.28 0 00-3.4-6.17.45.45 0 01.49-.76 8.18 8.18 0 013.8 6.93z\"/><!-- Created by Icon Island from the Noun Project --></svg>\\n';\n\n// src/services/EventsHandler.ts\nvar _Step = class _Step {\n  constructor() {\n    this.$ = _Step.IDLE;\n  }\n  is(...steps) {\n    return steps.some((step) => this.$ & step);\n  }\n  set(step) {\n    this.$ = step;\n  }\n  add(step) {\n    this.$ |= step;\n  }\n  remove(step) {\n    this.$ &= ~step;\n  }\n};\n_Step.IDLE = 0;\n_Step.CLICK = 1;\n_Step.MOVING = 2;\nvar Step = _Step;\nvar EventsHandler = class extends AbstractService {\n  constructor(viewer) {\n    super(viewer);\n    this.data = {\n      /** start x position of the click/touch */\n      startMouseX: 0,\n      /** start y position of the click/touch */\n      startMouseY: 0,\n      /** current x position of the cursor */\n      mouseX: 0,\n      /** current y position of the cursor */\n      mouseY: 0,\n      /** current distance between fingers */\n      pinchDist: 0,\n      /** accumulator for smooth movement */\n      moveDelta: { yaw: 0, pitch: 0, zoom: 0 },\n      accumulatorFactor: 0,\n      /** when the Ctrl key is pressed */\n      ctrlKeyDown: false,\n      /** temporary storage of click data between two clicks */\n      dblclickData: null,\n      dblclickTimeout: null,\n      longtouchTimeout: null,\n      twofingersTimeout: null,\n      ctrlZoomTimeout: null\n    };\n    this.step = new Step();\n    this.keyHandler = new PressHandler();\n    this.resizeObserver = new ResizeObserver(throttle(() => this.viewer.autoSize(), 50));\n    this.moveThreshold = MOVE_THRESHOLD * SYSTEM.pixelRatio;\n  }\n  /**\n   * @internal\n   */\n  init() {\n    window.addEventListener(\"keydown\", this, { passive: false });\n    window.addEventListener(\"keyup\", this);\n    this.viewer.container.addEventListener(\"mousedown\", this);\n    window.addEventListener(\"mousemove\", this, { passive: false });\n    window.addEventListener(\"mouseup\", this);\n    this.viewer.container.addEventListener(\"touchstart\", this, { passive: false });\n    window.addEventListener(\"touchmove\", this, { passive: false });\n    window.addEventListener(\"touchend\", this, { passive: false });\n    this.viewer.container.addEventListener(\"wheel\", this, { passive: false });\n    document.addEventListener(\"fullscreenchange\", this);\n    this.resizeObserver.observe(this.viewer.container);\n    this.viewer.addEventListener(BeforeRenderEvent.type, this);\n    this.viewer.addEventListener(StopAllEvent.type, this);\n  }\n  destroy() {\n    window.removeEventListener(\"keydown\", this);\n    window.removeEventListener(\"keyup\", this);\n    this.viewer.container.removeEventListener(\"mousedown\", this);\n    window.removeEventListener(\"mousemove\", this);\n    window.removeEventListener(\"mouseup\", this);\n    this.viewer.container.removeEventListener(\"touchstart\", this);\n    window.removeEventListener(\"touchmove\", this);\n    window.removeEventListener(\"touchend\", this);\n    this.viewer.container.removeEventListener(\"wheel\", this);\n    document.removeEventListener(\"fullscreenchange\", this);\n    this.resizeObserver.disconnect();\n    this.viewer.removeEventListener(BeforeRenderEvent.type, this);\n    this.viewer.removeEventListener(StopAllEvent.type, this);\n    clearTimeout(this.data.dblclickTimeout);\n    clearTimeout(this.data.longtouchTimeout);\n    clearTimeout(this.data.twofingersTimeout);\n    clearTimeout(this.data.ctrlZoomTimeout);\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(evt) {\n    switch (evt.type) {\n      case \"keydown\":\n        this.__onKeyDown(evt);\n        break;\n      case \"keyup\":\n        this.__onKeyUp();\n        break;\n      case \"mousemove\":\n        this.__onMouseMove(evt);\n        break;\n      case \"mouseup\":\n        this.__onMouseUp(evt);\n        break;\n      case \"touchmove\":\n        this.__onTouchMove(evt);\n        break;\n      case \"touchend\":\n        this.__onTouchEnd(evt);\n        break;\n      case \"fullscreenchange\":\n        this.__onFullscreenChange();\n        break;\n      case BeforeRenderEvent.type:\n        this.__applyMoveDelta();\n        break;\n      case StopAllEvent.type:\n        this.__clearMoveDelta();\n        break;\n    }\n    if (!getMatchingTarget(evt, \".\" + CAPTURE_EVENTS_CLASS)) {\n      switch (evt.type) {\n        case \"mousedown\":\n          this.__onMouseDown(evt);\n          break;\n        case \"touchstart\":\n          this.__onTouchStart(evt);\n          break;\n        case \"wheel\":\n          this.__onMouseWheel(evt);\n          break;\n      }\n    }\n  }\n  /**\n   * Handles keyboard events\n   */\n  __onKeyDown(e) {\n    if (this.config.mousewheelCtrlKey) {\n      this.data.ctrlKeyDown = e.key === KEY_CODES.Control;\n      if (this.data.ctrlKeyDown) {\n        clearTimeout(this.data.ctrlZoomTimeout);\n        this.viewer.overlay.hide(IDS.CTRL_ZOOM);\n      }\n    }\n    if (!this.viewer.dispatchEvent(new KeypressEvent(e.key, e))) {\n      return;\n    }\n    if (!this.state.keyboardEnabled) {\n      return;\n    }\n    const action = this.config.keyboardActions?.[e.key];\n    if (typeof action === \"function\") {\n      action(this.viewer, e);\n      e.preventDefault();\n      return;\n    }\n    if (e.ctrlKey || e.altKey || e.shiftKey || e.metaKey) {\n      return;\n    }\n    if (action && !this.keyHandler.pending) {\n      if (action !== \"ZOOM_IN\" /* ZOOM_IN */ && action !== \"ZOOM_OUT\" /* ZOOM_OUT */) {\n        this.viewer.stopAll();\n      }\n      switch (action) {\n        case \"ROTATE_UP\" /* ROTATE_UP */:\n          this.viewer.dynamics.position.roll({ pitch: false });\n          break;\n        case \"ROTATE_DOWN\" /* ROTATE_DOWN */:\n          this.viewer.dynamics.position.roll({ pitch: true });\n          break;\n        case \"ROTATE_RIGHT\" /* ROTATE_RIGHT */:\n          this.viewer.dynamics.position.roll({ yaw: false });\n          break;\n        case \"ROTATE_LEFT\" /* ROTATE_LEFT */:\n          this.viewer.dynamics.position.roll({ yaw: true });\n          break;\n        case \"ZOOM_IN\" /* ZOOM_IN */:\n          this.viewer.dynamics.zoom.roll(false);\n          break;\n        case \"ZOOM_OUT\" /* ZOOM_OUT */:\n          this.viewer.dynamics.zoom.roll(true);\n          break;\n      }\n      this.keyHandler.down(action);\n      e.preventDefault();\n    }\n  }\n  /**\n   * Handles keyboard events\n   */\n  __onKeyUp() {\n    this.data.ctrlKeyDown = false;\n    if (!this.state.keyboardEnabled) {\n      return;\n    }\n    this.keyHandler.up((action) => {\n      if (action === \"ZOOM_IN\" /* ZOOM_IN */ || action === \"ZOOM_OUT\" /* ZOOM_OUT */) {\n        this.viewer.dynamics.zoom.stop();\n      } else {\n        this.viewer.dynamics.position.stop();\n        this.viewer.resetIdleTimer();\n      }\n    });\n  }\n  /**\n   * Handles mouse down events\n   */\n  __onMouseDown(evt) {\n    this.step.add(Step.CLICK);\n    this.data.startMouseX = evt.clientX;\n    this.data.startMouseY = evt.clientY;\n  }\n  /**\n   *Handles mouse up events\n   */\n  __onMouseUp(evt) {\n    if (this.step.is(Step.CLICK, Step.MOVING)) {\n      this.__stopMove(evt.clientX, evt.clientY, evt, evt.button === 2);\n    }\n  }\n  /**\n   * Handles mouse move events\n   */\n  __onMouseMove(evt) {\n    if (this.config.mousemove && this.step.is(Step.CLICK, Step.MOVING)) {\n      evt.preventDefault();\n      this.__doMove(evt.clientX, evt.clientY);\n    }\n    this.__handleObjectsEvents(evt);\n  }\n  /**\n   * Handles touch events\n   */\n  __onTouchStart(evt) {\n    if (evt.touches.length === 1) {\n      this.step.add(Step.CLICK);\n      this.data.startMouseX = evt.touches[0].clientX;\n      this.data.startMouseY = evt.touches[0].clientY;\n      if (!this.data.longtouchTimeout) {\n        this.data.longtouchTimeout = setTimeout(() => {\n          const touch = evt.touches[0];\n          this.__stopMove(touch.clientX, touch.clientY, evt, true);\n          this.data.longtouchTimeout = null;\n        }, LONGTOUCH_DELAY);\n      }\n    } else if (evt.touches.length === 2) {\n      this.step.set(Step.IDLE);\n      this.__cancelLongTouch();\n      if (this.config.mousemove) {\n        this.__cancelTwoFingersOverlay();\n        this.__startMoveZoom(evt);\n        evt.preventDefault();\n      }\n    }\n  }\n  /**\n   * Handles touch events\n   */\n  __onTouchEnd(evt) {\n    this.__cancelLongTouch();\n    if (this.step.is(Step.CLICK, Step.MOVING)) {\n      evt.preventDefault();\n      this.__cancelTwoFingersOverlay();\n      if (evt.touches.length === 1) {\n        this.__stopMove(this.data.mouseX, this.data.mouseY);\n      } else if (evt.touches.length === 0) {\n        const touch = evt.changedTouches[0];\n        this.__stopMove(touch.clientX, touch.clientY, evt);\n      }\n    }\n  }\n  /**\n   * Handles touch move events\n   */\n  __onTouchMove(evt) {\n    this.__cancelLongTouch();\n    if (!this.config.mousemove) {\n      return;\n    }\n    if (evt.touches.length === 1) {\n      if (this.config.touchmoveTwoFingers) {\n        if (this.step.is(Step.CLICK) && !this.data.twofingersTimeout) {\n          this.data.twofingersTimeout = setTimeout(() => {\n            this.viewer.overlay.show({\n              id: IDS.TWO_FINGERS,\n              image: gesture_default,\n              title: this.config.lang.twoFingers\n            });\n          }, TWOFINGERSOVERLAY_DELAY);\n        }\n      } else if (this.step.is(Step.CLICK, Step.MOVING)) {\n        evt.preventDefault();\n        const touch = evt.touches[0];\n        this.__doMove(touch.clientX, touch.clientY);\n      }\n    } else {\n      this.__doMoveZoom(evt);\n      this.__cancelTwoFingersOverlay();\n    }\n  }\n  /**\n   * Cancel the long touch timer if any\n   */\n  __cancelLongTouch() {\n    if (this.data.longtouchTimeout) {\n      clearTimeout(this.data.longtouchTimeout);\n      this.data.longtouchTimeout = null;\n    }\n  }\n  /**\n   * Cancel the two fingers overlay timer if any\n   */\n  __cancelTwoFingersOverlay() {\n    if (this.config.touchmoveTwoFingers) {\n      if (this.data.twofingersTimeout) {\n        clearTimeout(this.data.twofingersTimeout);\n        this.data.twofingersTimeout = null;\n      }\n      this.viewer.overlay.hide(IDS.TWO_FINGERS);\n    }\n  }\n  /**\n   * Handles mouse wheel events\n   */\n  __onMouseWheel(evt) {\n    if (!this.config.mousewheel || !evt.deltaY) {\n      return;\n    }\n    if (this.config.mousewheelCtrlKey && !this.data.ctrlKeyDown) {\n      this.viewer.overlay.show({\n        id: IDS.CTRL_ZOOM,\n        image: mousewheel_default,\n        title: this.config.lang.ctrlZoom\n      });\n      clearTimeout(this.data.ctrlZoomTimeout);\n      this.data.ctrlZoomTimeout = setTimeout(() => this.viewer.overlay.hide(IDS.CTRL_ZOOM), CTRLZOOM_TIMEOUT);\n      return;\n    }\n    evt.preventDefault();\n    evt.stopPropagation();\n    const delta = evt.deltaY / Math.abs(evt.deltaY) * 5 * this.config.zoomSpeed;\n    if (delta !== 0) {\n      this.viewer.dynamics.zoom.step(-delta, 5);\n    }\n  }\n  /**\n   * Handles fullscreen events\n   */\n  __onFullscreenChange() {\n    const fullscreen = this.viewer.isFullscreenEnabled();\n    if (this.config.keyboard === \"fullscreen\") {\n      if (fullscreen) {\n        this.viewer.startKeyboardControl();\n      } else {\n        this.viewer.stopKeyboardControl();\n      }\n    }\n    this.viewer.dispatchEvent(new FullscreenEvent(fullscreen));\n  }\n  /**\n   * Resets all state variables\n   */\n  __resetMove() {\n    this.step.set(Step.IDLE);\n    this.data.mouseX = 0;\n    this.data.mouseY = 0;\n    this.data.startMouseX = 0;\n    this.data.startMouseY = 0;\n  }\n  /**\n   * Initializes the combines move and zoom\n   */\n  __startMoveZoom(evt) {\n    this.viewer.stopAll();\n    this.__resetMove();\n    const touchData = getTouchData(evt);\n    this.step.set(Step.MOVING);\n    this.data.accumulatorFactor = this.config.moveInertia;\n    ({\n      distance: this.data.pinchDist,\n      center: { x: this.data.mouseX, y: this.data.mouseY }\n    } = touchData);\n  }\n  /**\n   * Stops the movement\n   * @description If the move threshold was not reached a click event is triggered\n   */\n  __stopMove(clientX, clientY, event, rightclick = false) {\n    if (this.step.is(Step.CLICK) && !this.__moveThresholdReached(clientX, clientY)) {\n      this.__doClick(clientX, clientY, event, rightclick);\n    }\n    if (this.config.moveInertia) {\n      this.data.accumulatorFactor = Math.pow(this.config.moveInertia, 0.5);\n    }\n    this.__resetMove();\n    this.viewer.resetIdleTimer();\n  }\n  /**\n   * Triggers an event with all coordinates when a simple click is performed\n   */\n  __doClick(clientX, clientY, event, rightclick = false) {\n    const boundingRect = this.viewer.container.getBoundingClientRect();\n    const viewerX = clientX - boundingRect.left;\n    const viewerY = clientY - boundingRect.top;\n    const intersections = this.viewer.renderer.getIntersections({ x: viewerX, y: viewerY });\n    const sphereIntersection = intersections.find((i) => i.object.userData[VIEWER_DATA]);\n    if (sphereIntersection) {\n      const sphericalCoords = this.viewer.dataHelper.vector3ToSphericalCoords(sphereIntersection.point);\n      const data = {\n        rightclick,\n        originalEvent: event,\n        target: getEventTarget(event),\n        clientX,\n        clientY,\n        viewerX,\n        viewerY,\n        yaw: sphericalCoords.yaw,\n        pitch: sphericalCoords.pitch,\n        objects: intersections.map((i) => i.object).filter((o) => !o.userData[VIEWER_DATA])\n      };\n      try {\n        const textureCoords = this.viewer.dataHelper.sphericalCoordsToTextureCoords(data);\n        Object.assign(data, textureCoords);\n      } catch {\n      }\n      if (!this.data.dblclickTimeout) {\n        this.viewer.dispatchEvent(new ClickEvent(data));\n        this.data.dblclickData = clone(data);\n        this.data.dblclickTimeout = setTimeout(() => {\n          this.data.dblclickTimeout = null;\n          this.data.dblclickData = null;\n        }, DBLCLICK_DELAY);\n      } else {\n        if (Math.abs(this.data.dblclickData.clientX - data.clientX) < this.moveThreshold && Math.abs(this.data.dblclickData.clientY - data.clientY) < this.moveThreshold) {\n          this.viewer.dispatchEvent(new DoubleClickEvent(this.data.dblclickData));\n        }\n        clearTimeout(this.data.dblclickTimeout);\n        this.data.dblclickTimeout = null;\n        this.data.dblclickData = null;\n      }\n    }\n  }\n  /**\n   * Trigger events for observed THREE objects\n   */\n  __handleObjectsEvents(evt) {\n    if (!isEmpty(this.state.objectsObservers) && evt.composedPath().includes(this.viewer.container)) {\n      const viewerPos = getPosition(this.viewer.container);\n      const viewerPoint = {\n        x: evt.clientX - viewerPos.x,\n        y: evt.clientY - viewerPos.y\n      };\n      const intersections = this.viewer.renderer.getIntersections(viewerPoint);\n      const emit = (object, key, evtCtor) => {\n        this.viewer.dispatchEvent(new evtCtor(evt, object, viewerPoint, key));\n      };\n      for (const [key, object] of Object.entries(this.state.objectsObservers)) {\n        const intersection = intersections.find((i) => i.object.userData[key]);\n        if (intersection) {\n          if (object && intersection.object !== object) {\n            emit(object, key, ObjectLeaveEvent);\n            this.state.objectsObservers[key] = null;\n          }\n          if (!object) {\n            this.state.objectsObservers[key] = intersection.object;\n            emit(intersection.object, key, ObjectEnterEvent);\n          } else {\n            emit(intersection.object, key, ObjectHoverEvent);\n          }\n        } else if (object) {\n          emit(object, key, ObjectLeaveEvent);\n          this.state.objectsObservers[key] = null;\n        }\n      }\n    }\n  }\n  /**\n   * Starts moving when crossing moveThreshold and performs movement\n   */\n  __doMove(clientX, clientY) {\n    if (this.step.is(Step.CLICK) && this.__moveThresholdReached(clientX, clientY)) {\n      this.viewer.stopAll();\n      this.__resetMove();\n      this.step.set(Step.MOVING);\n      this.data.mouseX = clientX;\n      this.data.mouseY = clientY;\n      this.data.accumulatorFactor = this.config.moveInertia;\n    } else if (this.step.is(Step.MOVING)) {\n      const x = (clientX - this.data.mouseX) * Math.cos(this.state.roll) - (clientY - this.data.mouseY) * Math.sin(this.state.roll);\n      const y = (clientY - this.data.mouseY) * Math.cos(this.state.roll) + (clientX - this.data.mouseX) * Math.sin(this.state.roll);\n      const rotation = {\n        yaw: this.config.moveSpeed * (x / this.state.size.width) * MathUtils8.degToRad(this.state.hFov),\n        pitch: this.config.moveSpeed * (y / this.state.size.height) * MathUtils8.degToRad(this.state.vFov)\n      };\n      this.data.moveDelta.yaw += rotation.yaw;\n      this.data.moveDelta.pitch += rotation.pitch;\n      this.data.mouseX = clientX;\n      this.data.mouseY = clientY;\n    }\n  }\n  /**\n   * Checks if the cursor was move beyond the move threshold\n   */\n  __moveThresholdReached(clientX, clientY) {\n    return Math.abs(clientX - this.data.startMouseX) >= this.moveThreshold || Math.abs(clientY - this.data.startMouseY) >= this.moveThreshold;\n  }\n  /**\n   * Perfoms combined move and zoom\n   */\n  __doMoveZoom(evt) {\n    if (this.step.is(Step.MOVING)) {\n      evt.preventDefault();\n      const touchData = getTouchData(evt);\n      this.__doMove(touchData.center.x, touchData.center.y);\n      this.data.moveDelta.zoom += this.config.zoomSpeed * ((touchData.distance - this.data.pinchDist) / SYSTEM.pixelRatio);\n      this.data.pinchDist = touchData.distance;\n    }\n  }\n  __applyMoveDelta() {\n    const EPS = 1e-3;\n    if (Math.abs(this.data.moveDelta.yaw) > 0 || Math.abs(this.data.moveDelta.pitch) > 0) {\n      const currentPosition = this.viewer.getPosition();\n      this.viewer.rotate({\n        yaw: currentPosition.yaw - this.data.moveDelta.yaw * (1 - this.config.moveInertia),\n        pitch: currentPosition.pitch + this.data.moveDelta.pitch * (1 - this.config.moveInertia)\n      });\n      this.data.moveDelta.yaw *= this.data.accumulatorFactor;\n      this.data.moveDelta.pitch *= this.data.accumulatorFactor;\n      if (Math.abs(this.data.moveDelta.yaw) <= EPS) {\n        this.data.moveDelta.yaw = 0;\n      }\n      if (Math.abs(this.data.moveDelta.pitch) <= EPS) {\n        this.data.moveDelta.pitch = 0;\n      }\n    }\n    if (Math.abs(this.data.moveDelta.zoom) > 0) {\n      const currentZoom = this.viewer.getZoomLevel();\n      this.viewer.zoom(currentZoom + this.data.moveDelta.zoom * (1 - this.config.moveInertia));\n      this.data.moveDelta.zoom *= this.config.moveInertia;\n      if (Math.abs(this.data.moveDelta.zoom) <= EPS) {\n        this.data.moveDelta.zoom = 0;\n      }\n    }\n  }\n  __clearMoveDelta() {\n    this.data.moveDelta.yaw = 0;\n    this.data.moveDelta.pitch = 0;\n    this.data.moveDelta.zoom = 0;\n  }\n};\n\n// src/services/Renderer.ts\nimport {\n  Box3,\n  ColorManagement,\n  Frustum,\n  Group,\n  LinearSRGBColorSpace,\n  LinearToneMapping,\n  MathUtils as MathUtils9,\n  Matrix4,\n  Mesh as Mesh4,\n  MeshBasicMaterial as MeshBasicMaterial3,\n  PerspectiveCamera,\n  Raycaster,\n  Scene,\n  SphereGeometry as SphereGeometry3,\n  Vector2,\n  Vector3 as Vector33,\n  WebGLRenderTarget,\n  WebGLRenderer\n} from \"three\";\nColorManagement.enabled = false;\nvar vector2 = new Vector2();\nvar matrix4 = new Matrix4();\nvar box3 = new Box3();\nvar Renderer = class extends AbstractService {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer);\n    this.frustumNeedsUpdate = true;\n    this.renderer = new WebGLRenderer(this.config.rendererParameters);\n    this.renderer.setPixelRatio(SYSTEM.pixelRatio);\n    this.renderer.outputColorSpace = LinearSRGBColorSpace;\n    this.renderer.toneMapping = LinearToneMapping;\n    this.renderer.domElement.className = \"psv-canvas\";\n    this.renderer.domElement.style.background = this.config.canvasBackground;\n    this.scene = new Scene();\n    this.camera = new PerspectiveCamera(50, 16 / 9, 0.1, 2 * SPHERE_RADIUS);\n    this.camera.matrixAutoUpdate = false;\n    const raycasterMesh = new Mesh4(\n      new SphereGeometry3(SPHERE_RADIUS).scale(-1, 1, 1),\n      new MeshBasicMaterial3({ opacity: 0, transparent: true, depthTest: false, depthWrite: false })\n    );\n    raycasterMesh.userData = { [VIEWER_DATA]: true };\n    this.scene.add(raycasterMesh);\n    this.raycaster = new Raycaster();\n    this.frustum = new Frustum();\n    this.container = document.createElement(\"div\");\n    this.container.className = \"psv-canvas-container\";\n    this.container.appendChild(this.renderer.domElement);\n    this.viewer.container.appendChild(this.container);\n    this.container.addEventListener(\"contextmenu\", (e) => e.preventDefault());\n    this.viewer.addEventListener(SizeUpdatedEvent.type, this);\n    this.viewer.addEventListener(ZoomUpdatedEvent.type, this);\n    this.viewer.addEventListener(PositionUpdatedEvent.type, this);\n    this.viewer.addEventListener(RollUpdatedEvent.type, this);\n    this.viewer.addEventListener(ConfigChangedEvent.type, this);\n    this.hide();\n  }\n  get panoramaPose() {\n    return this.mesh.rotation;\n  }\n  get sphereCorrection() {\n    return this.meshContainer.rotation;\n  }\n  /**\n   * @internal\n   */\n  init() {\n    this.show();\n    this.renderer.setAnimationLoop((t) => this.__renderLoop(t));\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.renderer.setAnimationLoop(null);\n    this.cleanScene(this.scene);\n    this.renderer.dispose();\n    this.viewer.container.removeChild(this.container);\n    this.viewer.removeEventListener(SizeUpdatedEvent.type, this);\n    this.viewer.removeEventListener(ZoomUpdatedEvent.type, this);\n    this.viewer.removeEventListener(PositionUpdatedEvent.type, this);\n    this.viewer.removeEventListener(RollUpdatedEvent.type, this);\n    this.viewer.removeEventListener(ConfigChangedEvent.type, this);\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case SizeUpdatedEvent.type:\n        this.__onSizeUpdated();\n        break;\n      case ZoomUpdatedEvent.type:\n        this.__onZoomUpdated();\n        break;\n      case PositionUpdatedEvent.type:\n        this.__onPositionUpdated();\n        break;\n      case RollUpdatedEvent.type:\n        this.__onPositionUpdated();\n        break;\n      case ConfigChangedEvent.type:\n        if (e.containsOptions(\"fisheye\")) {\n          this.__onPositionUpdated();\n        }\n        if (e.containsOptions(\"canvasBackground\")) {\n          this.renderer.domElement.style.background = this.config.canvasBackground;\n        }\n        break;\n    }\n  }\n  /**\n   * Hides the viewer\n   */\n  hide() {\n    this.container.style.opacity = \"0\";\n  }\n  /**\n   * Shows the viewer\n   */\n  show() {\n    this.container.style.opacity = \"1\";\n  }\n  /**\n   * Resets or replaces the THREE renderer by a custom one\n   */\n  setCustomRenderer(factory) {\n    if (factory) {\n      this.customRenderer = factory(this.renderer);\n    } else {\n      this.customRenderer = null;\n    }\n    this.viewer.needsUpdate();\n  }\n  /**\n   * Updates the size of the renderer and the aspect of the camera\n   */\n  __onSizeUpdated() {\n    this.renderer.setSize(this.state.size.width, this.state.size.height);\n    this.camera.aspect = this.state.aspect;\n    this.camera.updateProjectionMatrix();\n    this.viewer.needsUpdate();\n    this.frustumNeedsUpdate = true;\n  }\n  /**\n   * Updates the fov of the camera\n   */\n  __onZoomUpdated() {\n    this.camera.fov = this.state.vFov;\n    this.camera.updateProjectionMatrix();\n    this.viewer.needsUpdate();\n    this.frustumNeedsUpdate = true;\n  }\n  /**\n   * Updates the position of the camera\n   */\n  __onPositionUpdated() {\n    this.camera.position.set(0, 0, 0);\n    this.camera.lookAt(this.state.direction);\n    if (this.config.fisheye) {\n      this.camera.position.copy(this.state.direction).multiplyScalar(this.config.fisheye / 2).negate();\n    }\n    this.camera.rotateZ(-this.state.roll);\n    this.camera.updateMatrix();\n    this.camera.updateMatrixWorld();\n    this.viewer.needsUpdate();\n    this.frustumNeedsUpdate = true;\n  }\n  /**\n   * Main event loop, performs a render if `state.needsUpdate` is true\n   */\n  __renderLoop(timestamp) {\n    const elapsed = !this.timestamp ? 0 : timestamp - this.timestamp;\n    this.timestamp = timestamp;\n    this.viewer.dispatchEvent(new BeforeRenderEvent(timestamp, elapsed));\n    this.viewer.dynamics.update(elapsed);\n    if (this.state.needsUpdate || this.state.continuousUpdateCount > 0) {\n      this.state.needsUpdate = false;\n      (this.customRenderer || this.renderer).render(this.scene, this.camera);\n      this.viewer.dispatchEvent(new RenderEvent());\n    }\n  }\n  /**\n   * Applies the texture to the scene, creates the scene if needed\n   * @internal\n   */\n  setTexture(textureData) {\n    if (!this.meshContainer) {\n      this.meshContainer = new Group();\n      this.scene.add(this.meshContainer);\n    }\n    if (this.state.textureData) {\n      this.viewer.adapter.disposeTexture(this.state.textureData);\n    }\n    if (this.mesh) {\n      this.meshContainer.remove(this.mesh);\n      this.viewer.adapter.disposeMesh(this.mesh);\n    }\n    this.mesh = this.viewer.adapter.createMesh(textureData.panoData);\n    this.viewer.adapter.setTexture(this.mesh, textureData, false);\n    this.meshContainer.add(this.mesh);\n    this.state.textureData = textureData;\n    this.viewer.needsUpdate();\n  }\n  /**\n   * Applies a panorama data pose to a Mesh\n   * @internal\n   */\n  setPanoramaPose(panoData, mesh = this.mesh) {\n    const cleanCorrection = this.viewer.dataHelper.cleanPanoramaPose(panoData);\n    mesh.rotation.set(cleanCorrection.tilt, cleanCorrection.pan, cleanCorrection.roll, \"YXZ\");\n  }\n  /**\n   * Applies a SphereCorrection to a Group\n   * @internal\n   */\n  setSphereCorrection(sphereCorrection, group = this.meshContainer) {\n    const cleanCorrection = this.viewer.dataHelper.cleanSphereCorrection(sphereCorrection);\n    group.rotation.set(cleanCorrection.tilt, cleanCorrection.pan, cleanCorrection.roll, \"YXZ\");\n  }\n  /**\n   * Performs transition between the current and a new texture\n   * @internal\n   */\n  transition(textureData, options, transition) {\n    const zoomTransition = transition.effect === \"fade\" || transition.rotation;\n    const positionProvided = !isNil(options.position);\n    const zoomProvided = !isNil(options.zoom);\n    const e = new BeforeAnimateEvent(\n      positionProvided ? this.viewer.dataHelper.cleanPosition(options.position) : void 0,\n      options.zoom\n    );\n    this.viewer.dispatchEvent(e);\n    const tempContainer = new Group();\n    const newMesh = this.viewer.adapter.createMesh(textureData.panoData);\n    this.viewer.adapter.setTexture(newMesh, textureData, true);\n    this.viewer.adapter.setTextureOpacity(newMesh, 0);\n    this.setPanoramaPose(textureData.panoData, newMesh);\n    this.setSphereCorrection(options.sphereCorrection, tempContainer);\n    if (positionProvided && !transition.rotation) {\n      const currentPosition = this.viewer.getPosition();\n      const verticalAxis = new Vector33(0, 1, 0);\n      tempContainer.rotateOnWorldAxis(verticalAxis, e.position.yaw - currentPosition.yaw);\n      const horizontalAxis = new Vector33(0, 1, 0).cross(this.camera.getWorldDirection(new Vector33())).normalize();\n      tempContainer.rotateOnWorldAxis(horizontalAxis, e.position.pitch - currentPosition.pitch);\n    }\n    tempContainer.add(newMesh);\n    this.scene.add(tempContainer);\n    this.renderer.setRenderTarget(new WebGLRenderTarget());\n    this.renderer.render(this.scene, this.camera);\n    this.renderer.setRenderTarget(null);\n    const { duration, properties } = this.viewer.dataHelper.getAnimationProperties(\n      transition.speed,\n      transition.rotation ? e.position : null,\n      zoomTransition ? e.zoomLevel : null\n    );\n    const animation = new Animation({\n      properties: {\n        ...properties,\n        opacity: { start: 0, end: 1 }\n      },\n      duration,\n      easing: \"inOutCubic\",\n      onTick: (props) => {\n        switch (transition.effect) {\n          case \"fade\":\n            this.viewer.adapter.setTextureOpacity(newMesh, props.opacity);\n            break;\n          case \"black\":\n          case \"white\":\n            if (props.opacity < 0.5) {\n              this.renderer.toneMappingExposure = transition.effect === \"black\" ? MathUtils9.mapLinear(props.opacity, 0, 0.5, 1, 0) : MathUtils9.mapLinear(props.opacity, 0, 0.5, 1, 4);\n            } else {\n              this.renderer.toneMappingExposure = transition.effect === \"black\" ? MathUtils9.mapLinear(props.opacity, 0.5, 1, 0, 1) : MathUtils9.mapLinear(props.opacity, 0.5, 1, 4, 1);\n              this.mesh.visible = false;\n              this.viewer.adapter.setTextureOpacity(newMesh, 1);\n              if (zoomProvided && !zoomTransition) {\n                this.viewer.dynamics.zoom.setValue(e.zoomLevel);\n              }\n            }\n            break;\n        }\n        if (positionProvided && transition.rotation) {\n          this.viewer.dynamics.position.setValue({\n            yaw: props.yaw,\n            pitch: props.pitch\n          });\n        }\n        if (zoomProvided && zoomTransition) {\n          this.viewer.dynamics.zoom.setValue(props.zoom);\n        }\n        this.viewer.needsUpdate();\n      }\n    });\n    animation.then((completed) => {\n      tempContainer.remove(newMesh);\n      this.scene.remove(tempContainer);\n      if (completed) {\n        this.viewer.adapter.disposeTexture(this.state.textureData);\n        this.meshContainer.remove(this.mesh);\n        this.viewer.adapter.disposeMesh(this.mesh);\n        this.mesh = newMesh;\n        this.meshContainer.add(newMesh);\n        this.state.textureData = textureData;\n        this.setPanoramaPose(textureData.panoData);\n        this.setSphereCorrection(options.sphereCorrection);\n        if (positionProvided && !transition.rotation) {\n          this.viewer.rotate(options.position);\n        }\n      } else {\n        this.viewer.adapter.disposeTexture(textureData);\n        this.viewer.adapter.disposeMesh(newMesh);\n      }\n    });\n    return animation;\n  }\n  /**\n   * Returns intersections with objects in the scene\n   */\n  getIntersections(viewerPoint) {\n    vector2.x = 2 * viewerPoint.x / this.state.size.width - 1;\n    vector2.y = -2 * viewerPoint.y / this.state.size.height + 1;\n    this.raycaster.setFromCamera(vector2, this.camera);\n    const intersections = this.raycaster.intersectObjects(this.scene.children, true).filter((i) => i.object.visible).filter((i) => i.object.isMesh && !!i.object.userData);\n    if (this.customRenderer?.getIntersections) {\n      intersections.push(...this.customRenderer.getIntersections(this.raycaster, vector2));\n    }\n    return intersections;\n  }\n  /**\n   * Checks if an object/point is currently visible\n   */\n  isObjectVisible(value) {\n    if (!value) {\n      return false;\n    }\n    if (this.frustumNeedsUpdate) {\n      matrix4.multiplyMatrices(this.camera.projectionMatrix, this.camera.matrixWorldInverse);\n      this.frustum.setFromProjectionMatrix(matrix4);\n      this.frustumNeedsUpdate = false;\n    }\n    if (value.isVector3) {\n      return this.frustum.containsPoint(value);\n    } else if (value.isMesh && value.geometry) {\n      const mesh = value;\n      if (!mesh.geometry.boundingBox) {\n        mesh.geometry.computeBoundingBox();\n      }\n      box3.copy(mesh.geometry.boundingBox).applyMatrix4(mesh.matrixWorld);\n      return this.frustum.intersectsBox(box3);\n    } else if (value.isObject3D) {\n      return this.frustum.intersectsObject(value);\n    } else {\n      return false;\n    }\n  }\n  /**\n   * Adds an object to the THREE scene\n   */\n  addObject(object) {\n    this.scene.add(object);\n  }\n  /**\n   * Removes an object from the THREE scene\n   */\n  removeObject(object) {\n    this.scene.remove(object);\n  }\n  /**\n   * Calls `dispose` on all objects and textures\n   * @internal\n   */\n  cleanScene(object) {\n    const disposeMaterial = (material) => {\n      material.map?.dispose();\n      if (material.uniforms) {\n        Object.values(material.uniforms).forEach((uniform) => {\n          uniform.value?.dispose?.();\n        });\n      }\n      material.dispose();\n    };\n    object.traverse((item) => {\n      item.geometry?.dispose();\n      if (item.material) {\n        if (Array.isArray(item.material)) {\n          item.material.forEach((material) => {\n            disposeMaterial(material);\n          });\n        } else {\n          disposeMaterial(item.material);\n        }\n      }\n      if (!(item instanceof Scene)) {\n        item.dispose?.();\n      }\n      if (item !== object) {\n        this.cleanScene(item);\n      }\n    });\n  }\n};\n\n// src/lib/BlobLoader.ts\nimport { Loader as Loader2 } from \"three\";\nvar BlobLoader = class extends Loader2 {\n  // @ts-ignore\n  load(url, onLoad, onProgress, onError, abortSignal) {\n    const req = new Request(url, {\n      headers: new Headers(this.requestHeader),\n      credentials: this.withCredentials ? \"include\" : \"same-origin\"\n    });\n    fetch(req, {\n      signal: abortSignal\n    }).then((response) => {\n      if (response.status === 200 || response.status === 0) {\n        const reader = response.body.getReader();\n        const contentLength = response.headers.get(\"Content-Length\") || response.headers.get(\"X-File-Size\");\n        const total = contentLength ? parseInt(contentLength) : 0;\n        const lengthComputable = total !== 0;\n        let loaded = 0;\n        const stream = new ReadableStream({\n          start(controller) {\n            readData();\n            function readData() {\n              reader.read().then(({ done, value }) => {\n                if (done) {\n                  controller.close();\n                } else {\n                  loaded += value.byteLength;\n                  const event = new ProgressEvent(\"progress\", { lengthComputable, loaded, total });\n                  onProgress(event);\n                  controller.enqueue(value);\n                  readData();\n                }\n              }).catch((err) => {\n                onError(err);\n              });\n            }\n          }\n        });\n        return new Response(stream);\n      } else {\n        throw new Error(`fetch for \"${response.url}\" responded with ${response.status}: ${response.statusText}`);\n      }\n    }).then((response) => {\n      return response.blob();\n    }).then((data) => {\n      onLoad(data);\n    }).catch((err) => {\n      onError(err);\n    });\n  }\n};\n\n// src/lib/ImageLoader.ts\nimport { Loader as Loader3 } from \"three\";\nvar ImageLoader = class extends Loader3 {\n  // @ts-ignore\n  load(url, onLoad, onError, abortSignal) {\n    const image = document.createElement(\"img\");\n    function onImageLoad() {\n      removeEventListeners();\n      onLoad(this);\n    }\n    function onImageError(event) {\n      removeEventListeners();\n      if (abortSignal?.aborted) {\n        const e = new Error();\n        e.name = \"AbortError\";\n        e.message = \"The operation was aborted.\";\n        onError(e);\n      } else {\n        onError(event);\n      }\n    }\n    function onAbortSignal() {\n      image.src = \"\";\n    }\n    function removeEventListeners() {\n      image.removeEventListener(\"load\", onImageLoad, false);\n      image.removeEventListener(\"error\", onImageError, false);\n      abortSignal?.removeEventListener(\"abort\", onAbortSignal, false);\n    }\n    image.addEventListener(\"load\", onImageLoad, false);\n    image.addEventListener(\"error\", onImageError, false);\n    abortSignal?.addEventListener(\"abort\", onAbortSignal, false);\n    if (!url.startsWith(\"data:\") && this.crossOrigin !== void 0) {\n      image.crossOrigin = this.crossOrigin;\n    }\n    image.src = url;\n    return image;\n  }\n};\n\n// src/services/TextureLoader.ts\nvar TextureLoader = class extends AbstractService {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer);\n    this.abortCtrl = {};\n    this.fileLoader = new BlobLoader();\n    this.imageLoader = new ImageLoader();\n    if (this.config.withCredentials) {\n      this.fileLoader.setWithCredentials(true);\n      this.imageLoader.setCrossOrigin(\"use-credentials\");\n    }\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.abortLoading();\n    super.destroy();\n  }\n  /**\n   * Cancels current HTTP requests\n   * @internal\n   */\n  abortLoading() {\n    Object.values(this.abortCtrl).forEach((ctrl) => ctrl.abort());\n    this.abortCtrl = {};\n  }\n  /**\n   * Loads a Blob with FileLoader\n   */\n  loadFile(url, onProgress, cacheKey) {\n    const cached = Cache.get(url, cacheKey);\n    if (cached) {\n      if (cached instanceof Blob) {\n        onProgress?.(100);\n        return Promise.resolve(cached);\n      } else {\n        Cache.remove(url, cacheKey);\n      }\n    }\n    if (this.config.requestHeaders) {\n      this.fileLoader.setRequestHeader(this.config.requestHeaders(url));\n    }\n    return new Promise((resolve, reject) => {\n      let progress = 0;\n      onProgress?.(progress);\n      this.fileLoader.load(\n        url,\n        (result) => {\n          progress = 100;\n          onProgress?.(progress);\n          Cache.add(url, cacheKey, result);\n          resolve(result);\n        },\n        (e) => {\n          if (e.lengthComputable) {\n            const newProgress = e.loaded / e.total * 100;\n            if (newProgress > progress) {\n              progress = newProgress;\n              onProgress?.(progress);\n            }\n          }\n        },\n        (err) => {\n          reject(err);\n        },\n        this.__getAbortSignal(cacheKey)\n      );\n    });\n  }\n  /**\n   * Loads an image with ImageLoader or with FileLoader if progress is tracked or if request headers are configured\n   */\n  loadImage(url, onProgress, cacheKey) {\n    const cached = Cache.get(url, cacheKey);\n    if (cached) {\n      onProgress?.(100);\n      if (cached instanceof Blob) {\n        return this.blobToImage(cached);\n      } else {\n        return Promise.resolve(cached);\n      }\n    }\n    if (!onProgress && !this.config.requestHeaders) {\n      return new Promise((resolve, reject) => {\n        this.imageLoader.load(\n          url,\n          (result) => {\n            Cache.add(url, cacheKey, result);\n            resolve(result);\n          },\n          (err) => {\n            reject(err);\n          },\n          this.__getAbortSignal(cacheKey)\n        );\n      });\n    } else {\n      return this.loadFile(url, onProgress, cacheKey).then((blob) => this.blobToImage(blob));\n    }\n  }\n  /**\n   * Converts a file loaded with {@link loadFile} into an image\n   */\n  blobToImage(blob) {\n    return new Promise((resolve, reject) => {\n      const img = document.createElement(\"img\");\n      img.onload = () => {\n        URL.revokeObjectURL(img.src);\n        resolve(img);\n      };\n      img.onerror = reject;\n      img.src = URL.createObjectURL(blob);\n    });\n  }\n  /**\n   * Preload a panorama file without displaying it\n   */\n  preloadPanorama(panorama) {\n    if (this.viewer.adapter.supportsPreload(panorama)) {\n      return this.viewer.adapter.loadTexture(panorama, false);\n    } else {\n      return Promise.reject(new PSVError(\"Current adapter does not support preload\"));\n    }\n  }\n  /**\n   * @internal\n   */\n  dispatchProgress(progress) {\n    this.viewer.loader.setProgress(progress);\n    this.viewer.dispatchEvent(new LoadProgressEvent(Math.round(progress)));\n  }\n  /**\n   * Get an abort signal\n   * the signal is shared accross all requests with the same cache key (for tiles adapters)\n   */\n  __getAbortSignal(cacheKey) {\n    if (cacheKey) {\n      if (this.abortCtrl[cacheKey]?.signal.aborted) {\n        delete this.abortCtrl[cacheKey];\n      }\n      if (!this.abortCtrl[cacheKey]) {\n        this.abortCtrl[cacheKey] = new AbortController();\n      }\n      return this.abortCtrl[cacheKey].signal;\n    }\n    return null;\n  }\n};\n\n// src/services/ViewerDynamics.ts\nimport { MathUtils as MathUtils10 } from \"three\";\nvar ViewerDynamics = class extends AbstractService {\n  /**\n   * @internal\n   */\n  constructor(viewer) {\n    super(viewer);\n    this.zoom = new Dynamic(\n      (zoomLevel) => {\n        this.viewer.state.vFov = this.viewer.dataHelper.zoomLevelToFov(zoomLevel);\n        this.viewer.state.hFov = this.viewer.dataHelper.vFovToHFov(this.viewer.state.vFov);\n        this.viewer.dispatchEvent(new ZoomUpdatedEvent(zoomLevel));\n      },\n      {\n        defaultValue: this.viewer.config.defaultZoomLvl,\n        min: 0,\n        max: 100,\n        wrap: false\n      }\n    );\n    this.position = new MultiDynamic(\n      (position) => {\n        this.viewer.dataHelper.sphericalCoordsToVector3(position, this.viewer.state.direction);\n        this.viewer.dispatchEvent(new PositionUpdatedEvent(position));\n      },\n      {\n        yaw: new Dynamic(null, {\n          defaultValue: this.config.defaultYaw,\n          min: 0,\n          max: 2 * Math.PI,\n          wrap: true\n        }),\n        pitch: new Dynamic(null, {\n          defaultValue: this.config.defaultPitch,\n          min: -Math.PI / 2,\n          max: Math.PI / 2,\n          wrap: false\n        })\n      }\n    );\n    this.roll = new Dynamic(\n      (roll) => {\n        this.viewer.state.roll = roll;\n        this.viewer.dispatchEvent(new RollUpdatedEvent(roll));\n      },\n      {\n        defaultValue: 0,\n        min: -Math.PI,\n        max: Math.PI,\n        wrap: false\n      }\n    );\n    this.updateSpeeds();\n  }\n  /**\n   * @internal\n   */\n  updateSpeeds() {\n    this.zoom.setSpeed(this.config.zoomSpeed * 50);\n    this.position.setSpeed(MathUtils10.degToRad(this.config.moveSpeed * 50));\n    this.roll.setSpeed(MathUtils10.degToRad(this.config.moveSpeed * 50));\n  }\n  /**\n   * @internal\n   */\n  update(elapsed) {\n    this.zoom.update(elapsed);\n    this.position.update(elapsed);\n    this.roll.update(elapsed);\n  }\n};\n\n// src/services/ViewerState.ts\nimport { Vector3 as Vector34 } from \"three\";\nvar ViewerState = class {\n  /**\n   * @internal\n   */\n  // eslint-disable-next-line  @typescript-eslint/no-empty-function\n  constructor() {\n    /**\n     * when all components are loaded\n     */\n    this.ready = false;\n    /**\n     * if the view needs to be renderer\n     */\n    this.needsUpdate = false;\n    /**\n     * number of plugins requesting to continuously render the scene\n     */\n    this.continuousUpdateCount = 0;\n    /**\n     * if the keyboard events are currently listened to\n     */\n    this.keyboardEnabled = false;\n    /**\n     * direction of the camera\n     */\n    this.direction = new Vector34(0, 0, SPHERE_RADIUS);\n    /**\n     * current camera roll\n     */\n    this.roll = 0;\n    /**\n     * vertical FOV\n     */\n    this.vFov = 60;\n    /**\n     * horizontal FOV\n     */\n    this.hFov = 60;\n    /**\n     * renderer aspect ratio\n     */\n    this.aspect = 1;\n    /**\n     * currently running animation\n     */\n    this.animation = null;\n    /**\n     * currently running transition\n     */\n    this.transitionAnimation = null;\n    /**\n     * promise of the last \"setPanorama()\" call\n     */\n    this.loadingPromise = null;\n    /**\n     * time of the last user action\n     */\n    this.idleTime = -1;\n    /**\n     * registered THREE objects observer\n     */\n    this.objectsObservers = {};\n    /**\n     * size of the container\n     */\n    this.size = {\n      width: 0,\n      height: 0\n    };\n  }\n};\n\n// src/Viewer.ts\nvar Viewer = class extends TypedEventTarget {\n  constructor(config) {\n    super();\n    /** @internal */\n    this.plugins = {};\n    /** @internal */\n    this.children = [];\n    this.parent = getElement(config.container);\n    if (!this.parent) {\n      throw new PSVError(`\"container\" element not found.`);\n    }\n    this.parent[VIEWER_DATA] = this;\n    this.container = document.createElement(\"div\");\n    this.container.classList.add(\"psv-container\");\n    this.parent.appendChild(this.container);\n    checkClosedShadowDom(this.parent);\n    checkStylesheet(this.container, \"core\");\n    this.state = new ViewerState();\n    this.config = getViewerConfig(config);\n    this.__setSize(this.config.size);\n    this.overlay = new Overlay(this);\n    try {\n      SYSTEM.load();\n    } catch (err) {\n      console.error(err);\n      this.showError(this.config.lang.webglError);\n      return;\n    }\n    Cache.init();\n    this.adapter = new this.config.adapter[0](this, this.config.adapter[1]);\n    this.renderer = new Renderer(this);\n    this.textureLoader = new TextureLoader(this);\n    this.eventsHandler = new EventsHandler(this);\n    this.dataHelper = new DataHelper(this);\n    this.dynamics = new ViewerDynamics(this);\n    this.adapter.init?.();\n    this.loader = new Loader(this);\n    this.navbar = new Navbar(this);\n    this.panel = new Panel(this);\n    this.notification = new Notification(this);\n    this.autoSize();\n    this.setCursor(null);\n    resolveBoolean(SYSTEM.isTouchEnabled, (enabled) => {\n      toggleClass(this.container, \"psv--is-touch\", enabled);\n    });\n    this.config.plugins.forEach(([plugin, opts]) => {\n      this.plugins[plugin.id] = new plugin(this, opts);\n    });\n    for (const plugin of Object.values(this.plugins)) {\n      plugin.init?.();\n    }\n    if (this.config.navbar) {\n      this.navbar.setButtons(this.config.navbar);\n    }\n    if (!this.state.loadingPromise) {\n      if (this.config.panorama) {\n        this.setPanorama(this.config.panorama, {\n          sphereCorrection: this.config.sphereCorrection,\n          panoData: this.config.panoData\n        });\n      } else {\n        this.loader.show();\n      }\n    }\n  }\n  /**\n   * Destroys the viewer\n   */\n  destroy() {\n    this.stopAll();\n    this.stopKeyboardControl();\n    this.exitFullscreen();\n    for (const [id, plugin] of Object.entries(this.plugins)) {\n      plugin.destroy();\n      delete this.plugins[id];\n    }\n    this.children.slice().forEach((child) => child.destroy());\n    this.children.length = 0;\n    this.eventsHandler?.destroy();\n    this.renderer?.destroy();\n    this.textureLoader?.destroy();\n    this.dataHelper?.destroy();\n    this.adapter?.destroy();\n    this.dynamics?.destroy();\n    this.parent.removeChild(this.container);\n    delete this.parent[VIEWER_DATA];\n  }\n  init() {\n    this.eventsHandler.init();\n    this.renderer.init();\n    if (this.config.navbar) {\n      this.navbar.show();\n    }\n    if (this.config.keyboard === \"always\") {\n      this.startKeyboardControl();\n    }\n    this.resetIdleTimer();\n    this.state.ready = true;\n    this.dispatchEvent(new ReadyEvent());\n  }\n  /**\n   * Restarts the idle timer\n   * @internal\n   */\n  resetIdleTimer() {\n    this.state.idleTime = performance.now();\n  }\n  /**\n   * Stops the idle timer\n   * @internal\n   */\n  disableIdleTimer() {\n    this.state.idleTime = -1;\n  }\n  /**\n   * Returns the instance of a plugin if it exists\n   * @example By plugin identifier\n   * ```js\n   * viewer.getPlugin('markers')\n   * ```\n   * @example By plugin class with TypeScript support\n   * ```ts\n   * viewer.getPlugin<MarkersPlugin>(MarkersPlugin)\n   * ```\n   */\n  getPlugin(pluginId) {\n    if (typeof pluginId === \"string\") {\n      return this.plugins[pluginId];\n    } else {\n      const pluginCtor = pluginInterop(pluginId);\n      return pluginCtor ? this.plugins[pluginCtor.id] : null;\n    }\n  }\n  /**\n   * Returns the current position of the camera\n   */\n  getPosition() {\n    return this.dataHelper.cleanPosition(this.dynamics.position.current);\n  }\n  /**\n   * Returns the current zoom level\n   */\n  getZoomLevel() {\n    return this.dynamics.zoom.current;\n  }\n  /**\n   * Returns the current viewer size\n   */\n  getSize() {\n    return { ...this.state.size };\n  }\n  /**\n   * Checks if the viewer is in fullscreen\n   */\n  isFullscreenEnabled() {\n    return isFullscreenEnabled(this.parent, SYSTEM.isIphone);\n  }\n  /**\n   * Request a new render of the scene\n   */\n  needsUpdate() {\n    this.state.needsUpdate = true;\n  }\n  /**\n   * Request the scene to be continuously renderer (when using videos)\n   */\n  needsContinuousUpdate(enabled) {\n    if (enabled) {\n      this.state.continuousUpdateCount++;\n    } else if (this.state.continuousUpdateCount > 0) {\n      this.state.continuousUpdateCount--;\n    }\n  }\n  /**\n   * Resizes the scene if the viewer is resized\n   */\n  autoSize() {\n    if (this.container.clientWidth !== this.state.size.width || this.container.clientHeight !== this.state.size.height) {\n      this.state.size.width = Math.round(this.container.clientWidth);\n      this.state.size.height = Math.round(this.container.clientHeight);\n      this.state.aspect = this.state.size.width / this.state.size.height;\n      this.state.hFov = this.dataHelper.vFovToHFov(this.state.vFov);\n      this.dispatchEvent(new SizeUpdatedEvent(this.getSize()));\n      this.navbar.autoSize();\n    }\n  }\n  /**\n   * Loads a new panorama file\n   * Loads a new panorama file, optionally changing the camera position/zoom and activating the transition animation.<br>\n   * If the \"options\" parameter is not defined, the camera will not move and the ongoing animation will continue.<br>\n   * If another loading is already in progress it will be aborted.\n   * @returns promise resolved with false if the loading was aborted by another call\n   */\n  setPanorama(path, options = {}) {\n    this.textureLoader.abortLoading();\n    this.state.transitionAnimation?.cancel();\n    const transition = this.dataHelper.getTransitionOptions(options);\n    if (options.showLoader === void 0) {\n      options.showLoader = true;\n    }\n    if (options.caption === void 0) {\n      options.caption = this.config.caption;\n    }\n    if (options.description === void 0) {\n      options.description = this.config.description;\n    }\n    if (!options.panoData && typeof this.config.panoData === \"function\") {\n      options.panoData = this.config.panoData;\n    }\n    this.hideError();\n    this.resetIdleTimer();\n    this.config.panorama = path;\n    this.config.caption = options.caption;\n    this.config.description = options.description;\n    this.config.sphereCorrection = options.sphereCorrection;\n    const done = (err) => {\n      if (isAbortError(err)) {\n        return false;\n      }\n      this.loader.hide();\n      this.state.loadingPromise = null;\n      if (err) {\n        this.navbar.setCaption(null);\n        this.showError(this.config.lang.loadError);\n        console.error(err);\n        this.dispatchEvent(new PanoramaErrorEvent(path, err));\n        throw err;\n      } else {\n        this.navbar.setCaption(this.config.caption);\n        return true;\n      }\n    };\n    this.navbar.setCaption(`<em>${this.config.lang.loading}</em>`);\n    if (options.showLoader || !this.state.ready) {\n      this.loader.show();\n    }\n    this.dispatchEvent(new PanoramaLoadEvent(path));\n    const loadingPromise = this.adapter.loadTexture(this.config.panorama, true, options.panoData).then((textureData) => {\n      if (textureData.panorama !== this.config.panorama) {\n        this.adapter.disposeTexture(textureData);\n        throw getAbortError();\n      }\n      const cleanOptions = this.dataHelper.cleanPanoramaOptions(options, textureData.panoData);\n      if (!isNil(cleanOptions.zoom) || !isNil(cleanOptions.position)) {\n        this.stopAll();\n      }\n      return {\n        textureData,\n        cleanOptions\n      };\n    });\n    if (!transition || !this.state.ready || !this.adapter.supportsTransition(this.config.panorama)) {\n      this.state.loadingPromise = loadingPromise.then(({ textureData, cleanOptions }) => {\n        this.renderer.show();\n        this.renderer.setTexture(textureData);\n        this.renderer.setPanoramaPose(textureData.panoData);\n        this.renderer.setSphereCorrection(options.sphereCorrection);\n        if (!this.state.ready) {\n          this.init();\n        }\n        this.dispatchEvent(new PanoramaLoadedEvent(textureData));\n        if (!isNil(cleanOptions.zoom)) {\n          this.zoom(cleanOptions.zoom);\n        }\n        if (!isNil(cleanOptions.position)) {\n          this.rotate(cleanOptions.position);\n        }\n      }).then(\n        () => done(),\n        (err) => done(err)\n      );\n    } else {\n      this.state.loadingPromise = loadingPromise.then(({ textureData, cleanOptions }) => {\n        this.loader.hide();\n        this.dispatchEvent(new PanoramaLoadedEvent(textureData));\n        this.state.transitionAnimation = this.renderer.transition(textureData, cleanOptions, transition);\n        return this.state.transitionAnimation;\n      }).then((completed) => {\n        this.state.transitionAnimation = null;\n        this.dispatchEvent(new TransitionDoneEvent(completed));\n        if (!completed) {\n          throw getAbortError();\n        }\n      }).then(\n        () => done(),\n        (err) => done(err)\n      );\n    }\n    return this.state.loadingPromise;\n  }\n  /**\n   * Update options\n   * @throws {@link PSVError} if the configuration is invalid\n   */\n  setOptions(options) {\n    const rawConfig = {\n      ...this.config,\n      ...options\n    };\n    for (let [key, value] of Object.entries(options)) {\n      if (!(key in DEFAULTS)) {\n        logWarn(`Unknown option ${key}`);\n        continue;\n      }\n      if (key in READONLY_OPTIONS) {\n        logWarn(READONLY_OPTIONS[key]);\n        continue;\n      }\n      if (key in CONFIG_PARSERS) {\n        value = CONFIG_PARSERS[key](value, {\n          rawConfig,\n          defValue: DEFAULTS[key]\n        });\n      }\n      this.config[key] = value;\n      switch (key) {\n        case \"mousemove\":\n          if (!this.state.cursorOverride) {\n            this.setCursor(null);\n          }\n          break;\n        case \"caption\":\n          this.navbar.setCaption(this.config.caption);\n          break;\n        case \"size\":\n          this.resize(this.config.size);\n          break;\n        case \"sphereCorrection\":\n          this.renderer.setSphereCorrection(this.config.sphereCorrection);\n          break;\n        case \"navbar\":\n        case \"lang\":\n          this.navbar.setButtons(this.config.navbar);\n          break;\n        case \"moveSpeed\":\n        case \"zoomSpeed\":\n          this.dynamics.updateSpeeds();\n          break;\n        case \"minFov\":\n        case \"maxFov\":\n          this.dynamics.zoom.setValue(this.dataHelper.fovToZoomLevel(this.state.vFov));\n          this.dispatchEvent(new ZoomUpdatedEvent(this.getZoomLevel()));\n          break;\n        case \"keyboard\":\n          if (this.config.keyboard === \"always\") {\n            this.startKeyboardControl();\n          } else {\n            this.stopKeyboardControl();\n          }\n          break;\n        default:\n          break;\n      }\n    }\n    this.needsUpdate();\n    this.dispatchEvent(new ConfigChangedEvent(Object.keys(options)));\n  }\n  /**\n   * Update options\n   * @throws {@link PSVError} if the configuration is invalid\n   */\n  setOption(option, value) {\n    this.setOptions({ [option]: value });\n  }\n  /**\n   * Displays an error message over the viewer\n   */\n  showError(message) {\n    this.overlay.show({\n      id: IDS.ERROR,\n      image: error_default,\n      title: message,\n      dismissible: false\n    });\n  }\n  /**\n   *  Hides the error message\n   */\n  hideError() {\n    this.overlay.hide(IDS.ERROR);\n  }\n  /**\n   * Rotates the view to specific position\n   */\n  rotate(position) {\n    const e = new BeforeRotateEvent(this.dataHelper.cleanPosition(position));\n    this.dispatchEvent(e);\n    if (e.defaultPrevented) {\n      return;\n    }\n    this.dynamics.position.setValue(e.position);\n  }\n  /**\n   * Zooms to a specific level between `maxFov` and `minFov`\n   */\n  zoom(level) {\n    this.dynamics.zoom.setValue(level);\n  }\n  /**\n   * Increases the zoom level\n   */\n  zoomIn(step = 1) {\n    this.dynamics.zoom.step(step);\n  }\n  /**\n   * Decreases the zoom level\n   */\n  zoomOut(step = 1) {\n    this.dynamics.zoom.step(-step);\n  }\n  /**\n   * Rotates and zooms the view with a smooth animation\n   */\n  animate(options) {\n    const positionProvided = isExtendedPosition(options);\n    const zoomProvided = !isNil(options.zoom);\n    const e = new BeforeAnimateEvent(\n      positionProvided ? this.dataHelper.cleanPosition(options) : void 0,\n      options.zoom\n    );\n    this.dispatchEvent(e);\n    if (e.defaultPrevented) {\n      return;\n    }\n    this.stopAll();\n    const { duration, properties } = this.dataHelper.getAnimationProperties(options.speed, e.position, e.zoomLevel);\n    if (!duration) {\n      if (positionProvided) {\n        this.rotate(e.position);\n      }\n      if (zoomProvided) {\n        this.zoom(e.zoomLevel);\n      }\n      return new Animation(null);\n    }\n    this.state.animation = new Animation({\n      properties,\n      duration,\n      easing: options.easing || \"inOutSine\",\n      onTick: (props) => {\n        if (positionProvided) {\n          this.dynamics.position.setValue({\n            yaw: props.yaw,\n            pitch: props.pitch\n          });\n        }\n        if (zoomProvided) {\n          this.dynamics.zoom.setValue(props.zoom);\n        }\n      }\n    });\n    this.state.animation.then(() => {\n      this.state.animation = null;\n      this.resetIdleTimer();\n    });\n    return this.state.animation;\n  }\n  /**\n   * Stops the ongoing animation\n   * The return value is a Promise because the is no guaranty the animation can be stopped synchronously.\n   */\n  stopAnimation() {\n    if (this.state.animation) {\n      this.state.animation.cancel();\n      return this.state.animation;\n    } else {\n      return Promise.resolve();\n    }\n  }\n  /**\n   * Resizes the viewer\n   */\n  resize(size) {\n    this.__setSize(size);\n    this.autoSize();\n  }\n  __setSize(size) {\n    [\"width\", \"height\"].forEach((dim) => {\n      if (size?.[dim]) {\n        if (/^[0-9.]+$/.test(size[dim])) {\n          size[dim] += \"px\";\n        }\n        this.parent.style[dim] = size[dim];\n      }\n    });\n  }\n  /**\n   * Enters the fullscreen mode\n   */\n  enterFullscreen() {\n    if (!this.isFullscreenEnabled()) {\n      requestFullscreen(this.parent, SYSTEM.isIphone);\n    }\n  }\n  /**\n   * Exits the fullscreen mode\n   */\n  exitFullscreen() {\n    if (this.isFullscreenEnabled()) {\n      exitFullscreen(SYSTEM.isIphone);\n    }\n  }\n  /**\n   * Enters or exits the fullscreen mode\n   */\n  toggleFullscreen() {\n    if (!this.isFullscreenEnabled()) {\n      this.enterFullscreen();\n    } else {\n      this.exitFullscreen();\n    }\n  }\n  /**\n   * Enables the keyboard controls\n   */\n  startKeyboardControl() {\n    this.state.keyboardEnabled = true;\n  }\n  /**\n   * Disables the keyboard controls\n   */\n  stopKeyboardControl() {\n    this.state.keyboardEnabled = false;\n  }\n  /**\n   * Creates a new tooltip\n   * Use {@link Tooltip.move} to update the tooltip without re-create\n   * @throws {@link PSVError} if the configuration is invalid\n   */\n  createTooltip(config) {\n    return new Tooltip(this, config);\n  }\n  /**\n   * Changes the global mouse cursor\n   */\n  setCursor(cursor) {\n    this.state.cursorOverride = cursor;\n    if (!cursor) {\n      this.container.style.cursor = this.config.mousemove ? \"move\" : \"default\";\n    } else {\n      this.container.style.cursor = cursor;\n    }\n  }\n  /**\n   * Subscribes to events on objects in the three.js scene\n   * @param userDataKey - only objects with the following `userData` will be observed\n   */\n  observeObjects(userDataKey) {\n    if (!this.state.objectsObservers[userDataKey]) {\n      this.state.objectsObservers[userDataKey] = null;\n    }\n  }\n  /**\n   * Unsubscribes to events on objects\n   */\n  unobserveObjects(userDataKey) {\n    delete this.state.objectsObservers[userDataKey];\n  }\n  /**\n   * Stops all current animations\n   * @internal\n   */\n  stopAll() {\n    this.dispatchEvent(new StopAllEvent());\n    this.disableIdleTimer();\n    return this.stopAnimation();\n  }\n};\n\n// src/index.ts\nvar VERSION = \"5.13.2\";\nexport {\n  AbstractAdapter,\n  AbstractButton,\n  AbstractComponent,\n  AbstractConfigurablePlugin,\n  AbstractPlugin,\n  constants_exports as CONSTANTS,\n  Cache,\n  DEFAULTS,\n  DualFisheyeAdapter,\n  EquirectangularAdapter,\n  PSVError,\n  SYSTEM,\n  TypedEvent,\n  VERSION,\n  Viewer,\n  events_exports as events,\n  registerButton,\n  utils_exports as utils\n};\n//# sourceMappingURL=index.module.js.map","/*!\n * Photo Sphere Viewer / Markers Plugin 5.13.2\n * @copyright 2015-2025 Damien \"Mistic\" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\nvar __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// src/index.ts\nimport { DEFAULTS, registerButton } from \"@photo-sphere-viewer/core\";\n\n// src/events.ts\nvar events_exports = {};\n__export(events_exports, {\n  EnterMarkerEvent: () => EnterMarkerEvent,\n  GotoMarkerDoneEvent: () => GotoMarkerDoneEvent,\n  HideMarkersEvent: () => HideMarkersEvent,\n  LeaveMarkerEvent: () => LeaveMarkerEvent,\n  MarkerVisibilityEvent: () => MarkerVisibilityEvent,\n  MarkersPluginEvent: () => MarkersPluginEvent,\n  RenderMarkersListEvent: () => RenderMarkersListEvent,\n  SelectMarkerEvent: () => SelectMarkerEvent,\n  SelectMarkerListEvent: () => SelectMarkerListEvent,\n  SetMarkersEvent: () => SetMarkersEvent,\n  ShowMarkersEvent: () => ShowMarkersEvent,\n  UnselectMarkerEvent: () => UnselectMarkerEvent\n});\nimport { TypedEvent } from \"@photo-sphere-viewer/core\";\nvar MarkersPluginEvent = class extends TypedEvent {\n};\nvar _MarkerVisibilityEvent = class _MarkerVisibilityEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker, visible) {\n    super(_MarkerVisibilityEvent.type);\n    this.marker = marker;\n    this.visible = visible;\n  }\n};\n_MarkerVisibilityEvent.type = \"marker-visibility\";\nvar MarkerVisibilityEvent = _MarkerVisibilityEvent;\nvar _GotoMarkerDoneEvent = class _GotoMarkerDoneEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker) {\n    super(_GotoMarkerDoneEvent.type);\n    this.marker = marker;\n  }\n};\n_GotoMarkerDoneEvent.type = \"goto-marker-done\";\nvar GotoMarkerDoneEvent = _GotoMarkerDoneEvent;\nvar _LeaveMarkerEvent = class _LeaveMarkerEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker) {\n    super(_LeaveMarkerEvent.type);\n    this.marker = marker;\n  }\n};\n_LeaveMarkerEvent.type = \"leave-marker\";\nvar LeaveMarkerEvent = _LeaveMarkerEvent;\nvar _EnterMarkerEvent = class _EnterMarkerEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker) {\n    super(_EnterMarkerEvent.type);\n    this.marker = marker;\n  }\n};\n_EnterMarkerEvent.type = \"enter-marker\";\nvar EnterMarkerEvent = _EnterMarkerEvent;\nvar _SelectMarkerEvent = class _SelectMarkerEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker, doubleClick, rightClick) {\n    super(_SelectMarkerEvent.type);\n    this.marker = marker;\n    this.doubleClick = doubleClick;\n    this.rightClick = rightClick;\n  }\n};\n_SelectMarkerEvent.type = \"select-marker\";\nvar SelectMarkerEvent = _SelectMarkerEvent;\nvar _SelectMarkerListEvent = class _SelectMarkerListEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker) {\n    super(_SelectMarkerListEvent.type);\n    this.marker = marker;\n  }\n};\n_SelectMarkerListEvent.type = \"select-marker-list\";\nvar SelectMarkerListEvent = _SelectMarkerListEvent;\nvar _UnselectMarkerEvent = class _UnselectMarkerEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(marker) {\n    super(_UnselectMarkerEvent.type);\n    this.marker = marker;\n  }\n};\n_UnselectMarkerEvent.type = \"unselect-marker\";\nvar UnselectMarkerEvent = _UnselectMarkerEvent;\nvar _HideMarkersEvent = class _HideMarkersEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor() {\n    super(_HideMarkersEvent.type);\n  }\n};\n_HideMarkersEvent.type = \"hide-markers\";\nvar HideMarkersEvent = _HideMarkersEvent;\nvar _SetMarkersEvent = class _SetMarkersEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(markers) {\n    super(_SetMarkersEvent.type);\n    this.markers = markers;\n  }\n};\n_SetMarkersEvent.type = \"set-markers\";\nvar SetMarkersEvent = _SetMarkersEvent;\nvar _ShowMarkersEvent = class _ShowMarkersEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor() {\n    super(_ShowMarkersEvent.type);\n  }\n};\n_ShowMarkersEvent.type = \"show-markers\";\nvar ShowMarkersEvent = _ShowMarkersEvent;\nvar _RenderMarkersListEvent = class _RenderMarkersListEvent extends MarkersPluginEvent {\n  /** @internal */\n  constructor(markers) {\n    super(_RenderMarkersListEvent.type);\n    this.markers = markers;\n  }\n};\n_RenderMarkersListEvent.type = \"render-markers-list\";\nvar RenderMarkersListEvent = _RenderMarkersListEvent;\n\n// src/MarkersButton.ts\nimport { AbstractButton } from \"@photo-sphere-viewer/core\";\n\n// src/icons/pin.svg\nvar pin_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"10 9 81 81\"><path fill=\"currentColor\" d=\"M50.5 90S22.9 51.9 22.9 36.6 35.2 9 50.5 9s27.6 12.4 27.6 27.6S50.5 90 50.5 90zm0-66.3c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11z\"/><!--Created by Rohith M S from the Noun Project--></svg>\\n';\n\n// src/MarkersButton.ts\nvar MarkersButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-markers-button\",\n      icon: pin_default,\n      hoverScale: true,\n      collapsable: true,\n      tabbable: true\n    });\n    this.plugin = this.viewer.getPlugin(\"markers\");\n    if (this.plugin) {\n      this.plugin.addEventListener(ShowMarkersEvent.type, this);\n      this.plugin.addEventListener(HideMarkersEvent.type, this);\n      this.toggleActive(true);\n    }\n  }\n  destroy() {\n    if (this.plugin) {\n      this.plugin.removeEventListener(ShowMarkersEvent.type, this);\n      this.plugin.removeEventListener(HideMarkersEvent.type, this);\n    }\n    super.destroy();\n  }\n  isSupported() {\n    return !!this.plugin;\n  }\n  handleEvent(e) {\n    if (e instanceof ShowMarkersEvent) {\n      this.toggleActive(true);\n    } else if (e instanceof HideMarkersEvent) {\n      this.toggleActive(false);\n    }\n  }\n  onClick() {\n    this.plugin.toggleAllMarkers();\n  }\n};\nMarkersButton.id = \"markers\";\n\n// src/MarkersListButton.ts\nimport { AbstractButton as AbstractButton2, events } from \"@photo-sphere-viewer/core\";\n\n// src/constants.ts\nimport { utils } from \"@photo-sphere-viewer/core\";\n\n// src/icons/pin-list.svg\nvar pin_list_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"9 9 81 81\"><path fill=\"currentColor\" d=\"M37.5 90S9.9 51.9 9.9 36.6 22.2 9 37.5 9s27.6 12.4 27.6 27.6S37.5 90 37.5 90zm0-66.3c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11zM86.7 55H70c-1.8 0-3.3-1.5-3.3-3.3s1.5-3.3 3.3-3.3h16.7c1.8 0 3.3 1.5 3.3 3.3S88.5 55 86.7 55zm0-25h-15a3.3 3.3 0 0 1-3.3-3.3c0-1.8 1.5-3.3 3.3-3.3h15c1.8 0 3.3 1.5 3.3 3.3 0 1.8-1.5 3.3-3.3 3.3zM56.5 73h30c1.8 0 3.3 1.5 3.3 3.3 0 1.8-1.5 3.3-3.3 3.3h-30a3.3 3.3 0 0 1-3.3-3.3 3.2 3.2 0 0 1 3.3-3.3z\"/><!--Created by Rohith M S from the Noun Project--></svg>\\n';\n\n// src/constants.ts\nvar SVG_NS = \"http://www.w3.org/2000/svg\";\nvar MARKER_DATA = \"psvMarker\";\nvar MARKER_DATA_KEY = utils.dasherize(MARKER_DATA);\nvar ID_PANEL_MARKER = \"marker\";\nvar ID_PANEL_MARKERS_LIST = \"markersList\";\nvar DEFAULT_HOVER_SCALE = {\n  amount: 2,\n  duration: 100,\n  easing: \"linear\"\n};\nvar MARKERS_LIST_TEMPLATE = (markers, title) => `\n<div class=\"psv-panel-menu psv-panel-menu--stripped\">\n    <h1 class=\"psv-panel-menu-title\">${pin_list_default} ${title}</h1>\n    <ul class=\"psv-panel-menu-list\">\n    ${markers.map((marker) => `\n        <li data-${MARKER_DATA_KEY}=\"${marker.id}\" class=\"psv-panel-menu-item\" tabindex=\"0\">\n          ${marker.type === \"image\" ? `<span class=\"psv-panel-menu-item-icon\"><img src=\"${marker.definition}\"/></span>` : \"\"}\n          <span class=\"psv-panel-menu-item-label\">${marker.getListContent()}</span>\n        </li>\n    `).join(\"\")}\n    </ul>\n</div>\n`;\n\n// src/MarkersListButton.ts\nvar MarkersListButton = class extends AbstractButton2 {\n  constructor(navbar) {\n    super(navbar, {\n      className: \" psv-markers-list-button\",\n      icon: pin_list_default,\n      hoverScale: true,\n      collapsable: true,\n      tabbable: true\n    });\n    this.plugin = this.viewer.getPlugin(\"markers\");\n    if (this.plugin) {\n      this.viewer.addEventListener(events.ShowPanelEvent.type, this);\n      this.viewer.addEventListener(events.HidePanelEvent.type, this);\n    }\n  }\n  destroy() {\n    this.viewer.removeEventListener(events.ShowPanelEvent.type, this);\n    this.viewer.removeEventListener(events.HidePanelEvent.type, this);\n    super.destroy();\n  }\n  isSupported() {\n    return !!this.plugin;\n  }\n  handleEvent(e) {\n    if (e instanceof events.ShowPanelEvent) {\n      this.toggleActive(e.panelId === ID_PANEL_MARKERS_LIST);\n    } else if (e instanceof events.HidePanelEvent) {\n      this.toggleActive(false);\n    }\n  }\n  onClick() {\n    this.plugin.toggleMarkersList();\n  }\n};\nMarkersListButton.id = \"markersList\";\n\n// src/MarkersPlugin.ts\nimport { AbstractConfigurablePlugin, PSVError as PSVError8, events as events3, utils as utils10 } from \"@photo-sphere-viewer/core\";\n\n// src/CSS3DContainer.ts\nimport { events as events2 } from \"@photo-sphere-viewer/core\";\nimport { Scene } from \"three\";\n\n// ../../node_modules/three/examples/jsm/renderers/CSS3DRenderer.js\nimport {\n  Matrix4,\n  Object3D,\n  Quaternion,\n  Vector3\n} from \"three\";\nvar _position = new Vector3();\nvar _quaternion = new Quaternion();\nvar _scale = new Vector3();\nvar CSS3DObject = class extends Object3D {\n  /**\n   * Constructs a new CSS3D object.\n   *\n   * @param {DOMElement} [element] - The DOM element.\n   */\n  constructor(element = document.createElement(\"div\")) {\n    super();\n    this.isCSS3DObject = true;\n    this.element = element;\n    this.element.style.position = \"absolute\";\n    this.element.style.pointerEvents = \"auto\";\n    this.element.style.userSelect = \"none\";\n    this.element.setAttribute(\"draggable\", false);\n    this.addEventListener(\"removed\", function() {\n      this.traverse(function(object) {\n        if (object.element instanceof object.element.ownerDocument.defaultView.Element && object.element.parentNode !== null) {\n          object.element.remove();\n        }\n      });\n    });\n  }\n  copy(source, recursive) {\n    super.copy(source, recursive);\n    this.element = source.element.cloneNode(true);\n    return this;\n  }\n};\nvar _matrix = new Matrix4();\nvar _matrix2 = new Matrix4();\nvar CSS3DRenderer = class {\n  /**\n   * Constructs a new CSS3D renderer.\n   *\n   * @param {CSS3DRenderer~Parameters} [parameters] - The parameters.\n   */\n  constructor(parameters = {}) {\n    const _this = this;\n    let _width, _height;\n    let _widthHalf, _heightHalf;\n    const cache = {\n      camera: { style: \"\" },\n      objects: /* @__PURE__ */ new WeakMap()\n    };\n    const domElement = parameters.element !== void 0 ? parameters.element : document.createElement(\"div\");\n    domElement.style.overflow = \"hidden\";\n    this.domElement = domElement;\n    const viewElement = document.createElement(\"div\");\n    viewElement.style.transformOrigin = \"0 0\";\n    viewElement.style.pointerEvents = \"none\";\n    domElement.appendChild(viewElement);\n    const cameraElement = document.createElement(\"div\");\n    cameraElement.style.transformStyle = \"preserve-3d\";\n    viewElement.appendChild(cameraElement);\n    this.getSize = function() {\n      return {\n        width: _width,\n        height: _height\n      };\n    };\n    this.render = function(scene, camera) {\n      const fov = camera.projectionMatrix.elements[5] * _heightHalf;\n      if (camera.view && camera.view.enabled) {\n        viewElement.style.transform = `translate( ${-camera.view.offsetX * (_width / camera.view.width)}px, ${-camera.view.offsetY * (_height / camera.view.height)}px )`;\n        viewElement.style.transform += `scale( ${camera.view.fullWidth / camera.view.width}, ${camera.view.fullHeight / camera.view.height} )`;\n      } else {\n        viewElement.style.transform = \"\";\n      }\n      if (scene.matrixWorldAutoUpdate === true) scene.updateMatrixWorld();\n      if (camera.parent === null && camera.matrixWorldAutoUpdate === true) camera.updateMatrixWorld();\n      let tx, ty;\n      if (camera.isOrthographicCamera) {\n        tx = -(camera.right + camera.left) / 2;\n        ty = (camera.top + camera.bottom) / 2;\n      }\n      const scaleByViewOffset = camera.view && camera.view.enabled ? camera.view.height / camera.view.fullHeight : 1;\n      const cameraCSSMatrix = camera.isOrthographicCamera ? `scale( ${scaleByViewOffset} )scale(` + fov + \")translate(\" + epsilon(tx) + \"px,\" + epsilon(ty) + \"px)\" + getCameraCSSMatrix(camera.matrixWorldInverse) : `scale( ${scaleByViewOffset} )translateZ(` + fov + \"px)\" + getCameraCSSMatrix(camera.matrixWorldInverse);\n      const perspective = camera.isPerspectiveCamera ? \"perspective(\" + fov + \"px) \" : \"\";\n      const style = perspective + cameraCSSMatrix + \"translate(\" + _widthHalf + \"px,\" + _heightHalf + \"px)\";\n      if (cache.camera.style !== style) {\n        cameraElement.style.transform = style;\n        cache.camera.style = style;\n      }\n      renderObject(scene, scene, camera, cameraCSSMatrix);\n    };\n    this.setSize = function(width, height) {\n      _width = width;\n      _height = height;\n      _widthHalf = _width / 2;\n      _heightHalf = _height / 2;\n      domElement.style.width = width + \"px\";\n      domElement.style.height = height + \"px\";\n      viewElement.style.width = width + \"px\";\n      viewElement.style.height = height + \"px\";\n      cameraElement.style.width = width + \"px\";\n      cameraElement.style.height = height + \"px\";\n    };\n    function epsilon(value) {\n      return Math.abs(value) < 1e-10 ? 0 : value;\n    }\n    function getCameraCSSMatrix(matrix) {\n      const elements = matrix.elements;\n      return \"matrix3d(\" + epsilon(elements[0]) + \",\" + epsilon(-elements[1]) + \",\" + epsilon(elements[2]) + \",\" + epsilon(elements[3]) + \",\" + epsilon(elements[4]) + \",\" + epsilon(-elements[5]) + \",\" + epsilon(elements[6]) + \",\" + epsilon(elements[7]) + \",\" + epsilon(elements[8]) + \",\" + epsilon(-elements[9]) + \",\" + epsilon(elements[10]) + \",\" + epsilon(elements[11]) + \",\" + epsilon(elements[12]) + \",\" + epsilon(-elements[13]) + \",\" + epsilon(elements[14]) + \",\" + epsilon(elements[15]) + \")\";\n    }\n    function getObjectCSSMatrix(matrix) {\n      const elements = matrix.elements;\n      const matrix3d = \"matrix3d(\" + epsilon(elements[0]) + \",\" + epsilon(elements[1]) + \",\" + epsilon(elements[2]) + \",\" + epsilon(elements[3]) + \",\" + epsilon(-elements[4]) + \",\" + epsilon(-elements[5]) + \",\" + epsilon(-elements[6]) + \",\" + epsilon(-elements[7]) + \",\" + epsilon(elements[8]) + \",\" + epsilon(elements[9]) + \",\" + epsilon(elements[10]) + \",\" + epsilon(elements[11]) + \",\" + epsilon(elements[12]) + \",\" + epsilon(elements[13]) + \",\" + epsilon(elements[14]) + \",\" + epsilon(elements[15]) + \")\";\n      return \"translate(-50%,-50%)\" + matrix3d;\n    }\n    function hideObject(object) {\n      if (object.isCSS3DObject) object.element.style.display = \"none\";\n      for (let i = 0, l = object.children.length; i < l; i++) {\n        hideObject(object.children[i]);\n      }\n    }\n    function renderObject(object, scene, camera, cameraCSSMatrix) {\n      if (object.visible === false) {\n        hideObject(object);\n        return;\n      }\n      if (object.isCSS3DObject) {\n        const visible = object.layers.test(camera.layers) === true;\n        const element = object.element;\n        element.style.display = visible === true ? \"\" : \"none\";\n        if (visible === true) {\n          object.onBeforeRender(_this, scene, camera);\n          let style;\n          if (object.isCSS3DSprite) {\n            _matrix.copy(camera.matrixWorldInverse);\n            _matrix.transpose();\n            if (object.rotation2D !== 0) _matrix.multiply(_matrix2.makeRotationZ(object.rotation2D));\n            object.matrixWorld.decompose(_position, _quaternion, _scale);\n            _matrix.setPosition(_position);\n            _matrix.scale(_scale);\n            _matrix.elements[3] = 0;\n            _matrix.elements[7] = 0;\n            _matrix.elements[11] = 0;\n            _matrix.elements[15] = 1;\n            style = getObjectCSSMatrix(_matrix);\n          } else {\n            style = getObjectCSSMatrix(object.matrixWorld);\n          }\n          const cachedObject = cache.objects.get(object);\n          if (cachedObject === void 0 || cachedObject.style !== style) {\n            element.style.transform = style;\n            const objectData = { style };\n            cache.objects.set(object, objectData);\n          }\n          if (element.parentNode !== cameraElement) {\n            cameraElement.appendChild(element);\n          }\n          object.onAfterRender(_this, scene, camera);\n        }\n      }\n      for (let i = 0, l = object.children.length; i < l; i++) {\n        renderObject(object.children[i], scene, camera, cameraCSSMatrix);\n      }\n    }\n  }\n};\n\n// src/CSS3DContainer.ts\nvar CSS3DContainer = class {\n  constructor(viewer) {\n    this.viewer = viewer;\n    this.element = document.createElement(\"div\");\n    this.element.className = \"psv-markers-css3d-container\";\n    this.renderer = new CSS3DRenderer({ element: this.element });\n    this.scene = new Scene();\n    this.intersectionObserver = new IntersectionObserver((entries) => {\n      entries.forEach((entry) => {\n        const marker = entry.target[MARKER_DATA];\n        if (marker.config.visible) {\n          marker.viewportIntersection = entry.isIntersecting;\n        }\n      });\n    }, {\n      root: this.element\n    });\n    viewer.addEventListener(events2.ReadyEvent.type, this, { once: true });\n    viewer.addEventListener(events2.SizeUpdatedEvent.type, this);\n    viewer.addEventListener(events2.RenderEvent.type, this);\n  }\n  handleEvent(e) {\n    switch (e.type) {\n      case events2.ReadyEvent.type:\n      case events2.SizeUpdatedEvent.type:\n        this.updateSize();\n        break;\n      case events2.RenderEvent.type:\n        this.render();\n        break;\n    }\n  }\n  destroy() {\n    this.viewer.removeEventListener(events2.ReadyEvent.type, this);\n    this.viewer.removeEventListener(events2.SizeUpdatedEvent.type, this);\n    this.viewer.removeEventListener(events2.RenderEvent.type, this);\n    this.intersectionObserver.disconnect();\n  }\n  updateSize() {\n    const size = this.viewer.getSize();\n    this.renderer.setSize(size.width, size.height);\n  }\n  render() {\n    this.renderer.render(this.scene, this.viewer.renderer.camera);\n  }\n  addObject(marker) {\n    this.scene.add(marker.threeElement);\n    this.intersectionObserver.observe(marker.domElement);\n  }\n  removeObject(marker) {\n    this.scene.remove(marker.threeElement);\n    this.intersectionObserver.unobserve(marker.domElement);\n  }\n};\n\n// src/MarkerType.ts\nimport { PSVError } from \"@photo-sphere-viewer/core\";\nvar MarkerType = /* @__PURE__ */ ((MarkerType3) => {\n  MarkerType3[\"image\"] = \"image\";\n  MarkerType3[\"html\"] = \"html\";\n  MarkerType3[\"element\"] = \"element\";\n  MarkerType3[\"imageLayer\"] = \"imageLayer\";\n  MarkerType3[\"videoLayer\"] = \"videoLayer\";\n  MarkerType3[\"elementLayer\"] = \"elementLayer\";\n  MarkerType3[\"polygon\"] = \"polygon\";\n  MarkerType3[\"polygonPixels\"] = \"polygonPixels\";\n  MarkerType3[\"polyline\"] = \"polyline\";\n  MarkerType3[\"polylinePixels\"] = \"polylinePixels\";\n  MarkerType3[\"square\"] = \"square\";\n  MarkerType3[\"rect\"] = \"rect\";\n  MarkerType3[\"circle\"] = \"circle\";\n  MarkerType3[\"ellipse\"] = \"ellipse\";\n  MarkerType3[\"path\"] = \"path\";\n  return MarkerType3;\n})(MarkerType || {});\nfunction getMarkerType(config, allowNone = false) {\n  const found = [];\n  Object.keys(MarkerType).forEach((type) => {\n    if (config[type]) {\n      found.push(type);\n    }\n  });\n  if (found.length === 0 && !allowNone) {\n    throw new PSVError(`missing marker content, either ${Object.keys(MarkerType).join(\", \")}`);\n  } else if (found.length > 1) {\n    throw new PSVError(`multiple marker content, either ${Object.keys(MarkerType).join(\", \")}`);\n  }\n  return found[0];\n}\n\n// src/markers/AbstractStandardMarker.ts\nimport { CONSTANTS, PSVError as PSVError3, utils as utils4 } from \"@photo-sphere-viewer/core\";\nimport { MathUtils } from \"three\";\n\n// src/markers/AbstractDomMarker.ts\nimport { utils as utils3 } from \"@photo-sphere-viewer/core\";\n\n// src/markers/Marker.ts\nimport { PSVError as PSVError2, utils as utils2 } from \"@photo-sphere-viewer/core\";\nvar Marker = class {\n  constructor(viewer, plugin, config) {\n    this.viewer = viewer;\n    this.plugin = plugin;\n    /** @internal */\n    this.state = {\n      anchor: null,\n      visible: false,\n      staticTooltip: false,\n      position: null,\n      position2D: null,\n      positions3D: null,\n      size: null\n    };\n    if (!config.id) {\n      throw new PSVError2(\"missing marker id\");\n    }\n    this.type = getMarkerType(config);\n    this.createElement();\n    this.update(config);\n  }\n  get id() {\n    return this.config.id;\n  }\n  get data() {\n    return this.config.data;\n  }\n  get domElement() {\n    return null;\n  }\n  get threeElement() {\n    return null;\n  }\n  get video() {\n    return null;\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    delete this.viewer;\n    delete this.plugin;\n    delete this.element;\n    this.hideTooltip();\n  }\n  /**\n   * Checks if it is a 3D marker (imageLayer, videoLayer)\n   */\n  is3d() {\n    return false;\n  }\n  /**\n   * Checks if it is a normal marker (image, html, element)\n   */\n  isNormal() {\n    return false;\n  }\n  /**\n   * Checks if it is a polygon/polyline marker\n   */\n  isPoly() {\n    return false;\n  }\n  /**\n   * Checks if it is an SVG marker\n   */\n  isSvg() {\n    return false;\n  }\n  /**\n   * Checks if it is an CSS3D marker\n   */\n  isCss3d() {\n    return false;\n  }\n  /**\n   * Updates the marker with new properties\n   * @throws {@link PSVError} if the configuration is invalid\n   * @internal\n   */\n  update(config) {\n    const newType = getMarkerType(config, true);\n    if (newType !== void 0 && newType !== this.type) {\n      throw new PSVError2(`cannot change marker ${config.id} type`);\n    }\n    this.config = utils2.deepmerge(this.config, config);\n    if (typeof this.config.tooltip === \"string\") {\n      this.config.tooltip = { content: this.config.tooltip };\n    }\n    if (this.config.tooltip && !this.config.tooltip.trigger) {\n      this.config.tooltip.trigger = \"hover\";\n    }\n    if (utils2.isNil(this.config.visible)) {\n      this.config.visible = true;\n    }\n    if (utils2.isNil(this.config.zIndex)) {\n      this.config.zIndex = 1;\n    }\n    if (utils2.isNil(this.config.opacity)) {\n      this.config.opacity = 1;\n    }\n    if (this.config.rotation) {\n      const rot = this.config.rotation;\n      if (typeof rot === \"object\") {\n        this.config.rotation = {\n          yaw: rot.yaw ? utils2.parseAngle(rot.yaw, true, false) : 0,\n          pitch: rot.pitch ? utils2.parseAngle(rot.pitch, true, false) : 0,\n          roll: rot.roll ? utils2.parseAngle(rot.roll, true, false) : 0\n        };\n      } else {\n        this.config.rotation = {\n          yaw: 0,\n          pitch: 0,\n          roll: utils2.parseAngle(rot, true, false)\n        };\n      }\n    } else {\n      this.config.rotation = { yaw: 0, pitch: 0, roll: 0 };\n    }\n    this.state.anchor = utils2.parsePoint(this.config.anchor);\n  }\n  /**\n   * Returns the markers list content for the marker, it can be either :\n   * - the `listContent`\n   * - the `tooltip`\n   * - the `html`\n   * - the `id`\n   * @internal\n   */\n  getListContent() {\n    if (this.config.listContent) {\n      return this.config.listContent;\n    } else if (this.config.tooltip?.content) {\n      return this.config.tooltip.content;\n    } else if (this.config.html) {\n      return this.config.html;\n    } else {\n      return this.id;\n    }\n  }\n  /**\n   * Display the tooltip of this marker\n   * @internal\n   */\n  showTooltip(clientX, clientY, forceUpdate = false) {\n    if (this.state.visible && this.config.tooltip?.content && this.state.position2D) {\n      const config = {\n        ...this.config.tooltip,\n        style: {\n          // prevents conflicts with tooltip tracking\n          pointerEvents: this.state.staticTooltip ? \"auto\" : \"none\"\n        },\n        data: this,\n        top: 0,\n        left: 0\n      };\n      if (this.isPoly() || this.is3d() || this.isCss3d()) {\n        if (clientX || clientY) {\n          const viewerPos = utils2.getPosition(this.viewer.container);\n          config.top = clientY - viewerPos.y + 10;\n          config.left = clientX - viewerPos.x;\n          config.box = {\n            // separate the tooltip from the cursor\n            width: 20,\n            height: 20\n          };\n        } else {\n          config.top = this.state.position2D.y;\n          config.left = this.state.position2D.x;\n        }\n      } else {\n        const position = this.viewer.dataHelper.vector3ToViewerCoords(this.state.positions3D[0]);\n        let width = this.state.size.width;\n        let height = this.state.size.height;\n        if (this.config.hoverScale && !this.state.staticTooltip) {\n          width *= this.config.hoverScale.amount;\n          height *= this.config.hoverScale.amount;\n        }\n        config.top = position.y - height * this.state.anchor.y + height / 2;\n        config.left = position.x - width * this.state.anchor.x + width / 2;\n        config.box = { width, height };\n      }\n      if (this.tooltip) {\n        if (forceUpdate) {\n          this.tooltip.update(this.config.tooltip.content, config);\n        } else {\n          this.tooltip.move(config);\n        }\n      } else {\n        this.tooltip = this.viewer.createTooltip(config);\n      }\n    }\n  }\n  /**\n   * Hides the tooltip of this marker\n   * @internal\n   */\n  hideTooltip() {\n    if (this.tooltip) {\n      this.tooltip.hide();\n      this.tooltip = null;\n    }\n  }\n};\n\n// src/markers/AbstractDomMarker.ts\nvar AbstractDomMarker = class extends Marker {\n  get domElement() {\n    return this.element;\n  }\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n  }\n  afterCreateElement() {\n    this.element[MARKER_DATA] = this;\n  }\n  destroy() {\n    delete this.element[MARKER_DATA];\n    super.destroy();\n  }\n  update(config) {\n    super.update(config);\n    const element = this.domElement;\n    element.id = `psv-marker-${this.config.id}`;\n    element.setAttribute(\"class\", \"psv-marker\");\n    if (this.state.visible) {\n      element.classList.add(\"psv-marker--visible\");\n    }\n    if (this.config.tooltip) {\n      element.classList.add(\"psv-marker--has-tooltip\");\n    }\n    if (this.config.content) {\n      element.classList.add(\"psv-marker--has-content\");\n    }\n    if (this.config.className) {\n      utils3.addClasses(element, this.config.className);\n    }\n    element.style.opacity = `${this.config.opacity}`;\n    element.style.zIndex = `${30 + this.config.zIndex}`;\n    if (this.config.style) {\n      Object.assign(element.style, this.config.style);\n    }\n  }\n};\n\n// src/markers/AbstractStandardMarker.ts\nvar AbstractStandardMarker = class extends AbstractDomMarker {\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n  }\n  afterCreateElement() {\n    super.afterCreateElement();\n    this.domElement.addEventListener(\"transitionend\", () => {\n      this.domElement.style.transition = \"\";\n    });\n  }\n  render({\n    viewerPosition,\n    zoomLevel,\n    hoveringMarker\n  }) {\n    this.__updateSize();\n    const position = this.viewer.dataHelper.vector3ToViewerCoords(this.state.positions3D[0]);\n    position.x -= this.state.size.width * this.state.anchor.x;\n    position.y -= this.state.size.height * this.state.anchor.y;\n    const isVisible = this.state.positions3D[0].dot(this.viewer.state.direction) > 0 && position.x + this.state.size.width >= 0 && position.x - this.state.size.width <= this.viewer.state.size.width && position.y + this.state.size.height >= 0 && position.y - this.state.size.height <= this.viewer.state.size.height;\n    if (isVisible) {\n      this.domElement.style.translate = `${position.x}px ${position.y}px 0px`;\n      this.applyScale({\n        zoomLevel,\n        viewerPosition,\n        mouseover: this === hoveringMarker\n      });\n      return position;\n    } else {\n      return null;\n    }\n  }\n  update(config) {\n    super.update(config);\n    if (!utils4.isExtendedPosition(this.config.position)) {\n      throw new PSVError3(`missing marker ${this.id} position`);\n    }\n    try {\n      this.state.position = this.viewer.dataHelper.cleanPosition(this.config.position);\n    } catch (e) {\n      throw new PSVError3(`invalid marker ${this.id} position`, e);\n    }\n    this.state.positions3D = [this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position)];\n    const element = this.domElement;\n    element.classList.add(\"psv-marker--normal\");\n    if (this.config.scale && Array.isArray(this.config.scale)) {\n      this.config.scale = { zoom: this.config.scale };\n    }\n    if (typeof this.config.hoverScale === \"boolean\") {\n      this.config.hoverScale = this.config.hoverScale ? this.plugin.config.defaultHoverScale || DEFAULT_HOVER_SCALE : null;\n    } else if (typeof this.config.hoverScale === \"number\") {\n      this.config.hoverScale = { amount: this.config.hoverScale };\n    } else if (!this.config.hoverScale) {\n      this.config.hoverScale = this.plugin.config.defaultHoverScale;\n    }\n    if (this.config.hoverScale) {\n      this.config.hoverScale = {\n        ...this.plugin.config.defaultHoverScale,\n        ...this.config.hoverScale\n      };\n    }\n    element.style.rotate = this.config.rotation.roll !== 0 ? MathUtils.radToDeg(this.config.rotation.roll) + \"deg\" : null;\n    element.style.transformOrigin = `${this.state.anchor.x * 100}% ${this.state.anchor.y * 100}%`;\n  }\n  /**\n   * Computes the real size of a marker\n   * @description This is done by removing all it's transformations (if any) and making it visible\n   * before querying its bounding rect\n   */\n  __updateSize() {\n    if (!this.needsUpdateSize) {\n      return;\n    }\n    const element = this.domElement;\n    const makeTransparent = !this.state.visible || !this.state.size;\n    if (makeTransparent) {\n      element.classList.add(\"psv-marker--transparent\");\n    }\n    if (this.isSvg()) {\n      const rect = element.firstElementChild.getBoundingClientRect();\n      this.state.size = {\n        width: rect.width,\n        height: rect.height\n      };\n    } else {\n      this.state.size = {\n        width: element.offsetWidth,\n        height: element.offsetHeight\n      };\n    }\n    if (makeTransparent) {\n      element.classList.remove(\"psv-marker--transparent\");\n    }\n    if (this.isSvg()) {\n      element.style.width = this.state.size.width + \"px\";\n      element.style.height = this.state.size.height + \"px\";\n    }\n    if (this.type !== \"element\" /* element */) {\n      this.needsUpdateSize = false;\n    }\n  }\n  /**\n   * Computes and applies the scale to the marker\n   */\n  applyScale({\n    zoomLevel,\n    viewerPosition,\n    mouseover\n  }) {\n    if (mouseover !== null && this.config.hoverScale) {\n      this.domElement.style.transition = `scale ${this.config.hoverScale.duration}ms ${this.config.hoverScale.easing}`;\n    }\n    let scale = 1;\n    if (typeof this.config.scale === \"function\") {\n      scale = this.config.scale(zoomLevel, viewerPosition);\n    } else if (this.config.scale) {\n      if (Array.isArray(this.config.scale.zoom)) {\n        const [min, max] = this.config.scale.zoom;\n        scale *= min + (max - min) * CONSTANTS.EASINGS.inQuad(zoomLevel / 100);\n      }\n      if (Array.isArray(this.config.scale.yaw)) {\n        const [min, max] = this.config.scale.yaw;\n        const halfFov = MathUtils.degToRad(this.viewer.state.hFov) / 2;\n        const arc = Math.abs(utils4.getShortestArc(this.state.position.yaw, viewerPosition.yaw));\n        scale *= max + (min - max) * CONSTANTS.EASINGS.outQuad(Math.max(0, (halfFov - arc) / halfFov));\n      }\n    }\n    if (mouseover && this.config.hoverScale) {\n      scale *= this.config.hoverScale.amount;\n    }\n    this.domElement.style.scale = `${scale}`;\n  }\n};\n\n// src/markers/Marker3D.ts\nimport { PSVError as PSVError4, utils as utils6 } from \"@photo-sphere-viewer/core\";\nimport {\n  Group,\n  Mesh,\n  PlaneGeometry,\n  Texture as Texture2,\n  Vector3 as Vector33,\n  VideoTexture\n} from \"three\";\n\n// ../shared/ChromaKeyMaterial.ts\nimport { Color, ShaderMaterial, Vector2 } from \"three\";\n\n// ../shared/shaders/chromaKey.fragment.glsl\nvar chromaKey_fragment_default = \"// https://www.8thwall.com/playground/chromakey-threejs\\n\\nuniform sampler2D map;\\nuniform float alpha;\\nuniform bool keying;\\nuniform vec3 color;\\nuniform float similarity;\\nuniform float smoothness;\\nuniform float spill;\\n\\nvarying vec2 vUv;\\n\\nvec2 RGBtoUV(vec3 rgb) {\\n    return vec2(\\n        rgb.r * -0.169 + rgb.g * -0.331 + rgb.b *  0.5    + 0.5,\\n        rgb.r *  0.5   + rgb.g * -0.419 + rgb.b * -0.081  + 0.5\\n    );\\n}\\n\\nvoid main(void) {\\n    gl_FragColor = texture2D(map, vUv);\\n\\n    if (keying) {\\n        float chromaDist = distance(RGBtoUV(gl_FragColor.rgb), RGBtoUV(color));\\n\\n        float baseMask = chromaDist - similarity;\\n        float fullMask = pow(clamp(baseMask / smoothness, 0., 1.), 1.5);\\n        gl_FragColor.a *= fullMask * alpha;\\n\\n        float spillVal = pow(clamp(baseMask / spill, 0., 1.), 1.5);\\n        float desat = clamp(gl_FragColor.r * 0.2126 + gl_FragColor.g * 0.7152 + gl_FragColor.b * 0.0722, 0., 1.);\\n        gl_FragColor.rgb = mix(vec3(desat, desat, desat), gl_FragColor.rgb, spillVal);\\n    } else {\\n        gl_FragColor.a *= alpha;\\n    }\\n}\\n\";\n\n// ../shared/shaders/chromaKey.vertex.glsl\nvar chromaKey_vertex_default = \"varying vec2 vUv;\\nuniform vec2 repeat;\\nuniform vec2 offset;\\n\\nvoid main() {\\n    vUv = uv * repeat + offset;\\n    gl_Position = projectionMatrix *  modelViewMatrix * vec4( position, 1.0 );\\n}\\n\";\n\n// ../shared/ChromaKeyMaterial.ts\nvar ChromaKeyMaterial = class extends ShaderMaterial {\n  get map() {\n    return this.uniforms.map.value;\n  }\n  set map(map) {\n    this.uniforms.map.value = map;\n  }\n  set alpha(alpha) {\n    this.uniforms.alpha.value = alpha;\n  }\n  get offset() {\n    return this.uniforms.offset.value;\n  }\n  get repeat() {\n    return this.uniforms.repeat.value;\n  }\n  set chromaKey(chromaKey) {\n    this.uniforms.keying.value = chromaKey?.enabled === true;\n    if (chromaKey?.enabled) {\n      if (typeof chromaKey.color === \"object\" && \"r\" in chromaKey.color) {\n        this.uniforms.color.value.set(\n          chromaKey.color.r / 255,\n          chromaKey.color.g / 255,\n          chromaKey.color.b / 255\n        );\n      } else {\n        this.uniforms.color.value.set(chromaKey.color ?? 65280);\n      }\n      this.uniforms.similarity.value = chromaKey.similarity ?? 0.2;\n      this.uniforms.smoothness.value = chromaKey.smoothness ?? 0.2;\n    }\n  }\n  constructor(params) {\n    super({\n      transparent: true,\n      depthTest: false,\n      depthWrite: false,\n      uniforms: {\n        map: { value: params?.map },\n        repeat: { value: new Vector2(1, 1) },\n        offset: { value: new Vector2(0, 0) },\n        alpha: { value: params?.alpha ?? 1 },\n        keying: { value: false },\n        color: { value: new Color(65280) },\n        similarity: { value: 0.2 },\n        smoothness: { value: 0.2 },\n        spill: { value: 0.1 }\n      },\n      vertexShader: chromaKey_vertex_default,\n      fragmentShader: chromaKey_fragment_default\n    });\n    this.chromaKey = params?.chromaKey;\n  }\n};\n\n// ../shared/video-utils.ts\nfunction createVideo({\n  src,\n  withCredentials,\n  muted,\n  autoplay\n}) {\n  const video = document.createElement(\"video\");\n  video.crossOrigin = withCredentials ? \"use-credentials\" : \"anonymous\";\n  video.loop = true;\n  video.playsInline = true;\n  video.autoplay = autoplay;\n  video.muted = muted;\n  video.preload = \"metadata\";\n  if (src instanceof MediaStream) {\n    video.srcObject = src;\n  } else {\n    video.src = src;\n  }\n  return video;\n}\n\n// src/utils.ts\nimport { CONSTANTS as CONSTANTS2, utils as utils5 } from \"@photo-sphere-viewer/core\";\nimport { Vector3 as Vector32 } from \"three\";\nfunction greatArcIntermediaryPoint(p1, p2, f) {\n  const [\\u03BB1, \\u03C61] = p1;\n  const [\\u03BB2, \\u03C62] = p2;\n  const r = utils5.greatArcDistance(p1, p2);\n  const a = Math.sin((1 - f) * r) / Math.sin(r);\n  const b = Math.sin(f * r) / Math.sin(r);\n  const x = a * Math.cos(\\u03C61) * Math.cos(\\u03BB1) + b * Math.cos(\\u03C62) * Math.cos(\\u03BB2);\n  const y = a * Math.cos(\\u03C61) * Math.sin(\\u03BB1) + b * Math.cos(\\u03C62) * Math.sin(\\u03BB2);\n  const z = a * Math.sin(\\u03C61) + b * Math.sin(\\u03C62);\n  return [Math.atan2(y, x), Math.atan2(z, Math.sqrt(x * x + y * y))];\n}\nfunction getPolygonCoherentPoints(points) {\n  const workPoints = [points[0]];\n  let k = 0;\n  for (let i = 1; i < points.length; i++) {\n    const d = points[i - 1][0] - points[i][0];\n    if (d > Math.PI) {\n      k += 1;\n    } else if (d < -Math.PI) {\n      k -= 1;\n    }\n    workPoints.push([points[i][0] + k * 2 * Math.PI, points[i][1]]);\n  }\n  return workPoints;\n}\nfunction getPolygonCenter(polygon) {\n  const points = getPolygonCoherentPoints(polygon);\n  const sum = points.reduce((intermediary, point) => [intermediary[0] + point[0], intermediary[1] + point[1]]);\n  return [utils5.parseAngle(sum[0] / polygon.length), sum[1] / polygon.length];\n}\nfunction getPolylineCenter(polyline) {\n  const points = getPolygonCoherentPoints(polyline);\n  let length = 0;\n  const lengths = [];\n  for (let i = 0; i < points.length - 1; i++) {\n    const l = utils5.greatArcDistance(points[i], points[i + 1]) * CONSTANTS2.SPHERE_RADIUS;\n    lengths.push(l);\n    length += l;\n  }\n  let consumed = 0;\n  for (let j = 0; j < points.length - 1; j++) {\n    if (consumed + lengths[j] > length / 2) {\n      const r = (length / 2 - consumed) / lengths[j];\n      return greatArcIntermediaryPoint(points[j], points[j + 1], r);\n    }\n    consumed += lengths[j];\n  }\n  return points[Math.round(points.length / 2)];\n}\nvar C = new Vector32();\nvar N = new Vector32();\nvar V = new Vector32();\nvar X = new Vector32();\nvar Y = new Vector32();\nvar A = new Vector32();\nfunction getGreatCircleIntersection(P1, P2, direction) {\n  C.copy(direction).normalize();\n  N.crossVectors(P1, P2).normalize();\n  V.crossVectors(N, P1).normalize();\n  X.copy(P1).multiplyScalar(-C.dot(V));\n  Y.copy(V).multiplyScalar(C.dot(P1));\n  const H = new Vector32().addVectors(X, Y).normalize();\n  A.crossVectors(H, C);\n  return H.applyAxisAngle(A, 0.01).multiplyScalar(CONSTANTS2.SPHERE_RADIUS);\n}\n\n// src/markers/Marker3D.ts\nvar Marker3D = class extends Marker {\n  get threeElement() {\n    return this.element;\n  }\n  get threeMesh() {\n    return this.threeElement.children[0];\n  }\n  get video() {\n    if (this.type === \"videoLayer\" /* videoLayer */) {\n      return this.threeMesh.material.map.image;\n    } else {\n      return null;\n    }\n  }\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n  }\n  is3d() {\n    return true;\n  }\n  createElement() {\n    const material = new ChromaKeyMaterial({ alpha: 0 });\n    const geometry = new PlaneGeometry(1, 1);\n    const mesh = new Mesh(geometry, material);\n    mesh.userData = { [MARKER_DATA]: this };\n    Object.defineProperty(mesh, \"visible\", {\n      enumerable: true,\n      get: function() {\n        return this.userData[MARKER_DATA].config.visible;\n      },\n      set: function(visible) {\n        this.userData[MARKER_DATA].config.visible = visible;\n      }\n    });\n    this.element = new Group().add(mesh);\n    if (this.type === \"videoLayer\" /* videoLayer */) {\n      this.viewer.needsContinuousUpdate(true);\n    }\n  }\n  destroy() {\n    delete this.threeMesh.userData[MARKER_DATA];\n    if (this.type === \"videoLayer\" /* videoLayer */) {\n      this.video.pause();\n      this.viewer.needsContinuousUpdate(false);\n    }\n    super.destroy();\n  }\n  render() {\n    if (this.viewer.renderer.isObjectVisible(this.threeMesh)) {\n      return this.viewer.dataHelper.sphericalCoordsToViewerCoords(this.state.position);\n    } else {\n      return null;\n    }\n  }\n  update(config) {\n    super.update(config);\n    const mesh = this.threeMesh;\n    const group = mesh.parent;\n    const material = mesh.material;\n    if (utils6.isExtendedPosition(this.config.position)) {\n      try {\n        this.state.position = this.viewer.dataHelper.cleanPosition(this.config.position);\n      } catch (e) {\n        throw new PSVError4(`invalid marker ${this.id} position`, e);\n      }\n      if (!this.config.size) {\n        throw new PSVError4(`missing marker ${this.id} size`);\n      }\n      this.state.size = this.config.size;\n      mesh.scale.set(this.config.size.width / 100, this.config.size.height / 100, 1);\n      mesh.position.set(mesh.scale.x * (0.5 - this.state.anchor.x), mesh.scale.y * (this.state.anchor.y - 0.5), 0);\n      mesh.rotation.set(0, 0, 0);\n      this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position, group.position);\n      group.lookAt(0, group.position.y, 0);\n      mesh.rotateY(-this.config.rotation.yaw);\n      mesh.rotateX(-this.config.rotation.pitch);\n      mesh.rotateZ(-this.config.rotation.roll);\n      const p = mesh.geometry.getAttribute(\"position\");\n      this.state.positions3D = [0, 1, 3, 2].map((i) => {\n        const v3 = new Vector33();\n        v3.fromBufferAttribute(p, i);\n        return mesh.localToWorld(v3);\n      });\n    } else {\n      if (this.config.position?.length !== 4) {\n        throw new PSVError4(`missing marker ${this.id} position`);\n      }\n      let positions;\n      try {\n        positions = this.config.position.map((p2) => this.viewer.dataHelper.cleanPosition(p2));\n      } catch (e) {\n        throw new PSVError4(`invalid marker ${this.id} position`, e);\n      }\n      const positions3D = positions.map((p2) => this.viewer.dataHelper.sphericalCoordsToVector3(p2));\n      const centroid = getPolygonCenter(positions.map(({ yaw, pitch }) => [yaw, pitch]));\n      this.state.position = { yaw: centroid[0], pitch: centroid[1] };\n      this.state.positions3D = positions3D;\n      const p = mesh.geometry.getAttribute(\"position\");\n      [\n        positions3D[0],\n        positions3D[1],\n        positions3D[3],\n        // not a mistake!\n        positions3D[2]\n      ].forEach((v, i) => {\n        p.setX(i, v.x);\n        p.setY(i, v.y);\n        p.setZ(i, v.z);\n      });\n      p.needsUpdate = true;\n      this.__setTextureWrap(material);\n    }\n    switch (this.type) {\n      case \"videoLayer\" /* videoLayer */:\n        if (this.definition !== this.config.videoLayer) {\n          material.map?.dispose();\n          const video = createVideo({\n            src: this.config.videoLayer,\n            withCredentials: this.viewer.config.withCredentials,\n            muted: true,\n            autoplay: this.config.autoplay ?? true\n          });\n          const texture = new VideoTexture(video);\n          material.map = texture;\n          material.alpha = 0;\n          video.addEventListener(\"loadedmetadata\", () => {\n            if (!this.viewer) {\n              return;\n            }\n            material.alpha = this.config.opacity;\n            if (!utils6.isExtendedPosition(this.config.position)) {\n              mesh.material.userData[MARKER_DATA] = { width: video.videoWidth, height: video.videoHeight };\n              this.__setTextureWrap(material);\n            }\n          }, { once: true });\n          if (video.autoplay) {\n            video.play();\n          }\n          this.definition = this.config.videoLayer;\n        } else {\n          material.alpha = this.config.opacity;\n        }\n        break;\n      case \"imageLayer\" /* imageLayer */:\n        if (this.definition !== this.config.imageLayer) {\n          material.map?.dispose();\n          const texture = new Texture2();\n          material.map = texture;\n          material.alpha = 0;\n          this.viewer.textureLoader.loadImage(this.config.imageLayer).then((image) => {\n            if (!this.viewer) {\n              return;\n            }\n            if (!utils6.isExtendedPosition(this.config.position)) {\n              mesh.material.userData[MARKER_DATA] = { width: image.width, height: image.height };\n              this.__setTextureWrap(material);\n            }\n            texture.image = image;\n            texture.anisotropy = 4;\n            texture.needsUpdate = true;\n            material.alpha = this.config.opacity;\n            this.viewer.needsUpdate();\n          });\n          this.definition = this.config.imageLayer;\n        } else {\n          material.alpha = this.config.opacity;\n        }\n        break;\n    }\n    material.chromaKey = this.config.chromaKey;\n    mesh.renderOrder = 1e3 + this.config.zIndex;\n    mesh.geometry.boundingBox = null;\n  }\n  /**\n   * For layers positionned by corners, applies offset to the texture in order to keep its proportions\n   */\n  __setTextureWrap(material) {\n    const imageSize = material.userData[MARKER_DATA];\n    if (!imageSize || !imageSize.height || !imageSize.width) {\n      material.repeat.set(1, 1);\n      material.offset.set(0, 0);\n      return;\n    }\n    const positions = this.config.position.map((p) => {\n      return this.viewer.dataHelper.cleanPosition(p);\n    });\n    const w1 = utils6.greatArcDistance(\n      [positions[0].yaw, positions[0].pitch],\n      [positions[1].yaw, positions[1].pitch]\n    );\n    const w2 = utils6.greatArcDistance(\n      [positions[3].yaw, positions[3].pitch],\n      [positions[2].yaw, positions[2].pitch]\n    );\n    const h1 = utils6.greatArcDistance(\n      [positions[1].yaw, positions[1].pitch],\n      [positions[2].yaw, positions[2].pitch]\n    );\n    const h2 = utils6.greatArcDistance(\n      [positions[0].yaw, positions[0].pitch],\n      [positions[3].yaw, positions[3].pitch]\n    );\n    const layerRatio = (w1 + w2) / (h1 + h2);\n    const imageRatio = imageSize.width / imageSize.height;\n    let hMargin = 0;\n    let vMargin = 0;\n    if (layerRatio < imageRatio) {\n      hMargin = imageRatio - layerRatio;\n    } else {\n      vMargin = 1 / imageRatio - 1 / layerRatio;\n    }\n    material.repeat.set(1 - hMargin, 1 - vMargin);\n    material.offset.set(hMargin / 2, vMargin / 2);\n  }\n};\n\n// src/markers/MarkerCSS3D.ts\nimport { PSVError as PSVError5, utils as utils7 } from \"@photo-sphere-viewer/core\";\nvar MarkerCSS3D = class extends AbstractDomMarker {\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n    /**\n     * @internal\n     */\n    this.viewportIntersection = false;\n  }\n  get threeElement() {\n    return this.object;\n  }\n  isCss3d() {\n    return true;\n  }\n  createElement() {\n    this.element = document.createElement(\"div\");\n    this.object = new CSS3DObject(this.element);\n    this.object.userData = { [MARKER_DATA]: this };\n    Object.defineProperty(this.object, \"visible\", {\n      enumerable: true,\n      get: function() {\n        return this.userData[MARKER_DATA].config.visible;\n      },\n      set: function(visible) {\n        this.userData[MARKER_DATA].config.visible = visible;\n      }\n    });\n    this.afterCreateElement();\n  }\n  destroy() {\n    delete this.object.userData[MARKER_DATA];\n    delete this.object;\n    super.destroy();\n  }\n  render({\n    viewerPosition,\n    zoomLevel\n  }) {\n    const element = this.domElement;\n    this.state.size = {\n      width: element.offsetWidth,\n      height: element.offsetHeight\n    };\n    const isVisible = this.state.positions3D[0].dot(this.viewer.state.direction) > 0 && this.viewportIntersection;\n    if (isVisible) {\n      const position = this.viewer.dataHelper.sphericalCoordsToViewerCoords(this.state.position);\n      this.config.elementLayer.updateMarker?.({\n        marker: this,\n        position,\n        viewerPosition,\n        zoomLevel,\n        viewerSize: this.viewer.state.size\n      });\n      return position;\n    } else {\n      return null;\n    }\n  }\n  update(config) {\n    super.update(config);\n    if (!utils7.isExtendedPosition(this.config.position)) {\n      throw new PSVError5(`missing marker ${this.id} position`);\n    }\n    try {\n      this.state.position = this.viewer.dataHelper.cleanPosition(this.config.position);\n    } catch (e) {\n      throw new PSVError5(`invalid marker ${this.id} position`, e);\n    }\n    this.state.positions3D = [this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position)];\n    const object = this.threeElement;\n    const element = this.domElement;\n    element.classList.add(\"psv-marker--css3d\");\n    element.childNodes.forEach((n) => n.remove());\n    element.appendChild(this.config.elementLayer);\n    this.config.elementLayer.style.display = \"block\";\n    object.position.copy(this.state.positions3D[0]).multiplyScalar(100);\n    object.lookAt(0, this.state.positions3D[0].y * 100, 0);\n    object.rotateY(-this.config.rotation.yaw);\n    object.rotateX(-this.config.rotation.pitch);\n    object.rotateZ(-this.config.rotation.roll);\n  }\n};\n\n// src/markers/MarkerNormal.ts\nimport { PSVError as PSVError6 } from \"@photo-sphere-viewer/core\";\nvar MarkerNormal = class extends AbstractStandardMarker {\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n  }\n  isNormal() {\n    return true;\n  }\n  createElement() {\n    this.element = document.createElement(\"div\");\n    this.afterCreateElement();\n  }\n  render(params) {\n    const position = super.render(params);\n    if (position && this.type === \"element\" /* element */) {\n      this.config.element.updateMarker?.({\n        marker: this,\n        position,\n        viewerPosition: params.viewerPosition,\n        zoomLevel: params.zoomLevel,\n        viewerSize: this.viewer.state.size\n      });\n    }\n    return position;\n  }\n  update(config) {\n    super.update(config);\n    const element = this.domElement;\n    if (this.config.image && !this.config.size) {\n      throw new PSVError6(`missing marker ${this.id} size`);\n    }\n    if (this.config.size) {\n      this.needsUpdateSize = false;\n      this.state.size = this.config.size;\n      element.style.width = this.config.size.width + \"px\";\n      element.style.height = this.config.size.height + \"px\";\n    } else {\n      this.needsUpdateSize = true;\n    }\n    switch (this.type) {\n      case \"image\" /* image */:\n        this.definition = this.config.image;\n        element.style.backgroundImage = `url(\"${this.config.image}\")`;\n        break;\n      case \"html\" /* html */:\n        this.definition = this.config.html;\n        element.innerHTML = this.config.html;\n        break;\n      case \"element\" /* element */:\n        if (this.definition !== this.config.element) {\n          this.definition = this.config.element;\n          element.childNodes.forEach((n) => n.remove());\n          element.appendChild(this.config.element);\n          this.config.element.style.display = \"block\";\n        }\n        break;\n    }\n  }\n};\n\n// src/markers/MarkerPolygon.ts\nimport {\n  PSVError as PSVError7,\n  utils as utils8\n} from \"@photo-sphere-viewer/core\";\nvar MarkerPolygon = class extends AbstractDomMarker {\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n  }\n  createElement() {\n    this.element = document.createElementNS(SVG_NS, \"path\");\n    this.element[MARKER_DATA] = this;\n  }\n  isPoly() {\n    return true;\n  }\n  /**\n   * Checks if it is a polygon/polyline using pixel coordinates\n   */\n  get isPixels() {\n    return this.type === \"polygonPixels\" /* polygonPixels */ || this.type === \"polylinePixels\" /* polylinePixels */;\n  }\n  /**\n   * Checks if it is a polygon marker\n   */\n  get isPolygon() {\n    return this.type === \"polygon\" /* polygon */ || this.type === \"polygonPixels\" /* polygonPixels */;\n  }\n  /**\n   * Checks if it is a polyline marker\n   */\n  get isPolyline() {\n    return this.type === \"polyline\" /* polyline */ || this.type === \"polylinePixels\" /* polylinePixels */;\n  }\n  get coords() {\n    return this.definition;\n  }\n  render() {\n    const positions = this.__getAllPolyPositions();\n    const isVisible = positions[0].length > (this.isPolygon ? 2 : 1);\n    if (isVisible) {\n      const position = this.viewer.dataHelper.sphericalCoordsToViewerCoords(this.state.position);\n      const points = positions.filter((innerPos) => innerPos.length > 0).map((innerPos) => {\n        let innerPoints = \"M\";\n        innerPoints += innerPos.map((pos) => `${pos.x - position.x},${pos.y - position.y}`).join(\"L\");\n        if (this.isPolygon) {\n          innerPoints += \"Z\";\n        }\n        return innerPoints;\n      }).join(\" \");\n      this.domElement.setAttributeNS(null, \"d\", points);\n      this.domElement.setAttributeNS(null, \"transform\", `translate(${position.x} ${position.y})`);\n      return position;\n    } else {\n      return null;\n    }\n  }\n  update(config) {\n    super.update(config);\n    const element = this.domElement;\n    element.classList.add(\"psv-marker--poly\");\n    if (this.config.svgStyle) {\n      Object.entries(this.config.svgStyle).forEach(([prop, value]) => {\n        element.setAttributeNS(null, utils8.dasherize(prop), value);\n      });\n      if (this.isPolyline && !this.config.svgStyle.fill) {\n        element.setAttributeNS(null, \"fill\", \"none\");\n      }\n    } else if (this.isPolygon) {\n      element.setAttributeNS(null, \"fill\", \"rgba(0,0,0,0.5)\");\n    } else if (this.isPolyline) {\n      element.setAttributeNS(null, \"fill\", \"none\");\n      element.setAttributeNS(null, \"stroke\", \"rgb(0,0,0)\");\n    }\n    try {\n      let actualPoly = this.config[this.type];\n      if (!Array.isArray(actualPoly[0]) && typeof actualPoly[0] !== \"object\") {\n        for (let i = 0; i < actualPoly.length; i++) {\n          actualPoly.splice(i, 2, [actualPoly[i], actualPoly[i + 1]]);\n        }\n      }\n      if (!Array.isArray(actualPoly[0][0]) && typeof actualPoly[0][0] !== \"object\") {\n        actualPoly = [actualPoly];\n      }\n      if (this.isPolyline && actualPoly.length > 1) {\n        throw new PSVError7(`polylines cannot have holes`);\n      }\n      if (this.isPixels) {\n        this.definition = actualPoly.map((coords) => {\n          return coords.map((coord) => {\n            let sphericalCoord;\n            if (utils8.isExtendedPosition(coord)) {\n              sphericalCoord = this.viewer.dataHelper.cleanPosition(coord);\n            } else {\n              sphericalCoord = this.viewer.dataHelper.textureCoordsToSphericalCoords({\n                textureX: coord[0],\n                textureY: coord[1]\n              });\n            }\n            return [sphericalCoord.yaw, sphericalCoord.pitch];\n          });\n        });\n      } else {\n        this.definition = actualPoly.map((coords) => {\n          return coords.map((coord) => {\n            let sphericalCoord;\n            if (utils8.isExtendedPosition(coord)) {\n              sphericalCoord = this.viewer.dataHelper.cleanPosition(coord);\n            } else {\n              sphericalCoord = this.viewer.dataHelper.cleanPosition({\n                yaw: coord[0],\n                pitch: coord[1]\n              });\n            }\n            return [sphericalCoord.yaw, sphericalCoord.pitch];\n          });\n        });\n      }\n    } catch (e) {\n      throw new PSVError7(`invalid marker ${this.id} position`, e);\n    }\n    const centroid = this.isPolygon ? getPolygonCenter(this.coords[0]) : getPolylineCenter(this.coords[0]);\n    this.state.position = { yaw: centroid[0], pitch: centroid[1] };\n    this.positions3D = this.coords.map((coords) => {\n      return coords.map((coord) => {\n        return this.viewer.dataHelper.sphericalCoordsToVector3({ yaw: coord[0], pitch: coord[1] });\n      });\n    });\n    this.state.positions3D = this.positions3D[0];\n  }\n  __getAllPolyPositions() {\n    return this.positions3D.map((positions) => {\n      return this.__getPolyPositions(positions);\n    });\n  }\n  /**\n   * Computes viewer coordinates of each point of a polygon/polyline<br>\n   * It handles points behind the camera by creating intermediary points suitable for the projector\n   */\n  __getPolyPositions(positions) {\n    const nbVectors = positions.length;\n    const positions3D = positions.map((vector) => {\n      return {\n        vector,\n        visible: vector.dot(this.viewer.state.direction) > 0\n      };\n    });\n    const toBeComputed = [];\n    positions3D.forEach((pos, i) => {\n      if (!pos.visible) {\n        const neighbours = [\n          i === 0 ? positions3D[nbVectors - 1] : positions3D[i - 1],\n          i === nbVectors - 1 ? positions3D[0] : positions3D[i + 1]\n        ];\n        neighbours.forEach((neighbour) => {\n          if (neighbour.visible) {\n            toBeComputed.push({\n              visible: neighbour.vector,\n              invisible: pos.vector,\n              index: i\n            });\n          }\n        });\n      }\n    });\n    toBeComputed.reverse().forEach((pair) => {\n      positions3D.splice(pair.index, 0, {\n        vector: getGreatCircleIntersection(pair.visible, pair.invisible, this.viewer.state.direction),\n        visible: true\n      });\n    });\n    return positions3D.filter((pos) => pos.visible).map((pos) => this.viewer.dataHelper.vector3ToViewerCoords(pos.vector));\n  }\n};\n\n// src/markers/MarkerSvg.ts\nimport { utils as utils9 } from \"@photo-sphere-viewer/core\";\nvar MarkerSvg = class extends AbstractStandardMarker {\n  get svgElement() {\n    return this.domElement.firstElementChild;\n  }\n  constructor(viewer, plugin, config) {\n    super(viewer, plugin, config);\n  }\n  isSvg() {\n    return true;\n  }\n  createElement() {\n    const svgType = this.type === \"square\" /* square */ ? \"rect\" : this.type;\n    const elt = document.createElementNS(SVG_NS, svgType);\n    this.element = document.createElementNS(SVG_NS, \"svg\");\n    this.element.appendChild(elt);\n    this.afterCreateElement();\n  }\n  update(config) {\n    super.update(config);\n    const svgElement = this.svgElement;\n    this.needsUpdateSize = true;\n    switch (this.type) {\n      case \"square\" /* square */:\n        this.definition = {\n          x: 0,\n          y: 0,\n          width: this.config.square,\n          height: this.config.square\n        };\n        break;\n      case \"rect\" /* rect */:\n        if (Array.isArray(this.config.rect)) {\n          this.definition = {\n            x: 0,\n            y: 0,\n            width: this.config.rect[0],\n            height: this.config.rect[1]\n          };\n        } else {\n          this.definition = {\n            x: 0,\n            y: 0,\n            width: this.config.rect.width,\n            height: this.config.rect.height\n          };\n        }\n        break;\n      case \"circle\" /* circle */:\n        this.definition = {\n          cx: this.config.circle,\n          cy: this.config.circle,\n          r: this.config.circle\n        };\n        break;\n      case \"ellipse\" /* ellipse */:\n        if (Array.isArray(this.config.ellipse)) {\n          this.definition = {\n            cx: this.config.ellipse[0],\n            cy: this.config.ellipse[1],\n            rx: this.config.ellipse[0],\n            ry: this.config.ellipse[1]\n          };\n        } else {\n          this.definition = {\n            cx: this.config.ellipse.rx,\n            cy: this.config.ellipse.ry,\n            rx: this.config.ellipse.rx,\n            ry: this.config.ellipse.ry\n          };\n        }\n        break;\n      case \"path\" /* path */:\n        this.definition = {\n          d: this.config.path\n        };\n        break;\n    }\n    Object.entries(this.definition).forEach(([prop, value]) => {\n      svgElement.setAttributeNS(null, prop, value);\n    });\n    if (this.config.svgStyle) {\n      Object.entries(this.config.svgStyle).forEach(([prop, value]) => {\n        svgElement.setAttributeNS(null, utils9.dasherize(prop), value);\n      });\n    } else {\n      svgElement.setAttributeNS(null, \"fill\", \"rgba(0,0,0,0.5)\");\n    }\n  }\n};\n\n// src/MarkersPlugin.ts\nvar getConfig = utils10.getConfigParser(\n  {\n    clickEventOnMarker: false,\n    gotoMarkerSpeed: \"8rpm\",\n    markers: null,\n    defaultHoverScale: null\n  },\n  {\n    defaultHoverScale(defaultHoverScale) {\n      if (!defaultHoverScale) {\n        return null;\n      }\n      if (defaultHoverScale === true) {\n        defaultHoverScale = DEFAULT_HOVER_SCALE;\n      }\n      if (typeof defaultHoverScale === \"number\") {\n        defaultHoverScale = { amount: defaultHoverScale };\n      }\n      return {\n        ...DEFAULT_HOVER_SCALE,\n        ...defaultHoverScale\n      };\n    }\n  }\n);\nfunction getMarkerCtor(config) {\n  const type = getMarkerType(config, false);\n  switch (type) {\n    case \"image\":\n    case \"html\":\n    case \"element\":\n      return MarkerNormal;\n    case \"imageLayer\":\n    case \"videoLayer\":\n      return Marker3D;\n    case \"elementLayer\":\n      return MarkerCSS3D;\n    case \"polygon\":\n    case \"polyline\":\n    case \"polygonPixels\":\n    case \"polylinePixels\":\n      return MarkerPolygon;\n    case \"square\":\n    case \"rect\":\n    case \"circle\":\n    case \"ellipse\":\n    case \"path\":\n      return MarkerSvg;\n    default:\n      throw new PSVError8(\"invalid marker type\");\n  }\n}\nvar MarkersPlugin = class extends AbstractConfigurablePlugin {\n  constructor(viewer, config) {\n    super(viewer, config);\n    this.markers = {};\n    this.state = {\n      allVisible: true,\n      showAllTooltips: false,\n      currentMarker: null,\n      hoveringMarker: null,\n      // require a 2nd render (only the scene) when 3d markers visibility changes\n      needsReRender: false,\n      // use when updating a polygon marker in order to keep the current position\n      lastClientX: null,\n      lastClientY: null\n    };\n    this.container = document.createElement(\"div\");\n    this.container.className = \"psv-markers\";\n    this.viewer.container.appendChild(this.container);\n    this.container.addEventListener(\"contextmenu\", (e) => e.preventDefault());\n    this.svgContainer = document.createElementNS(SVG_NS, \"svg\");\n    this.svgContainer.setAttribute(\"class\", \"psv-markers-svg-container\");\n    this.container.appendChild(this.svgContainer);\n    this.css3DContainer = new CSS3DContainer(viewer);\n    this.container.appendChild(this.css3DContainer.element);\n    this.container.addEventListener(\"mouseenter\", this, true);\n    this.container.addEventListener(\"mouseleave\", this, true);\n    this.container.addEventListener(\"mousemove\", this, true);\n  }\n  /**\n   * @internal\n   */\n  init() {\n    super.init();\n    utils10.checkStylesheet(this.viewer.container, \"markers-plugin\");\n    this.viewer.addEventListener(events3.ClickEvent.type, this);\n    this.viewer.addEventListener(events3.DoubleClickEvent.type, this);\n    this.viewer.addEventListener(events3.RenderEvent.type, this);\n    this.viewer.addEventListener(events3.ConfigChangedEvent.type, this);\n    this.viewer.addEventListener(events3.ObjectEnterEvent.type, this);\n    this.viewer.addEventListener(events3.ObjectHoverEvent.type, this);\n    this.viewer.addEventListener(events3.ObjectLeaveEvent.type, this);\n    this.viewer.addEventListener(events3.ReadyEvent.type, this, { once: true });\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.clearMarkers(false);\n    this.viewer.unobserveObjects(MARKER_DATA);\n    this.viewer.removeEventListener(events3.ClickEvent.type, this);\n    this.viewer.removeEventListener(events3.DoubleClickEvent.type, this);\n    this.viewer.removeEventListener(events3.RenderEvent.type, this);\n    this.viewer.removeEventListener(events3.ObjectEnterEvent.type, this);\n    this.viewer.removeEventListener(events3.ObjectHoverEvent.type, this);\n    this.viewer.removeEventListener(events3.ObjectLeaveEvent.type, this);\n    this.viewer.removeEventListener(events3.ReadyEvent.type, this);\n    this.css3DContainer.destroy();\n    this.viewer.container.removeChild(this.container);\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case events3.ReadyEvent.type:\n        if (this.config.markers) {\n          this.setMarkers(this.config.markers);\n          delete this.config.markers;\n        }\n        break;\n      case events3.RenderEvent.type:\n        this.renderMarkers();\n        break;\n      case events3.ClickEvent.type:\n        this.__onClick(e, false);\n        break;\n      case events3.DoubleClickEvent.type:\n        this.__onClick(e, true);\n        break;\n      case events3.ObjectEnterEvent.type:\n      case events3.ObjectLeaveEvent.type:\n      case events3.ObjectHoverEvent.type:\n        if (e.userDataKey === MARKER_DATA) {\n          const event = e.originalEvent;\n          const marker = e.object.userData[MARKER_DATA];\n          switch (e.type) {\n            case events3.ObjectEnterEvent.type:\n              if (marker.config.style?.cursor) {\n                this.viewer.setCursor(marker.config.style.cursor);\n              } else if (marker.config.tooltip || marker.config.content) {\n                this.viewer.setCursor(\"pointer\");\n              }\n              this.__onEnterMarker(event, marker);\n              break;\n            case events3.ObjectLeaveEvent.type:\n              this.viewer.setCursor(null);\n              this.__onLeaveMarker(marker);\n              break;\n            case events3.ObjectHoverEvent.type:\n              this.__onHoverMarker(event, marker);\n              break;\n          }\n        }\n        break;\n      case \"mouseenter\": {\n        const marker = this.__getTargetMarker(utils10.getEventTarget(e));\n        this.__onEnterMarker(e, marker);\n        break;\n      }\n      case \"mouseleave\": {\n        const marker = this.__getTargetMarker(utils10.getEventTarget(e));\n        this.__onLeaveMarker(marker);\n        break;\n      }\n      case \"mousemove\": {\n        const marker = this.__getTargetMarker(utils10.getEventTarget(e), true);\n        this.__onHoverMarker(e, marker);\n        break;\n      }\n    }\n  }\n  /**\n   * Toggles all markers\n   */\n  toggleAllMarkers() {\n    if (this.state.allVisible) {\n      this.hideAllMarkers();\n    } else {\n      this.showAllMarkers();\n    }\n  }\n  /**\n   * Shows all markers\n   */\n  showAllMarkers() {\n    this.state.allVisible = true;\n    Object.values(this.markers).forEach((marker) => {\n      marker.config.visible = true;\n    });\n    this.renderMarkers();\n    this.dispatchEvent(new ShowMarkersEvent());\n  }\n  /**\n   * Hides all markers\n   */\n  hideAllMarkers() {\n    this.state.allVisible = false;\n    Object.values(this.markers).forEach((marker) => {\n      marker.config.visible = false;\n    });\n    this.renderMarkers();\n    this.dispatchEvent(new HideMarkersEvent());\n  }\n  /**\n   * Toggles the visibility of all tooltips\n   */\n  toggleAllTooltips() {\n    if (this.state.showAllTooltips) {\n      this.hideAllTooltips();\n    } else {\n      this.showAllTooltips();\n    }\n  }\n  /**\n   *  Displays all tooltips\n   */\n  showAllTooltips() {\n    this.state.showAllTooltips = true;\n    Object.values(this.markers).forEach((marker) => {\n      marker.state.staticTooltip = true;\n      marker.showTooltip();\n    });\n  }\n  /**\n   * Hides all tooltips\n   */\n  hideAllTooltips() {\n    this.state.showAllTooltips = false;\n    Object.values(this.markers).forEach((marker) => {\n      marker.state.staticTooltip = false;\n      marker.hideTooltip();\n    });\n  }\n  /**\n   * Returns the total number of markers\n   */\n  getNbMarkers() {\n    return Object.keys(this.markers).length;\n  }\n  /**\n   * Returns all the markers\n   */\n  getMarkers() {\n    return Object.values(this.markers);\n  }\n  /**\n   * Adds a new marker to viewer\n   * @throws {@link PSVError} when the marker's id is missing or already exists\n   */\n  addMarker(config, render = true) {\n    if (this.markers[config.id]) {\n      throw new PSVError8(`marker \"${config.id}\" already exists`);\n    }\n    const marker = new (getMarkerCtor(config))(this.viewer, this, config);\n    if (marker.isPoly()) {\n      this.svgContainer.appendChild(marker.domElement);\n    } else if (marker.isCss3d()) {\n      this.css3DContainer.addObject(marker);\n    } else if (marker.is3d()) {\n      this.viewer.renderer.addObject(marker.threeElement);\n    } else {\n      this.container.appendChild(marker.domElement);\n    }\n    this.markers[marker.id] = marker;\n    if (this.state.showAllTooltips) {\n      marker.state.staticTooltip = true;\n    }\n    if (render) {\n      this.__afterChangeMarkers();\n    }\n  }\n  /**\n   * Returns the internal marker object for a marker id\n   * @throws {@link PSVError} when the marker cannot be found\n   */\n  getMarker(markerId) {\n    const id = typeof markerId === \"object\" ? markerId.id : markerId;\n    if (!this.markers[id]) {\n      throw new PSVError8(`cannot find marker \"${id}\"`);\n    }\n    return this.markers[id];\n  }\n  /**\n   * Returns the last marker selected by the user\n   */\n  getCurrentMarker() {\n    return this.state.currentMarker;\n  }\n  /**\n   * Updates the existing marker with the same id\n   * Every property can be changed but you can't change its type (Eg: `image` to `html`)\n   */\n  updateMarker(config, render = true) {\n    const marker = this.getMarker(config.id);\n    marker.update(config);\n    if (render) {\n      this.__afterChangeMarkers();\n      if (marker === this.state.hoveringMarker && marker.config.tooltip?.trigger === \"hover\" || marker.state.staticTooltip) {\n        marker.showTooltip(this.state.lastClientX, this.state.lastClientY, true);\n      }\n    }\n  }\n  /**\n   * Removes a marker from the viewer\n   */\n  removeMarker(markerId, render = true) {\n    const marker = this.getMarker(markerId);\n    if (marker.isPoly()) {\n      this.svgContainer.removeChild(marker.domElement);\n    } else if (marker.isCss3d()) {\n      this.css3DContainer.removeObject(marker);\n    } else if (marker.is3d()) {\n      this.viewer.renderer.removeObject(marker.threeElement);\n    } else {\n      this.container.removeChild(marker.domElement);\n    }\n    if (this.state.hoveringMarker === marker) {\n      this.state.hoveringMarker = null;\n    }\n    if (this.state.currentMarker === marker) {\n      this.state.currentMarker = null;\n    }\n    marker.destroy();\n    delete this.markers[marker.id];\n    if (render) {\n      this.__afterChangeMarkers();\n    }\n  }\n  /**\n   * Removes multiple markers\n   */\n  removeMarkers(markerIds, render = true) {\n    markerIds.forEach((markerId) => this.removeMarker(markerId, false));\n    if (render) {\n      this.__afterChangeMarkers();\n    }\n  }\n  /**\n   * Replaces all markers\n   */\n  setMarkers(markers, render = true) {\n    this.clearMarkers(false);\n    markers?.forEach((marker) => {\n      this.addMarker(marker, false);\n    });\n    if (render) {\n      this.__afterChangeMarkers();\n    }\n  }\n  /**\n   * Removes all markers\n   */\n  clearMarkers(render = true) {\n    Object.keys(this.markers).forEach((markerId) => {\n      this.removeMarker(markerId, false);\n    });\n    if (render) {\n      this.__afterChangeMarkers();\n    }\n  }\n  /**\n   * Rotate the view to face the marker\n   */\n  gotoMarker(markerId, speed = this.config.gotoMarkerSpeed) {\n    const marker = this.getMarker(markerId);\n    if (!speed) {\n      this.viewer.rotate(marker.state.position);\n      if (!utils10.isNil(marker.config.zoomLvl)) {\n        this.viewer.zoom(marker.config.zoomLvl);\n      }\n      this.dispatchEvent(new GotoMarkerDoneEvent(marker));\n      return Promise.resolve();\n    } else {\n      return this.viewer.animate({\n        ...marker.state.position,\n        zoom: marker.config.zoomLvl,\n        speed\n      }).then(() => {\n        this.dispatchEvent(new GotoMarkerDoneEvent(marker));\n      });\n    }\n  }\n  /**\n   * Hides a marker\n   */\n  hideMarker(markerId) {\n    this.toggleMarker(markerId, false);\n  }\n  /**\n   * Shows a marker\n   */\n  showMarker(markerId) {\n    this.toggleMarker(markerId, true);\n  }\n  /**\n   * Forces the display of the tooltip of a marker\n   */\n  showMarkerTooltip(markerId) {\n    const marker = this.getMarker(markerId);\n    marker.state.staticTooltip = true;\n    marker.showTooltip();\n  }\n  /**\n   * Hides the tooltip of a marker\n   */\n  hideMarkerTooltip(markerId) {\n    const marker = this.getMarker(markerId);\n    marker.state.staticTooltip = false;\n    marker.hideTooltip();\n  }\n  /**\n   * Toggles a marker visibility\n   */\n  toggleMarker(markerId, visible) {\n    const marker = this.getMarker(markerId);\n    marker.config.visible = utils10.isNil(visible) ? !marker.config.visible : visible;\n    this.renderMarkers();\n  }\n  /**\n   * Opens the panel with the content of the marker\n   */\n  showMarkerPanel(markerId) {\n    const marker = this.getMarker(markerId);\n    if (marker.config.content) {\n      this.viewer.panel.show({\n        id: ID_PANEL_MARKER,\n        content: marker.config.content\n      });\n    } else {\n      this.hideMarkerPanel();\n    }\n  }\n  /**\n   * Closes the panel if currently showing the content of a marker\n   */\n  hideMarkerPanel() {\n    this.viewer.panel.hide(ID_PANEL_MARKER);\n  }\n  /**\n   * Toggles the visibility of the list of markers\n   */\n  toggleMarkersList() {\n    if (this.viewer.panel.isVisible(ID_PANEL_MARKERS_LIST)) {\n      this.hideMarkersList();\n    } else {\n      this.showMarkersList();\n    }\n  }\n  /**\n   * Opens side panel with the list of markers\n   */\n  showMarkersList() {\n    let markers = [];\n    Object.values(this.markers).forEach((marker) => {\n      if (marker.config.visible && !marker.config.hideList) {\n        markers.push(marker);\n      }\n    });\n    const e = new RenderMarkersListEvent(markers);\n    this.dispatchEvent(e);\n    markers = e.markers;\n    this.viewer.panel.show({\n      id: ID_PANEL_MARKERS_LIST,\n      content: MARKERS_LIST_TEMPLATE(markers, this.viewer.config.lang[MarkersButton.id]),\n      noMargin: true,\n      clickHandler: (target) => {\n        const li = utils10.getClosest(target, \".psv-panel-menu-item\");\n        const markerId = li ? li.dataset[MARKER_DATA] : void 0;\n        if (markerId) {\n          const marker = this.getMarker(markerId);\n          this.dispatchEvent(new SelectMarkerListEvent(marker));\n          this.gotoMarker(marker.id);\n          this.hideMarkersList();\n        }\n      }\n    });\n  }\n  /**\n   * Closes side panel if it contains the list of markers\n   */\n  hideMarkersList() {\n    this.viewer.panel.hide(ID_PANEL_MARKERS_LIST);\n  }\n  /**\n   * Updates the visibility and the position of all markers\n   */\n  renderMarkers() {\n    if (this.state.needsReRender) {\n      this.state.needsReRender = false;\n      return;\n    }\n    const zoomLevel = this.viewer.getZoomLevel();\n    const viewerPosition = this.viewer.getPosition();\n    const hoveringMarker = this.state.hoveringMarker;\n    Object.values(this.markers).forEach((marker) => {\n      let isVisible = marker.config.visible;\n      let visibilityChanged = false;\n      let position = null;\n      if (isVisible) {\n        position = marker.render({ viewerPosition, zoomLevel, hoveringMarker });\n        isVisible = !!position;\n      }\n      visibilityChanged = marker.state.visible !== isVisible;\n      marker.state.visible = isVisible;\n      marker.state.position2D = position;\n      if (marker.domElement) {\n        utils10.toggleClass(marker.domElement, \"psv-marker--visible\", isVisible);\n      }\n      if (!isVisible) {\n        marker.hideTooltip();\n      } else if (marker.state.staticTooltip) {\n        marker.showTooltip();\n      } else if (marker !== this.state.hoveringMarker) {\n        marker.hideTooltip();\n      }\n      if (visibilityChanged) {\n        this.dispatchEvent(new MarkerVisibilityEvent(marker, isVisible));\n        if (marker.is3d() || marker.isCss3d()) {\n          this.state.needsReRender = true;\n        }\n      }\n    });\n    if (this.state.needsReRender) {\n      this.viewer.needsUpdate();\n    }\n  }\n  __getTargetMarker(target, closest = false) {\n    if (target instanceof Node) {\n      const target2 = closest ? utils10.getClosest(target, \".psv-marker\") : target;\n      return target2 ? target2[MARKER_DATA] : void 0;\n    } else if (Array.isArray(target)) {\n      return target.map((o) => o.userData[MARKER_DATA]).filter((m) => !!m).sort((a, b) => b.config.zIndex - a.config.zIndex)[0];\n    } else {\n      return null;\n    }\n  }\n  /**\n   * Handles mouse enter events, show the tooltip for non polygon markers\n   */\n  __onEnterMarker(e, marker) {\n    if (marker) {\n      this.state.hoveringMarker = marker;\n      this.state.lastClientX = e.clientX;\n      this.state.lastClientY = e.clientY;\n      this.dispatchEvent(new EnterMarkerEvent(marker));\n      if (marker instanceof AbstractStandardMarker) {\n        marker.applyScale({\n          zoomLevel: this.viewer.getZoomLevel(),\n          viewerPosition: this.viewer.getPosition(),\n          mouseover: true\n        });\n      }\n      if (!marker.state.staticTooltip && marker.config.tooltip?.trigger === \"hover\") {\n        marker.showTooltip(e.clientX, e.clientY);\n      }\n    }\n  }\n  /**\n   * Handles mouse leave events, hide the tooltip\n   */\n  __onLeaveMarker(marker) {\n    if (marker) {\n      this.dispatchEvent(new LeaveMarkerEvent(marker));\n      if (marker instanceof AbstractStandardMarker) {\n        marker.applyScale({\n          zoomLevel: this.viewer.getZoomLevel(),\n          viewerPosition: this.viewer.getPosition(),\n          mouseover: false\n        });\n      }\n      this.state.hoveringMarker = null;\n      if (!marker.state.staticTooltip && marker.config.tooltip?.trigger === \"hover\") {\n        marker.hideTooltip();\n      } else if (marker.state.staticTooltip) {\n        marker.showTooltip();\n      }\n    }\n  }\n  /**\n   * Handles mouse move events, refresh the tooltip for polygon markers\n   */\n  __onHoverMarker(e, marker) {\n    if (marker) {\n      this.state.lastClientX = e.clientX;\n      this.state.lastClientY = e.clientY;\n      if (marker.isPoly() || marker.is3d() || marker.isCss3d()) {\n        if (marker.config.tooltip?.trigger === \"hover\") {\n          marker.showTooltip(e.clientX, e.clientY);\n        }\n      }\n    }\n  }\n  /**\n   * Handles mouse click events, select the marker and open the panel if necessary\n   */\n  __onClick(e, dblclick) {\n    const threeMarker = this.__getTargetMarker(e.data.objects);\n    const stdMarker = this.__getTargetMarker(e.data.target, true);\n    const marker = stdMarker || threeMarker;\n    if (this.state.currentMarker && this.state.currentMarker !== marker) {\n      this.dispatchEvent(new UnselectMarkerEvent(this.state.currentMarker));\n      this.viewer.panel.hide(ID_PANEL_MARKER);\n      if (!this.state.showAllTooltips && this.state.currentMarker.config.tooltip?.trigger === \"click\") {\n        this.hideMarkerTooltip(this.state.currentMarker.id);\n      }\n      this.state.currentMarker = null;\n    }\n    if (marker) {\n      this.state.currentMarker = marker;\n      this.dispatchEvent(new SelectMarkerEvent(marker, dblclick, e.data.rightclick));\n      if (this.config.clickEventOnMarker) {\n        e.data.marker = marker;\n      } else {\n        e.stopImmediatePropagation();\n      }\n      if (this.markers[marker.id] && !e.data.rightclick) {\n        if (marker.config.tooltip?.trigger === \"click\") {\n          if (marker.tooltip) {\n            this.hideMarkerTooltip(marker.id);\n          } else {\n            this.showMarkerTooltip(marker.id);\n          }\n        } else {\n          this.showMarkerPanel(marker.id);\n        }\n      }\n    }\n  }\n  __afterChangeMarkers() {\n    this.__refreshUi();\n    this.__checkObjectsObserver();\n    this.viewer.needsUpdate();\n    this.dispatchEvent(new SetMarkersEvent(this.getMarkers()));\n  }\n  /**\n   * Updates the visiblity of the panel and the buttons\n   */\n  __refreshUi() {\n    const nbMarkers = Object.values(this.markers).filter((m) => !m.config.hideList).length;\n    if (nbMarkers === 0) {\n      this.viewer.panel.hide(ID_PANEL_MARKER);\n      this.viewer.panel.hide(ID_PANEL_MARKERS_LIST);\n    } else {\n      if (this.viewer.panel.isVisible(ID_PANEL_MARKERS_LIST)) {\n        this.showMarkersList();\n      } else if (this.viewer.panel.isVisible(ID_PANEL_MARKER)) {\n        this.state.currentMarker ? this.showMarkerPanel(this.state.currentMarker.id) : this.viewer.panel.hide();\n      }\n    }\n    this.viewer.navbar.getButton(MarkersButton.id, false)?.toggle(nbMarkers > 0);\n    this.viewer.navbar.getButton(MarkersListButton.id, false)?.toggle(nbMarkers > 0);\n  }\n  /**\n   * Adds or remove the objects observer if there are 3D markers\n   */\n  __checkObjectsObserver() {\n    const has3d = Object.values(this.markers).some((marker) => marker.is3d());\n    if (has3d) {\n      this.viewer.observeObjects(MARKER_DATA);\n    } else {\n      this.viewer.unobserveObjects(MARKER_DATA);\n    }\n  }\n};\nMarkersPlugin.id = \"markers\";\nMarkersPlugin.VERSION = \"5.13.2\";\nMarkersPlugin.configParser = getConfig;\nMarkersPlugin.readonlyOptions = [\"markers\"];\n\n// src/index.ts\nDEFAULTS.lang[MarkersButton.id] = \"Markers\";\nDEFAULTS.lang[MarkersListButton.id] = \"Markers list\";\nregisterButton(MarkersButton, \"caption:left\");\nregisterButton(MarkersListButton, \"caption:left\");\nexport {\n  MarkersPlugin,\n  events_exports as events\n};\n//# sourceMappingURL=index.module.js.map","/*!\n * Photo Sphere Viewer / Map Plugin 5.13.2\n * @copyright 2015-2025 Damien \"Mistic\" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\nvar __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// src/index.ts\nimport { DEFAULTS } from \"@photo-sphere-viewer/core\";\n\n// src/events.ts\nvar events_exports = {};\n__export(events_exports, {\n  SelectHotspot: () => SelectHotspot,\n  ViewChanged: () => ViewChanged\n});\nimport { TypedEvent } from \"@photo-sphere-viewer/core\";\nvar _SelectHotspot = class _SelectHotspot extends TypedEvent {\n  /** @internal */\n  constructor(hotspotId) {\n    super(_SelectHotspot.type);\n    this.hotspotId = hotspotId;\n  }\n};\n_SelectHotspot.type = \"select-hotspot\";\nvar SelectHotspot = _SelectHotspot;\nvar _ViewChanged = class _ViewChanged extends TypedEvent {\n  /** @internal */\n  constructor(view) {\n    super(_ViewChanged.type);\n    this.view = view;\n  }\n};\n_ViewChanged.type = \"view-changed\";\nvar ViewChanged = _ViewChanged;\n\n// src/MapPlugin.ts\nimport { AbstractConfigurablePlugin, events as events2, utils as utils3 } from \"@photo-sphere-viewer/core\";\nimport { Color } from \"three\";\n\n// src/components/MapComponent.ts\nimport { AbstractComponent as AbstractComponent3, CONSTANTS as CONSTANTS2, events, SYSTEM as SYSTEM2, utils as utils2 } from \"@photo-sphere-viewer/core\";\nimport { MathUtils } from \"three\";\n\n// src/constants.ts\nvar MARKER_DATA_KEY = \"map\";\nvar HOTSPOT_GENERATED_ID = \"__generated__\";\nvar HOTSPOT_MARKER_ID = \"__marker__\";\nvar PIN_SHADOW_OFFSET = 2;\nvar PIN_SHADOW_BLUR = 4;\nvar MAP_SHADOW_BLUR = 10;\n\n// src/utils.ts\nimport { SYSTEM } from \"@photo-sphere-viewer/core\";\nfunction loadImage(src) {\n  const image = document.createElement(\"img\");\n  if (!src.includes(\"<svg\")) {\n    image.src = src;\n  } else {\n    if (!/<svg[^>]*width=\"/.test(src) && src.includes(\"viewBox\")) {\n      const [, , , width, height] = /viewBox=\"([0-9-]+) ([0-9-]+) ([0-9]+) ([0-9]+)\"/.exec(src);\n      src = src.replace(\"<svg\", `<svg width=\"${width}px\" height=\"${height}px\"`);\n    }\n    const src64 = `data:image/svg+xml;base64,${window.btoa(src)}`;\n    image.src = src64;\n  }\n  return image;\n}\nfunction getImageHtml(src) {\n  if (!src) {\n    return \"\";\n  } else if (!src.includes(\"<svg\")) {\n    return `<img src=\"${src}\">`;\n  } else {\n    return src;\n  }\n}\nfunction getStyle(defaultStyle, style, isHover) {\n  return {\n    image: isHover ? style.hoverImage ?? style.image ?? defaultStyle.hoverImage ?? defaultStyle.image : style.image ?? defaultStyle.image,\n    size: isHover ? style.hoverSize ?? style.size ?? defaultStyle.hoverSize ?? defaultStyle.size : style.size ?? defaultStyle.size,\n    color: isHover ? style.hoverColor ?? style.color ?? defaultStyle.hoverColor ?? defaultStyle.color : style.color ?? defaultStyle.color,\n    borderColor: isHover ? style.hoverBorderColor ?? style.borderColor ?? defaultStyle.hoverBorderColor ?? defaultStyle.borderColor : style.borderColor ?? defaultStyle.borderColor,\n    borderSize: isHover ? style.hoverBorderSize ?? style.borderSize ?? defaultStyle.hoverBorderSize ?? defaultStyle.borderSize : style.borderSize ?? defaultStyle.borderSize\n  };\n}\nfunction unprojectPoint(pt, yaw, zoom) {\n  return {\n    x: (Math.cos(yaw) * pt.x - Math.sin(yaw) * pt.y) / zoom,\n    y: (Math.sin(yaw) * pt.x + Math.cos(yaw) * pt.y) / zoom\n  };\n}\nfunction projectPoint(pt, yaw, zoom) {\n  return {\n    x: (Math.cos(-yaw) * pt.x - Math.sin(-yaw) * pt.y) * zoom,\n    y: (Math.sin(-yaw) * pt.x + Math.cos(-yaw) * pt.y) * zoom\n  };\n}\nfunction canvasShadow(context, offsetX, offsetY, blur, color = \"black\") {\n  context.shadowOffsetX = offsetX * SYSTEM.pixelRatio;\n  context.shadowOffsetY = offsetY * SYSTEM.pixelRatio;\n  context.shadowBlur = blur * SYSTEM.pixelRatio;\n  context.shadowColor = color;\n}\nfunction drawImageCentered(context, image, size) {\n  const w = image.width;\n  const h = image.height;\n  drawImageHighDpi(\n    context,\n    image,\n    -size / 2,\n    -(h / w * size) / 2,\n    size,\n    h / w * size\n  );\n}\nfunction drawImageHighDpi(context, image, x, y, w, h) {\n  context.drawImage(\n    image,\n    0,\n    0,\n    image.width,\n    image.height,\n    x * SYSTEM.pixelRatio,\n    y * SYSTEM.pixelRatio,\n    w * SYSTEM.pixelRatio,\n    h * SYSTEM.pixelRatio\n  );\n}\nfunction rgbToRgba(rgb, alpha) {\n  return `rgba(${rgb.slice(4, -1)},${alpha})`;\n}\n\n// src/components/MapCloseButton.ts\nimport { CONSTANTS } from \"@photo-sphere-viewer/core\";\n\n// src/icons/map.svg\nvar map_default = '<svg viewBox=\"114 45 472 472\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"currentColor\"><path d=\"M383.6 196a67.3 67.3 0 1 0-134.5.1 67.3 67.3 0 0 0 134.5-.1zm-100.8 0a33.6 33.6 0 1 1 67.3 0 33.6 33.6 0 0 1-67.3 0z\"/><path d=\"M584 340.8a16.8 16.8 0 0 0-15.6-10.4H403.8c25.2-40.2 47-88 47-133.4A135 135 0 0 0 316.4 61.6 135 135 0 0 0 182 197c0 55.8 33 115.3 64.7 159.8L120.4 469a16.8 16.8 0 0 0 11.2 29.4H434c4.5 0 8.7-1.8 11.9-5l134.4-134.3c4.8-4.8 6.2-12 3.6-18.3zM215.5 197c0-56.1 45.2-101.8 100.8-101.8 55.6 0 100.8 45.6 100.8 101.8 0 65-57.1 144.2-100.8 192.8C273 341.7 215.6 262.3 215.6 197zM427 464.8H175.8l91.3-81.1a575.6 575.6 0 0 0 37.4 42.6 16.8 16.8 0 0 0 23.8 0c2.2-2.2 26.3-26.7 52.6-62.3h147z\"/></g><!-- Created by Ayub Irawan from Noun Project --></svg>';\n\n// src/components/AbstractMapButton.ts\nimport { AbstractComponent } from \"@photo-sphere-viewer/core\";\nvar INVERT_POSITIONS = {\n  top: \"bottom\",\n  bottom: \"top\",\n  left: \"right\",\n  right: \"left\"\n};\nfunction getButtonPosition(mapPosition, direction) {\n  switch (direction) {\n    case 1 /* DIAGONAL */:\n      return [INVERT_POSITIONS[mapPosition[0]], INVERT_POSITIONS[mapPosition[1]]];\n    case 2 /* HORIZONTAL */:\n      return [mapPosition[0], INVERT_POSITIONS[mapPosition[1]]];\n    case 3 /* VERTICAL */:\n      return [INVERT_POSITIONS[mapPosition[0]], mapPosition[1]];\n    default:\n      return mapPosition;\n  }\n}\nvar AbstractMapButton = class extends AbstractComponent {\n  constructor(map, position) {\n    super(map, {});\n    this.map = map;\n    this.position = position;\n  }\n  applyConfig() {\n    this.container.className = `psv-map__button psv-map__button--${getButtonPosition(this.map.config.position, this.position).join(\"-\")}`;\n    this.update();\n  }\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  update() {\n  }\n};\n\n// src/components/MapCloseButton.ts\nvar MapCloseButton = class extends AbstractMapButton {\n  constructor(map) {\n    super(map, 0 /* DEFAULT */);\n    this.container.addEventListener(\"click\", (e) => {\n      map.toggleCollapse();\n      e.stopPropagation();\n    });\n  }\n  applyConfig() {\n    super.applyConfig();\n    this.container.classList.add(\"psv-map__button-close\");\n  }\n  update() {\n    this.container.innerHTML = this.map.collapsed ? map_default : CONSTANTS.ICONS.close;\n    this.container.title = this.map.collapsed ? this.viewer.config.lang[\"map\"] : this.viewer.config.lang.close;\n  }\n};\n\n// src/icons/compass.svg\nvar compass_default = '<svg viewBox=\"0 0 100 100\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M50,0L70,50L50,100L30,50Z M50,86L64,50L36,50Z\" fill=\"currentColor\"/></svg>';\n\n// src/components/MapCompassButton.ts\nvar MapCompassButton = class extends AbstractMapButton {\n  constructor(map) {\n    super(map, 3 /* VERTICAL */);\n    this.container.innerHTML = compass_default;\n    this.container.querySelector(\"svg\").style.width = \"80%\";\n    this.container.addEventListener(\"click\", (e) => {\n      this.viewer.dynamics.position.goto({ yaw: -map.config.rotation }, 2);\n      e.stopPropagation();\n    });\n  }\n  rotate(angle) {\n    this.container.querySelector(\"svg\").style.transform = `rotate3d(0, 0, 1, ${-angle}rad)`;\n  }\n  update() {\n    this.container.title = this.viewer.config.lang[\"mapNorth\"];\n  }\n};\n\n// src/icons/maximize.svg\nvar maximize_default = '<svg viewBox=\"95 25 510 510\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M604.2 39.8v481c0 7.8-6.1 14-14 14H358.4c-7.8 0-14-6.2-14-14s6.2-14 14-14h217.8v-453H123.8v216.7c0 7.8-6.2 14-14 14-7.9 0-14-6.2-14-14V39.8c0-7.9 6.1-14 14-14h481c7.3 0 13.4 6.1 13.4 14zm-304 304v176.4c0 7.9-6.2 14-14 14H109.8c-7.9 0-14-6.1-14-14V343.8c0-7.8 6.1-14 14-14h176.4c7.2 0 14 6.8 14 14zm-28 14H123.8v148.4h148.4zm215.6-195.4v79.5c0 7.9 6.1 14 14 14 7.8 0 14-6.1 14-14V128.2c0-7.8-6.2-14-14-14H388.6c-7.8 0-14 6.2-14 14 0 7.9 6.2 14 14 14h79L326.5 283.4a13.5 13.5 0 0 0 0 19.6c2.8 2.8 6.1 3.9 10 3.9 4 0 7.3-1.1 10.1-4z\" fill=\"currentColor\"/><!-- Created by Gregor Cresnar from Noun Project --></svg>';\n\n// src/icons/minimize.svg\nvar minimize_default = '<svg viewBox=\"95 25 510 510\" xmlns=\"http://www.w3.org/2000/svg\"><path d=\"M109.8 25.8h481c7.8 0 14 6.1 14 14v481c0 7.8-6.2 14-14 14H358.4c-7.8 0-14-6.2-14-14s6.2-14 14-14h217.8v-453H123.8v216.7c0 7.8-6.2 14-14 14-7.9 0-14-6.2-14-14V39.8c0-7.9 6.1-14 14-14zm176.4 508.4H109.8c-7.9 0-14-6.1-14-14V343.8c0-7.8 6.1-14 14-14h176.4c7.8 0 14 6.2 14 14v176.4c0 7.9-6.8 14-14 14zm-14-176.4H123.8v148.4h148.4zm64.4-191.5c-7.9 0-14 6.2-14 14v113.1c0 7.9 6.1 14 14 14h113c8 0 14-6.1 14-14s-6-14-14-14h-79.4l141-141a13.5 13.5 0 0 0 0-19.7 13.5 13.5 0 0 0-19.5 0L350.6 259.8v-79.5c0-7.8-6.2-14-14-14z\" fill=\"currentColor\"/><!-- Created by Gregor Cresnar from Noun Project --></svg>';\n\n// src/components/MapMaximizeButton.ts\nvar ROTATION = {\n  \"bottom-left\": 0,\n  \"bottom-right\": -90,\n  \"top-right\": 180,\n  \"top-left\": 90\n};\nvar MapMaximizeButton = class extends AbstractMapButton {\n  constructor(map) {\n    super(map, 1 /* DIAGONAL */);\n    this.container.addEventListener(\"click\", (e) => {\n      map.toggleMaximized();\n      e.stopPropagation();\n    });\n  }\n  update() {\n    this.container.innerHTML = this.map.maximized ? minimize_default : maximize_default;\n    this.container.querySelector(\"svg\").style.transform = `rotate3d(0, 0, 1, ${ROTATION[this.map.config.position.join(\"-\")]}deg)`;\n    this.container.title = this.map.maximized ? this.viewer.config.lang[\"mapMinimize\"] : this.viewer.config.lang[\"mapMaximize\"];\n  }\n};\n\n// src/icons/reset.svg\nvar reset_default = '<svg viewBox=\"170 100 360 360\" xmlns=\"http://www.w3.org/2000/svg\"><g fill=\"currentColor\"><path d=\"M518.6 269h-18.5a150.8 150.8 0 0 0-138-137.9v-20.9c0-5.8-4.7-10.6-10.5-10.6h-3.2c-5.8 0-10.6 4.8-10.6 10.6v21A150.8 150.8 0 0 0 200 269h-18.5c-5.9 0-10.6 4.7-10.6 10.6v3.2c0 5.8 4.7 10.5 10.6 10.5h18.5c6 73.4 64.6 132 138 138v18.5c0 5.8 4.7 10.6 10.5 10.6h3.2c5.8 0 10.6-4.8 10.6-10.6v-18.6c73.3-5.9 132-64.5 137.9-137.9h18.5c5.9 0 10.6-4.7 10.6-10.5v-3.2c0-5.9-4.7-10.6-10.6-10.6zM362.2 414.4v-9.8c0-5.9-4.8-10.6-10.6-10.6h-3.2c-5.8 0-10.6 4.7-10.6 10.6v9.8a134 134 0 0 1-121-121h9.8c5.9 0 10.6-4.8 10.6-10.6v-3.2c0-5.9-4.7-10.6-10.6-10.6h-9.8a134 134 0 0 1 121-121v7.5c0 5.8 4.8 10.5 10.6 10.5h3.2c5.8 0 10.6-4.7 10.6-10.5V148a134 134 0 0 1 121 121h-9.8c-5.9 0-10.6 4.7-10.6 10.6v3.2c0 5.8 4.7 10.5 10.6 10.5h9.8a134 134 0 0 1-121 121z\"/><path d=\"M355.4 222a6 6 0 0 0-10.7 0L291 320a8.3 8.3 0 0 0 9.7 12l39.2-11.7c6.6-2 13.6-2 20.2 0l39.2 11.7a8.3 8.3 0 0 0 9.7-12z\"/></g><!-- Created by muhammad benani from Noun Project --></svg>';\n\n// src/components/MapResetButton.ts\nvar MapResetButton = class extends AbstractMapButton {\n  constructor(map) {\n    super(map, 2 /* HORIZONTAL */);\n    this.container.innerHTML = reset_default;\n    this.container.querySelector(\"svg\").style.width = \"80%\";\n    this.container.addEventListener(\"click\", (e) => {\n      map.reset();\n      e.stopPropagation();\n    });\n  }\n  update() {\n    this.container.title = this.viewer.config.lang[\"mapReset\"];\n  }\n};\n\n// src/components/MapZoomToolbar.ts\nimport { AbstractComponent as AbstractComponent2, utils } from \"@photo-sphere-viewer/core\";\n\n// src/icons/minus.svg\nvar minus_default = '<svg viewBox=\"128 58 444 444\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"currentColor\" d=\"M350 58.2a221.8 221.8 0 1 0 0 443.6 221.8 221.8 0 0 0 0-443.6zm130.3 252.7H219.7a31 31 0 1 1 0-61.8h260.6a31 31 0 1 1 0 61.8z\"/><!-- Created by Iconika from Noun Project --></svg>';\n\n// src/icons/plus.svg\nvar plus_default = '<svg viewBox=\"143.8 73.8 412.5 412.5\" xmlns=\"http://www.w3.org/2000/svg\"><path fill=\"currentColor\" d=\"M350 73.8a206.2 206.2 0 1 0 0 412.4 206.2 206.2 0 0 0 0-412.4zm117.3 234H378v89.5a27.9 27.9 0 1 1-55.8 0V308h-89.4a27.9 27.9 0 1 1 0-55.8H322v-89.5a27.9 27.9 0 1 1 55.8 0v89.5h89.5a27.9 27.9 0 1 1 0 55.8z\"/><!-- Created by Iconika from Noun Project --></svg>';\n\n// src/components/MapZoomToolbar.ts\nvar MapZoomToolbar = class extends AbstractComponent2 {\n  constructor(map) {\n    super(map, {\n      className: \"psv-map__toolbar\"\n    });\n    this.map = map;\n    this.handler = new utils.PressHandler(100);\n    this.container.innerHTML = `${minus_default}<span class=\"psv-map__toolbar-text\">100%</span>${plus_default}`;\n    this.zoomIndicator = this.container.querySelector(\".psv-map__toolbar-text\");\n    const zoomButtons = this.container.querySelectorAll(\"svg\");\n    zoomButtons[0].dataset[\"delta\"] = \"-1\";\n    zoomButtons[1].dataset[\"delta\"] = \"1\";\n    this.container.addEventListener(\"mousedown\", this);\n    window.addEventListener(\"mouseup\", this);\n    this.container.addEventListener(\"touchstart\", this);\n    window.addEventListener(\"touchend\", this);\n  }\n  destroy() {\n    window.removeEventListener(\"mouseup\", this);\n    window.removeEventListener(\"touchend\", this);\n    super.destroy();\n  }\n  handleEvent(e) {\n    switch (e.type) {\n      case \"mousedown\":\n      case \"touchstart\": {\n        const button = utils.getMatchingTarget(e, \"svg[data-delta]\");\n        const delta = button?.dataset[\"delta\"];\n        if (delta) {\n          cancelAnimationFrame(this.animation);\n          this.handler.down();\n          this.time = performance.now();\n          this.animateZoom(parseInt(delta, 10));\n          e.preventDefault();\n          e.stopPropagation();\n        }\n        break;\n      }\n      case \"mouseup\":\n      case \"touchend\":\n        if (this.animation) {\n          this.handler.up(() => {\n            cancelAnimationFrame(this.animation);\n            this.animation = null;\n          });\n          e.preventDefault();\n          e.stopPropagation();\n        }\n        break;\n      default:\n        break;\n    }\n  }\n  setText(zoom) {\n    this.zoomIndicator.innerText = `${Math.round(Math.exp(zoom) * 100)}%`;\n  }\n  animateZoom(delta) {\n    this.animation = requestAnimationFrame((t) => {\n      this.map.zoom(delta * (t - this.time) / 1e3);\n      this.time = t;\n      this.animateZoom(delta);\n    });\n  }\n};\n\n// src/overlay-round.svg\nvar overlay_round_default = '<svg viewBox=\"0 0 500 500\" xmlns=\"http://www.w3.org/2000/svg\">\\n    <defs>\\n        <radialGradient id=\"gradient\">\\n            <stop offset=\"80%\" stop-color=\"rgba(255, 255, 255, 0)\"/>\\n            <stop offset=\"90%\" stop-color=\"rgba(255, 255, 255, .5)\"/>\\n        </radialGradient>\\n    </defs>\\n    <circle cx=\"250\" cy=\"250\" r=\"250\" fill=\"url(#gradient)\"/>\\n    <circle cx=\"250\" cy=\"250\" r=\"245\" fill=\"none\" stroke=\"rgba(255, 255, 255, 0.8)\" stroke-width=\"10\"/>\\n    <g fill=\"#222\">\\n        <rect x=\"1\" y=\"248\" width=\"18\" height=\"4\"/>\\n        <rect x=\"481\" y=\"248\" width=\"18\" height=\"4\"/>\\n        <rect x=\"248\" y=\"1\" width=\"4\" height=\"18\"/>\\n        <rect x=\"248\" y=\"481\" width=\"4\" height=\"18\"/>\\n    </g>\\n</svg>';\n\n// src/overlay-square.svg\nvar overlay_square_default = '<svg viewBox=\"0 0 500 500\" xmlns=\"http://www.w3.org/2000/svg\">\\n    <defs>\\n        <linearGradient id=\"gradient\">\\n            <stop offset=\"5%\" stop-color=\"rgba(255, 255, 255, .5)\"/>\\n            <stop offset=\"10%\" stop-color=\"rgba(255, 255, 255, 0)\"/>\\n            <stop offset=\"90%\" stop-color=\"rgba(255, 255, 255, 0)\"/>\\n            <stop offset=\"95%\" stop-color=\"rgba(255, 255, 255, .5)\"/>\\n        </linearGradient>\\n        <linearGradient id=\"gradient2\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\">\\n            <stop offset=\"5%\" stop-color=\"rgba(255, 255, 255, .5)\"/>\\n            <stop offset=\"10%\" stop-color=\"rgba(255, 255, 255, 0)\"/>\\n            <stop offset=\"90%\" stop-color=\"rgba(255, 255, 255, 0)\"/>\\n            <stop offset=\"95%\" stop-color=\"rgba(255, 255, 255, .5)\"/>\\n        </linearGradient>\\n    </defs>=\\n    <rect x=\"0\" y=\"0\" width=\"500\" height=\"500\" fill=\"url(#gradient)\"/>\\n    <rect x=\"0\" y=\"0\" width=\"500\" height=\"500\" fill=\"url(#gradient2)\"/>\\n    <rect x=\"5\" y=\"5\" width=\"490\" height=\"490\" fill=\"none\" stroke=\"rgba(255, 255, 255, 0.8)\" stroke-width=\"10\"/>\\n    <g fill=\"#222\">\\n        <rect x=\"1\" y=\"248\" width=\"18\" height=\"4\"/>\\n        <rect x=\"481\" y=\"248\" width=\"18\" height=\"4\"/>\\n        <rect x=\"248\" y=\"1\" width=\"4\" height=\"18\"/>\\n        <rect x=\"248\" y=\"481\" width=\"4\" height=\"18\"/>\\n    </g>\\n</svg>';\n\n// src/components/MapComponent.ts\nvar MapComponent = class extends AbstractComponent3 {\n  constructor(viewer, plugin) {\n    super(viewer, {\n      className: `psv-map ${CONSTANTS2.CAPTURE_EVENTS_CLASS}`\n    });\n    this.plugin = plugin;\n    this.state = {\n      visible: false,\n      maximized: false,\n      collapsed: false,\n      galleryWasVisible: false,\n      imgScale: 1,\n      zoom: this.config.defaultZoom,\n      offset: { x: 0, y: 0 },\n      mouseX: null,\n      mouseY: null,\n      mousedown: false,\n      pinchDist: 0,\n      pinchAngle: 0,\n      hotspotPos: {},\n      hotspotId: null,\n      hotspotTooltip: null,\n      markers: [],\n      forceRender: false,\n      needsUpdate: false,\n      renderLoop: null,\n      images: {}\n    };\n    const canvasContainer = document.createElement(\"div\");\n    canvasContainer.className = \"psv-map__container\";\n    canvasContainer.addEventListener(\"mousedown\", this);\n    window.addEventListener(\"mousemove\", this);\n    window.addEventListener(\"mouseup\", this);\n    canvasContainer.addEventListener(\"touchstart\", this);\n    window.addEventListener(\"touchmove\", this);\n    window.addEventListener(\"touchend\", this);\n    canvasContainer.addEventListener(\"wheel\", this);\n    viewer.addEventListener(events.KeypressEvent.type, this);\n    viewer.addEventListener(events.ConfigChangedEvent.type, this);\n    this.canvas = document.createElement(\"canvas\");\n    this.__setCursor(\"move\");\n    canvasContainer.appendChild(this.canvas);\n    this.overlay = document.createElement(\"div\");\n    this.overlay.className = \"psv-map__overlay\";\n    canvasContainer.appendChild(this.overlay);\n    this.container.appendChild(canvasContainer);\n    this.container.addEventListener(\"transitionstart\", this);\n    this.container.addEventListener(\"transitionend\", this);\n    if (this.config.buttons.reset) {\n      this.resetButton = new MapResetButton(this);\n    }\n    if (this.config.buttons.maximize) {\n      this.maximizeButton = new MapMaximizeButton(this);\n    }\n    if (this.config.buttons.close) {\n      this.closeButton = new MapCloseButton(this);\n    }\n    if (this.config.buttons.north) {\n      this.compassButton = new MapCompassButton(this);\n    }\n    this.zoomToolbar = new MapZoomToolbar(this);\n    const renderLoop = () => {\n      if (this.isVisible() && (this.state.needsUpdate || this.state.forceRender)) {\n        this.render();\n        this.state.needsUpdate = false;\n      }\n      this.state.renderLoop = requestAnimationFrame(renderLoop);\n    };\n    renderLoop();\n    this.applyConfig();\n    this.hide();\n    if (!this.config.visibleOnLoad) {\n      this.toggleCollapse();\n    }\n  }\n  get config() {\n    return this.plugin.config;\n  }\n  get maximized() {\n    return this.state.maximized;\n  }\n  get collapsed() {\n    return this.state.collapsed;\n  }\n  init() {\n    this.gallery = this.viewer.getPlugin(\"gallery\");\n    this.gallery?.addEventListener(\"show-gallery\", this);\n    this.gallery?.addEventListener(\"hide-gallery\", this);\n  }\n  destroy() {\n    this.canvas.width = 0;\n    this.canvas.height = 0;\n    window.removeEventListener(\"touchmove\", this);\n    window.removeEventListener(\"mousemove\", this);\n    window.removeEventListener(\"touchend\", this);\n    window.removeEventListener(\"mouseup\", this);\n    this.viewer.removeEventListener(events.KeypressEvent.type, this);\n    this.gallery?.removeEventListener(\"show-gallery\", this);\n    this.gallery?.removeEventListener(\"hide-gallery\", this);\n    cancelAnimationFrame(this.state.renderLoop);\n    super.destroy();\n  }\n  handleEvent(e) {\n    if (utils2.getMatchingTarget(e, `.${CONSTANTS2.CAPTURE_EVENTS_CLASS}:not(.psv-map)`)) {\n      return;\n    }\n    switch (e.type) {\n      case events.KeypressEvent.type:\n        if (this.state.maximized) {\n          this.__onKeyPress(e.key);\n          e.preventDefault();\n        }\n        break;\n      case events.ConfigChangedEvent.type:\n        if (e.containsOptions(\"lang\")) {\n          this.resetButton?.update();\n          this.closeButton?.update();\n          this.compassButton?.update();\n          this.maximizeButton?.update();\n        }\n        break;\n      case \"mousedown\": {\n        const event = e;\n        this.state.mouseX = event.clientX;\n        this.state.mouseY = event.clientY;\n        this.state.mousedown = true;\n        e.stopPropagation();\n        break;\n      }\n      case \"touchstart\": {\n        const event = e;\n        if (event.touches.length === 1) {\n          this.state.mouseX = event.touches[0].clientX;\n          this.state.mouseY = event.touches[0].clientY;\n          this.state.mousedown = true;\n        } else if (event.touches.length === 2) {\n          ({\n            distance: this.state.pinchDist,\n            angle: this.state.pinchAngle,\n            center: { x: this.state.mouseX, y: this.state.mouseY }\n          } = utils2.getTouchData(event));\n        }\n        e.stopPropagation();\n        e.preventDefault();\n        break;\n      }\n      case \"mousemove\": {\n        const event = e;\n        if (this.state.mousedown) {\n          this.__move(event.clientX, event.clientY);\n          e.stopPropagation();\n        } else if (e.composedPath().includes(this.canvas)) {\n          this.__handleHotspots(event.clientX, event.clientY);\n        }\n        break;\n      }\n      case \"touchmove\": {\n        const event = e;\n        if (this.state.mousedown && event.touches.length === 1) {\n          this.__move(event.touches[0].clientX, event.touches[0].clientY);\n          e.stopPropagation();\n        } else if (this.state.mousedown && event.touches.length === 2) {\n          const touchData = utils2.getTouchData(event);\n          const delta = (touchData.distance - this.state.pinchDist) / SYSTEM2.pixelRatio;\n          this.zoom(delta / 100);\n          this.__move(touchData.center.x, touchData.center.y);\n          if (this.state.maximized && !this.config.static) {\n            this.viewer.dynamics.position.step({ yaw: this.state.pinchAngle - touchData.angle }, 0);\n          }\n          ({ distance: this.state.pinchDist, angle: this.state.pinchAngle } = touchData);\n          e.stopPropagation();\n        }\n        break;\n      }\n      case \"mouseup\":\n      case \"touchend\": {\n        const mouse = e.changedTouches?.[0] || e;\n        if (this.state.mousedown) {\n          this.state.mousedown = false;\n          e.stopPropagation();\n        }\n        if (e.composedPath().includes(this.canvas)) {\n          this.__clickHotspot(mouse.clientX, mouse.clientY);\n        }\n        break;\n      }\n      case \"wheel\": {\n        const event = e;\n        const delta = event.deltaY / Math.abs(event.deltaY);\n        if (event.ctrlKey) {\n          this.viewer.dynamics.position.step({ yaw: delta / 10 });\n        } else {\n          this.zoom(-delta / 10);\n        }\n        e.stopPropagation();\n        e.preventDefault();\n        break;\n      }\n      case \"transitionstart\":\n        this.state.forceRender = true;\n        break;\n      case \"transitionend\":\n        if (!this.state.maximized) {\n          this.overlay.style.display = \"\";\n          this.recenter();\n        }\n        this.state.forceRender = false;\n        this.update();\n        break;\n      case \"hide-gallery\":\n        this.__onToggleGallery(false);\n        break;\n      case \"show-gallery\":\n        if (!e.fullscreen) {\n          this.__onToggleGallery(true);\n        }\n        break;\n    }\n  }\n  applyConfig() {\n    this.container.classList.remove(\n      \"psv-map--top-right\",\n      \"psv-map--top-left\",\n      \"psv-map--bottom-right\",\n      \"psv-map--bottom-left\",\n      \"psv-map--round\",\n      \"psv-map--square\"\n    );\n    this.container.classList.add(`psv-map--${this.config.position.join(\"-\")}`);\n    this.container.classList.add(`psv-map--${this.config.shape}`);\n    this.container.style.width = this.config.size;\n    this.container.style.height = this.config.size;\n    this.overlay.innerHTML = this.config.overlayImage === null ? \"\" : getImageHtml(this.config.overlayImage ?? (this.config.shape === \"square\" ? overlay_square_default : overlay_round_default));\n    this.resetButton?.applyConfig();\n    this.closeButton?.applyConfig();\n    this.compassButton?.applyConfig();\n    this.maximizeButton?.applyConfig();\n    if (this.config.static) {\n      this.compassButton?.rotate(0);\n      this.overlay.style.transform = \"\";\n    }\n    if (this.config.shape === \"square\") {\n      this.overlay.style.transform = \"\";\n    }\n    this.update();\n  }\n  isVisible() {\n    return this.state.visible && !this.state.collapsed;\n  }\n  show() {\n    super.show();\n    this.update();\n    if (!this.state.maximized) {\n      this.overlay.style.display = \"\";\n    }\n  }\n  hide() {\n    super.hide();\n    this.state.forceRender = false;\n  }\n  /**\n   * Flag for render\n   */\n  update(clear = true) {\n    this.state.needsUpdate = true;\n    if (clear) {\n      this.state.hotspotPos = {};\n      this.__resetHotspot();\n    }\n  }\n  /**\n   * Load a new map image\n   */\n  reload(url) {\n    delete this.state.images[this.config.imageUrl];\n    this.config.imageUrl = url;\n    this.state.imgScale = 1;\n    this.__loadImage(this.config.imageUrl, true);\n    this.recenter();\n  }\n  /**\n   * Clears the offset and zoom level\n   */\n  reset() {\n    this.state.zoom = this.config.defaultZoom;\n    this.recenter();\n  }\n  /**\n   * Clears the offset\n   */\n  recenter() {\n    this.state.offset.x = 0;\n    this.state.offset.y = 0;\n    this.update();\n  }\n  /**\n   * Switch collapsed mode\n   */\n  toggleCollapse() {\n    if (this.state.maximized) {\n      this.toggleMaximized(false);\n    }\n    this.state.collapsed = !this.state.collapsed;\n    utils2.toggleClass(this.container, \"psv-map--collapsed\", this.state.collapsed);\n    if (!this.state.collapsed) {\n      this.reset();\n      this.plugin.dispatchEvent(new ViewChanged(\"normal\"));\n    } else {\n      this.plugin.dispatchEvent(new ViewChanged(\"closed\"));\n    }\n    this.closeButton?.update();\n  }\n  /**\n   * Switch maximized mode\n   */\n  toggleMaximized(dispatchMinimizeEvent = true) {\n    if (this.state.collapsed) {\n      return;\n    }\n    this.state.maximized = !this.state.maximized;\n    utils2.toggleClass(this.container, \"psv-map--maximized\", this.state.maximized);\n    if (this.state.maximized) {\n      this.state.galleryWasVisible = this.gallery?.isVisible();\n      this.gallery?.hide();\n      this.overlay.style.display = \"none\";\n      this.plugin.dispatchEvent(new ViewChanged(\"maximized\"));\n    } else {\n      if (this.state.galleryWasVisible) {\n        this.gallery.show();\n      }\n      if (dispatchMinimizeEvent) {\n        this.plugin.dispatchEvent(new ViewChanged(\"normal\"));\n      }\n    }\n    this.maximizeButton?.update();\n  }\n  /**\n   * Changes the zoom level\n   */\n  zoom(d) {\n    this.setZoom(this.state.zoom + d);\n  }\n  /**\n   * Changes the zoom level\n   */\n  setZoom(value) {\n    this.state.zoom = MathUtils.clamp(value, this.config.minZoom, this.config.maxZoom);\n    this.update();\n  }\n  /**\n   * Updates the markers\n   */\n  setMarkers(markers) {\n    this.state.markers = markers;\n    this.update();\n  }\n  /**\n   * Changes the highlighted hotspot\n   */\n  setActiveHotspot(hotspotId) {\n    this.state.hotspotId = hotspotId;\n    this.update(false);\n  }\n  render() {\n    if (!this.config.center) {\n      return;\n    }\n    const mapImage = this.__loadImage(this.config.imageUrl);\n    if (!mapImage) {\n      return;\n    }\n    const yaw = this.viewer.getPosition().yaw;\n    const zoom = Math.exp(this.state.zoom) / this.state.imgScale;\n    const center = {\n      x: this.config.center.x * this.state.imgScale,\n      y: this.config.center.y * this.state.imgScale\n    };\n    const offset = {\n      x: this.state.offset.x * this.state.imgScale,\n      y: this.state.offset.y * this.state.imgScale\n    };\n    const rotation = this.config.rotation;\n    const yawAndRotation = this.config.static ? 0 : yaw + rotation;\n    if (!this.config.static) {\n      if (this.config.shape === \"round\") {\n        this.overlay.style.transform = `rotate(${-yawAndRotation}rad)`;\n      }\n      this.compassButton?.rotate(yawAndRotation);\n    }\n    this.zoomToolbar.setText(this.state.zoom);\n    this.canvas.width = this.container.clientWidth * SYSTEM2.pixelRatio;\n    this.canvas.height = this.container.clientHeight * SYSTEM2.pixelRatio;\n    const canvasPos = utils2.getPosition(this.canvas);\n    const canvasW = this.canvas.width;\n    const canvasH = this.canvas.height;\n    const canvasVirtualCenterX = canvasW / 2 / SYSTEM2.pixelRatio;\n    const canvasVirtualCenterY = canvasH / 2 / SYSTEM2.pixelRatio;\n    const context = this.canvas.getContext(\"2d\");\n    context.clearRect(0, 0, canvasW, canvasH);\n    const mapW = mapImage.width;\n    const mapH = mapImage.height;\n    context.save();\n    context.translate(canvasW / 2, canvasH / 2);\n    context.rotate(-yawAndRotation);\n    context.scale(zoom, zoom);\n    canvasShadow(context, 0, 0, MAP_SHADOW_BLUR);\n    drawImageHighDpi(\n      context,\n      mapImage,\n      -center.x - offset.x,\n      -center.y - offset.y,\n      mapW,\n      mapH\n    );\n    context.restore();\n    [...this.config.hotspots, ...this.state.markers].sort((a, b) => {\n      if (this.state.hotspotId === a.id) {\n        return 1;\n      }\n      if (this.state.hotspotId === b.id) {\n        return -1;\n      }\n      return (a.zIndex ?? 0) - (b.zIndex ?? 0);\n    }).forEach((hotspot) => {\n      const isHover = this.state.hotspotId === hotspot.id;\n      const style = getStyle(this.config.spotStyle, hotspot, isHover);\n      const image = this.__loadImage(style.image);\n      const hotspotPos = { ...offset };\n      if (\"yaw\" in hotspot && \"distance\" in hotspot) {\n        const angle = utils2.parseAngle(hotspot.yaw) + rotation;\n        hotspotPos.x += Math.sin(-angle) * hotspot.distance * this.state.imgScale;\n        hotspotPos.y += Math.cos(-angle) * hotspot.distance * this.state.imgScale;\n      } else if (\"x\" in hotspot && \"y\" in hotspot) {\n        hotspotPos.x += center.x - hotspot.x * this.state.imgScale;\n        hotspotPos.y += center.y - hotspot.y * this.state.imgScale;\n      } else {\n        utils2.logWarn(`Hotspot ${hotspot[\"id\"]} is missing position (yaw+distance or x+y)`);\n        return;\n      }\n      const spotPos = projectPoint(hotspotPos, yawAndRotation, zoom);\n      const x = canvasVirtualCenterX - spotPos.x;\n      const y = canvasVirtualCenterY - spotPos.y;\n      this.state.hotspotPos[hotspot.id] = {\n        x: x + canvasPos.x,\n        y: y + canvasPos.y,\n        s: style.size\n      };\n      context.save();\n      context.translate(x * SYSTEM2.pixelRatio, y * SYSTEM2.pixelRatio);\n      canvasShadow(context, PIN_SHADOW_OFFSET, PIN_SHADOW_OFFSET, PIN_SHADOW_BLUR);\n      if (image) {\n        drawImageCentered(context, image, style.size);\n      } else {\n        context.fillStyle = style.color;\n        context.beginPath();\n        context.arc(0, 0, style.size * SYSTEM2.pixelRatio / 2, 0, 2 * Math.PI);\n        context.fill();\n        if (style.borderColor && style.borderSize) {\n          context.shadowColor = \"transparent\";\n          context.strokeStyle = style.borderColor;\n          context.lineWidth = style.borderSize;\n          context.beginPath();\n          context.arc(0, 0, (style.size + style.borderSize) * SYSTEM2.pixelRatio / 2, 0, 2 * Math.PI);\n          context.stroke();\n        }\n      }\n      context.restore();\n    });\n    const pinImage = this.__loadImage(this.config.pinImage);\n    if (pinImage || this.config.coneColor && this.config.coneSize) {\n      const pinPos = projectPoint(offset, yawAndRotation, zoom);\n      const x = canvasVirtualCenterX - pinPos.x;\n      const y = canvasVirtualCenterY - pinPos.y;\n      const size = this.config.pinSize;\n      const angle = this.config.static ? yaw + rotation : 0;\n      context.save();\n      context.translate(x * SYSTEM2.pixelRatio, y * SYSTEM2.pixelRatio);\n      context.rotate(angle);\n      if (this.config.coneColor && this.config.coneSize) {\n        const fov = MathUtils.degToRad(this.viewer.state.hFov);\n        const a1 = -Math.PI / 2 - fov / 2;\n        const a2 = a1 + fov;\n        const c = this.config.coneSize * SYSTEM2.pixelRatio;\n        const grad = context.createRadialGradient(0, 0, c / 4, 0, 0, c);\n        grad.addColorStop(0, this.config.coneColor);\n        grad.addColorStop(1, rgbToRgba(this.config.coneColor, 0));\n        context.beginPath();\n        context.moveTo(0, 0);\n        context.lineTo(Math.cos(a1) * c, Math.sin(a1) * c);\n        context.arc(0, 0, c, a1, a2, false);\n        context.lineTo(0, 0);\n        context.fillStyle = grad;\n        context.fill();\n      }\n      if (pinImage) {\n        canvasShadow(context, PIN_SHADOW_OFFSET, PIN_SHADOW_OFFSET, PIN_SHADOW_BLUR);\n        drawImageCentered(context, pinImage, size);\n      }\n      context.restore();\n    }\n  }\n  /**\n   * Applies mouse movement to the map\n   */\n  __move(clientX, clientY) {\n    const yaw = this.viewer.getPosition().yaw;\n    const zoom = Math.exp(this.state.zoom);\n    const move = unprojectPoint(\n      {\n        x: this.state.mouseX - clientX,\n        y: this.state.mouseY - clientY\n      },\n      this.config.static ? 0 : yaw + this.config.rotation,\n      zoom\n    );\n    this.state.offset.x += move.x;\n    this.state.offset.y += move.y;\n    this.update();\n    this.state.mouseX = clientX;\n    this.state.mouseY = clientY;\n  }\n  /**\n   * Finds the hotspot under the mouse\n   */\n  __findHotspot(clientX, clientY) {\n    const k = this.config.spotStyle.size / 2;\n    let hotspotId = null;\n    for (const [id, { x, y }] of Object.entries(this.state.hotspotPos)) {\n      if (clientX > x - k && clientX < x + k && clientY > y - k && clientY < y + k) {\n        hotspotId = id;\n        break;\n      }\n    }\n    return hotspotId;\n  }\n  /**\n   * Updates current hotspot on mouse move and displays tooltip\n   */\n  __handleHotspots(clientX, clientY) {\n    const hotspotId = this.__findHotspot(clientX, clientY);\n    if (this.state.hotspotId !== hotspotId) {\n      this.__resetHotspot();\n      if (hotspotId) {\n        let tooltip;\n        if (hotspotId.startsWith(HOTSPOT_MARKER_ID)) {\n          tooltip = this.state.markers.find(({ id }) => id === hotspotId)?.tooltip;\n        } else {\n          tooltip = this.config.hotspots.find(({ id }) => id === hotspotId)?.tooltip;\n        }\n        if (tooltip) {\n          if (typeof tooltip === \"string\") {\n            tooltip = { content: tooltip };\n          }\n          const hotspotPos = this.state.hotspotPos[hotspotId];\n          const viewerPos = utils2.getPosition(this.viewer.container);\n          this.state.hotspotTooltip = this.viewer.createTooltip({\n            content: tooltip.content,\n            className: tooltip.className,\n            left: hotspotPos.x - viewerPos.x,\n            top: hotspotPos.y - viewerPos.y,\n            box: {\n              width: hotspotPos.s,\n              height: hotspotPos.s\n            }\n          });\n        }\n      }\n      this.setActiveHotspot(hotspotId);\n      this.__setCursor(hotspotId ? \"pointer\" : \"move\");\n    }\n  }\n  /**\n   * Dispatch event when a hotspot is clicked\n   */\n  __clickHotspot(clientX, clientY) {\n    const hotspotId = this.__findHotspot(clientX, clientY);\n    if (hotspotId) {\n      this.plugin.dispatchEvent(new SelectHotspot(hotspotId));\n      if (hotspotId.startsWith(HOTSPOT_MARKER_ID)) {\n        const markerId = hotspotId.substring(HOTSPOT_MARKER_ID.length);\n        this.viewer.getPlugin(\"markers\").gotoMarker(markerId);\n      }\n      if (this.maximized && this.config.minimizeOnHotspotClick) {\n        this.toggleMaximized();\n      }\n    }\n    this.__resetHotspot();\n  }\n  __resetHotspot() {\n    this.state.hotspotTooltip?.hide();\n    this.state.hotspotTooltip = null;\n    this.state.hotspotId = null;\n  }\n  /**\n   * Loads an image and returns the result **synchronously**.\n   * If the image is not already loaded it returns `null` and schedules a new render when the image is ready.\n   */\n  __loadImage(url, isInit = false) {\n    if (!url) {\n      return null;\n    }\n    if (!this.state.images[url]) {\n      const image = loadImage(url);\n      this.state.images[url] = {\n        loading: true,\n        value: image\n      };\n      image.onload = () => {\n        if (isInit && Math.max(image.width, image.height) > SYSTEM2.maxCanvasWidth) {\n          this.state.imgScale = SYSTEM2.maxCanvasWidth / Math.max(image.width, image.height);\n          const buffer = document.createElement(\"canvas\");\n          buffer.width = image.width * this.state.imgScale;\n          buffer.height = image.height * this.state.imgScale;\n          const ctx = buffer.getContext(\"2d\");\n          ctx.drawImage(image, 0, 0, buffer.width, buffer.height);\n          this.state.images[url].value = buffer;\n        }\n        this.state.images[url].loading = false;\n        this.update(false);\n        if (isInit) {\n          this.show();\n        }\n      };\n      return null;\n    }\n    if (this.state.images[url].loading) {\n      return null;\n    }\n    return this.state.images[url].value;\n  }\n  __onKeyPress(key) {\n    if (key === CONSTANTS2.KEY_CODES.Escape) {\n      this.toggleMaximized();\n      return;\n    }\n    if (!this.viewer.state.keyboardEnabled) {\n      return;\n    }\n    let x = 0;\n    let y = 0;\n    let z = 0;\n    switch (key) {\n      case CONSTANTS2.KEY_CODES.ArrowUp:\n        y = 1;\n        break;\n      case CONSTANTS2.KEY_CODES.ArrowDown:\n        y = -1;\n        break;\n      case CONSTANTS2.KEY_CODES.ArrowLeft:\n        x = 1;\n        break;\n      case CONSTANTS2.KEY_CODES.ArrowRight:\n        x = -1;\n        break;\n      case CONSTANTS2.KEY_CODES.Plus:\n        z = 1;\n        break;\n      case CONSTANTS2.KEY_CODES.Minus:\n        z = -1;\n        break;\n      case CONSTANTS2.KEY_CODES.PageUp:\n        z = 1;\n        break;\n      case CONSTANTS2.KEY_CODES.PageDown:\n        z = -1;\n        break;\n    }\n    if (x || y) {\n      this.state.mouseX = 0;\n      this.state.mouseY = 0;\n      this.__move(x * 10, y * 10);\n    }\n    if (z) {\n      this.zoom(z / 10);\n    }\n  }\n  __setCursor(cursor) {\n    this.canvas.style.cursor = cursor;\n  }\n  __onToggleGallery(visible) {\n    if (!visible) {\n      this.container.style.marginBottom = \"\";\n    } else {\n      this.container.style.marginBottom = this.viewer.container.querySelector(\".psv-gallery\").offsetHeight + 10 + \"px\";\n    }\n  }\n};\n\n// src/icons/pin.svg\nvar pin_default = '<svg viewBox=\"-20 -20 740 740\" xmlns=\"http://www.w3.org/2000/svg\">\\n    <circle cx=\"350\" cy=\"350\" r=\"190\" fill=\"white\"/>\\n    <circle cx=\"350\" cy=\"350\" r=\"150\" fill=\"#1E78E6\"/>\\n</svg>\\n';\n\n// src/MapPlugin.ts\nvar getConfig = utils3.getConfigParser(\n  {\n    imageUrl: null,\n    center: null,\n    rotation: 0,\n    shape: \"round\",\n    size: \"200px\",\n    position: [\"bottom\", \"left\"],\n    visibleOnLoad: true,\n    overlayImage: void 0,\n    pinImage: pin_default,\n    pinSize: 35,\n    coneColor: \"#1E78E6\",\n    coneSize: 40,\n    spotStyle: {\n      size: 15,\n      image: null,\n      color: \"white\",\n      borderSize: 0,\n      borderColor: null,\n      hoverSize: null,\n      hoverImage: null,\n      hoverColor: null,\n      hoverBorderSize: 4,\n      hoverBorderColor: \"rgba(255, 255, 255, 0.6)\"\n    },\n    static: false,\n    defaultZoom: 100,\n    minZoom: 20,\n    maxZoom: 200,\n    hotspots: [],\n    minimizeOnHotspotClick: true,\n    buttons: {\n      maximize: true,\n      close: true,\n      reset: true,\n      north: true\n    }\n  },\n  {\n    spotStyle: (spotStyle, { defValue }) => ({ ...defValue, ...spotStyle }),\n    position: (position, { defValue }) => {\n      return utils3.cleanCssPosition(position, { allowCenter: false, cssOrder: true }) || defValue;\n    },\n    rotation: (rotation) => utils3.parseAngle(rotation),\n    coneColor: (coneColor) => coneColor ? new Color(coneColor).getStyle() : null,\n    // must be in rgb format\n    defaultZoom: (defaultZoom) => Math.log(defaultZoom / 100),\n    maxZoom: (maxZoom) => Math.log(maxZoom / 100),\n    minZoom: (minZoom) => Math.log(minZoom / 100),\n    buttons: (buttons, { defValue }) => ({ ...defValue, ...buttons })\n  }\n);\nvar MapPlugin = class extends AbstractConfigurablePlugin {\n  constructor(viewer, config) {\n    super(viewer, config);\n    this.component = new MapComponent(this.viewer, this);\n  }\n  /**\n   * @internal\n   */\n  init() {\n    super.init();\n    utils3.checkStylesheet(this.viewer.container, \"map-plugin\");\n    this.component.init();\n    this.markers = this.viewer.getPlugin(\"markers\");\n    this.viewer.addEventListener(events2.PositionUpdatedEvent.type, this);\n    this.viewer.addEventListener(events2.ZoomUpdatedEvent.type, this);\n    this.viewer.addEventListener(events2.SizeUpdatedEvent.type, this);\n    this.viewer.addEventListener(events2.ReadyEvent.type, this, { once: true });\n    this.markers?.addEventListener(\"set-markers\", this);\n    this.setHotspots(this.config.hotspots, false);\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.viewer.removeEventListener(events2.PositionUpdatedEvent.type, this);\n    this.viewer.removeEventListener(events2.ZoomUpdatedEvent.type, this);\n    this.viewer.removeEventListener(events2.SizeUpdatedEvent.type, this);\n    this.viewer.removeEventListener(events2.ReadyEvent.type, this);\n    this.markers?.removeEventListener(\"set-markers\", this);\n    this.component.destroy();\n    delete this.markers;\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case events2.ReadyEvent.type:\n        this.component.reload(this.config.imageUrl);\n        break;\n      case events2.PositionUpdatedEvent.type:\n      case events2.ZoomUpdatedEvent.type:\n        this.component.update();\n        break;\n      case events2.SizeUpdatedEvent.type:\n        if (this.component.maximized) {\n          this.component.update();\n        }\n        break;\n      case \"set-markers\":\n        this.component.setMarkers(this.__markersToHotspots(e.markers));\n        break;\n      default:\n        break;\n    }\n  }\n  setOptions(options) {\n    super.setOptions(options);\n    if (options.center) {\n      this.component.recenter();\n    }\n    if (options.hotspots !== void 0) {\n      this.setHotspots(options.hotspots);\n    }\n    this.component.applyConfig();\n  }\n  /**\n   * Hides the map\n   */\n  hide() {\n    this.component.hide();\n  }\n  /**\n   * Shows the map\n   */\n  show() {\n    this.component.show();\n  }\n  /**\n   * Changes the current zoom level\n   */\n  setZoom(level) {\n    this.component.setZoom(Math.log(level / 100));\n  }\n  /**\n   * Closes the map\n   */\n  close() {\n    if (!this.component.collapsed) {\n      this.component.toggleCollapse();\n    }\n  }\n  /**\n   * Open the map\n   */\n  open() {\n    if (this.component.collapsed) {\n      this.component.toggleCollapse();\n    }\n  }\n  /**\n   * Minimizes the map\n   */\n  minimize() {\n    if (this.component.maximized) {\n      this.component.toggleMaximized();\n    }\n  }\n  /**\n   * Maximizes the map\n   */\n  maximize() {\n    if (!this.component.maximized) {\n      this.component.toggleMaximized();\n    }\n  }\n  /**\n   * Changes the image of the map\n   * @param rotation Also change the image rotation\n   * @param center Also change the position on the map\n   */\n  setImage(url, center, rotation) {\n    if (!utils3.isNil(rotation)) {\n      this.config.rotation = utils3.parseAngle(rotation);\n    }\n    if (!utils3.isNil(center)) {\n      this.config.center = center;\n    }\n    this.component.reload(url);\n  }\n  /**\n   * Changes the position on the map\n   */\n  setCenter(center) {\n    this.config.center = center;\n    this.component.recenter();\n  }\n  /**\n   * Changes the hotspots on the map\n   */\n  setHotspots(hotspots, render = true) {\n    const ids = [];\n    let i = 1;\n    hotspots?.forEach((hotspot) => {\n      if (!hotspot.id) {\n        hotspot.id = HOTSPOT_GENERATED_ID + i++;\n      } else if (ids.includes(hotspot.id)) {\n        utils3.logWarn(`Duplicated hotspot id \"${hotspot.id}`);\n      } else {\n        ids.push(hotspot.id);\n      }\n    });\n    this.config.hotspots = hotspots || [];\n    if (render) {\n      this.component.update();\n    }\n  }\n  /**\n   * Removes all hotspots\n   */\n  clearHotspots() {\n    this.setHotspots(null);\n  }\n  /**\n   * Changes the highlighted hotspot\n   */\n  setActiveHotspot(hotspotId) {\n    this.component.setActiveHotspot(hotspotId);\n  }\n  __markersToHotspots(markers) {\n    return markers.filter((marker) => marker.data?.[MARKER_DATA_KEY]).map((marker) => {\n      const hotspot = {\n        ...marker.data[MARKER_DATA_KEY],\n        id: HOTSPOT_MARKER_ID + marker.id,\n        tooltip: marker.config.tooltip\n      };\n      if (\"distance\" in hotspot) {\n        hotspot.yaw = marker.state.position.yaw;\n      } else if (!(\"x\" in hotspot) || !(\"y\" in hotspot)) {\n        utils3.logWarn(`Marker #${marker.id} \"map\" data is missing position (distance or x+y)`);\n        return null;\n      }\n      return hotspot;\n    }).filter((h) => h);\n  }\n};\nMapPlugin.id = \"map\";\nMapPlugin.VERSION = \"5.13.2\";\nMapPlugin.configParser = getConfig;\nMapPlugin.readonlyOptions = [\n  \"imageUrl\",\n  \"visibleOnLoad\",\n  \"defaultZoom\",\n  \"buttons\"\n];\n\n// src/index.ts\nDEFAULTS.lang[\"map\"] = \"Map\";\nDEFAULTS.lang[\"mapMaximize\"] = \"Maximize\";\nDEFAULTS.lang[\"mapMinimize\"] = \"Minimize\";\nDEFAULTS.lang[\"mapNorth\"] = \"Go to north\";\nDEFAULTS.lang[\"mapReset\"] = \"Reset\";\nexport {\n  MapPlugin,\n  events_exports as events\n};\n//# sourceMappingURL=index.module.js.map","/*!\n * Photo Sphere Viewer / Autorotate Plugin 5.13.2\n * @copyright 2015-2025 Damien \"Mistic\" Sorel\n * @licence MIT (https://opensource.org/licenses/MIT)\n */\nvar __defProp = Object.defineProperty;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\n\n// src/index.ts\nimport { DEFAULTS, registerButton } from \"@photo-sphere-viewer/core\";\n\n// src/AutorotateButton.ts\nimport { AbstractButton } from \"@photo-sphere-viewer/core\";\n\n// src/events.ts\nvar events_exports = {};\n__export(events_exports, {\n  AutorotateEvent: () => AutorotateEvent\n});\nimport { TypedEvent } from \"@photo-sphere-viewer/core\";\nvar _AutorotateEvent = class _AutorotateEvent extends TypedEvent {\n  /** @internal */\n  constructor(autorotateEnabled) {\n    super(_AutorotateEvent.type);\n    this.autorotateEnabled = autorotateEnabled;\n  }\n};\n_AutorotateEvent.type = \"autorotate\";\nvar AutorotateEvent = _AutorotateEvent;\n\n// src/icons/play-active.svg\nvar play_active_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 41 41\" overflow=\"visible\"><g fill=\"currentColor\" transform-origin=\"center\" transform=\"scale(1.3)\"><path d=\"M40.5 14.1c-.1-.1-1.2-.5-2.898-1-.102 0-.202-.1-.202-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.399 2.7.899.1 0 .2.101.2.199C6.3 34.4 12.9 39 20.5 39c7.602 0 14.102-4.6 16.9-11.1 0-.102.1-.102.199-.2 1.699-.601 2.699-1 2.801-1l.6-.3V14.3l-.5-.2zM6.701 11.5C9.7 7 14.8 4 20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.799-1-8.799-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5zM25.1 20.3L18.7 24c-.3.2-.7 0-.7-.5v-7.4c0-.4.4-.6.7-.4l6.399 3.8c.301.1.301.6.001.8zm9.4 8.901A16.421 16.421 0 0 1 20.5 37c-5.9 0-11.1-3.1-14-7.898-.2-.302.1-.602.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.602-2 .298-.1.5.198.398.499z\"/></g><!--Created by Nick Bluth from the Noun Project--></svg>\\n';\n\n// src/icons/play.svg\nvar play_default = '<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 41 41\" overflow=\"visible\"><g fill=\"currentColor\" transform-origin=\"center\" transform=\"scale(1.3)\"><path d=\"M40.5 14.1c-.1-.1-1.2-.5-2.899-1-.101 0-.2-.1-.2-.2C34.5 6.5 28 2 20.5 2S6.6 6.5 3.7 12.9c0 .1-.1.1-.2.2-1.7.6-2.8 1-2.9 1l-.6.3v12.1l.6.2c.1 0 1.1.4 2.7.9.1 0 .2.1.2.199C6.3 34.4 12.9 39 20.5 39c7.601 0 14.101-4.6 16.9-11.1 0-.101.1-.101.2-.2 1.699-.6 2.699-1 2.8-1l.6-.3V14.3l-.5-.2zM20.5 4c5.8 0 10.9 3 13.8 7.5.2.3-.1.6-.399.5-3.8-1-8.8-2-13.6-2-4.7 0-9.5 1-13.2 2-.3.1-.5-.2-.4-.5C9.7 7 14.8 4 20.5 4zm0 33c-5.9 0-11.1-3.1-14-7.899-.2-.301.1-.601.4-.5 3.9 1 8.9 2.1 13.6 2.1 5 0 9.9-1 13.601-2 .3-.1.5.2.399.5A16.422 16.422 0 0 1 20.5 37zm18.601-12.1c0 .1-.101.3-.2.3-2.5.9-10.4 3.6-18.4 3.6-7.1 0-15.6-2.699-18.3-3.6C2.1 25.2 2 25 2 24.9V16c0-.1.1-.3.2-.3 2.6-.9 10.6-3.6 18.2-3.6 7.5 0 15.899 2.7 18.5 3.6.1 0 .2.2.2.3v8.9z\"/><path d=\"M18.7 24l6.4-3.7c.3-.2.3-.7 0-.8l-6.4-3.8c-.3-.2-.7 0-.7.4v7.4c0 .5.4.7.7.5z\"/></g><!--Created by Nick Bluth from the Noun Project--></svg>\\n';\n\n// src/AutorotateButton.ts\nvar AutorotateButton = class extends AbstractButton {\n  constructor(navbar) {\n    super(navbar, {\n      className: \"psv-autorotate-button\",\n      hoverScale: true,\n      collapsable: true,\n      tabbable: true,\n      icon: play_default,\n      iconActive: play_active_default\n    });\n    this.plugin = this.viewer.getPlugin(\"autorotate\");\n    this.plugin?.addEventListener(AutorotateEvent.type, this);\n  }\n  destroy() {\n    this.plugin?.removeEventListener(AutorotateEvent.type, this);\n    super.destroy();\n  }\n  isSupported() {\n    return !!this.plugin;\n  }\n  handleEvent(e) {\n    if (e instanceof AutorotateEvent) {\n      this.toggleActive(e.autorotateEnabled);\n    }\n  }\n  onClick() {\n    if (this.plugin.isEnabled()) {\n      this.plugin.disableOnIdle();\n    }\n    this.plugin.toggle();\n  }\n};\nAutorotateButton.id = \"autorotate\";\n\n// src/AutorotatePlugin.ts\nimport { AbstractConfigurablePlugin, CONSTANTS, events, PSVError, utils } from \"@photo-sphere-viewer/core\";\nimport { MathUtils, SplineCurve, Vector2 } from \"three\";\nvar getConfig = utils.getConfigParser(\n  {\n    autostartDelay: 2e3,\n    autostartOnIdle: true,\n    autorotateSpeed: utils.parseSpeed(\"2rpm\"),\n    autorotatePitch: null,\n    autorotateZoomLvl: null,\n    keypoints: null,\n    startFromClosest: true\n  },\n  {\n    autostartOnIdle: (autostartOnIdle, { rawConfig }) => {\n      if (autostartOnIdle && utils.isNil(rawConfig.autostartDelay)) {\n        utils.logWarn(\"autostartOnIdle requires a non null autostartDelay\");\n        return false;\n      }\n      return autostartOnIdle;\n    },\n    autorotateSpeed: (autorotateSpeed) => {\n      return utils.parseSpeed(autorotateSpeed);\n    },\n    autorotatePitch: (autorotatePitch) => {\n      if (!utils.isNil(autorotatePitch)) {\n        return utils.parseAngle(autorotatePitch, true);\n      }\n      return null;\n    },\n    autorotateZoomLvl: (autorotateZoomLvl) => {\n      if (!utils.isNil(autorotateZoomLvl)) {\n        return MathUtils.clamp(autorotateZoomLvl, 0, 100);\n      }\n      return null;\n    }\n  }\n);\nvar NUM_STEPS = 16;\nfunction serializePt(position) {\n  return [position.yaw, position.pitch];\n}\nvar AutorotatePlugin = class extends AbstractConfigurablePlugin {\n  constructor(viewer, config) {\n    super(viewer, config);\n    this.state = {\n      initialStart: true,\n      disableOnIdle: false,\n      /** if the automatic rotation is enabled */\n      enabled: false,\n      /** current index in keypoints */\n      idx: -1,\n      /** curve between idx and idx + 1 */\n      curve: [],\n      /** start point of the current step */\n      startStep: null,\n      /** end point of the current step */\n      endStep: null,\n      /** start time of the current step  */\n      startTime: null,\n      /** expected duration of the step */\n      stepDuration: null,\n      /** time remaining for the pause */\n      remainingPause: null,\n      /** previous timestamp in render loop */\n      lastTime: null,\n      /** currently displayed tooltip */\n      tooltip: null\n    };\n    this.state.initialStart = !utils.isNil(this.config.autostartDelay);\n  }\n  /**\n   * @internal\n   */\n  init() {\n    super.init();\n    this.video = this.viewer.getPlugin(\"video\");\n    this.markers = this.viewer.getPlugin(\"markers\");\n    if (this.config.keypoints) {\n      this.setKeypoints(this.config.keypoints);\n      delete this.config.keypoints;\n    }\n    this.viewer.addEventListener(events.StopAllEvent.type, this);\n    this.viewer.addEventListener(events.BeforeRenderEvent.type, this);\n    if (!this.video) {\n      this.viewer.addEventListener(events.KeypressEvent.type, this);\n    }\n  }\n  /**\n   * @internal\n   */\n  destroy() {\n    this.viewer.removeEventListener(events.StopAllEvent.type, this);\n    this.viewer.removeEventListener(events.BeforeRenderEvent.type, this);\n    this.viewer.removeEventListener(events.KeypressEvent.type, this);\n    delete this.video;\n    delete this.markers;\n    delete this.keypoints;\n    super.destroy();\n  }\n  /**\n   * @internal\n   */\n  handleEvent(e) {\n    switch (e.type) {\n      case events.StopAllEvent.type:\n        this.stop();\n        break;\n      case events.BeforeRenderEvent.type: {\n        this.__beforeRender(e.timestamp);\n        break;\n      }\n      case events.KeypressEvent.type:\n        this.__onKeyPress(e.originalEvent);\n        break;\n    }\n  }\n  /**\n   * Changes the keypoints\n   * @throws {@link PSVError} if the configuration is invalid\n   */\n  setKeypoints(keypoints) {\n    if (!keypoints) {\n      this.keypoints = null;\n    } else {\n      if (keypoints.length < 2) {\n        throw new PSVError(\"At least two points are required\");\n      }\n      this.keypoints = keypoints.map((pt, i) => {\n        const keypoint = {\n          position: null,\n          markerId: null,\n          pause: 0,\n          tooltip: null\n        };\n        let position;\n        if (typeof pt === \"string\") {\n          keypoint.markerId = pt;\n        } else if (utils.isExtendedPosition(pt)) {\n          position = pt;\n        } else {\n          keypoint.markerId = pt.markerId;\n          keypoint.pause = pt.pause;\n          position = pt.position;\n          if (pt.tooltip && typeof pt.tooltip === \"object\") {\n            keypoint.tooltip = pt.tooltip;\n          } else if (typeof pt.tooltip === \"string\") {\n            keypoint.tooltip = { content: pt.tooltip };\n          }\n        }\n        if (keypoint.markerId) {\n          if (!this.markers) {\n            throw new PSVError(`Keypoint #${i} references a marker but the markers plugin is not loaded`);\n          }\n          const marker = this.markers.getMarker(keypoint.markerId);\n          keypoint.position = serializePt(marker.state.position);\n        } else if (position) {\n          keypoint.position = serializePt(this.viewer.dataHelper.cleanPosition(position));\n        } else {\n          throw new PSVError(`Keypoint #${i} is missing marker or position`);\n        }\n        return keypoint;\n      });\n    }\n    if (this.isEnabled()) {\n      this.stop();\n      this.start();\n    }\n  }\n  /**\n   * Checks if the automatic rotation is enabled\n   */\n  isEnabled() {\n    return this.state.enabled;\n  }\n  /**\n   * Starts the automatic rotation\n   */\n  start() {\n    if (this.isEnabled()) {\n      return;\n    }\n    this.viewer.stopAll();\n    if (!this.keypoints) {\n      this.__animate();\n    } else if (this.config.startFromClosest) {\n      this.__shiftKeypoints();\n    }\n    this.state.initialStart = false;\n    this.state.disableOnIdle = false;\n    this.state.enabled = true;\n    this.dispatchEvent(new AutorotateEvent(true));\n  }\n  /**\n   * Stops the automatic rotation\n   */\n  stop() {\n    if (!this.isEnabled()) {\n      return;\n    }\n    this.__hideTooltip();\n    this.__reset();\n    this.viewer.stopAnimation();\n    this.viewer.dynamics.position.stop();\n    this.viewer.dynamics.zoom.stop();\n    this.state.enabled = false;\n    this.dispatchEvent(new AutorotateEvent(false));\n  }\n  /**\n   * Starts or stops the automatic rotation\n   */\n  toggle() {\n    if (this.isEnabled()) {\n      this.stop();\n    } else {\n      this.start();\n    }\n  }\n  /**\n   * @internal\n   */\n  reverse() {\n    if (this.isEnabled() && !this.keypoints) {\n      this.config.autorotateSpeed = -this.config.autorotateSpeed;\n      this.__animate();\n    }\n  }\n  /**\n   * @internal\n   */\n  disableOnIdle() {\n    this.state.disableOnIdle = true;\n  }\n  /**\n   * Launches the standard animation\n   */\n  __animate() {\n    let p;\n    if (!utils.isNil(this.config.autorotateZoomLvl)) {\n      p = this.viewer.animate({\n        zoom: this.config.autorotateZoomLvl,\n        // \"2\" is magic, and kinda related to the \"PI/4\" in getAnimationProperties()\n        speed: `${this.viewer.config.zoomSpeed * 2}rpm`\n      });\n    } else {\n      p = Promise.resolve(true);\n    }\n    p.then((done) => {\n      if (done) {\n        this.viewer.dynamics.position.roll(\n          {\n            yaw: this.config.autorotateSpeed < 0\n          },\n          Math.abs(this.config.autorotateSpeed / this.viewer.config.moveSpeed)\n        );\n        if (!utils.isNil(this.config.autorotatePitch)) {\n          this.viewer.dynamics.position.goto(\n            {\n              pitch: this.config.autorotatePitch\n            },\n            Math.abs(this.config.autorotateSpeed / this.viewer.config.moveSpeed)\n          );\n        }\n      }\n    });\n  }\n  /**\n   * Resets all the curve variables\n   */\n  __reset() {\n    this.state.idx = -1;\n    this.state.curve = [];\n    this.state.startStep = null;\n    this.state.endStep = null;\n    this.state.startTime = null;\n    this.state.stepDuration = null;\n    this.state.remainingPause = null;\n    this.state.lastTime = null;\n    this.state.tooltip = null;\n  }\n  /**\n   * Automatically starts if the delay is reached\n   * Performs keypoints animation\n   */\n  __beforeRender(timestamp) {\n    if ((this.state.initialStart || this.config.autostartOnIdle && !this.state.disableOnIdle) && this.viewer.state.idleTime > 0 && timestamp - this.viewer.state.idleTime > this.config.autostartDelay) {\n      this.start();\n    }\n    if (this.isEnabled() && this.keypoints) {\n      if (!this.state.startTime) {\n        this.state.endStep = serializePt(this.viewer.getPosition());\n        this.__nextStep();\n        this.state.startTime = timestamp;\n        this.state.lastTime = timestamp;\n      }\n      this.__nextFrame(timestamp);\n    }\n  }\n  __shiftKeypoints() {\n    const currentPosition = serializePt(this.viewer.getPosition());\n    const index = this.__findMinIndex(this.keypoints, (keypoint) => {\n      return utils.greatArcDistance(keypoint.position, currentPosition);\n    });\n    this.keypoints.push(...this.keypoints.splice(0, index));\n  }\n  __incrementIdx() {\n    this.state.idx++;\n    if (this.state.idx === this.keypoints.length) {\n      this.state.idx = 0;\n    }\n  }\n  __showTooltip() {\n    const keypoint = this.keypoints[this.state.idx];\n    if (keypoint.tooltip) {\n      const position = this.viewer.dataHelper.vector3ToViewerCoords(this.viewer.state.direction);\n      this.state.tooltip = this.viewer.createTooltip({\n        content: keypoint.tooltip.content,\n        position: keypoint.tooltip.position,\n        top: position.y,\n        left: position.x\n      });\n    } else if (keypoint.markerId) {\n      const marker = this.markers.getMarker(keypoint.markerId);\n      marker.showTooltip();\n      this.state.tooltip = marker.tooltip;\n    }\n  }\n  __hideTooltip() {\n    if (this.state.tooltip) {\n      const keypoint = this.keypoints[this.state.idx];\n      if (keypoint.tooltip) {\n        this.state.tooltip.hide();\n      } else if (keypoint.markerId) {\n        const marker = this.markers.getMarker(keypoint.markerId);\n        marker.hideTooltip();\n      }\n      this.state.tooltip = null;\n    }\n  }\n  __nextPoint() {\n    const workPoints = [];\n    if (this.state.idx === -1) {\n      const currentPosition = serializePt(this.viewer.getPosition());\n      workPoints.push(\n        currentPosition,\n        currentPosition,\n        this.keypoints[0].position,\n        this.keypoints[1].position\n      );\n    } else {\n      for (let i = -1; i < 3; i++) {\n        const keypoint = this.state.idx + i < 0 ? this.keypoints[this.keypoints.length - 1] : this.keypoints[(this.state.idx + i) % this.keypoints.length];\n        workPoints.push(keypoint.position);\n      }\n    }\n    const workVectors = [new Vector2(workPoints[0][0], workPoints[0][1])];\n    let k = 0;\n    for (let i = 1; i <= 3; i++) {\n      const d = workPoints[i - 1][0] - workPoints[i][0];\n      if (d > Math.PI) {\n        k += 1;\n      } else if (d < -Math.PI) {\n        k -= 1;\n      }\n      if (k !== 0 && i === 1) {\n        workVectors[0].x -= k * 2 * Math.PI;\n        k = 0;\n      }\n      workVectors.push(new Vector2(workPoints[i][0] + k * 2 * Math.PI, workPoints[i][1]));\n    }\n    const curve = new SplineCurve(workVectors).getPoints(NUM_STEPS * 3).map((p) => [p.x, p.y]);\n    this.state.curve = curve.slice(NUM_STEPS + 1, NUM_STEPS * 2 + 1);\n    if (this.state.idx !== -1) {\n      this.state.remainingPause = this.keypoints[this.state.idx].pause;\n      if (this.state.remainingPause) {\n        this.__showTooltip();\n      } else {\n        this.__incrementIdx();\n      }\n    } else {\n      this.__incrementIdx();\n    }\n  }\n  __nextStep() {\n    if (this.state.curve.length === 0) {\n      this.__nextPoint();\n      this.state.endStep[0] = utils.parseAngle(this.state.endStep[0]);\n    }\n    this.state.startStep = this.state.endStep;\n    this.state.endStep = this.state.curve.shift();\n    const distance = utils.greatArcDistance(this.state.startStep, this.state.endStep);\n    this.state.stepDuration = distance * 1e3 / Math.abs(this.config.autorotateSpeed);\n    if (distance === 0) {\n      this.__nextStep();\n    }\n  }\n  __nextFrame(timestamp) {\n    const ellapsed = timestamp - this.state.lastTime;\n    this.state.lastTime = timestamp;\n    if (this.state.remainingPause) {\n      this.state.remainingPause = Math.max(0, this.state.remainingPause - ellapsed);\n      if (this.state.remainingPause > 0) {\n        return;\n      } else {\n        this.__hideTooltip();\n        this.__incrementIdx();\n        this.state.startTime = timestamp;\n      }\n    }\n    let progress = (timestamp - this.state.startTime) / this.state.stepDuration;\n    if (progress >= 1) {\n      this.__nextStep();\n      progress = 0;\n      this.state.startTime = timestamp;\n    }\n    this.viewer.rotate({\n      yaw: this.state.startStep[0] + (this.state.endStep[0] - this.state.startStep[0]) * progress,\n      pitch: this.state.startStep[1] + (this.state.endStep[1] - this.state.startStep[1]) * progress\n    });\n  }\n  __findMinIndex(array, mapper) {\n    let idx = 0;\n    let current = Number.MAX_VALUE;\n    array.forEach((item, i) => {\n      const value = mapper(item);\n      if (value < current) {\n        current = value;\n        idx = i;\n      }\n    });\n    return idx;\n  }\n  __onKeyPress(e) {\n    if (this.viewer.state.keyboardEnabled && e.key === CONSTANTS.KEY_CODES.Space && !e.ctrlKey && !e.altKey && !e.shiftKey && !e.metaKey) {\n      this.toggle();\n      e.preventDefault();\n    }\n  }\n};\nAutorotatePlugin.id = \"autorotate\";\nAutorotatePlugin.VERSION = \"5.13.2\";\nAutorotatePlugin.configParser = getConfig;\nAutorotatePlugin.readonlyOptions = [\"keypoints\"];\n\n// src/index.ts\nregisterButton(AutorotateButton, \"start\");\nDEFAULTS.lang[AutorotateButton.id] = \"Automatic rotation\";\nexport {\n  AutorotatePlugin,\n  events_exports as events\n};\n//# sourceMappingURL=index.module.js.map"],"names":["MathUtils","Vector3","Cache$1","WebGLRenderer","LinearSRGBColorSpace","LinearToneMapping","Scene","PerspectiveCamera","Mesh","SphereGeometry","MeshBasicMaterial","Raycaster","Frustum","Group","WebGLRenderTarget","Vector2","Matrix4","Box3","Euler","Loader$1","Quaternion","Texture","LinearMipmapLinearFilter","LinearFilter","ColorManagement","PlaneGeometry","VideoTexture","Object3D","ShaderMaterial","Color","SplineCurve","__defProp","Object","defineProperty","__export","target","all","name","__defProp$3","get","enumerable","constants_exports","ACTIONS","ANIMATION_MIN_DURATION","CAPTURE_EVENTS_CLASS","CTRLZOOM_TIMEOUT","DBLCLICK_DELAY","EASINGS","ICONS","IDS","KEY_CODES","LONGTOUCH_DELAY","MOVE_THRESHOLD","SPHERE_RADIUS","TWOFINGERSOVERLAY_DELAY","VIEWER_DATA","fullscreenElement","ACTIONS2","MENU","TWO_FINGERS","CTRL_ZOOM","ERROR","DESCRIPTION","Enter","Control","Escape","Space","PageUp","PageDown","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","Delete","Plus","Minus","arrow","close","download","fullscreenIn","fullscreenOut","info","menu","zoomIn","zoomOut","linear","t","inQuad","outQuad","inOutQuad","inCubic","outCubic","inOutCubic","inQuart","outQuart","inOutQuart","inQuint","outQuint","inOutQuint","inSine","Math","cos","PI","outSine","sin","inOutSine","inExpo","pow","outExpo","inOutExpo","inCirc","sqrt","outCirc","inOutCirc","utils_exports","wrap","value","max","result","sum","array","reduce","a","b","distance","p1","p2","x","y","angle","atan2","getShortestArc","from","to","candidate","newCandidate","abs","Infinity","getAngle","position1","position2","acos","pitch","yaw","greatArcDistance","yaw1","pitch1","yaw2","pitch2","getElement","selector","match","document","getElementById","querySelector","toggleClass","element","className","active","classList","toggle","add","remove","addClasses","split","filter","c","removeClasses","hasParent","el","parent","test","parentElement","getClosest","matches","getEventTarget","e","composedPath","getMatchingTarget","find","HTMLElement","SVGElement","getPosition","offsetLeft","scrollLeft","clientLeft","offsetTop","scrollTop","clientTop","offsetParent","window","scrollX","scrollY","getStyleProperty","elt","varname","getComputedStyle","getPropertyValue","getTouchData","touches","length","clientX","clientY","center","isFullscreenEnabled","isIphone","requestFullscreen","dispatchEvent","Event","exitFullscreen","dasherize","str","replace","s","i","toLowerCase","throttle","callback","wait","paused","args","setTimeout","apply","this","isPlainObject","prototype","toString","call","getPrototypeOf","proto","deepmerge","src","first","merge","target2","src2","Array","isArray","forEach","keys","key","clone","isEmpty","obj","constructor","isNil","val","firstNonNull","values","deepEqual","obj1","obj2","isObject","prop","Animation","Dynamic","MultiDynamic","PressHandler","Slider","SliderDirection","applyEulerInverse","checkClosedShadowDom","checkStylesheet","checkVersion","cleanCssPosition","createTexture","cssPositionIsOrdered","getAbortError","getConfigParser","getXMPValue","invertResolvableBoolean","isAbortError","isExtendedPosition","logWarn","mergePanoData","parseAngle","parsePoint","parseSpeed","resolveBoolean","speedToDuration","PSVError","_PSVError","Error","message","reason","_a","super","concat","captureStackTrace","cb","initial","promise","then","res","error","err","object","some","key1","key2","data","attr","intVal","parseInt","parseFloat","isNaN","CSS_POSITIONS","top","bottom","left","right","X_VALUES","Y_VALUES","POS_VALUES","CENTER","tokens","toLocaleLowerCase","slice","xFirst","map","token","reverse","parsed","join","allowCenter","cssOrder","indexOf","speed","speedStr","trim","speedValue","speedUnit","degToRad","angle2","zeroCenter","halfCircle","unit","clamp","img","mimaps","texture","needsUpdate","minFilter","generateMipmaps","anisotropy","quaternion","vector","euler","setFromEuler","invert","applyQuaternion","defaults","parsers","parser","userConfig","rawConfig","config","entries","defValue","version","coreVersion","ShadowRoot","mode","parentNode","width","height","newPanoData","xmpPanoData","panoData","isEquirectangular","fullWidth","fullHeight","croppedWidth","croppedHeight","croppedX","croppedY","poseHeading","posePitch","poseRoll","initialHeading","initialPitch","initialFov","round","options","easing","callbacks","resolved","cancelled","delayTimeout","animationFrame","requestAnimationFrame","__run","delay","timestamp","start","progress","duration","current","properties","end","onTick","__resolve","onFulfilled","Promise","resolve","push","cancel","clearTimeout","cancelAnimationFrame","fn","speedMult","currentSpeed","__current","min","defaultValue","setSpeed","goto","position","MathUtils2","step","setValue","roll","stop","update","elapsed","dstStop","targetSpeed","next","dynamics","dynamic","d","positions","steps","rolls","hasUpdates","time","pending","down","timeout","Date","getTime","up","now","SliderDirection2","container","direction","listener","mousedown","mouseover","addEventListener","isVertical","isHorizontal","destroy","removeEventListener","handleEvent","type","stopPropagation","__onMouseDown","__onMouseEnter","__onMouseLeave","__onTouchStart","__onMouseMove","__onTouchMove","__onMouseUp","__onTouchEnd","evt","__update","touch","changedTouches","moving","boundingClientRect","getBoundingClientRect","MathUtils3","click","cursor","events_exports","BeforeAnimateEvent","BeforeRenderEvent","BeforeRotateEvent","ClickEvent","ConfigChangedEvent","DoubleClickEvent","FullscreenEvent","HideNotificationEvent","HideOverlayEvent","HidePanelEvent","HideTooltipEvent","KeypressEvent","LoadProgressEvent","ObjectEnterEvent","ObjectEvent","ObjectHoverEvent","ObjectLeaveEvent","PanoramaErrorEvent","PanoramaLoadEvent","PanoramaLoadedEvent","PositionUpdatedEvent","ReadyEvent","RenderEvent","RollUpdatedEvent","ShowNotificationEvent","ShowOverlayEvent","ShowPanelEvent","ShowTooltipEvent","SizeUpdatedEvent","StopAllEvent","TransitionDoneEvent","ViewerEvent","ZoomUpdatedEvent","TypedEvent","cancelable","TypedEventTarget","EventTarget","_BeforeAnimateEvent","zoomLevel","_BeforeRenderEvent","_BeforeRotateEvent","_ClickEvent","_ConfigChangedEvent","containsOptions","option","includes","_DoubleClickEvent","_FullscreenEvent","fullscreenEnabled","_HideNotificationEvent","notificationId","_HideOverlayEvent","overlayId","_HidePanelEvent","panelId","_HideTooltipEvent","tooltipData","_KeypressEvent","originalEvent","_LoadProgressEvent","_PanoramaLoadEvent","panorama","_PanoramaLoadedEvent","_PanoramaErrorEvent","_TransitionDoneEvent","completed","_PositionUpdatedEvent","_RollUpdatedEvent","_ReadyEvent","_RenderEvent","_ShowNotificationEvent","_ShowOverlayEvent","_ShowPanelEvent","_ShowTooltipEvent","tooltip","_SizeUpdatedEvent","size","_StopAllEvent","_ZoomUpdatedEvent","viewerPoint","userDataKey","_ObjectEnterEvent","_ObjectLeaveEvent","_ObjectHoverEvent","AbstractAdapter","viewer","init","supportsTransition","supportsPreload","textureCoordsToSphericalCoords","point","sphericalCoordsToTextureCoords","adapterInterop","adapter","p","id","VERSION","supportsDownload","LOCALSTORAGE_TOUCH_SUPPORT","SYSTEM","loaded","pixelRatio","isWebGLSupported","maxTextureWidth","isTouchEnabled","__maxCanvasWidth","maxCanvasWidth","maxWidth","pass","cropCanvas","createElement","cropCtx","getContext","testCanvas","testCtx","fillStyle","fillRect","drawImage","getImageData","getMaxCanvasWidth","load","ctx","getWebGLCtx","devicePixelRatio","getParameter","MAX_TEXTURE_SIZE","navigator","maxTouchPoints","localStorage","clear","listenerMouse","listenerTouch","listenerTimeoutId","listenerTimeout","userAgent","getConfig","resolution","useXmpData","blur","MathUtils4","isPowerOfTwo","EquirectangularAdapter","SPHERE_SEGMENTS","SPHERE_HORIZONTAL_SEGMENTS","textureX","textureY","relativeX","relativeY","relativeLong","relativeLat","loadTexture","loader","useXmpPanoData","path","reject","cleanPanorama","blob","textureLoader","loadFile","dispatchProgress","loadXMP","blobToImage","createEquirectangularTexture","cacheKey","binary","loadBlobAsString","substring","reader","FileReader","onload","onerror","readAsText","ratio","buffer","OffscreenCanvas","floor","createMesh","hStart","hLength","vStart","vLength","geometry","scale","material","depthTest","depthWrite","setTexture","mesh","textureData","setTextureOpacity","opacity","transparent","disposeTexture","dispose","disposeMesh","DualFisheyeAdapter","SphereGeometry2","toNonIndexed","uvs","getAttribute","normals","count","j","index","getX","getY","z","getZ","correction","setXY","rotateX","rotateY","MeshBasicMaterial2","Mesh2","AbstractComponent","_AbstractComponent","children","state","visible","tagName","appendChild","removeChild","childIdx","splice","child","isVisible","show","hide","style","display","getConfig2","title","hoverScale","collapsable","tabbable","icon","iconActive","AbstractButton","navbar","enabled","supported","collapsed","__setIcon","offsetWidth","lang","tabIndex","onClick","content","innerHTML","refresh","autoSize","checkSupported","isSupported","toggleActive","disable","enable","collapse","uncollapse","CustomButton","_b","_c","random","customOnClick","attachViewer","disabled","DescriptionButton","closed","__close","__open","caption","getButton","captionHidden","hasDescription","description","notification","panel","DownloadButton","downloadUrl","link","href","startsWith","downloadName","pop","FullscreenButton","toggleFullscreen","MenuButton","__hideMenu","__showMenu","buttons","button","noMargin","clickHandler","li","buttonId","dataset","getIcon","AbstractMoveButton","handler","dynamicRoll","stopAll","resetIdleTimer","groupId","MoveDownButton","MoveLeftButton","MoveRightButton","MoveUpButton","AbstractZoomButton","zoom","ZoomInButton","ZoomOutButton","ZoomRangeButton","zoomRange","zoomValue","slider","__onSliderUpdate","mediaMinWidth","ready","__moveZoomValue","getZoomLevel","level","AbstractPlugin","AbstractConfigurablePlugin","configParser","setOption","setOptions","ctor","readonly","readonlyOptions","pluginInterop","plugin","DEFAULTS","plugins","loadingImg","loadingTxt","fisheye","minFov","maxFov","defaultZoomLvl","defaultYaw","defaultPitch","sphereCorrection","moveSpeed","zoomSpeed","moveInertia","mousewheel","mousemove","mousewheelCtrlKey","touchmoveTwoFingers","requestHeaders","canvasBackground","defaultTransition","rotation","effect","rendererParameters","alpha","antialias","withCredentials","moveUp","moveDown","moveLeft","moveRight","fullscreen","loading","twoFingers","ctrlZoom","loadError","webglError","keyboard","keyboardActions","READONLY_OPTIONS","CONFIG_PARSERS","MathUtils5","getViewerConfig","NavbarCaption","contentWidth","contentElt","setCaption","html","__refreshButton","AVAILABLE_BUTTONS","AVAILABLE_GROUPS","registerButton","defaultPosition","unshift","pos","idx","btn","Navbar","setButtons","item","buttonCtor","warnNotFound","focusButton","firstElementChild","focus","availableWidth","totalWidth","collapsableButtons","ThreeCache","Cache","maxItems","ttl","items","purgeInterval","setInterval","purge","url","files","lastAccess","sort","Loader","canvas","createElementNS","setAttribute","textColor","color","border","thickness","halfSize","__updateContent","setProgress","MathUtils6","startX","startY","radius","endX","endY","largeArc","setAttributeNS","showUndefined","inner","maxHeight","Notification","contentId","Overlay","dismissible","image","text","preventDefault","PANEL_CLASS_NO_INTERACTION","Panel","mouseX","mouseY","keyHandler","resizer","closeBtn","__onKeyPress","wasVisible","__startResize","__resize","Tooltip","hideTimeout","__onTransitionEnd","assign","__waitImages","rect","move","box","posClass","arrowTop","arrowLeft","__computeTooltipPosition","swapY","swapX","ordered","newPos","propertyName","offsetSide","offsetX","offsetY","images","querySelectorAll","promises","complete","AbstractService","vector3","Vector32","EULER_ZERO","Euler2","DataHelper","fovToZoomLevel","fov","temp","MathUtils7","zoomLevelToFov","vFovToHFov","vFov","radToDeg","atan","tan","aspect","hFovToVFov","hFov","getAnimationProperties","targetPosition","targetZoom","positionProvided","zoomProvided","currentPosition","dYaw","currentZoom","dZoom","getTransitionOptions","transition","equals","renderer","panoramaPose","sphericalCoordsToVector3","applyEuler","vector3ToSphericalCoords","distance2","phi","theta","viewerCoordsToVector3","sphereIntersect","getIntersections","userData","viewerCoordsToSphericalCoords","vector3ToViewerCoords","vectorClone","project","camera","sphericalCoordsToViewerCoords","isPointVisible","dot","cleanPosition","cleanSphereCorrection","pan","tilt","cleanPanoramaPose","cleanPanoramaOptions","_Step","$","IDLE","is","set","CLICK","MOVING","Step","EventsHandler","startMouseX","startMouseY","pinchDist","moveDelta","accumulatorFactor","ctrlKeyDown","dblclickData","dblclickTimeout","longtouchTimeout","twofingersTimeout","ctrlZoomTimeout","resizeObserver","ResizeObserver","moveThreshold","passive","observe","disconnect","__onKeyDown","__onKeyUp","__onFullscreenChange","__applyMoveDelta","__clearMoveDelta","__onMouseWheel","overlay","keyboardEnabled","action","ctrlKey","altKey","shiftKey","metaKey","__stopMove","__doMove","__handleObjectsEvents","__cancelLongTouch","__cancelTwoFingersOverlay","__startMoveZoom","__doMoveZoom","deltaY","delta","startKeyboardControl","stopKeyboardControl","__resetMove","touchData","event","rightclick","__moveThresholdReached","__doClick","boundingRect","viewerX","viewerY","intersections","sphereIntersection","sphericalCoords","dataHelper","objects","o","textureCoords","objectsObservers","viewerPos","emit","evtCtor","intersection","MathUtils8","EPS","rotate","vector2","matrix4","box3","Renderer","frustumNeedsUpdate","setPixelRatio","outputColorSpace","toneMapping","domElement","background","scene","matrixAutoUpdate","raycasterMesh","Mesh4","SphereGeometry3","MeshBasicMaterial3","raycaster","frustum","meshContainer","setAnimationLoop","__renderLoop","cleanScene","__onSizeUpdated","__onZoomUpdated","__onPositionUpdated","setCustomRenderer","factory","customRenderer","setSize","updateProjectionMatrix","lookAt","copy","multiplyScalar","negate","rotateZ","updateMatrix","updateMatrixWorld","continuousUpdateCount","render","setPanoramaPose","cleanCorrection","setSphereCorrection","group","zoomTransition","tempContainer","newMesh","verticalAxis","Vector33","rotateOnWorldAxis","horizontalAxis","cross","getWorldDirection","normalize","setRenderTarget","animation","props","toneMappingExposure","MathUtils9","mapLinear","setFromCamera","intersectObjects","isMesh","isObjectVisible","multiplyMatrices","projectionMatrix","matrixWorldInverse","setFromProjectionMatrix","isVector3","containsPoint","boundingBox","computeBoundingBox","applyMatrix4","matrixWorld","intersectsBox","isObject3D","intersectsObject","addObject","removeObject","disposeMaterial","uniforms","uniform","traverse","BlobLoader","Loader2","onLoad","onProgress","onError","abortSignal","req","Request","headers","Headers","requestHeader","credentials","fetch","signal","response","status","body","getReader","contentLength","total","lengthComputable","stream","ReadableStream","controller","readData","read","done","byteLength","ProgressEvent","enqueue","catch","Response","statusText","ImageLoader","Loader3","onImageLoad","removeEventListeners","onImageError","aborted","onAbortSignal","crossOrigin","TextureLoader","abortCtrl","fileLoader","imageLoader","setWithCredentials","setCrossOrigin","abortLoading","ctrl","abort","cached","Blob","setRequestHeader","newProgress","__getAbortSignal","loadImage","URL","revokeObjectURL","createObjectURL","preloadPanorama","AbortController","ViewerDynamics","updateSpeeds","MathUtils10","ViewerState","Vector34","transitionAnimation","loadingPromise","idleTime","Viewer","__setSize","showError","eventsHandler","setCursor","opts","setPanorama","_d","_e","_f","performance","disableIdleTimer","getPlugin","pluginId","pluginCtor","getSize","needsContinuousUpdate","clientWidth","clientHeight","showLoader","hideError","cleanOptions","cursorOverride","resize","defaultPrevented","animate","stopAnimation","dim","enterFullscreen","createTooltip","observeObjects","unobserveObjects","__defProp$2","EnterMarkerEvent","GotoMarkerDoneEvent","HideMarkersEvent","LeaveMarkerEvent","MarkerVisibilityEvent","MarkersPluginEvent","RenderMarkersListEvent","SelectMarkerEvent","SelectMarkerListEvent","SetMarkersEvent","ShowMarkersEvent","UnselectMarkerEvent","_MarkerVisibilityEvent","marker","_GotoMarkerDoneEvent","_LeaveMarkerEvent","_EnterMarkerEvent","_SelectMarkerEvent","doubleClick","rightClick","_SelectMarkerListEvent","_UnselectMarkerEvent","_HideMarkersEvent","_SetMarkersEvent","markers","_ShowMarkersEvent","_RenderMarkersListEvent","MarkersButton","toggleAllMarkers","pin_list_default","SVG_NS","MARKER_DATA","MARKER_DATA_KEY","utils","ID_PANEL_MARKER","ID_PANEL_MARKERS_LIST","DEFAULT_HOVER_SCALE","amount","MARKERS_LIST_TEMPLATE","definition","getListContent","MarkersListButton","AbstractButton2","events","toggleMarkersList","_position","_quaternion","_scale","CSS3DObject","isCSS3DObject","pointerEvents","userSelect","ownerDocument","defaultView","Element","source","recursive","cloneNode","_matrix","_matrix2","CSS3DRenderer","parameters","_this","_width","_height","_widthHalf","_heightHalf","cache","WeakMap","overflow","viewElement","transformOrigin","cameraElement","epsilon","getCameraCSSMatrix","matrix","elements","getObjectCSSMatrix","hideObject","l","renderObject","cameraCSSMatrix","layers","onBeforeRender","isCSS3DSprite","transpose","rotation2D","multiply","makeRotationZ","decompose","setPosition","cachedObject","transform","objectData","onAfterRender","transformStyle","tx","ty","view","matrixWorldAutoUpdate","isOrthographicCamera","scaleByViewOffset","isPerspectiveCamera","CSS3DContainer","intersectionObserver","IntersectionObserver","entry","viewportIntersection","isIntersecting","root","events2","once","updateSize","threeElement","unobserve","MarkerType","MarkerType3","getMarkerType","allowNone","found","Marker","anchor","staticTooltip","position2D","positions3D","PSVError2","video","hideTooltip","is3d","isNormal","isPoly","isSvg","isCss3d","newType","utils2","trigger","zIndex","rot","listContent","showTooltip","forceUpdate","AbstractDomMarker","afterCreateElement","utils3","AbstractStandardMarker","viewerPosition","hoveringMarker","__updateSize","translate","applyScale","utils4","PSVError3","defaultHoverScale","needsUpdateSize","makeTransparent","offsetHeight","CONSTANTS","halfFov","arc","ChromaKeyMaterial","offset","repeat","chromaKey","keying","r","g","similarity","smoothness","params","spill","vertexShader","fragmentShader","greatArcIntermediaryPoint","f","utils5","getPolygonCoherentPoints","points","workPoints","k","getPolygonCenter","polygon","intermediary","C","N","V","X","Y","A","getGreatCircleIntersection","P1","P2","crossVectors","H","addVectors","applyAxisAngle","CONSTANTS2","Marker3D","threeMesh","pause","utils6","PSVError4","v3","fromBufferAttribute","localToWorld","centroid","v","setX","setY","setZ","__setTextureWrap","videoLayer","muted","autoplay","loop","playsInline","preload","MediaStream","srcObject","createVideo","videoWidth","videoHeight","play","imageLayer","Texture2","renderOrder","imageSize","layerRatio","imageRatio","hMargin","vMargin","MarkerCSS3D","elementLayer","updateMarker","viewerSize","utils7","PSVError5","childNodes","n","MarkerNormal","PSVError6","backgroundImage","MarkerPolygon","isPixels","isPolygon","isPolyline","coords","__getAllPolyPositions","innerPos","innerPoints","svgStyle","utils8","fill","actualPoly","PSVError7","coord","sphericalCoord","polyline","lengths","consumed","getPolylineCenter","__getPolyPositions","nbVectors","toBeComputed","neighbour","invisible","pair","MarkerSvg","svgElement","svgType","square","cx","circle","cy","ellipse","rx","ry","utils9","utils10","clickEventOnMarker","gotoMarkerSpeed","MarkersPlugin","allVisible","showAllTooltips","currentMarker","needsReRender","lastClientX","lastClientY","svgContainer","css3DContainer","events3","clearMarkers","setMarkers","renderMarkers","__onClick","__onEnterMarker","__onLeaveMarker","__onHoverMarker","__getTargetMarker","hideAllMarkers","showAllMarkers","toggleAllTooltips","hideAllTooltips","getNbMarkers","getMarkers","addMarker","PSVError8","__afterChangeMarkers","getMarker","markerId","getCurrentMarker","removeMarker","removeMarkers","markerIds","gotoMarker","zoomLvl","hideMarker","toggleMarker","showMarker","showMarkerTooltip","hideMarkerTooltip","showMarkerPanel","hideMarkerPanel","hideMarkersList","showMarkersList","hideList","visibilityChanged","closest","Node","m","dblclick","threeMarker","stopImmediatePropagation","__refreshUi","__checkObjectsObserver","nbMarkers","__defProp$1","SelectHotspot","ViewChanged","_SelectHotspot","hotspotId","_ViewChanged","HOTSPOT_MARKER_ID","projectPoint","pt","canvasShadow","context","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","drawImageCentered","w","h","drawImageHighDpi","INVERT_POSITIONS","AbstractMapButton","applyConfig","mapPosition","getButtonPosition","MapCloseButton","toggleCollapse","MapCompassButton","ROTATION","MapMaximizeButton","toggleMaximized","maximized","MapResetButton","reset","MapZoomToolbar","AbstractComponent2","zoomIndicator","zoomButtons","animateZoom","setText","innerText","exp","MapComponent","AbstractComponent3","galleryWasVisible","imgScale","defaultZoom","pinchAngle","hotspotPos","hotspotTooltip","forceRender","renderLoop","canvasContainer","__setCursor","resetButton","maximize","maximizeButton","closeButton","north","compassButton","zoomToolbar","visibleOnLoad","gallery","__move","__handleHotspots","SYSTEM2","static","mouse","__clickHotspot","recenter","__onToggleGallery","shape","overlayImage","__resetHotspot","reload","imageUrl","__loadImage","dispatchMinimizeEvent","setZoom","minZoom","maxZoom","setActiveHotspot","mapImage","yawAndRotation","canvasPos","canvasW","canvasH","canvasVirtualCenterX","canvasVirtualCenterY","clearRect","mapW","mapH","save","restore","hotspots","hotspot","isHover","defaultStyle","_g","_h","_i","_j","_k","_l","_m","_n","_o","_p","_q","_r","_s","_t","hoverImage","hoverSize","hoverColor","borderColor","hoverBorderColor","borderSize","hoverBorderSize","getStyle","spotStyle","spotPos","beginPath","strokeStyle","lineWidth","stroke","pinImage","coneColor","coneSize","pinPos","pinSize","a1","a2","grad","createRadialGradient","addColorStop","rgb","moveTo","lineTo","unprojectPoint","__findHotspot","minimizeOnHotspotClick","isInit","exec","src64","btoa","marginBottom","log","MapPlugin","component","setHotspots","__markersToHotspots","open","minimize","setImage","setCenter","ids","clearHotspots","AutorotateEvent","_AutorotateEvent","autorotateEnabled","AutorotateButton","isEnabled","disableOnIdle","autostartDelay","autostartOnIdle","autorotateSpeed","autorotatePitch","autorotateZoomLvl","keypoints","startFromClosest","serializePt","AutorotatePlugin","initialStart","curve","startStep","endStep","startTime","stepDuration","remainingPause","lastTime","setKeypoints","__beforeRender","keypoint","__shiftKeypoints","__animate","__hideTooltip","__reset","__nextStep","__nextFrame","__findMinIndex","__incrementIdx","__showTooltip","__nextPoint","workVectors","getPoints","NUM_STEPS","shift","ellapsed","mapper","Number","MAX_VALUE"],"mappings":"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","x_google_ignoreList":[0,1,2,3]}